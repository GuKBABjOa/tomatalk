(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ga(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $e={},pr=[],Ut=()=>{},th=()=>!1,Es=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ba=e=>e.startsWith("onUpdate:"),Je=Object.assign,ya=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},nh=Object.prototype.hasOwnProperty,Me=(e,t)=>nh.call(e,t),Ce=Array.isArray,hr=e=>_i(e)==="[object Map]",_s=e=>_i(e)==="[object Set]",ic=e=>_i(e)==="[object Date]",Re=e=>typeof e=="function",qe=e=>typeof e=="string",Ht=e=>typeof e=="symbol",Be=e=>e!==null&&typeof e=="object",td=e=>(Be(e)||Re(e))&&Re(e.then)&&Re(e.catch),nd=Object.prototype.toString,_i=e=>nd.call(e),rh=e=>_i(e).slice(8,-1),rd=e=>_i(e)==="[object Object]",Ea=e=>qe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ri=ga(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ss=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ih=/-(\w)/g,Ot=Ss(e=>e.replace(ih,(t,n)=>n?n.toUpperCase():"")),sh=/\B([A-Z])/g,mn=Ss(e=>e.replace(sh,"-$1").toLowerCase()),ws=Ss(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ys=Ss(e=>e?`on${ws(e)}`:""),pn=(e,t)=>!Object.is(e,t),Qi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},id=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ss=e=>{const t=parseFloat(e);return isNaN(t)?e:t},oh=e=>{const t=qe(e)?Number(e):NaN;return isNaN(t)?e:t};let sc;const Cs=()=>sc||(sc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function We(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=qe(r)?uh(r):We(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(qe(e)||Be(e))return e}const ah=/;(?![^(]*\))/g,ch=/:([^]+)/,lh=/\/\*[^]*?\*\//g;function uh(e){const t={};return e.replace(lh,"").split(ah).forEach(n=>{if(n){const r=n.split(ch);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ge(e){let t="";if(qe(e))t=e;else if(Ce(e))for(let n=0;n<e.length;n++){const r=ge(e[n]);r&&(t+=r+" ")}else if(Be(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const dh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fh=ga(dh);function sd(e){return!!e||e===""}function ph(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Is(e[r],t[r]);return n}function Is(e,t){if(e===t)return!0;let n=ic(e),r=ic(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ht(e),r=Ht(t),n||r)return e===t;if(n=Ce(e),r=Ce(t),n||r)return n&&r?ph(e,t):!1;if(n=Be(e),r=Be(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!Is(e[o],t[o]))return!1}}return String(e)===String(t)}function hh(e,t){return e.findIndex(n=>Is(n,t))}const od=e=>!!(e&&e.__v_isRef===!0),q=e=>qe(e)?e:e==null?"":Ce(e)||Be(e)&&(e.toString===nd||!Re(e.toString))?od(e)?q(e.value):JSON.stringify(e,ad,2):String(e),ad=(e,t)=>od(t)?ad(e,t.value):hr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[Zs(r,s)+" =>"]=i,n),{})}:_s(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Zs(n))}:Ht(t)?Zs(t):Be(t)&&!Ce(t)&&!rd(t)?String(t):t,Zs=(e,t="")=>{var n;return Ht(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ct;class cd{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ct,!t&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ct;try{return ct=this,t()}finally{ct=n}}}on(){ct=this}off(){ct=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function ld(e){return new cd(e)}function ud(){return ct}function vh(e,t=!1){ct&&ct.cleanups.push(e)}let Fe;const eo=new WeakSet;class dd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ct&&ct.active&&ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,eo.has(this)&&(eo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oc(this),hd(this);const t=Fe,n=Nt;Fe=this,Nt=!0;try{return this.fn()}finally{vd(this),Fe=t,Nt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)wa(t);this.deps=this.depsTail=void 0,oc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?eo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Jo(this)&&this.run()}get dirty(){return Jo(this)}}let fd=0,ii,si;function pd(e,t=!1){if(e.flags|=8,t){e.next=si,si=e;return}e.next=ii,ii=e}function _a(){fd++}function Sa(){if(--fd>0)return;if(si){let t=si;for(si=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ii;){let t=ii;for(ii=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function hd(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function vd(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),wa(r),mh(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Jo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(md(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function md(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===fi))return;e.globalVersion=fi;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Jo(e)){e.flags&=-3;return}const n=Fe,r=Nt;Fe=e,Nt=!0;try{hd(e);const i=e.fn(e._value);(t.version===0||pn(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Fe=n,Nt=r,vd(e),e.flags&=-3}}function wa(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)wa(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function mh(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Nt=!0;const gd=[];function gn(){gd.push(Nt),Nt=!1}function bn(){const e=gd.pop();Nt=e===void 0?!0:e}function oc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Fe;Fe=void 0;try{t()}finally{Fe=n}}}let fi=0;class gh{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ca{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Fe||!Nt||Fe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Fe)n=this.activeLink=new gh(Fe,this),Fe.deps?(n.prevDep=Fe.depsTail,Fe.depsTail.nextDep=n,Fe.depsTail=n):Fe.deps=Fe.depsTail=n,bd(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Fe.depsTail,n.nextDep=void 0,Fe.depsTail.nextDep=n,Fe.depsTail=n,Fe.deps===n&&(Fe.deps=r)}return n}trigger(t){this.version++,fi++,this.notify(t)}notify(t){_a();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Sa()}}}function bd(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)bd(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const os=new WeakMap,qn=Symbol(""),Qo=Symbol(""),pi=Symbol("");function rt(e,t,n){if(Nt&&Fe){let r=os.get(e);r||os.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Ca),i.map=r,i.key=n),i.track()}}function Xt(e,t,n,r,i,s){const o=os.get(e);if(!o){fi++;return}const a=c=>{c&&c.trigger()};if(_a(),t==="clear")o.forEach(a);else{const c=Ce(e),l=c&&Ea(n);if(c&&n==="length"){const u=Number(r);o.forEach((f,g)=>{(g==="length"||g===pi||!Ht(g)&&g>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(pi)),t){case"add":c?l&&a(o.get("length")):(a(o.get(qn)),hr(e)&&a(o.get(Qo)));break;case"delete":c||(a(o.get(qn)),hr(e)&&a(o.get(Qo)));break;case"set":hr(e)&&a(o.get(qn));break}}Sa()}function bh(e,t){const n=os.get(e);return n&&n.get(t)}function ar(e){const t=xe(e);return t===e?t:(rt(t,"iterate",pi),It(e)?t:t.map(it))}function Rs(e){return rt(e=xe(e),"iterate",pi),e}const yh={__proto__:null,[Symbol.iterator](){return to(this,Symbol.iterator,it)},concat(...e){return ar(this).concat(...e.map(t=>Ce(t)?ar(t):t))},entries(){return to(this,"entries",e=>(e[1]=it(e[1]),e))},every(e,t){return qt(this,"every",e,t,void 0,arguments)},filter(e,t){return qt(this,"filter",e,t,n=>n.map(it),arguments)},find(e,t){return qt(this,"find",e,t,it,arguments)},findIndex(e,t){return qt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qt(this,"findLast",e,t,it,arguments)},findLastIndex(e,t){return qt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qt(this,"forEach",e,t,void 0,arguments)},includes(...e){return no(this,"includes",e)},indexOf(...e){return no(this,"indexOf",e)},join(e){return ar(this).join(e)},lastIndexOf(...e){return no(this,"lastIndexOf",e)},map(e,t){return qt(this,"map",e,t,void 0,arguments)},pop(){return Or(this,"pop")},push(...e){return Or(this,"push",e)},reduce(e,...t){return ac(this,"reduce",e,t)},reduceRight(e,...t){return ac(this,"reduceRight",e,t)},shift(){return Or(this,"shift")},some(e,t){return qt(this,"some",e,t,void 0,arguments)},splice(...e){return Or(this,"splice",e)},toReversed(){return ar(this).toReversed()},toSorted(e){return ar(this).toSorted(e)},toSpliced(...e){return ar(this).toSpliced(...e)},unshift(...e){return Or(this,"unshift",e)},values(){return to(this,"values",it)}};function to(e,t,n){const r=Rs(e),i=r[t]();return r!==e&&!It(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const Eh=Array.prototype;function qt(e,t,n,r,i,s){const o=Rs(e),a=o!==e&&!It(e),c=o[t];if(c!==Eh[t]){const f=c.apply(e,s);return a?it(f):f}let l=n;o!==e&&(a?l=function(f,g){return n.call(this,it(f),g,e)}:n.length>2&&(l=function(f,g){return n.call(this,f,g,e)}));const u=c.call(o,l,r);return a&&i?i(u):u}function ac(e,t,n,r){const i=Rs(e);let s=n;return i!==e&&(It(e)?n.length>3&&(s=function(o,a,c){return n.call(this,o,a,c,e)}):s=function(o,a,c){return n.call(this,o,it(a),c,e)}),i[t](s,...r)}function no(e,t,n){const r=xe(e);rt(r,"iterate",pi);const i=r[t](...n);return(i===-1||i===!1)&&Oa(n[0])?(n[0]=xe(n[0]),r[t](...n)):i}function Or(e,t,n=[]){gn(),_a();const r=xe(e)[t].apply(e,n);return Sa(),bn(),r}const _h=ga("__proto__,__v_isRef,__isVue"),yd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ht));function Sh(e){Ht(e)||(e=String(e));const t=xe(this);return rt(t,"has",e),t.hasOwnProperty(e)}class Ed{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Ah:Cd:s?wd:Sd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Ce(t);if(!i){let c;if(o&&(c=yh[n]))return c;if(n==="hasOwnProperty")return Sh}const a=Reflect.get(t,n,ze(t)?t:r);return(Ht(n)?yd.has(n):_h(n))||(i||rt(t,"get",n),s)?a:ze(a)?o&&Ea(n)?a:a.value:Be(a)?i?Rd(a):Si(a):a}}class _d extends Ed{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const c=Kn(s);if(!It(r)&&!Kn(r)&&(s=xe(s),r=xe(r)),!Ce(t)&&ze(s)&&!ze(r))return c?!1:(s.value=r,!0)}const o=Ce(t)&&Ea(n)?Number(n)<t.length:Me(t,n),a=Reflect.set(t,n,r,ze(t)?t:i);return t===xe(i)&&(o?pn(r,s)&&Xt(t,"set",n,r):Xt(t,"add",n,r)),a}deleteProperty(t,n){const r=Me(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Xt(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Ht(n)||!yd.has(n))&&rt(t,"has",n),r}ownKeys(t){return rt(t,"iterate",Ce(t)?"length":qn),Reflect.ownKeys(t)}}class wh extends Ed{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ch=new _d,Ih=new wh,Rh=new _d(!0);const Xo=e=>e,Mi=e=>Reflect.getPrototypeOf(e);function Oh(e,t,n){return function(...r){const i=this.__v_raw,s=xe(i),o=hr(s),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=i[e](...r),u=n?Xo:t?Yo:it;return!t&&rt(s,"iterate",c?Qo:qn),{next(){const{value:f,done:g}=l.next();return g?{value:f,done:g}:{value:a?[u(f[0]),u(f[1])]:u(f),done:g}},[Symbol.iterator](){return this}}}}function Di(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kh(e,t){const n={get(i){const s=this.__v_raw,o=xe(s),a=xe(i);e||(pn(i,a)&&rt(o,"get",i),rt(o,"get",a));const{has:c}=Mi(o),l=t?Xo:e?Yo:it;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&rt(xe(i),"iterate",qn),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=xe(s),a=xe(i);return e||(pn(i,a)&&rt(o,"has",i),rt(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=xe(a),l=t?Xo:e?Yo:it;return!e&&rt(c,"iterate",qn),a.forEach((u,f)=>i.call(s,l(u),l(f),o))}};return Je(n,e?{add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear")}:{add(i){!t&&!It(i)&&!Kn(i)&&(i=xe(i));const s=xe(this);return Mi(s).has.call(s,i)||(s.add(i),Xt(s,"add",i,i)),this},set(i,s){!t&&!It(s)&&!Kn(s)&&(s=xe(s));const o=xe(this),{has:a,get:c}=Mi(o);let l=a.call(o,i);l||(i=xe(i),l=a.call(o,i));const u=c.call(o,i);return o.set(i,s),l?pn(s,u)&&Xt(o,"set",i,s):Xt(o,"add",i,s),this},delete(i){const s=xe(this),{has:o,get:a}=Mi(s);let c=o.call(s,i);c||(i=xe(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&Xt(s,"delete",i,void 0),l},clear(){const i=xe(this),s=i.size!==0,o=i.clear();return s&&Xt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Oh(i,e,t)}),n}function Ia(e,t){const n=kh(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Me(n,i)&&i in r?n:r,i,s)}const Th={get:Ia(!1,!1)},xh={get:Ia(!1,!0)},Ph={get:Ia(!0,!1)};const Sd=new WeakMap,wd=new WeakMap,Cd=new WeakMap,Ah=new WeakMap;function Nh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mh(e){return e.__v_skip||!Object.isExtensible(e)?0:Nh(rh(e))}function Si(e){return Kn(e)?e:Ra(e,!1,Ch,Th,Sd)}function Id(e){return Ra(e,!1,Rh,xh,wd)}function Rd(e){return Ra(e,!0,Ih,Ph,Cd)}function Ra(e,t,n,r,i){if(!Be(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=Mh(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return i.set(e,a),a}function hn(e){return Kn(e)?hn(e.__v_raw):!!(e&&e.__v_isReactive)}function Kn(e){return!!(e&&e.__v_isReadonly)}function It(e){return!!(e&&e.__v_isShallow)}function Oa(e){return e?!!e.__v_raw:!1}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function ka(e){return!Me(e,"__v_skip")&&Object.isExtensible(e)&&id(e,"__v_skip",!0),e}const it=e=>Be(e)?Si(e):e,Yo=e=>Be(e)?Rd(e):e;function ze(e){return e?e.__v_isRef===!0:!1}function K(e){return Od(e,!1)}function Dh(e){return Od(e,!0)}function Od(e,t){return ze(e)?e:new Lh(e,t)}class Lh{constructor(t,n){this.dep=new Ca,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:xe(t),this._value=n?t:it(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||It(t)||Kn(t);t=r?t:xe(t),pn(t,n)&&(this._rawValue=t,this._value=r?t:it(t),this.dep.trigger())}}function He(e){return ze(e)?e.value:e}const $h={get:(e,t,n)=>t==="__v_raw"?e:He(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return ze(i)&&!ze(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function kd(e){return hn(e)?e:new Proxy(e,$h)}function Vh(e){const t=Ce(e)?new Array(e.length):{};for(const n in e)t[n]=jh(e,n);return t}class Bh{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return bh(xe(this._object),this._key)}}function jh(e,t,n){const r=e[t];return ze(r)?r:new Bh(e,t,n)}class Fh{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ca(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Fe!==this)return pd(this,!0),!0}get value(){const t=this.dep.track();return md(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Uh(e,t,n=!1){let r,i;return Re(e)?r=e:(r=e.get,i=e.set),new Fh(r,i,n)}const Li={},as=new WeakMap;let Fn;function Hh(e,t=!1,n=Fn){if(n){let r=as.get(n);r||as.set(n,r=[]),r.push(e)}}function Wh(e,t,n=$e){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=n,l=w=>i?w:It(w)||i===!1||i===0?Yt(w,1):Yt(w);let u,f,g,p,_=!1,b=!1;if(ze(e)?(f=()=>e.value,_=It(e)):hn(e)?(f=()=>l(e),_=!0):Ce(e)?(b=!0,_=e.some(w=>hn(w)||It(w)),f=()=>e.map(w=>{if(ze(w))return w.value;if(hn(w))return l(w);if(Re(w))return c?c(w,2):w()})):Re(e)?t?f=c?()=>c(e,2):e:f=()=>{if(g){gn();try{g()}finally{bn()}}const w=Fn;Fn=u;try{return c?c(e,3,[p]):e(p)}finally{Fn=w}}:f=Ut,t&&i){const w=f,h=i===!0?1/0:i;f=()=>Yt(w(),h)}const v=ud(),m=()=>{u.stop(),v&&v.active&&ya(v.effects,u)};if(s&&t){const w=t;t=(...h)=>{w(...h),m()}}let C=b?new Array(e.length).fill(Li):Li;const k=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const h=u.run();if(i||_||(b?h.some((S,x)=>pn(S,C[x])):pn(h,C))){g&&g();const S=Fn;Fn=u;try{const x=[h,C===Li?void 0:b&&C[0]===Li?[]:C,p];c?c(t,3,x):t(...x),C=h}finally{Fn=S}}}else u.run()};return a&&a(k),u=new dd(f),u.scheduler=o?()=>o(k,!1):k,p=w=>Hh(w,!1,u),g=u.onStop=()=>{const w=as.get(u);if(w){if(c)c(w,4);else for(const h of w)h();as.delete(u)}},t?r?k(!0):C=u.run():o?o(k.bind(null,!0),!0):u.run(),m.pause=u.pause.bind(u),m.resume=u.resume.bind(u),m.stop=m,m}function Yt(e,t=1/0,n){if(t<=0||!Be(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ze(e))Yt(e.value,t,n);else if(Ce(e))for(let r=0;r<e.length;r++)Yt(e[r],t,n);else if(_s(e)||hr(e))e.forEach(r=>{Yt(r,t,n)});else if(rd(e)){for(const r in e)Yt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Yt(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wi(e,t,n,r){try{return r?e(...r):e()}catch(i){Os(i,t,n)}}function Mt(e,t,n,r){if(Re(e)){const i=wi(e,t,n,r);return i&&td(i)&&i.catch(s=>{Os(s,t,n)}),i}if(Ce(e)){const i=[];for(let s=0;s<e.length;s++)i.push(Mt(e[s],t,n,r));return i}}function Os(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||$e;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,l)===!1)return}a=a.parent}if(s){gn(),wi(s,null,10,[e,c,l]),bn();return}}qh(e,n,i,r,o)}function qh(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const lt=[];let jt=-1;const vr=[];let cn=null,dr=0;const Td=Promise.resolve();let cs=null;function ks(e){const t=cs||Td;return e?t.then(this?e.bind(this):e):t}function Gh(e){let t=jt+1,n=lt.length;for(;t<n;){const r=t+n>>>1,i=lt[r],s=hi(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function Ta(e){if(!(e.flags&1)){const t=hi(e),n=lt[lt.length-1];!n||!(e.flags&2)&&t>=hi(n)?lt.push(e):lt.splice(Gh(t),0,e),e.flags|=1,xd()}}function xd(){cs||(cs=Td.then(Ad))}function zh(e){Ce(e)?vr.push(...e):cn&&e.id===-1?cn.splice(dr+1,0,e):e.flags&1||(vr.push(e),e.flags|=1),xd()}function cc(e,t,n=jt+1){for(;n<lt.length;n++){const r=lt[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;lt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Pd(e){if(vr.length){const t=[...new Set(vr)].sort((n,r)=>hi(n)-hi(r));if(vr.length=0,cn){cn.push(...t);return}for(cn=t,dr=0;dr<cn.length;dr++){const n=cn[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}cn=null,dr=0}}const hi=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ad(e){try{for(jt=0;jt<lt.length;jt++){const t=lt[jt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),wi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;jt<lt.length;jt++){const t=lt[jt];t&&(t.flags&=-2)}jt=-1,lt.length=0,Pd(),cs=null,(lt.length||vr.length)&&Ad()}}let dt=null,Nd=null;function ls(e){const t=dt;return dt=e,Nd=e&&e.type.__scopeId||null,t}function Pt(e,t=dt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&yc(-1);const s=ls(t);let o;try{o=e(...i)}finally{ls(s),r._d&&yc(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Xe(e,t){if(dt===null)return e;const n=Ns(dt),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,c=$e]=t[i];s&&(Re(s)&&(s={mounted:s,updated:s}),s.deep&&Yt(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function _n(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(gn(),Mt(c,n,8,[e.el,a,e,t]),bn())}}const Kh=Symbol("_vte"),Md=e=>e.__isTeleport,ln=Symbol("_leaveCb"),$i=Symbol("_enterCb");function Dd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ze(()=>{e.isMounted=!0}),Ci(()=>{e.isUnmounting=!0}),e}const wt=[Function,Array],Ld={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wt,onEnter:wt,onAfterEnter:wt,onEnterCancelled:wt,onBeforeLeave:wt,onLeave:wt,onAfterLeave:wt,onLeaveCancelled:wt,onBeforeAppear:wt,onAppear:wt,onAfterAppear:wt,onAppearCancelled:wt},$d=e=>{const t=e.subTree;return t.component?$d(t.component):t},Jh={name:"BaseTransition",props:Ld,setup(e,{slots:t}){const n=pf(),r=Dd();return()=>{const i=t.default&&xa(t.default(),!0);if(!i||!i.length)return;const s=Vd(i),o=xe(e),{mode:a}=o;if(r.isLeaving)return ro(s);const c=lc(s);if(!c)return ro(s);let l=vi(c,o,r,n,f=>l=f);c.type!==pt&&Jn(c,l);let u=n.subTree&&lc(n.subTree);if(u&&u.type!==pt&&!Un(c,u)&&$d(n).type!==pt){let f=vi(u,o,r,n);if(Jn(u,f),a==="out-in"&&c.type!==pt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},ro(s);a==="in-out"&&c.type!==pt?f.delayLeave=(g,p,_)=>{const b=Bd(r,u);b[String(u.key)]=u,g[ln]=()=>{p(),g[ln]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{_(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function Vd(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==pt){t=n;break}}return t}const Qh=Jh;function Bd(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function vi(e,t,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:g,onLeave:p,onAfterLeave:_,onLeaveCancelled:b,onBeforeAppear:v,onAppear:m,onAfterAppear:C,onAppearCancelled:k}=t,w=String(e.key),h=Bd(n,e),S=(I,A)=>{I&&Mt(I,r,9,A)},x=(I,A)=>{const M=A[1];S(I,A),Ce(I)?I.every(N=>N.length<=1)&&M():I.length<=1&&M()},y={mode:o,persisted:a,beforeEnter(I){let A=c;if(!n.isMounted)if(s)A=v||c;else return;I[ln]&&I[ln](!0);const M=h[w];M&&Un(e,M)&&M.el[ln]&&M.el[ln](),S(A,[I])},enter(I){let A=l,M=u,N=f;if(!n.isMounted)if(s)A=m||l,M=C||u,N=k||f;else return;let E=!1;const T=I[$i]=$=>{E||(E=!0,$?S(N,[I]):S(M,[I]),y.delayedLeave&&y.delayedLeave(),I[$i]=void 0)};A?x(A,[I,T]):T()},leave(I,A){const M=String(e.key);if(I[$i]&&I[$i](!0),n.isUnmounting)return A();S(g,[I]);let N=!1;const E=I[ln]=T=>{N||(N=!0,A(),T?S(b,[I]):S(_,[I]),I[ln]=void 0,h[M]===e&&delete h[M])};h[M]=e,p?x(p,[I,E]):E()},clone(I){const A=vi(I,t,n,r,i);return i&&i(A),A}};return y}function ro(e){if(Ts(e))return e=vn(e),e.children=null,e}function lc(e){if(!Ts(e))return Md(e.type)&&e.children?Vd(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Re(n.default))return n.default()}}function Jn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Jn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function xa(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===he?(o.patchFlag&128&&i++,r=r.concat(xa(o.children,t,a))):(t||o.type!==pt)&&r.push(a!=null?vn(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ae(e,t){return Re(e)?Je({name:e.name},t,{setup:e}):e}function jd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function us(e,t,n,r,i=!1){if(Ce(e)){e.forEach((_,b)=>us(_,t&&(Ce(t)?t[b]:t),n,r,i));return}if(oi(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&us(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?Ns(r.component):r.el,o=i?null:s,{i:a,r:c}=e,l=t&&t.r,u=a.refs===$e?a.refs={}:a.refs,f=a.setupState,g=xe(f),p=f===$e?()=>!1:_=>Me(g,_);if(l!=null&&l!==c&&(qe(l)?(u[l]=null,p(l)&&(f[l]=null)):ze(l)&&(l.value=null)),Re(c))wi(c,a,12,[o,u]);else{const _=qe(c),b=ze(c);if(_||b){const v=()=>{if(e.f){const m=_?p(c)?f[c]:u[c]:c.value;i?Ce(m)&&ya(m,s):Ce(m)?m.includes(s)||m.push(s):_?(u[c]=[s],p(c)&&(f[c]=u[c])):(c.value=[s],e.k&&(u[e.k]=c.value))}else _?(u[c]=o,p(c)&&(f[c]=o)):b&&(c.value=o,e.k&&(u[e.k]=o))};o?(v.id=-1,mt(v,n)):v()}}}Cs().requestIdleCallback;Cs().cancelIdleCallback;const oi=e=>!!e.type.__asyncLoader,Ts=e=>e.type.__isKeepAlive;function Xh(e,t){Fd(e,"a",t)}function Yh(e,t){Fd(e,"da",t)}function Fd(e,t,n=Ye){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(xs(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Ts(i.parent.vnode)&&Zh(r,t,n,i),i=i.parent}}function Zh(e,t,n,r){const i=xs(t,e,r,!0);Xn(()=>{ya(r[t],i)},n)}function xs(e,t,n=Ye,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{gn();const a=Ii(n),c=Mt(t,n,e,o);return a(),bn(),c});return r?i.unshift(s):i.push(s),s}}const tn=e=>(t,n=Ye)=>{(!gi||e==="sp")&&xs(e,(...r)=>t(...r),n)},ev=tn("bm"),Ze=tn("m"),tv=tn("bu"),Ud=tn("u"),Ci=tn("bum"),Xn=tn("um"),nv=tn("sp"),rv=tn("rtg"),iv=tn("rtc");function sv(e,t=Ye){xs("ec",e,t)}const Hd="components";function At(e,t){return qd(Hd,e,!0,t)||e}const Wd=Symbol.for("v-ndc");function ov(e){return qe(e)?qd(Hd,e,!1)||e:e||Wd}function qd(e,t,n=!0,r=!1){const i=dt||Ye;if(i){const s=i.type;{const a=zv(s,!1);if(a&&(a===t||a===Ot(t)||a===ws(Ot(t))))return s}const o=uc(i[e]||s[e],t)||uc(i.appContext[e],t);return!o&&r?s:o}}function uc(e,t){return e&&(e[t]||e[Ot(t)]||e[ws(Ot(t))])}function _e(e,t,n,r){let i;const s=n,o=Ce(e);if(o||qe(e)){const a=o&&hn(e);let c=!1;a&&(c=!It(e),e=Rs(e)),i=new Array(e.length);for(let l=0,u=e.length;l<u;l++)i[l]=t(c?it(e[l]):e[l],l,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s)}else if(Be(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=t(e[u],u,c,s)}}else i=[];return i}const Zo=e=>e?hf(e)?Ns(e):Zo(e.parent):null,ai=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Zo(e.parent),$root:e=>Zo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zd(e),$forceUpdate:e=>e.f||(e.f=()=>{Ta(e.update)}),$nextTick:e=>e.n||(e.n=ks.bind(e.proxy)),$watch:e=>kv.bind(e)}),io=(e,t)=>e!==$e&&!e.__isScriptSetup&&Me(e,t),av={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(io(r,t))return o[t]=1,r[t];if(i!==$e&&Me(i,t))return o[t]=2,i[t];if((l=e.propsOptions[0])&&Me(l,t))return o[t]=3,s[t];if(n!==$e&&Me(n,t))return o[t]=4,n[t];ea&&(o[t]=0)}}const u=ai[t];let f,g;if(u)return t==="$attrs"&&rt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==$e&&Me(n,t))return o[t]=4,n[t];if(g=c.config.globalProperties,Me(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return io(i,t)?(i[t]=n,!0):r!==$e&&Me(r,t)?(r[t]=n,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||e!==$e&&Me(e,o)||io(t,o)||(a=s[0])&&Me(a,o)||Me(r,o)||Me(ai,o)||Me(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function dc(e){return Ce(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ea=!0;function cv(e){const t=zd(e),n=e.proxy,r=e.ctx;ea=!1,t.beforeCreate&&fc(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:g,beforeUpdate:p,updated:_,activated:b,deactivated:v,beforeDestroy:m,beforeUnmount:C,destroyed:k,unmounted:w,render:h,renderTracked:S,renderTriggered:x,errorCaptured:y,serverPrefetch:I,expose:A,inheritAttrs:M,components:N,directives:E,filters:T}=t;if(l&&lv(l,r,null),o)for(const R in o){const O=o[R];Re(O)&&(r[R]=O.bind(n))}if(i){const R=i.call(n,n);Be(R)&&(e.data=Si(R))}if(ea=!0,s)for(const R in s){const O=s[R],B=Re(O)?O.bind(n,n):Re(O.get)?O.get.bind(n,n):Ut,j=!Re(O)&&Re(O.set)?O.set.bind(n):Ut,G=Ie({get:B,set:j});Object.defineProperty(r,R,{enumerable:!0,configurable:!0,get:()=>G.value,set:J=>G.value=J})}if(a)for(const R in a)Gd(a[R],r,n,R);if(c){const R=Re(c)?c.call(n):c;Reflect.ownKeys(R).forEach(O=>{Xi(O,R[O])})}u&&fc(u,e,"c");function P(R,O){Ce(O)?O.forEach(B=>R(B.bind(n))):O&&R(O.bind(n))}if(P(ev,f),P(Ze,g),P(tv,p),P(Ud,_),P(Xh,b),P(Yh,v),P(sv,y),P(iv,S),P(rv,x),P(Ci,C),P(Xn,w),P(nv,I),Ce(A))if(A.length){const R=e.exposed||(e.exposed={});A.forEach(O=>{Object.defineProperty(R,O,{get:()=>n[O],set:B=>n[O]=B})})}else e.exposed||(e.exposed={});h&&e.render===Ut&&(e.render=h),M!=null&&(e.inheritAttrs=M),N&&(e.components=N),E&&(e.directives=E),I&&jd(e)}function lv(e,t,n=Ut){Ce(e)&&(e=ta(e));for(const r in e){const i=e[r];let s;Be(i)?"default"in i?s=Rt(i.from||r,i.default,!0):s=Rt(i.from||r):s=Rt(i),ze(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function fc(e,t,n){Mt(Ce(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Gd(e,t,n,r){let i=r.includes(".")?cf(n,r):()=>n[r];if(qe(e)){const s=t[e];Re(s)&&gt(i,s)}else if(Re(e))gt(i,e.bind(n));else if(Be(e))if(Ce(e))e.forEach(s=>Gd(s,t,n,r));else{const s=Re(e.handler)?e.handler.bind(n):t[e.handler];Re(s)&&gt(i,s,e)}}function zd(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(l=>ds(c,l,o,!0)),ds(c,t,o)),Be(t)&&s.set(t,c),c}function ds(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&ds(e,s,n,!0),i&&i.forEach(o=>ds(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=uv[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const uv={data:pc,props:hc,emits:hc,methods:Zr,computed:Zr,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:Zr,directives:Zr,watch:fv,provide:pc,inject:dv};function pc(e,t){return t?e?function(){return Je(Re(e)?e.call(this,this):e,Re(t)?t.call(this,this):t)}:t:e}function dv(e,t){return Zr(ta(e),ta(t))}function ta(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function Zr(e,t){return e?Je(Object.create(null),e,t):t}function hc(e,t){return e?Ce(e)&&Ce(t)?[...new Set([...e,...t])]:Je(Object.create(null),dc(e),dc(t??{})):t}function fv(e,t){if(!e)return t;if(!t)return e;const n=Je(Object.create(null),e);for(const r in t)n[r]=at(e[r],t[r]);return n}function Kd(){return{app:null,config:{isNativeTag:th,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pv=0;function hv(e,t){return function(r,i=null){Re(r)||(r=Je({},r)),i!=null&&!Be(i)&&(i=null);const s=Kd(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:pv++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Jv,get config(){return s.config},set config(u){},use(u,...f){return o.has(u)||(u&&Re(u.install)?(o.add(u),u.install(l,...f)):Re(u)&&(o.add(u),u(l,...f))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,f){return f?(s.components[u]=f,l):s.components[u]},directive(u,f){return f?(s.directives[u]=f,l):s.directives[u]},mount(u,f,g){if(!c){const p=l._ceVNode||we(r,i);return p.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),e(p,u,g),c=!0,l._container=u,u.__vue_app__=l,Ns(p.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Mt(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return s.provides[u]=f,l},runWithContext(u){const f=Gn;Gn=l;try{return u()}finally{Gn=f}}};return l}}let Gn=null;function Xi(e,t){if(Ye){let n=Ye.provides;const r=Ye.parent&&Ye.parent.provides;r===n&&(n=Ye.provides=Object.create(r)),n[e]=t}}function Rt(e,t,n=!1){const r=Ye||dt;if(r||Gn){const i=Gn?Gn._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Re(t)?t.call(r&&r.proxy):t}}function vv(){return!!(Ye||dt||Gn)}const Jd={},Qd=()=>Object.create(Jd),Xd=e=>Object.getPrototypeOf(e)===Jd;function mv(e,t,n,r=!1){const i={},s=Qd();e.propsDefaults=Object.create(null),Yd(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:Id(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function gv(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=xe(i),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let g=u[f];if(Ps(e.emitsOptions,g))continue;const p=t[g];if(c)if(Me(s,g))p!==s[g]&&(s[g]=p,l=!0);else{const _=Ot(g);i[_]=na(c,a,_,p,e,!1)}else p!==s[g]&&(s[g]=p,l=!0)}}}else{Yd(e,t,i,s)&&(l=!0);let u;for(const f in a)(!t||!Me(t,f)&&((u=mn(f))===f||!Me(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=na(c,a,f,void 0,e,!0)):delete i[f]);if(s!==a)for(const f in s)(!t||!Me(t,f))&&(delete s[f],l=!0)}l&&Xt(e.attrs,"set","")}function Yd(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(ri(c))continue;const l=t[c];let u;i&&Me(i,u=Ot(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:Ps(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=xe(n),l=a||$e;for(let u=0;u<s.length;u++){const f=s[u];n[f]=na(i,c,f,l[f],e,!Me(l,f))}}return o}function na(e,t,n,r,i,s){const o=e[n];if(o!=null){const a=Me(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Re(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=Ii(i);r=l[n]=c.call(null,t),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===mn(n))&&(r=!0))}return r}const bv=new WeakMap;function Zd(e,t,n=!1){const r=n?bv:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},a=[];let c=!1;if(!Re(e)){const u=f=>{c=!0;const[g,p]=Zd(f,t,!0);Je(o,g),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!c)return Be(e)&&r.set(e,pr),pr;if(Ce(s))for(let u=0;u<s.length;u++){const f=Ot(s[u]);vc(f)&&(o[f]=$e)}else if(s)for(const u in s){const f=Ot(u);if(vc(f)){const g=s[u],p=o[f]=Ce(g)||Re(g)?{type:g}:Je({},g),_=p.type;let b=!1,v=!0;if(Ce(_))for(let m=0;m<_.length;++m){const C=_[m],k=Re(C)&&C.name;if(k==="Boolean"){b=!0;break}else k==="String"&&(v=!1)}else b=Re(_)&&_.name==="Boolean";p[0]=b,p[1]=v,(b||Me(p,"default"))&&a.push(f)}}const l=[o,a];return Be(e)&&r.set(e,l),l}function vc(e){return e[0]!=="$"&&!ri(e)}const ef=e=>e[0]==="_"||e==="$stable",Pa=e=>Ce(e)?e.map(Ft):[Ft(e)],yv=(e,t,n)=>{if(t._n)return t;const r=Pt((...i)=>Pa(t(...i)),n);return r._c=!1,r},tf=(e,t,n)=>{const r=e._ctx;for(const i in e){if(ef(i))continue;const s=e[i];if(Re(s))t[i]=yv(i,s,r);else if(s!=null){const o=Pa(s);t[i]=()=>o}}},nf=(e,t)=>{const n=Pa(t);e.slots.default=()=>n},rf=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},Ev=(e,t,n)=>{const r=e.slots=Qd();if(e.vnode.shapeFlag&32){const i=t._;i?(rf(r,t,n),n&&id(r,"_",i,!0)):tf(t,r)}else t&&nf(e,t)},_v=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=$e;if(r.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:rf(i,t,n):(s=!t.$stable,tf(t,i)),o=t}else t&&(nf(e,t),o={default:1});if(s)for(const a in i)!ef(a)&&o[a]==null&&delete i[a]},mt=Dv;function Sv(e){return wv(e)}function wv(e,t){const n=Cs();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:g,setScopeId:p=Ut,insertStaticContent:_}=e,b=(V,D,L,Q=null,Y=null,W=null,de=void 0,le=null,ce=!!D.dynamicChildren)=>{if(V===D)return;V&&!Un(V,D)&&(Q=z(V),J(V,Y,W,!0),V=null),D.patchFlag===-2&&(ce=!1,D.dynamicChildren=null);const{type:ie,ref:be,shapeFlag:fe}=D;switch(ie){case As:v(V,D,L,Q);break;case pt:m(V,D,L,Q);break;case Yi:V==null&&C(D,L,Q,de);break;case he:N(V,D,L,Q,Y,W,de,le,ce);break;default:fe&1?h(V,D,L,Q,Y,W,de,le,ce):fe&6?E(V,D,L,Q,Y,W,de,le,ce):(fe&64||fe&128)&&ie.process(V,D,L,Q,Y,W,de,le,ce,se)}be!=null&&Y&&us(be,V&&V.ref,W,D||V,!D)},v=(V,D,L,Q)=>{if(V==null)r(D.el=a(D.children),L,Q);else{const Y=D.el=V.el;D.children!==V.children&&l(Y,D.children)}},m=(V,D,L,Q)=>{V==null?r(D.el=c(D.children||""),L,Q):D.el=V.el},C=(V,D,L,Q)=>{[V.el,V.anchor]=_(V.children,D,L,Q,V.el,V.anchor)},k=({el:V,anchor:D},L,Q)=>{let Y;for(;V&&V!==D;)Y=g(V),r(V,L,Q),V=Y;r(D,L,Q)},w=({el:V,anchor:D})=>{let L;for(;V&&V!==D;)L=g(V),i(V),V=L;i(D)},h=(V,D,L,Q,Y,W,de,le,ce)=>{D.type==="svg"?de="svg":D.type==="math"&&(de="mathml"),V==null?S(D,L,Q,Y,W,de,le,ce):I(V,D,Y,W,de,le,ce)},S=(V,D,L,Q,Y,W,de,le)=>{let ce,ie;const{props:be,shapeFlag:fe,transition:ye,dirs:me}=V;if(ce=V.el=o(V.type,W,be&&be.is,be),fe&8?u(ce,V.children):fe&16&&y(V.children,ce,null,Q,Y,so(V,W),de,le),me&&_n(V,null,Q,"created"),x(ce,V,V.scopeId,de,Q),be){for(const Ee in be)Ee!=="value"&&!ri(Ee)&&s(ce,Ee,null,be[Ee],W,Q);"value"in be&&s(ce,"value",null,be.value,W),(ie=be.onVnodeBeforeMount)&&$t(ie,Q,V)}me&&_n(V,null,Q,"beforeMount");const Se=Cv(Y,ye);Se&&ye.beforeEnter(ce),r(ce,D,L),((ie=be&&be.onVnodeMounted)||Se||me)&&mt(()=>{ie&&$t(ie,Q,V),Se&&ye.enter(ce),me&&_n(V,null,Q,"mounted")},Y)},x=(V,D,L,Q,Y)=>{if(L&&p(V,L),Q)for(let W=0;W<Q.length;W++)p(V,Q[W]);if(Y){let W=Y.subTree;if(D===W||uf(W.type)&&(W.ssContent===D||W.ssFallback===D)){const de=Y.vnode;x(V,de,de.scopeId,de.slotScopeIds,Y.parent)}}},y=(V,D,L,Q,Y,W,de,le,ce=0)=>{for(let ie=ce;ie<V.length;ie++){const be=V[ie]=le?un(V[ie]):Ft(V[ie]);b(null,be,D,L,Q,Y,W,de,le)}},I=(V,D,L,Q,Y,W,de)=>{const le=D.el=V.el;let{patchFlag:ce,dynamicChildren:ie,dirs:be}=D;ce|=V.patchFlag&16;const fe=V.props||$e,ye=D.props||$e;let me;if(L&&Sn(L,!1),(me=ye.onVnodeBeforeUpdate)&&$t(me,L,D,V),be&&_n(D,V,L,"beforeUpdate"),L&&Sn(L,!0),(fe.innerHTML&&ye.innerHTML==null||fe.textContent&&ye.textContent==null)&&u(le,""),ie?A(V.dynamicChildren,ie,le,L,Q,so(D,Y),W):de||O(V,D,le,null,L,Q,so(D,Y),W,!1),ce>0){if(ce&16)M(le,fe,ye,L,Y);else if(ce&2&&fe.class!==ye.class&&s(le,"class",null,ye.class,Y),ce&4&&s(le,"style",fe.style,ye.style,Y),ce&8){const Se=D.dynamicProps;for(let Ee=0;Ee<Se.length;Ee++){const ve=Se[Ee],Le=fe[ve],tt=ye[ve];(tt!==Le||ve==="value")&&s(le,ve,Le,tt,Y,L)}}ce&1&&V.children!==D.children&&u(le,D.children)}else!de&&ie==null&&M(le,fe,ye,L,Y);((me=ye.onVnodeUpdated)||be)&&mt(()=>{me&&$t(me,L,D,V),be&&_n(D,V,L,"updated")},Q)},A=(V,D,L,Q,Y,W,de)=>{for(let le=0;le<D.length;le++){const ce=V[le],ie=D[le],be=ce.el&&(ce.type===he||!Un(ce,ie)||ce.shapeFlag&70)?f(ce.el):L;b(ce,ie,be,null,Q,Y,W,de,!0)}},M=(V,D,L,Q,Y)=>{if(D!==L){if(D!==$e)for(const W in D)!ri(W)&&!(W in L)&&s(V,W,D[W],null,Y,Q);for(const W in L){if(ri(W))continue;const de=L[W],le=D[W];de!==le&&W!=="value"&&s(V,W,le,de,Y,Q)}"value"in L&&s(V,"value",D.value,L.value,Y)}},N=(V,D,L,Q,Y,W,de,le,ce)=>{const ie=D.el=V?V.el:a(""),be=D.anchor=V?V.anchor:a("");let{patchFlag:fe,dynamicChildren:ye,slotScopeIds:me}=D;me&&(le=le?le.concat(me):me),V==null?(r(ie,L,Q),r(be,L,Q),y(D.children||[],L,be,Y,W,de,le,ce)):fe>0&&fe&64&&ye&&V.dynamicChildren?(A(V.dynamicChildren,ye,L,Y,W,de,le),(D.key!=null||Y&&D===Y.subTree)&&sf(V,D,!0)):O(V,D,L,be,Y,W,de,le,ce)},E=(V,D,L,Q,Y,W,de,le,ce)=>{D.slotScopeIds=le,V==null?D.shapeFlag&512?Y.ctx.activate(D,L,Q,de,ce):T(D,L,Q,Y,W,de,ce):$(V,D,ce)},T=(V,D,L,Q,Y,W,de)=>{const le=V.component=Uv(V,Q,Y);if(Ts(V)&&(le.ctx.renderer=se),Hv(le,!1,de),le.asyncDep){if(Y&&Y.registerDep(le,P,de),!V.el){const ce=le.subTree=we(pt);m(null,ce,D,L)}}else P(le,V,D,L,Y,W,de)},$=(V,D,L)=>{const Q=D.component=V.component;if(Nv(V,D,L))if(Q.asyncDep&&!Q.asyncResolved){R(Q,D,L);return}else Q.next=D,Q.update();else D.el=V.el,Q.vnode=D},P=(V,D,L,Q,Y,W,de)=>{const le=()=>{if(V.isMounted){let{next:fe,bu:ye,u:me,parent:Se,vnode:Ee}=V;{const Qe=of(V);if(Qe){fe&&(fe.el=Ee.el,R(V,fe,de)),Qe.asyncDep.then(()=>{V.isUnmounted||le()});return}}let ve=fe,Le;Sn(V,!1),fe?(fe.el=Ee.el,R(V,fe,de)):fe=Ee,ye&&Qi(ye),(Le=fe.props&&fe.props.onVnodeBeforeUpdate)&&$t(Le,Se,fe,Ee),Sn(V,!0);const tt=gc(V),_t=V.subTree;V.subTree=tt,b(_t,tt,f(_t.el),z(_t),V,Y,W),fe.el=tt.el,ve===null&&Mv(V,tt.el),me&&mt(me,Y),(Le=fe.props&&fe.props.onVnodeUpdated)&&mt(()=>$t(Le,Se,fe,Ee),Y)}else{let fe;const{el:ye,props:me}=D,{bm:Se,m:Ee,parent:ve,root:Le,type:tt}=V,_t=oi(D);Sn(V,!1),Se&&Qi(Se),!_t&&(fe=me&&me.onVnodeBeforeMount)&&$t(fe,ve,D),Sn(V,!0);{Le.ce&&Le.ce._injectChildStyle(tt);const Qe=V.subTree=gc(V);b(null,Qe,L,Q,V,Y,W),D.el=Qe.el}if(Ee&&mt(Ee,Y),!_t&&(fe=me&&me.onVnodeMounted)){const Qe=D;mt(()=>$t(fe,ve,Qe),Y)}(D.shapeFlag&256||ve&&oi(ve.vnode)&&ve.vnode.shapeFlag&256)&&V.a&&mt(V.a,Y),V.isMounted=!0,D=L=Q=null}};V.scope.on();const ce=V.effect=new dd(le);V.scope.off();const ie=V.update=ce.run.bind(ce),be=V.job=ce.runIfDirty.bind(ce);be.i=V,be.id=V.uid,ce.scheduler=()=>Ta(be),Sn(V,!0),ie()},R=(V,D,L)=>{D.component=V;const Q=V.vnode.props;V.vnode=D,V.next=null,gv(V,D.props,Q,L),_v(V,D.children,L),gn(),cc(V),bn()},O=(V,D,L,Q,Y,W,de,le,ce=!1)=>{const ie=V&&V.children,be=V?V.shapeFlag:0,fe=D.children,{patchFlag:ye,shapeFlag:me}=D;if(ye>0){if(ye&128){j(ie,fe,L,Q,Y,W,de,le,ce);return}else if(ye&256){B(ie,fe,L,Q,Y,W,de,le,ce);return}}me&8?(be&16&&F(ie,Y,W),fe!==ie&&u(L,fe)):be&16?me&16?j(ie,fe,L,Q,Y,W,de,le,ce):F(ie,Y,W,!0):(be&8&&u(L,""),me&16&&y(fe,L,Q,Y,W,de,le,ce))},B=(V,D,L,Q,Y,W,de,le,ce)=>{V=V||pr,D=D||pr;const ie=V.length,be=D.length,fe=Math.min(ie,be);let ye;for(ye=0;ye<fe;ye++){const me=D[ye]=ce?un(D[ye]):Ft(D[ye]);b(V[ye],me,L,null,Y,W,de,le,ce)}ie>be?F(V,Y,W,!0,!1,fe):y(D,L,Q,Y,W,de,le,ce,fe)},j=(V,D,L,Q,Y,W,de,le,ce)=>{let ie=0;const be=D.length;let fe=V.length-1,ye=be-1;for(;ie<=fe&&ie<=ye;){const me=V[ie],Se=D[ie]=ce?un(D[ie]):Ft(D[ie]);if(Un(me,Se))b(me,Se,L,null,Y,W,de,le,ce);else break;ie++}for(;ie<=fe&&ie<=ye;){const me=V[fe],Se=D[ye]=ce?un(D[ye]):Ft(D[ye]);if(Un(me,Se))b(me,Se,L,null,Y,W,de,le,ce);else break;fe--,ye--}if(ie>fe){if(ie<=ye){const me=ye+1,Se=me<be?D[me].el:Q;for(;ie<=ye;)b(null,D[ie]=ce?un(D[ie]):Ft(D[ie]),L,Se,Y,W,de,le,ce),ie++}}else if(ie>ye)for(;ie<=fe;)J(V[ie],Y,W,!0),ie++;else{const me=ie,Se=ie,Ee=new Map;for(ie=Se;ie<=ye;ie++){const Ge=D[ie]=ce?un(D[ie]):Ft(D[ie]);Ge.key!=null&&Ee.set(Ge.key,ie)}let ve,Le=0;const tt=ye-Se+1;let _t=!1,Qe=0;const kt=new Array(tt);for(ie=0;ie<tt;ie++)kt[ie]=0;for(ie=me;ie<=fe;ie++){const Ge=V[ie];if(Le>=tt){J(Ge,Y,W,!0);continue}let nt;if(Ge.key!=null)nt=Ee.get(Ge.key);else for(ve=Se;ve<=ye;ve++)if(kt[ve-Se]===0&&Un(Ge,D[ve])){nt=ve;break}nt===void 0?J(Ge,Y,W,!0):(kt[nt-Se]=ie+1,nt>=Qe?Qe=nt:_t=!0,b(Ge,D[nt],L,null,Y,W,de,le,ce),Le++)}const Wt=_t?Iv(kt):pr;for(ve=Wt.length-1,ie=tt-1;ie>=0;ie--){const Ge=Se+ie,nt=D[Ge],xi=Ge+1<be?D[Ge+1].el:Q;kt[ie]===0?b(null,nt,L,xi,Y,W,de,le,ce):_t&&(ve<0||ie!==Wt[ve]?G(nt,L,xi,2):ve--)}}},G=(V,D,L,Q,Y=null)=>{const{el:W,type:de,transition:le,children:ce,shapeFlag:ie}=V;if(ie&6){G(V.component.subTree,D,L,Q);return}if(ie&128){V.suspense.move(D,L,Q);return}if(ie&64){de.move(V,D,L,se);return}if(de===he){r(W,D,L);for(let fe=0;fe<ce.length;fe++)G(ce[fe],D,L,Q);r(V.anchor,D,L);return}if(de===Yi){k(V,D,L);return}if(Q!==2&&ie&1&&le)if(Q===0)le.beforeEnter(W),r(W,D,L),mt(()=>le.enter(W),Y);else{const{leave:fe,delayLeave:ye,afterLeave:me}=le,Se=()=>r(W,D,L),Ee=()=>{fe(W,()=>{Se(),me&&me()})};ye?ye(W,Se,Ee):Ee()}else r(W,D,L)},J=(V,D,L,Q=!1,Y=!1)=>{const{type:W,props:de,ref:le,children:ce,dynamicChildren:ie,shapeFlag:be,patchFlag:fe,dirs:ye,cacheIndex:me}=V;if(fe===-2&&(Y=!1),le!=null&&us(le,null,L,V,!0),me!=null&&(D.renderCache[me]=void 0),be&256){D.ctx.deactivate(V);return}const Se=be&1&&ye,Ee=!oi(V);let ve;if(Ee&&(ve=de&&de.onVnodeBeforeUnmount)&&$t(ve,D,V),be&6)pe(V.component,L,Q);else{if(be&128){V.suspense.unmount(L,Q);return}Se&&_n(V,null,D,"beforeUnmount"),be&64?V.type.remove(V,D,L,se,Q):ie&&!ie.hasOnce&&(W!==he||fe>0&&fe&64)?F(ie,D,L,!1,!0):(W===he&&fe&384||!Y&&be&16)&&F(ce,D,L),Q&&ee(V)}(Ee&&(ve=de&&de.onVnodeUnmounted)||Se)&&mt(()=>{ve&&$t(ve,D,V),Se&&_n(V,null,D,"unmounted")},L)},ee=V=>{const{type:D,el:L,anchor:Q,transition:Y}=V;if(D===he){X(L,Q);return}if(D===Yi){w(V);return}const W=()=>{i(L),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(V.shapeFlag&1&&Y&&!Y.persisted){const{leave:de,delayLeave:le}=Y,ce=()=>de(L,W);le?le(V.el,W,ce):ce()}else W()},X=(V,D)=>{let L;for(;V!==D;)L=g(V),i(V),V=L;i(D)},pe=(V,D,L)=>{const{bum:Q,scope:Y,job:W,subTree:de,um:le,m:ce,a:ie}=V;mc(ce),mc(ie),Q&&Qi(Q),Y.stop(),W&&(W.flags|=8,J(de,V,D,L)),le&&mt(le,D),mt(()=>{V.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},F=(V,D,L,Q=!1,Y=!1,W=0)=>{for(let de=W;de<V.length;de++)J(V[de],D,L,Q,Y)},z=V=>{if(V.shapeFlag&6)return z(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const D=g(V.anchor||V.el),L=D&&D[Kh];return L?g(L):D};let Z=!1;const ne=(V,D,L)=>{V==null?D._vnode&&J(D._vnode,null,null,!0):b(D._vnode||null,V,D,null,null,null,L),D._vnode=V,Z||(Z=!0,cc(),Pd(),Z=!1)},se={p:b,um:J,m:G,r:ee,mt:T,mc:y,pc:O,pbc:A,n:z,o:e};return{render:ne,hydrate:void 0,createApp:hv(ne)}}function so({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Sn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Cv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sf(e,t,n=!1){const r=e.children,i=t.children;if(Ce(r)&&Ce(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=un(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&sf(o,a)),a.type===As&&(a.el=o.el)}}function Iv(e){const t=e.slice(),n=[0];let r,i,s,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<l?s=a+1:o=a;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function of(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:of(t)}function mc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Rv=Symbol.for("v-scx"),Ov=()=>Rt(Rv);function gt(e,t,n){return af(e,t,n)}function af(e,t,n=$e){const{immediate:r,deep:i,flush:s,once:o}=n,a=Je({},n),c=t&&r||!t&&s!=="post";let l;if(gi){if(s==="sync"){const p=Ov();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=Ut,p.resume=Ut,p.pause=Ut,p}}const u=Ye;a.call=(p,_,b)=>Mt(p,u,_,b);let f=!1;s==="post"?a.scheduler=p=>{mt(p,u&&u.suspense)}:s!=="sync"&&(f=!0,a.scheduler=(p,_)=>{_?p():Ta(p)}),a.augmentJob=p=>{t&&(p.flags|=4),f&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const g=Wh(e,t,a);return gi&&(l?l.push(g):c&&g()),g}function kv(e,t,n){const r=this.proxy,i=qe(e)?e.includes(".")?cf(r,e):()=>r[e]:e.bind(r,r);let s;Re(t)?s=t:(s=t.handler,n=t);const o=Ii(this),a=af(i,s.bind(r),n);return o(),a}function cf(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Tv=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ot(t)}Modifiers`]||e[`${mn(t)}Modifiers`];function xv(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||$e;let i=n;const s=t.startsWith("update:"),o=s&&Tv(r,t.slice(7));o&&(o.trim&&(i=n.map(u=>qe(u)?u.trim():u)),o.number&&(i=n.map(ss)));let a,c=r[a=Ys(t)]||r[a=Ys(Ot(t))];!c&&s&&(c=r[a=Ys(mn(t))]),c&&Mt(c,e,6,i);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Mt(l,e,6,i)}}function lf(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!Re(e)){const c=l=>{const u=lf(l,t,!0);u&&(a=!0,Je(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!a?(Be(e)&&r.set(e,null),null):(Ce(s)?s.forEach(c=>o[c]=null):Je(o,s),Be(e)&&r.set(e,o),o)}function Ps(e,t){return!e||!Es(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,mn(t))||Me(e,t))}function gc(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:f,data:g,setupState:p,ctx:_,inheritAttrs:b}=e,v=ls(e);let m,C;try{if(n.shapeFlag&4){const w=i||r,h=w;m=Ft(l.call(h,w,u,f,p,g,_)),C=a}else{const w=t;m=Ft(w.length>1?w(f,{attrs:a,slots:o,emit:c}):w(f,null)),C=t.props?a:Pv(a)}}catch(w){ci.length=0,Os(w,e,1),m=we(pt)}let k=m;if(C&&b!==!1){const w=Object.keys(C),{shapeFlag:h}=k;w.length&&h&7&&(s&&w.some(ba)&&(C=Av(C,s)),k=vn(k,C,!1,!0))}return n.dirs&&(k=vn(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&Jn(k,n.transition),m=k,ls(v),m}const Pv=e=>{let t;for(const n in e)(n==="class"||n==="style"||Es(n))&&((t||(t={}))[n]=e[n]);return t},Av=(e,t)=>{const n={};for(const r in e)(!ba(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Nv(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,l=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?bc(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const g=u[f];if(o[g]!==r[g]&&!Ps(l,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?bc(r,o,l):!0:!!o;return!1}function bc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Ps(n,s))return!0}return!1}function Mv({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const uf=e=>e.__isSuspense;function Dv(e,t){t&&t.pendingBranch?Ce(e)?t.effects.push(...e):t.effects.push(e):zh(e)}const he=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),pt=Symbol.for("v-cmt"),Yi=Symbol.for("v-stc"),ci=[];let bt=null;function U(e=!1){ci.push(bt=e?null:[])}function Lv(){ci.pop(),bt=ci[ci.length-1]||null}let mi=1;function yc(e,t=!1){mi+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function df(e){return e.dynamicChildren=mi>0?bt||pr:null,Lv(),mi>0&&bt&&bt.push(e),e}function H(e,t,n,r,i,s){return df(d(e,t,n,r,i,s,!0))}function yt(e,t,n,r,i){return df(we(e,t,n,r,i,!0))}function fs(e){return e?e.__v_isVNode===!0:!1}function Un(e,t){return e.type===t.type&&e.key===t.key}const ff=({key:e})=>e??null,Zi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?qe(e)||ze(e)||Re(e)?{i:dt,r:e,k:t,f:!!n}:e:null);function d(e,t=null,n=null,r=0,i=null,s=e===he?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ff(t),ref:t&&Zi(t),scopeId:Nd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:dt};return a?(Aa(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=qe(n)?8:16),mi>0&&!o&&bt&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&bt.push(c),c}const we=$v;function $v(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Wd)&&(e=pt),fs(e)){const a=vn(e,t,!0);return n&&Aa(a,n),mi>0&&!s&&bt&&(a.shapeFlag&6?bt[bt.indexOf(e)]=a:bt.push(a)),a.patchFlag=-2,a}if(Kv(e)&&(e=e.__vccOpts),t){t=Vv(t);let{class:a,style:c}=t;a&&!qe(a)&&(t.class=ge(a)),Be(c)&&(Oa(c)&&!Ce(c)&&(c=Je({},c)),t.style=We(c))}const o=qe(e)?1:uf(e)?128:Md(e)?64:Be(e)?4:Re(e)?2:0;return d(e,t,n,r,i,o,s,!0)}function Vv(e){return e?Oa(e)||Xd(e)?Je({},e):e:null}function vn(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=e,l=t?Bv(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&ff(l),ref:t&&t.ref?n&&s?Ce(s)?s.concat(Zi(t)):[s,Zi(t)]:Zi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==he?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vn(e.ssContent),ssFallback:e.ssFallback&&vn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Jn(u,c.clone(u)),u}function Ve(e=" ",t=0){return we(As,null,e,t)}function en(e,t){const n=we(Yi,null,e);return n.staticCount=t,n}function Te(e="",t=!1){return t?(U(),yt(pt,null,e)):we(pt,null,e)}function Ft(e){return e==null||typeof e=="boolean"?we(pt):Ce(e)?we(he,null,e.slice()):fs(e)?un(e):we(As,null,String(e))}function un(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vn(e)}function Aa(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ce(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Aa(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Xd(t)?t._ctx=dt:i===3&&dt&&(dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Re(t)?(t={default:t,_ctx:dt},n=32):(t=String(t),r&64?(n=16,t=[Ve(t)]):n=8);e.children=t,e.shapeFlag|=n}function Bv(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=ge([t.class,r.class]));else if(i==="style")t.style=We([t.style,r.style]);else if(Es(i)){const s=t[i],o=r[i];o&&s!==o&&!(Ce(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function $t(e,t,n,r=null){Mt(e,t,7,[n,r])}const jv=Kd();let Fv=0;function Uv(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||jv,s={uid:Fv++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zd(r,i),emitsOptions:lf(r,i),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:r.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=xv.bind(null,s),e.ce&&e.ce(s),s}let Ye=null;const pf=()=>Ye||dt;let ps,ra;{const e=Cs(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};ps=t("__VUE_INSTANCE_SETTERS__",n=>Ye=n),ra=t("__VUE_SSR_SETTERS__",n=>gi=n)}const Ii=e=>{const t=Ye;return ps(e),e.scope.on(),()=>{e.scope.off(),ps(t)}},Ec=()=>{Ye&&Ye.scope.off(),ps(null)};function hf(e){return e.vnode.shapeFlag&4}let gi=!1;function Hv(e,t=!1,n=!1){t&&ra(t);const{props:r,children:i}=e.vnode,s=hf(e);mv(e,r,s,t),Ev(e,i,n);const o=s?Wv(e,t):void 0;return t&&ra(!1),o}function Wv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,av);const{setup:r}=n;if(r){gn();const i=e.setupContext=r.length>1?Gv(e):null,s=Ii(e),o=wi(r,e,0,[e.props,i]),a=td(o);if(bn(),s(),(a||e.sp)&&!oi(e)&&jd(e),a){if(o.then(Ec,Ec),t)return o.then(c=>{_c(e,c)}).catch(c=>{Os(c,e,0)});e.asyncDep=o}else _c(e,o)}else vf(e)}function _c(e,t,n){Re(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Be(t)&&(e.setupState=kd(t)),vf(e)}function vf(e,t,n){const r=e.type;e.render||(e.render=r.render||Ut);{const i=Ii(e);gn();try{cv(e)}finally{bn(),i()}}}const qv={get(e,t){return rt(e,"get",""),e[t]}};function Gv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,qv),slots:e.slots,emit:e.emit,expose:t}}function Ns(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kd(ka(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ai)return ai[n](e)},has(t,n){return n in t||n in ai}})):e.proxy}function zv(e,t=!0){return Re(e)?e.displayName||e.name:e.name||t&&e.__name}function Kv(e){return Re(e)&&"__vccOpts"in e}const Ie=(e,t)=>Uh(e,t,gi);function Pe(e,t,n){const r=arguments.length;return r===2?Be(t)&&!Ce(t)?fs(t)?we(e,null,[t]):we(e,t):we(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&fs(n)&&(n=[n]),we(e,t,n))}const Jv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ia;const Sc=typeof window<"u"&&window.trustedTypes;if(Sc)try{ia=Sc.createPolicy("vue",{createHTML:e=>e})}catch{}const mf=ia?e=>ia.createHTML(e):e=>e,Qv="http://www.w3.org/2000/svg",Xv="http://www.w3.org/1998/Math/MathML",Qt=typeof document<"u"?document:null,wc=Qt&&Qt.createElement("template"),Yv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Qt.createElementNS(Qv,e):t==="mathml"?Qt.createElementNS(Xv,e):n?Qt.createElement(e,{is:n}):Qt.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Qt.createTextNode(e),createComment:e=>Qt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{wc.innerHTML=mf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=wc.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},nn="transition",kr="animation",gr=Symbol("_vtc"),gf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bf=Je({},Ld,gf),Zv=e=>(e.displayName="Transition",e.props=bf,e),Na=Zv((e,{slots:t})=>Pe(Qh,yf(e),t)),wn=(e,t=[])=>{Ce(e)?e.forEach(n=>n(...t)):e&&e(...t)},Cc=e=>e?Ce(e)?e.some(t=>t.length>1):e.length>1:!1;function yf(e){const t={};for(const N in e)N in gf||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,_=em(i),b=_&&_[0],v=_&&_[1],{onBeforeEnter:m,onEnter:C,onEnterCancelled:k,onLeave:w,onLeaveCancelled:h,onBeforeAppear:S=m,onAppear:x=C,onAppearCancelled:y=k}=t,I=(N,E,T,$)=>{N._enterCancelled=$,on(N,E?u:a),on(N,E?l:o),T&&T()},A=(N,E)=>{N._isLeaving=!1,on(N,f),on(N,p),on(N,g),E&&E()},M=N=>(E,T)=>{const $=N?x:C,P=()=>I(E,N,T);wn($,[E,P]),Ic(()=>{on(E,N?c:s),Bt(E,N?u:a),Cc($)||Rc(E,r,b,P)})};return Je(t,{onBeforeEnter(N){wn(m,[N]),Bt(N,s),Bt(N,o)},onBeforeAppear(N){wn(S,[N]),Bt(N,c),Bt(N,l)},onEnter:M(!1),onAppear:M(!0),onLeave(N,E){N._isLeaving=!0;const T=()=>A(N,E);Bt(N,f),N._enterCancelled?(Bt(N,g),sa()):(sa(),Bt(N,g)),Ic(()=>{N._isLeaving&&(on(N,f),Bt(N,p),Cc(w)||Rc(N,r,v,T))}),wn(w,[N,T])},onEnterCancelled(N){I(N,!1,void 0,!0),wn(k,[N])},onAppearCancelled(N){I(N,!0,void 0,!0),wn(y,[N])},onLeaveCancelled(N){A(N),wn(h,[N])}})}function em(e){if(e==null)return null;if(Be(e))return[oo(e.enter),oo(e.leave)];{const t=oo(e);return[t,t]}}function oo(e){return oh(e)}function Bt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[gr]||(e[gr]=new Set)).add(t)}function on(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[gr];n&&(n.delete(t),n.size||(e[gr]=void 0))}function Ic(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let tm=0;function Rc(e,t,n,r){const i=e._endId=++tm,s=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=Ef(e,t);if(!o)return r();const l=o+"end";let u=0;const f=()=>{e.removeEventListener(l,g),s()},g=p=>{p.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},a+1),e.addEventListener(l,g)}function Ef(e,t){const n=window.getComputedStyle(e),r=_=>(n[_]||"").split(", "),i=r(`${nn}Delay`),s=r(`${nn}Duration`),o=Oc(i,s),a=r(`${kr}Delay`),c=r(`${kr}Duration`),l=Oc(a,c);let u=null,f=0,g=0;t===nn?o>0&&(u=nn,f=o,g=s.length):t===kr?l>0&&(u=kr,f=l,g=c.length):(f=Math.max(o,l),u=f>0?o>l?nn:kr:null,g=u?u===nn?s.length:c.length:0);const p=u===nn&&/\b(transform|all)(,|$)/.test(r(`${nn}Property`).toString());return{type:u,timeout:f,propCount:g,hasTransform:p}}function Oc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>kc(n)+kc(e[r])))}function kc(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function sa(){return document.body.offsetHeight}function nm(e,t,n){const r=e[gr];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Tc=Symbol("_vod"),rm=Symbol("_vsh"),im=Symbol(""),sm=/(^|;)\s*display\s*:/;function om(e,t,n){const r=e.style,i=qe(n);let s=!1;if(n&&!i){if(t)if(qe(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&es(r,a,"")}else for(const o in t)n[o]==null&&es(r,o,"");for(const o in n)o==="display"&&(s=!0),es(r,o,n[o])}else if(i){if(t!==n){const o=r[im];o&&(n+=";"+o),r.cssText=n,s=sm.test(n)}}else t&&e.removeAttribute("style");Tc in e&&(e[Tc]=s?r.display:"",e[rm]&&(r.display="none"))}const xc=/\s*!important$/;function es(e,t,n){if(Ce(n))n.forEach(r=>es(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=am(e,t);xc.test(n)?e.setProperty(mn(r),n.replace(xc,""),"important"):e[r]=n}}const Pc=["Webkit","Moz","ms"],ao={};function am(e,t){const n=ao[t];if(n)return n;let r=Ot(t);if(r!=="filter"&&r in e)return ao[t]=r;r=ws(r);for(let i=0;i<Pc.length;i++){const s=Pc[i]+r;if(s in e)return ao[t]=s}return t}const Ac="http://www.w3.org/1999/xlink";function Nc(e,t,n,r,i,s=fh(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ac,t.slice(6,t.length)):e.setAttributeNS(Ac,t,n):n==null||s&&!sd(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Ht(n)?String(n):n)}function Mc(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?mf(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=sd(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Hn(e,t,n,r){e.addEventListener(t,n,r)}function cm(e,t,n,r){e.removeEventListener(t,n,r)}const Dc=Symbol("_vei");function lm(e,t,n,r,i=null){const s=e[Dc]||(e[Dc]={}),o=s[t];if(r&&o)o.value=r;else{const[a,c]=um(t);if(r){const l=s[t]=pm(r,i);Hn(e,a,l,c)}else o&&(cm(e,a,o,c),s[t]=void 0)}}const Lc=/(?:Once|Passive|Capture)$/;function um(e){let t;if(Lc.test(e)){t={};let r;for(;r=e.match(Lc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mn(e.slice(2)),t]}let co=0;const dm=Promise.resolve(),fm=()=>co||(dm.then(()=>co=0),co=Date.now());function pm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Mt(hm(r,n.value),t,5,[r])};return n.value=e,n.attached=fm(),n}function hm(e,t){if(Ce(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const $c=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vm=(e,t,n,r,i,s)=>{const o=i==="svg";t==="class"?nm(e,r,o):t==="style"?om(e,n,r):Es(t)?ba(t)||lm(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):mm(e,t,r,o))?(Mc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Nc(e,t,r,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!qe(r))?Mc(e,Ot(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Nc(e,t,r,o))};function mm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&$c(t)&&Re(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return $c(t)&&qe(n)?!1:t in e}const _f=new WeakMap,Sf=new WeakMap,hs=Symbol("_moveCb"),Vc=Symbol("_enterCb"),gm=e=>(delete e.props.mode,e),bm=gm({name:"TransitionGroup",props:Je({},bf,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=pf(),r=Dd();let i,s;return Ud(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!wm(i[0].el,n.vnode.el,o))return;i.forEach(Em),i.forEach(_m);const a=i.filter(Sm);sa(),a.forEach(c=>{const l=c.el,u=l.style;Bt(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=l[hs]=g=>{g&&g.target!==l||(!g||/transform$/.test(g.propertyName))&&(l.removeEventListener("transitionend",f),l[hs]=null,on(l,o))};l.addEventListener("transitionend",f)})}),()=>{const o=xe(e),a=yf(o);let c=o.tag||he;if(i=[],s)for(let l=0;l<s.length;l++){const u=s[l];u.el&&u.el instanceof Element&&(i.push(u),Jn(u,vi(u,a,r,n)),_f.set(u,u.el.getBoundingClientRect()))}s=t.default?xa(t.default()):[];for(let l=0;l<s.length;l++){const u=s[l];u.key!=null&&Jn(u,vi(u,a,r,n))}return we(c,null,s)}}}),ym=bm;function Em(e){const t=e.el;t[hs]&&t[hs](),t[Vc]&&t[Vc]()}function _m(e){Sf.set(e,e.el.getBoundingClientRect())}function Sm(e){const t=_f.get(e),n=Sf.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function wm(e,t,n){const r=e.cloneNode(),i=e[gr];i&&i.forEach(a=>{a.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:o}=Ef(r);return s.removeChild(r),o}const vs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ce(t)?n=>Qi(t,n):t};function Cm(e){e.target.composing=!0}function Bc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const mr=Symbol("_assign"),et={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[mr]=vs(i);const s=r||i.props&&i.props.type==="number";Hn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=ss(a)),e[mr](a)}),n&&Hn(e,"change",()=>{e.value=e.value.trim()}),t||(Hn(e,"compositionstart",Cm),Hn(e,"compositionend",Bc),Hn(e,"change",Bc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(e[mr]=vs(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?ss(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},Im={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=_s(t);Hn(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?ss(ms(o)):ms(o));e[mr](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,ks(()=>{e._assigning=!1})}),e[mr]=vs(r)},mounted(e,{value:t}){jc(e,t)},beforeUpdate(e,t,n){e[mr]=vs(n)},updated(e,{value:t}){e._assigning||jc(e,t)}};function jc(e,t){const n=e.multiple,r=Ce(t);if(!(n&&!r&&!_s(t))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],a=ms(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=t.some(l=>String(l)===String(a)):o.selected=hh(t,a)>-1}else o.selected=t.has(a);else if(Is(ms(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ms(e){return"_value"in e?e._value:e.value}const Rm=["ctrl","shift","alt","meta"],Om={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Rm.some(n=>e[`${n}Key`]&&!t.includes(n))},Ri=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const a=Om[t[o]];if(a&&a(i,t))return}return e(i,...s)})},km={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gs=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=mn(i.key);if(t.some(o=>o===s||km[o]===s))return e(i)})},Tm=Je({patchProp:vm},Yv);let Fc;function xm(){return Fc||(Fc=Sv(Tm))}const Pm=(...e)=>{const t=xm().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Nm(r);if(!i)return;const s=t._component;!Re(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Am(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Am(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nm(e){return qe(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let wf;const Ms=e=>wf=e,Cf=Symbol();function oa(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var li;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(li||(li={}));function Mm(){const e=ld(!0),t=e.run(()=>K({}));let n=[],r=[];const i=ka({install(s){Ms(i),i._a=s,s.provide(Cf,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const If=()=>{};function Uc(e,t,n,r=If){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&ud()&&vh(i),i}function cr(e,...t){e.slice().forEach(n=>{n(...t)})}const Dm=e=>e(),Hc=Symbol(),lo=Symbol();function aa(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];oa(i)&&oa(r)&&e.hasOwnProperty(n)&&!ze(r)&&!hn(r)?e[n]=aa(i,r):e[n]=r}return e}const Lm=Symbol();function $m(e){return!oa(e)||!e.hasOwnProperty(Lm)}const{assign:an}=Object;function Vm(e){return!!(ze(e)&&e.effect)}function Bm(e,t,n,r){const{state:i,actions:s,getters:o}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=i?i():{});const u=Vh(n.state.value[e]);return an(u,s,Object.keys(o||{}).reduce((f,g)=>(f[g]=ka(Ie(()=>{Ms(n);const p=n._s.get(e);return o[g].call(p,p)})),f),{}))}return c=Rf(e,l,t,n,r,!0),c}function Rf(e,t,n={},r,i,s){let o;const a=an({actions:{}},n),c={deep:!0};let l,u,f=[],g=[],p;const _=r.state.value[e];!s&&!_&&(r.state.value[e]={}),K({});let b;function v(y){let I;l=u=!1,typeof y=="function"?(y(r.state.value[e]),I={type:li.patchFunction,storeId:e,events:p}):(aa(r.state.value[e],y),I={type:li.patchObject,payload:y,storeId:e,events:p});const A=b=Symbol();ks().then(()=>{b===A&&(l=!0)}),u=!0,cr(f,I,r.state.value[e])}const m=s?function(){const{state:I}=n,A=I?I():{};this.$patch(M=>{an(M,A)})}:If;function C(){o.stop(),f=[],g=[],r._s.delete(e)}const k=(y,I="")=>{if(Hc in y)return y[lo]=I,y;const A=function(){Ms(r);const M=Array.from(arguments),N=[],E=[];function T(R){N.push(R)}function $(R){E.push(R)}cr(g,{args:M,name:A[lo],store:h,after:T,onError:$});let P;try{P=y.apply(this&&this.$id===e?this:h,M)}catch(R){throw cr(E,R),R}return P instanceof Promise?P.then(R=>(cr(N,R),R)).catch(R=>(cr(E,R),Promise.reject(R))):(cr(N,P),P)};return A[Hc]=!0,A[lo]=I,A},w={_p:r,$id:e,$onAction:Uc.bind(null,g),$patch:v,$reset:m,$subscribe(y,I={}){const A=Uc(f,y,I.detached,()=>M()),M=o.run(()=>gt(()=>r.state.value[e],N=>{(I.flush==="sync"?u:l)&&y({storeId:e,type:li.direct,events:p},N)},an({},c,I)));return A},$dispose:C},h=Si(w);r._s.set(e,h);const x=(r._a&&r._a.runWithContext||Dm)(()=>r._e.run(()=>(o=ld()).run(()=>t({action:k}))));for(const y in x){const I=x[y];if(ze(I)&&!Vm(I)||hn(I))s||(_&&$m(I)&&(ze(I)?I.value=_[y]:aa(I,_[y])),r.state.value[e][y]=I);else if(typeof I=="function"){const A=k(I,y);x[y]=A,a.actions[y]=I}}return an(h,x),an(xe(h),x),Object.defineProperty(h,"$state",{get:()=>r.state.value[e],set:y=>{v(I=>{an(I,y)})}}),r._p.forEach(y=>{an(h,o.run(()=>y({store:h,app:r._a,pinia:r,options:a})))}),_&&s&&n.hydrate&&n.hydrate(h.$state,_),l=!0,u=!0,h}/*! #__NO_SIDE_EFFECTS__ */function Of(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function o(a,c){const l=vv();return a=a||(l?Rt(Cf,null):null),a&&Ms(a),a=wf,a._s.has(r)||(s?Rf(r,t,i,a):Bm(r,i,a)),a._s.get(r)}return o.$id=r,o}const jm=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Fm=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Um=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Hm(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Wm(e);return}return t}function Wm(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function qm(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const r=n.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!Um.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(jm.test(e)||Fm.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Hm)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function Gm(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n==null||n[t[r]]==null)return;n=n[t[r]]}return n}function Ma(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=Ma(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function kf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return Ma(e,kf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Tf(e,t){return t.map(n=>n.split(".")).map(n=>[n,Gm(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>Ma(n,r[1],r[0]),{})}function xf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>kf(n,r),e)}function Wc(e,{storage:t,serializer:n,key:r,debug:i,pick:s,omit:o,beforeHydrate:a,afterHydrate:c},l,u=!0){try{u&&(a==null||a(l));const f=t.getItem(r);if(f){const g=n.deserialize(f),p=s?Tf(g,s):g,_=o?xf(p,o):p;e.$patch(_)}u&&(c==null||c(l))}catch(f){i&&console.error("[pinia-plugin-persistedstate]",f)}}function qc(e,{storage:t,serializer:n,key:r,debug:i,pick:s,omit:o}){try{const a=s?Tf(e,s):e,c=o?xf(a,o):a,l=n.serialize(c);t.setItem(r,l)}catch(a){i&&console.error("[pinia-plugin-persistedstate]",a)}}function zm(e,t,n){const{pinia:r,store:i,options:{persist:s=n}}=e;if(!s)return;if(!(i.$id in r.state.value)){const c=r._s.get(i.$id.replace("__hot:",""));c&&Promise.resolve().then(()=>c.$persist());return}const a=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(t);i.$hydrate=({runHooks:c=!0}={})=>{a.forEach(l=>{Wc(i,l,e,c)})},i.$persist=()=>{a.forEach(c=>{qc(i.$state,c)})},a.forEach(c=>{Wc(i,c,e),i.$subscribe((l,u)=>qc(u,c),{detached:!0})})}function Km(e={}){return function(t){zm(t,n=>({key:(e.key?e.key:r=>r)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:r=>JSON.stringify(r),deserialize:r=>qm(r)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var Jm=Km();function Pf(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qm}=Object.prototype,{getPrototypeOf:Da}=Object,Ds=(e=>t=>{const n=Qm.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Lt=e=>(e=e.toLowerCase(),t=>Ds(t)===e),Ls=e=>t=>typeof t===e,{isArray:Er}=Array,bi=Ls("undefined");function Xm(e){return e!==null&&!bi(e)&&e.constructor!==null&&!bi(e.constructor)&&Et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Af=Lt("ArrayBuffer");function Ym(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Af(e.buffer),t}const Zm=Ls("string"),Et=Ls("function"),Nf=Ls("number"),$s=e=>e!==null&&typeof e=="object",eg=e=>e===!0||e===!1,ts=e=>{if(Ds(e)!=="object")return!1;const t=Da(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tg=Lt("Date"),ng=Lt("File"),rg=Lt("Blob"),ig=Lt("FileList"),sg=e=>$s(e)&&Et(e.pipe),og=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Et(e.append)&&((t=Ds(e))==="formdata"||t==="object"&&Et(e.toString)&&e.toString()==="[object FormData]"))},ag=Lt("URLSearchParams"),[cg,lg,ug,dg]=["ReadableStream","Request","Response","Headers"].map(Lt),fg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Oi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Er(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function Mf(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Wn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Df=e=>!bi(e)&&e!==Wn;function ca(){const{caseless:e}=Df(this)&&this||{},t={},n=(r,i)=>{const s=e&&Mf(t,i)||i;ts(t[s])&&ts(r)?t[s]=ca(t[s],r):ts(r)?t[s]=ca({},r):Er(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Oi(arguments[r],n);return t}const pg=(e,t,n,{allOwnKeys:r}={})=>(Oi(t,(i,s)=>{n&&Et(i)?e[s]=Pf(i,n):e[s]=i},{allOwnKeys:r}),e),hg=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),vg=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},mg=(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Da(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},gg=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},bg=e=>{if(!e)return null;if(Er(e))return e;let t=e.length;if(!Nf(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},yg=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Da(Uint8Array)),Eg=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},_g=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Sg=Lt("HTMLFormElement"),wg=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Gc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Cg=Lt("RegExp"),Lf=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Oi(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},Ig=e=>{Lf(e,(t,n)=>{if(Et(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Et(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Rg=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Er(e)?r(e):r(String(e).split(t)),n},Og=()=>{},kg=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,uo="abcdefghijklmnopqrstuvwxyz",zc="0123456789",$f={DIGIT:zc,ALPHA:uo,ALPHA_DIGIT:uo+uo.toUpperCase()+zc},Tg=(e=16,t=$f.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function xg(e){return!!(e&&Et(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Pg=e=>{const t=new Array(10),n=(r,i)=>{if($s(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=Er(r)?[]:{};return Oi(r,(o,a)=>{const c=n(o,i+1);!bi(c)&&(s[a]=c)}),t[i]=void 0,s}}return r};return n(e,0)},Ag=Lt("AsyncFunction"),Ng=e=>e&&($s(e)||Et(e))&&Et(e.then)&&Et(e.catch),Vf=((e,t)=>e?setImmediate:t?((n,r)=>(Wn.addEventListener("message",({source:i,data:s})=>{i===Wn&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Wn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Et(Wn.postMessage)),Mg=typeof queueMicrotask<"u"?queueMicrotask.bind(Wn):typeof process<"u"&&process.nextTick||Vf,te={isArray:Er,isArrayBuffer:Af,isBuffer:Xm,isFormData:og,isArrayBufferView:Ym,isString:Zm,isNumber:Nf,isBoolean:eg,isObject:$s,isPlainObject:ts,isReadableStream:cg,isRequest:lg,isResponse:ug,isHeaders:dg,isUndefined:bi,isDate:tg,isFile:ng,isBlob:rg,isRegExp:Cg,isFunction:Et,isStream:sg,isURLSearchParams:ag,isTypedArray:yg,isFileList:ig,forEach:Oi,merge:ca,extend:pg,trim:fg,stripBOM:hg,inherits:vg,toFlatObject:mg,kindOf:Ds,kindOfTest:Lt,endsWith:gg,toArray:bg,forEachEntry:Eg,matchAll:_g,isHTMLForm:Sg,hasOwnProperty:Gc,hasOwnProp:Gc,reduceDescriptors:Lf,freezeMethods:Ig,toObjectSet:Rg,toCamelCase:wg,noop:Og,toFiniteNumber:kg,findKey:Mf,global:Wn,isContextDefined:Df,ALPHABET:$f,generateString:Tg,isSpecCompliantForm:xg,toJSONObject:Pg,isAsyncFn:Ag,isThenable:Ng,setImmediate:Vf,asap:Mg};function Oe(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}te.inherits(Oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const Bf=Oe.prototype,jf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{jf[e]={value:e}});Object.defineProperties(Oe,jf);Object.defineProperty(Bf,"isAxiosError",{value:!0});Oe.from=(e,t,n,r,i,s)=>{const o=Object.create(Bf);return te.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Oe.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Dg=null;function la(e){return te.isPlainObject(e)||te.isArray(e)}function Ff(e){return te.endsWith(e,"[]")?e.slice(0,-2):e}function Kc(e,t,n){return e?e.concat(t).map(function(i,s){return i=Ff(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function Lg(e){return te.isArray(e)&&!e.some(la)}const $g=te.toFlatObject(te,{},null,function(t){return/^is[A-Z]/.test(t)});function Vs(e,t,n){if(!te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!te.isUndefined(v[b])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(t);if(!te.isFunction(i))throw new TypeError("visitor must be a function");function l(_){if(_===null)return"";if(te.isDate(_))return _.toISOString();if(!c&&te.isBlob(_))throw new Oe("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(_)||te.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function u(_,b,v){let m=_;if(_&&!v&&typeof _=="object"){if(te.endsWith(b,"{}"))b=r?b:b.slice(0,-2),_=JSON.stringify(_);else if(te.isArray(_)&&Lg(_)||(te.isFileList(_)||te.endsWith(b,"[]"))&&(m=te.toArray(_)))return b=Ff(b),m.forEach(function(k,w){!(te.isUndefined(k)||k===null)&&t.append(o===!0?Kc([b],w,s):o===null?b:b+"[]",l(k))}),!1}return la(_)?!0:(t.append(Kc(v,b,s),l(_)),!1)}const f=[],g=Object.assign($g,{defaultVisitor:u,convertValue:l,isVisitable:la});function p(_,b){if(!te.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(_),te.forEach(_,function(m,C){(!(te.isUndefined(m)||m===null)&&i.call(t,m,te.isString(C)?C.trim():C,b,g))===!0&&p(m,b?b.concat(C):[C])}),f.pop()}}if(!te.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Jc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function La(e,t){this._pairs=[],e&&Vs(e,this,t)}const Uf=La.prototype;Uf.append=function(t,n){this._pairs.push([t,n])};Uf.toString=function(t){const n=t?function(r){return t.call(this,r,Jc)}:Jc;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Vg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hf(e,t,n){if(!t)return e;const r=n&&n.encode||Vg;te.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=te.isURLSearchParams(t)?t.toString():new La(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Qc{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){te.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Wf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bg=typeof URLSearchParams<"u"?URLSearchParams:La,jg=typeof FormData<"u"?FormData:null,Fg=typeof Blob<"u"?Blob:null,Ug={isBrowser:!0,classes:{URLSearchParams:Bg,FormData:jg,Blob:Fg},protocols:["http","https","file","blob","url","data"]},$a=typeof window<"u"&&typeof document<"u",ua=typeof navigator=="object"&&navigator||void 0,Hg=$a&&(!ua||["ReactNative","NativeScript","NS"].indexOf(ua.product)<0),Wg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qg=$a&&window.location.href||"http://localhost",Gg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$a,hasStandardBrowserEnv:Hg,hasStandardBrowserWebWorkerEnv:Wg,navigator:ua,origin:qg},Symbol.toStringTag,{value:"Module"})),st={...Gg,...Ug};function zg(e,t){return Vs(e,new st.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return st.isNode&&te.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Kg(e){return te.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Jg(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function qf(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&te.isArray(i)?i.length:o,c?(te.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!te.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&te.isArray(i[o])&&(i[o]=Jg(i[o])),!a)}if(te.isFormData(e)&&te.isFunction(e.entries)){const n={};return te.forEachEntry(e,(r,i)=>{t(Kg(r),i,n,0)}),n}return null}function Qg(e,t,n){if(te.isString(e))try{return(t||JSON.parse)(e),te.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ki={transitional:Wf,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=te.isObject(t);if(s&&te.isHTMLForm(t)&&(t=new FormData(t)),te.isFormData(t))return i?JSON.stringify(qf(t)):t;if(te.isArrayBuffer(t)||te.isBuffer(t)||te.isStream(t)||te.isFile(t)||te.isBlob(t)||te.isReadableStream(t))return t;if(te.isArrayBufferView(t))return t.buffer;if(te.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zg(t,this.formSerializer).toString();if((a=te.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Vs(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Qg(t)):t}],transformResponse:[function(t){const n=this.transitional||ki.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(te.isResponse(t)||te.isReadableStream(t))return t;if(t&&te.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Oe.from(a,Oe.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:st.classes.FormData,Blob:st.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],e=>{ki.headers[e]={}});const Xg=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yg=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&Xg[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Xc=Symbol("internals");function Tr(e){return e&&String(e).trim().toLowerCase()}function ns(e){return e===!1||e==null?e:te.isArray(e)?e.map(ns):String(e)}function Zg(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const e0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fo(e,t,n,r,i){if(te.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!te.isString(t)){if(te.isString(r))return t.indexOf(r)!==-1;if(te.isRegExp(r))return r.test(t)}}function t0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function n0(e,t){const n=te.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}let ht=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,c,l){const u=Tr(c);if(!u)throw new Error("header name must be a non-empty string");const f=te.findKey(i,u);(!f||i[f]===void 0||l===!0||l===void 0&&i[f]!==!1)&&(i[f||c]=ns(a))}const o=(a,c)=>te.forEach(a,(l,u)=>s(l,u,c));if(te.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(te.isString(t)&&(t=t.trim())&&!e0(t))o(Yg(t),n);else if(te.isHeaders(t))for(const[a,c]of t.entries())s(c,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Tr(t),t){const r=te.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Zg(i);if(te.isFunction(n))return n.call(this,i,r);if(te.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Tr(t),t){const r=te.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||fo(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Tr(o),o){const a=te.findKey(r,o);a&&(!n||fo(r,r[a],a,n))&&(delete r[a],i=!0)}}return te.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||fo(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return te.forEach(this,(i,s)=>{const o=te.findKey(r,s);if(o){n[o]=ns(i),delete n[s];return}const a=t?t0(s):String(s).trim();a!==s&&delete n[s],n[a]=ns(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return te.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&te.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Xc]=this[Xc]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Tr(o);r[a]||(n0(i,o),r[a]=!0)}return te.isArray(t)?t.forEach(s):s(t),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(ht.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});te.freezeMethods(ht);function po(e,t){const n=this||ki,r=t||n,i=ht.from(r.headers);let s=r.data;return te.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Gf(e){return!!(e&&e.__CANCEL__)}function _r(e,t,n){Oe.call(this,e??"canceled",Oe.ERR_CANCELED,t,n),this.name="CanceledError"}te.inherits(_r,Oe,{__CANCEL__:!0});function zf(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Oe("Request failed with status code "+n.status,[Oe.ERR_BAD_REQUEST,Oe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function r0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function i0(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),n[i]=c,r[i]=l;let f=s,g=0;for(;f!==i;)g+=n[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const p=u&&l-u;return p?Math.round(g*1e3/p):void 0}}function s0(e,t){let n=0,r=1e3/t,i,s;const o=(l,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),f=u-n;f>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const bs=(e,t,n=3)=>{let r=0;const i=i0(50,250);return s0(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},Yc=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Zc=e=>(...t)=>te.asap(()=>e(...t)),o0=st.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,st.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(st.origin),st.navigator&&/(msie|trident)/i.test(st.navigator.userAgent)):()=>!0,a0=st.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];te.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),te.isString(r)&&o.push("path="+r),te.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function c0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function l0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Kf(e,t){return e&&!c0(t)?l0(e,t):t}const el=e=>e instanceof ht?{...e}:e;function Qn(e,t){t=t||{};const n={};function r(l,u,f,g){return te.isPlainObject(l)&&te.isPlainObject(u)?te.merge.call({caseless:g},l,u):te.isPlainObject(u)?te.merge({},u):te.isArray(u)?u.slice():u}function i(l,u,f,g){if(te.isUndefined(u)){if(!te.isUndefined(l))return r(void 0,l,f,g)}else return r(l,u,f,g)}function s(l,u){if(!te.isUndefined(u))return r(void 0,u)}function o(l,u){if(te.isUndefined(u)){if(!te.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,f){if(f in t)return r(l,u);if(f in e)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,f)=>i(el(l),el(u),f,!0)};return te.forEach(Object.keys(Object.assign({},e,t)),function(u){const f=c[u]||i,g=f(e[u],t[u],u);te.isUndefined(g)&&f!==a||(n[u]=g)}),n}const Jf=e=>{const t=Qn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=ht.from(o),t.url=Hf(Kf(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(te.isFormData(n)){if(st.hasStandardBrowserEnv||st.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(st.hasStandardBrowserEnv&&(r&&te.isFunction(r)&&(r=r(t)),r||r!==!1&&o0(t.url))){const l=i&&s&&a0.read(s);l&&o.set(i,l)}return t},u0=typeof XMLHttpRequest<"u",d0=u0&&function(e){return new Promise(function(n,r){const i=Jf(e);let s=i.data;const o=ht.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,f,g,p,_;function b(){p&&p(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function m(){if(!v)return;const k=ht.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),h={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:k,config:e,request:v};zf(function(x){n(x),b()},function(x){r(x),b()},h),v=null}"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(m)},v.onabort=function(){v&&(r(new Oe("Request aborted",Oe.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new Oe("Network Error",Oe.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const h=i.transitional||Wf;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),r(new Oe(w,h.clarifyTimeoutError?Oe.ETIMEDOUT:Oe.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&te.forEach(o.toJSON(),function(w,h){v.setRequestHeader(h,w)}),te.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),l&&([g,_]=bs(l,!0),v.addEventListener("progress",g)),c&&v.upload&&([f,p]=bs(c),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=k=>{v&&(r(!k||k.type?new _r(null,e,v):k),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const C=r0(i.url);if(C&&st.protocols.indexOf(C)===-1){r(new Oe("Unsupported protocol "+C+":",Oe.ERR_BAD_REQUEST,e));return}v.send(s||null)})},f0=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof Oe?u:new _r(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,s(new Oe(`timeout ${t} of ms exceeded`,Oe.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),e=null)};e.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>te.asap(a),c}},p0=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},h0=async function*(e,t){for await(const n of v0(e))yield*p0(n,t)},v0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},tl=(e,t,n,r)=>{const i=h0(e,t);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let f=u.byteLength;if(n){let g=s+=f;n(g)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},Bs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qf=Bs&&typeof ReadableStream=="function",m0=Bs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Xf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},g0=Qf&&Xf(()=>{let e=!1;const t=new Request(st.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),nl=64*1024,da=Qf&&Xf(()=>te.isReadableStream(new Response("").body)),ys={stream:da&&(e=>e.body)};Bs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ys[t]&&(ys[t]=te.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Oe(`Response type '${t}' is not supported`,Oe.ERR_NOT_SUPPORT,r)})})})(new Response);const b0=async e=>{if(e==null)return 0;if(te.isBlob(e))return e.size;if(te.isSpecCompliantForm(e))return(await new Request(st.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(te.isArrayBufferView(e)||te.isArrayBuffer(e))return e.byteLength;if(te.isURLSearchParams(e)&&(e=e+""),te.isString(e))return(await m0(e)).byteLength},y0=async(e,t)=>{const n=te.toFiniteNumber(e.getContentLength());return n??b0(t)},E0=Bs&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:f="same-origin",fetchOptions:g}=Jf(e);l=l?(l+"").toLowerCase():"text";let p=f0([i,s&&s.toAbortSignal()],o),_;const b=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(c&&g0&&n!=="get"&&n!=="head"&&(v=await y0(u,r))!==0){let h=new Request(t,{method:"POST",body:r,duplex:"half"}),S;if(te.isFormData(r)&&(S=h.headers.get("content-type"))&&u.setContentType(S),h.body){const[x,y]=Yc(v,bs(Zc(c)));r=tl(h.body,nl,x,y)}}te.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;_=new Request(t,{...g,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:m?f:void 0});let C=await fetch(_);const k=da&&(l==="stream"||l==="response");if(da&&(a||k&&b)){const h={};["status","statusText","headers"].forEach(I=>{h[I]=C[I]});const S=te.toFiniteNumber(C.headers.get("content-length")),[x,y]=a&&Yc(S,bs(Zc(a),!0))||[];C=new Response(tl(C.body,nl,x,()=>{y&&y(),b&&b()}),h)}l=l||"text";let w=await ys[te.findKey(ys,l)||"text"](C,e);return!k&&b&&b(),await new Promise((h,S)=>{zf(h,S,{data:w,headers:ht.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:_})})}catch(m){throw b&&b(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new Oe("Network Error",Oe.ERR_NETWORK,e,_),{cause:m.cause||m}):Oe.from(m,m&&m.code,e,_)}}),fa={http:Dg,xhr:d0,fetch:E0};te.forEach(fa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const rl=e=>`- ${e}`,_0=e=>te.isFunction(e)||e===null||e===!1,Yf={getAdapter:e=>{e=te.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!_0(n)&&(r=fa[(o=String(n)).toLowerCase()],r===void 0))throw new Oe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(rl).join(`
`):" "+rl(s[0]):"as no adapter specified";throw new Oe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:fa};function ho(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _r(null,e)}function il(e){return ho(e),e.headers=ht.from(e.headers),e.data=po.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Yf.getAdapter(e.adapter||ki.adapter)(e).then(function(r){return ho(e),r.data=po.call(e,e.transformResponse,r),r.headers=ht.from(r.headers),r},function(r){return Gf(r)||(ho(e),r&&r.response&&(r.response.data=po.call(e,e.transformResponse,r.response),r.response.headers=ht.from(r.response.headers))),Promise.reject(r)})}const Zf="1.7.9",js={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{js[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const sl={};js.transitional=function(t,n,r){function i(s,o){return"[Axios v"+Zf+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new Oe(i(o," has been removed"+(n?" in "+n:"")),Oe.ERR_DEPRECATED);return n&&!sl[o]&&(sl[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};js.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function S0(e,t,n){if(typeof e!="object")throw new Oe("options must be an object",Oe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new Oe("option "+s+" must be "+c,Oe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Oe("Unknown option "+s,Oe.ERR_BAD_OPTION)}}const rs={assertOptions:S0,validators:js},Vt=rs.validators;let zn=class{constructor(t){this.defaults=t,this.interceptors={request:new Qc,response:new Qc}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Qn(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&rs.assertOptions(r,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),i!=null&&(te.isFunction(i)?n.paramsSerializer={serialize:i}:rs.assertOptions(i,{encode:Vt.function,serialize:Vt.function},!0)),rs.assertOptions(n,{baseUrl:Vt.spelling("baseURL"),withXsrfToken:Vt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&te.merge(s.common,s[n.method]);s&&te.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ht.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const l=[];this.interceptors.response.forEach(function(b){l.push(b.fulfilled,b.rejected)});let u,f=0,g;if(!c){const _=[il.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,l),g=_.length,u=Promise.resolve(n);f<g;)u=u.then(_[f++],_[f++]);return u}g=a.length;let p=n;for(f=0;f<g;){const _=a[f++],b=a[f++];try{p=_(p)}catch(v){b.call(this,v);break}}try{u=il.call(this,p)}catch(_){return Promise.reject(_)}for(f=0,g=l.length;f<g;)u=u.then(l[f++],l[f++]);return u}getUri(t){t=Qn(this.defaults,t);const n=Kf(t.baseURL,t.url);return Hf(n,t.params,t.paramsSerializer)}};te.forEach(["delete","get","head","options"],function(t){zn.prototype[t]=function(n,r){return this.request(Qn(r||{},{method:t,url:n,data:(r||{}).data}))}});te.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(Qn(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}zn.prototype[t]=n(),zn.prototype[t+"Form"]=n(!0)});let w0=class ep{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new _r(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ep(function(i){t=i}),cancel:t}}};function C0(e){return function(n){return e.apply(null,n)}}function I0(e){return te.isObject(e)&&e.isAxiosError===!0}const pa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pa).forEach(([e,t])=>{pa[t]=e});function tp(e){const t=new zn(e),n=Pf(zn.prototype.request,t);return te.extend(n,zn.prototype,t,{allOwnKeys:!0}),te.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return tp(Qn(e,i))},n}const De=tp(ki);De.Axios=zn;De.CanceledError=_r;De.CancelToken=w0;De.isCancel=Gf;De.VERSION=Zf;De.toFormData=Vs;De.AxiosError=Oe;De.Cancel=De.CanceledError;De.all=function(t){return Promise.all(t)};De.spread=C0;De.isAxiosError=I0;De.mergeConfig=Qn;De.AxiosHeaders=ht;De.formToJSON=e=>qf(te.isHTMLForm(e)?new FormData(e):e);De.getAdapter=Yf.getAdapter;De.HttpStatusCode=pa;De.default=De;const{Axios:Ek,AxiosError:_k,CanceledError:Sk,isCancel:wk,CancelToken:Ck,VERSION:Ik,all:Rk,Cancel:Ok,isAxiosError:kk,spread:Tk,toFormData:xk,AxiosHeaders:Pk,HttpStatusCode:Ak,formToJSON:Nk,getAdapter:Mk,mergeConfig:Dk}=De;/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const fr=typeof document<"u";function np(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function R0(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&np(e.default)}const Ne=Object.assign;function vo(e,t){const n={};for(const r in t){const i=t[r];n[r]=Dt(i)?i.map(e):e(i)}return n}const ui=()=>{},Dt=Array.isArray,rp=/#/g,O0=/&/g,k0=/\//g,T0=/=/g,x0=/\?/g,ip=/\+/g,P0=/%5B/g,A0=/%5D/g,sp=/%5E/g,N0=/%60/g,op=/%7B/g,M0=/%7C/g,ap=/%7D/g,D0=/%20/g;function Va(e){return encodeURI(""+e).replace(M0,"|").replace(P0,"[").replace(A0,"]")}function L0(e){return Va(e).replace(op,"{").replace(ap,"}").replace(sp,"^")}function ha(e){return Va(e).replace(ip,"%2B").replace(D0,"+").replace(rp,"%23").replace(O0,"%26").replace(N0,"`").replace(op,"{").replace(ap,"}").replace(sp,"^")}function $0(e){return ha(e).replace(T0,"%3D")}function V0(e){return Va(e).replace(rp,"%23").replace(x0,"%3F")}function B0(e){return e==null?"":V0(e).replace(k0,"%2F")}function yi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const j0=/\/$/,F0=e=>e.replace(j0,"");function mo(e,t,n="/"){let r,i={},s="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),s=t.slice(c+1,a>-1?a:t.length),i=e(s)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=q0(r??t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:yi(o)}}function U0(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ol(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function H0(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&br(t.matched[r],n.matched[i])&&cp(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function br(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!W0(e[n],t[n]))return!1;return!0}function W0(e,t){return Dt(e)?al(e,t):Dt(t)?al(t,e):e===t}function al(e,t){return Dt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function q0(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const rn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ei;(function(e){e.pop="pop",e.push="push"})(Ei||(Ei={}));var di;(function(e){e.back="back",e.forward="forward",e.unknown=""})(di||(di={}));function G0(e){if(!e)if(fr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),F0(e)}const z0=/^[^#]+#/;function K0(e,t){return e.replace(z0,"#")+t}function J0(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Fs=()=>({left:window.scrollX,top:window.scrollY});function Q0(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=J0(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function cl(e,t){return(history.state?history.state.position-t:-1)+e}const va=new Map;function X0(e,t){va.set(e,t)}function Y0(e){const t=va.get(e);return va.delete(e),t}let Z0=()=>location.protocol+"//"+location.host;function lp(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let a=i.includes(e.slice(s))?e.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),ol(c,"")}return ol(n,e)+r+i}function eb(e,t,n,r){let i=[],s=[],o=null;const a=({state:g})=>{const p=lp(e,location),_=n.value,b=t.value;let v=0;if(g){if(n.value=p,t.value=g,o&&o===_){o=null;return}v=b?g.position-b.position:0}else r(p);i.forEach(m=>{m(n.value,_,{delta:v,type:Ei.pop,direction:v?v>0?di.forward:di.back:di.unknown})})};function c(){o=n.value}function l(g){i.push(g);const p=()=>{const _=i.indexOf(g);_>-1&&i.splice(_,1)};return s.push(p),p}function u(){const{history:g}=window;g.state&&g.replaceState(Ne({},g.state,{scroll:Fs()}),"")}function f(){for(const g of s)g();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function ll(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Fs():null}}function tb(e){const{history:t,location:n}=window,r={value:lp(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const f=e.indexOf("#"),g=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:Z0()+e+c;try{t[u?"replaceState":"pushState"](l,"",g),i.value=l}catch(p){console.error(p),n[u?"replace":"assign"](g)}}function o(c,l){const u=Ne({},t.state,ll(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=Ne({},i.value,t.state,{forward:c,scroll:Fs()});s(u.current,u,!0);const f=Ne({},ll(r.value,c,null),{position:u.position+1},l);s(c,f,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function nb(e){e=G0(e);const t=tb(e),n=eb(e,t.state,t.location,t.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ne({location:"",base:e,go:r,createHref:K0.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function rb(e){return typeof e=="string"||e&&typeof e=="object"}function up(e){return typeof e=="string"||typeof e=="symbol"}const dp=Symbol("");var ul;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ul||(ul={}));function yr(e,t){return Ne(new Error,{type:e,[dp]:!0},t)}function Gt(e,t){return e instanceof Error&&dp in e&&(t==null||!!(e.type&t))}const dl="[^/]+?",ib={sensitive:!1,strict:!1,start:!0,end:!0},sb=/[.+*?^${}()[\]/\\]/g;function ob(e,t){const n=Ne({},ib,t),r=[];let i=n.start?"^":"";const s=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const g=l[f];let p=40+(n.sensitive?.25:0);if(g.type===0)f||(i+="/"),i+=g.value.replace(sb,"\\$&"),p+=40;else if(g.type===1){const{value:_,repeatable:b,optional:v,regexp:m}=g;s.push({name:_,repeatable:b,optional:v});const C=m||dl;if(C!==dl){p+=10;try{new RegExp(`(${C})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${_}" (${C}): `+w.message)}}let k=b?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(k=v&&l.length<2?`(?:/${k})`:"/"+k),v&&(k+="?"),i+=k,p+=20,v&&(p+=-8),b&&(p+=-20),C===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),f={};if(!u)return null;for(let g=1;g<u.length;g++){const p=u[g]||"",_=s[g-1];f[_.name]=p&&_.repeatable?p.split("/"):p}return f}function c(l){let u="",f=!1;for(const g of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const p of g)if(p.type===0)u+=p.value;else if(p.type===1){const{value:_,repeatable:b,optional:v}=p,m=_ in l?l[_]:"";if(Dt(m)&&!b)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const C=Dt(m)?m.join("/"):m;if(!C)if(v)g.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=C}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function ab(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function fp(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=ab(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(fl(r))return 1;if(fl(i))return-1}return i.length-r.length}function fl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cb={type:0,value:""},lb=/[a-zA-Z0-9_]/;function ub(e){if(!e)return[[]];if(e==="/")return[[cb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${n})/"${l}": ${p}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function f(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function g(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),o()):c===":"?(f(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:lb.test(c)?g():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),f(),o(),i}function db(e,t,n){const r=ob(ub(e.path),n),i=Ne(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function fb(e,t){const n=[],r=new Map;t=ml({strict:!1,end:!0,sensitive:!1},t);function i(f){return r.get(f)}function s(f,g,p){const _=!p,b=hl(f);b.aliasOf=p&&p.record;const v=ml(t,f),m=[b];if("alias"in f){const w=typeof f.alias=="string"?[f.alias]:f.alias;for(const h of w)m.push(hl(Ne({},b,{components:p?p.record.components:b.components,path:h,aliasOf:p?p.record:b})))}let C,k;for(const w of m){const{path:h}=w;if(g&&h[0]!=="/"){const S=g.record.path,x=S[S.length-1]==="/"?"":"/";w.path=g.record.path+(h&&x+h)}if(C=db(w,g,v),p?p.alias.push(C):(k=k||C,k!==C&&k.alias.push(C),_&&f.name&&!vl(C)&&o(f.name)),pp(C)&&c(C),b.children){const S=b.children;for(let x=0;x<S.length;x++)s(S[x],C,p&&p.children[x])}p=p||C}return k?()=>{o(k)}:ui}function o(f){if(up(f)){const g=r.get(f);g&&(r.delete(f),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(f);g>-1&&(n.splice(g,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){const g=vb(f,n);n.splice(g,0,f),f.record.name&&!vl(f)&&r.set(f.record.name,f)}function l(f,g){let p,_={},b,v;if("name"in f&&f.name){if(p=r.get(f.name),!p)throw yr(1,{location:f});v=p.record.name,_=Ne(pl(g.params,p.keys.filter(k=>!k.optional).concat(p.parent?p.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),f.params&&pl(f.params,p.keys.map(k=>k.name))),b=p.stringify(_)}else if(f.path!=null)b=f.path,p=n.find(k=>k.re.test(b)),p&&(_=p.parse(b),v=p.record.name);else{if(p=g.name?r.get(g.name):n.find(k=>k.re.test(g.path)),!p)throw yr(1,{location:f,currentLocation:g});v=p.record.name,_=Ne({},g.params,f.params),b=p.stringify(_)}const m=[];let C=p;for(;C;)m.unshift(C.record),C=C.parent;return{name:v,path:b,params:_,matched:m,meta:hb(m)}}e.forEach(f=>s(f));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function pl(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function hl(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:pb(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function pb(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function vl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function hb(e){return e.reduce((t,n)=>Ne(t,n.meta),{})}function ml(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function vb(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;fp(e,t[s])<0?r=s:n=s+1}const i=mb(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function mb(e){let t=e;for(;t=t.parent;)if(pp(t)&&fp(e,t)===0)return t}function pp({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function gb(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(ip," "),o=s.indexOf("="),a=yi(o<0?s:s.slice(0,o)),c=o<0?null:yi(s.slice(o+1));if(a in t){let l=t[a];Dt(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function gl(e){let t="";for(let n in e){const r=e[n];if(n=$0(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Dt(r)?r.map(s=>s&&ha(s)):[r&&ha(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function bb(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Dt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const yb=Symbol(""),bl=Symbol(""),Us=Symbol(""),Ba=Symbol(""),ma=Symbol("");function xr(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function dn(e,t,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=g=>{g===!1?c(yr(4,{from:n,to:t})):g instanceof Error?c(g):rb(g)?c(yr(2,{from:t,to:g})):(o&&r.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},u=s(()=>e.call(r&&r.instances[i],t,n,l));let f=Promise.resolve(u);e.length<3&&(f=f.then(l)),f.catch(g=>c(g))})}function go(e,t,n,r,i=s=>s()){const s=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(np(c)){const u=(c.__vccOpts||c)[t];u&&s.push(dn(u,n,r,o,a,i))}else{let l=c();s.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=R0(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const p=(f.__vccOpts||f)[t];return p&&dn(p,n,r,o,a,i)()}))}}return s}function yl(e){const t=Rt(Us),n=Rt(Ba),r=Ie(()=>{const c=He(e.to);return t.resolve(c)}),i=Ie(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const g=f.findIndex(br.bind(null,u));if(g>-1)return g;const p=El(c[l-2]);return l>1&&El(u)===p&&f[f.length-1].path!==p?f.findIndex(br.bind(null,c[l-2])):g}),s=Ie(()=>i.value>-1&&Cb(n.params,r.value.params)),o=Ie(()=>i.value>-1&&i.value===n.matched.length-1&&cp(n.params,r.value.params));function a(c={}){if(wb(c)){const l=t[He(e.replace)?"replace":"push"](He(e.to)).catch(ui);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Ie(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Eb(e){return e.length===1?e[0]:e}const _b=Ae({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:yl,setup(e,{slots:t}){const n=Si(yl(e)),{options:r}=Rt(Us),i=Ie(()=>({[_l(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[_l(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Eb(t.default(n));return e.custom?s:Pe("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Sb=_b;function wb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Cb(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Dt(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function El(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _l=(e,t,n)=>e??t??n,Ib=Ae({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Rt(ma),i=Ie(()=>e.route||r.value),s=Rt(bl,0),o=Ie(()=>{let l=He(s);const{matched:u}=i.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=Ie(()=>i.value.matched[o.value]);Xi(bl,Ie(()=>o.value+1)),Xi(yb,a),Xi(ma,i);const c=K();return gt(()=>[c.value,a.value,e.name],([l,u,f],[g,p,_])=>{u&&(u.instances[f]=l,p&&p!==u&&l&&l===g&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),l&&u&&(!p||!br(u,p)||!g)&&(u.enterCallbacks[f]||[]).forEach(b=>b(l))},{flush:"post"}),()=>{const l=i.value,u=e.name,f=a.value,g=f&&f.components[u];if(!g)return Sl(n.default,{Component:g,route:l});const p=f.props[u],_=p?p===!0?l.params:typeof p=="function"?p(l):p:null,v=Pe(g,Ne({},_,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Sl(n.default,{Component:v,route:l})||v}}});function Sl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Rb=Ib;function Ob(e){const t=fb(e.routes,e),n=e.parseQuery||gb,r=e.stringifyQuery||gl,i=e.history,s=xr(),o=xr(),a=xr(),c=Dh(rn);let l=rn;fr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=vo.bind(null,z=>""+z),f=vo.bind(null,B0),g=vo.bind(null,yi);function p(z,Z){let ne,se;return up(z)?(ne=t.getRecordMatcher(z),se=Z):se=z,t.addRoute(se,ne)}function _(z){const Z=t.getRecordMatcher(z);Z&&t.removeRoute(Z)}function b(){return t.getRoutes().map(z=>z.record)}function v(z){return!!t.getRecordMatcher(z)}function m(z,Z){if(Z=Ne({},Z||c.value),typeof z=="string"){const L=mo(n,z,Z.path),Q=t.resolve({path:L.path},Z),Y=i.createHref(L.fullPath);return Ne(L,Q,{params:g(Q.params),hash:yi(L.hash),redirectedFrom:void 0,href:Y})}let ne;if(z.path!=null)ne=Ne({},z,{path:mo(n,z.path,Z.path).path});else{const L=Ne({},z.params);for(const Q in L)L[Q]==null&&delete L[Q];ne=Ne({},z,{params:f(L)}),Z.params=f(Z.params)}const se=t.resolve(ne,Z),re=z.hash||"";se.params=u(g(se.params));const V=U0(r,Ne({},z,{hash:L0(re),path:se.path})),D=i.createHref(V);return Ne({fullPath:V,hash:re,query:r===gl?bb(z.query):z.query||{}},se,{redirectedFrom:void 0,href:D})}function C(z){return typeof z=="string"?mo(n,z,c.value.path):Ne({},z)}function k(z,Z){if(l!==z)return yr(8,{from:Z,to:z})}function w(z){return x(z)}function h(z){return w(Ne(C(z),{replace:!0}))}function S(z){const Z=z.matched[z.matched.length-1];if(Z&&Z.redirect){const{redirect:ne}=Z;let se=typeof ne=="function"?ne(z):ne;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=C(se):{path:se},se.params={}),Ne({query:z.query,hash:z.hash,params:se.path!=null?{}:z.params},se)}}function x(z,Z){const ne=l=m(z),se=c.value,re=z.state,V=z.force,D=z.replace===!0,L=S(ne);if(L)return x(Ne(C(L),{state:typeof L=="object"?Ne({},re,L.state):re,force:V,replace:D}),Z||ne);const Q=ne;Q.redirectedFrom=Z;let Y;return!V&&H0(r,se,ne)&&(Y=yr(16,{to:Q,from:se}),G(se,se,!0,!1)),(Y?Promise.resolve(Y):A(Q,se)).catch(W=>Gt(W)?Gt(W,2)?W:j(W):O(W,Q,se)).then(W=>{if(W){if(Gt(W,2))return x(Ne({replace:D},C(W.to),{state:typeof W.to=="object"?Ne({},re,W.to.state):re,force:V}),Z||Q)}else W=N(Q,se,!0,D,re);return M(Q,se,W),W})}function y(z,Z){const ne=k(z,Z);return ne?Promise.reject(ne):Promise.resolve()}function I(z){const Z=X.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(z):z()}function A(z,Z){let ne;const[se,re,V]=kb(z,Z);ne=go(se.reverse(),"beforeRouteLeave",z,Z);for(const L of se)L.leaveGuards.forEach(Q=>{ne.push(dn(Q,z,Z))});const D=y.bind(null,z,Z);return ne.push(D),F(ne).then(()=>{ne=[];for(const L of s.list())ne.push(dn(L,z,Z));return ne.push(D),F(ne)}).then(()=>{ne=go(re,"beforeRouteUpdate",z,Z);for(const L of re)L.updateGuards.forEach(Q=>{ne.push(dn(Q,z,Z))});return ne.push(D),F(ne)}).then(()=>{ne=[];for(const L of V)if(L.beforeEnter)if(Dt(L.beforeEnter))for(const Q of L.beforeEnter)ne.push(dn(Q,z,Z));else ne.push(dn(L.beforeEnter,z,Z));return ne.push(D),F(ne)}).then(()=>(z.matched.forEach(L=>L.enterCallbacks={}),ne=go(V,"beforeRouteEnter",z,Z,I),ne.push(D),F(ne))).then(()=>{ne=[];for(const L of o.list())ne.push(dn(L,z,Z));return ne.push(D),F(ne)}).catch(L=>Gt(L,8)?L:Promise.reject(L))}function M(z,Z,ne){a.list().forEach(se=>I(()=>se(z,Z,ne)))}function N(z,Z,ne,se,re){const V=k(z,Z);if(V)return V;const D=Z===rn,L=fr?history.state:{};ne&&(se||D?i.replace(z.fullPath,Ne({scroll:D&&L&&L.scroll},re)):i.push(z.fullPath,re)),c.value=z,G(z,Z,ne,D),j()}let E;function T(){E||(E=i.listen((z,Z,ne)=>{if(!pe.listening)return;const se=m(z),re=S(se);if(re){x(Ne(re,{replace:!0,force:!0}),se).catch(ui);return}l=se;const V=c.value;fr&&X0(cl(V.fullPath,ne.delta),Fs()),A(se,V).catch(D=>Gt(D,12)?D:Gt(D,2)?(x(Ne(C(D.to),{force:!0}),se).then(L=>{Gt(L,20)&&!ne.delta&&ne.type===Ei.pop&&i.go(-1,!1)}).catch(ui),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),O(D,se,V))).then(D=>{D=D||N(se,V,!1),D&&(ne.delta&&!Gt(D,8)?i.go(-ne.delta,!1):ne.type===Ei.pop&&Gt(D,20)&&i.go(-1,!1)),M(se,V,D)}).catch(ui)}))}let $=xr(),P=xr(),R;function O(z,Z,ne){j(z);const se=P.list();return se.length?se.forEach(re=>re(z,Z,ne)):console.error(z),Promise.reject(z)}function B(){return R&&c.value!==rn?Promise.resolve():new Promise((z,Z)=>{$.add([z,Z])})}function j(z){return R||(R=!z,T(),$.list().forEach(([Z,ne])=>z?ne(z):Z()),$.reset()),z}function G(z,Z,ne,se){const{scrollBehavior:re}=e;if(!fr||!re)return Promise.resolve();const V=!ne&&Y0(cl(z.fullPath,0))||(se||!ne)&&history.state&&history.state.scroll||null;return ks().then(()=>re(z,Z,V)).then(D=>D&&Q0(D)).catch(D=>O(D,z,Z))}const J=z=>i.go(z);let ee;const X=new Set,pe={currentRoute:c,listening:!0,addRoute:p,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:b,resolve:m,options:e,push:w,replace:h,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:P.add,isReady:B,install(z){const Z=this;z.component("RouterLink",Sb),z.component("RouterView",Rb),z.config.globalProperties.$router=Z,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>He(c)}),fr&&!ee&&c.value===rn&&(ee=!0,w(i.location).catch(re=>{}));const ne={};for(const re in rn)Object.defineProperty(ne,re,{get:()=>c.value[re],enumerable:!0});z.provide(Us,Z),z.provide(Ba,Id(ne)),z.provide(ma,c);const se=z.unmount;X.add(z),z.unmount=function(){X.delete(z),X.size<1&&(l=rn,E&&E(),E=null,c.value=rn,ee=!1,R=!1),se()}}};function F(z){return z.reduce((Z,ne)=>Z.then(()=>I(ne)),Promise.resolve())}return pe}function kb(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(l=>br(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>br(l,c))||i.push(c))}return[n,r,i]}function vt(){return Rt(Us)}function Tb(e){return Rt(Ba)}const Vi="https://i12a802.p.ssafy.io",ei=K(localStorage.getItem("token")),bo=K(localStorage.getItem("id")),xb=Ie(()=>!!ei.value);let Bi=!1;function Hs(){const e=vt(),t=async()=>{var o;try{const a=await De.get(Vi+"/api/auth/login/kakao/url");(o=a.data)!=null&&o.loginUrl?window.location.href=a.data.loginUrl:console.error("카카오 로그인 URL을 가져오지 못했습니다.")}catch(a){console.error("카카오 로그인 요청 중 오류 발생:",a)}},n=()=>new URLSearchParams(window.location.search).get("code"),r=async o=>{if(!Bi)try{Bi=!0;const a=await De.post(Vi+"/api/auth/login/kakao?code="+o);await i(a.data.accessToken);const c=window.location.href.split("?")[0];window.history.replaceState({},document.title,c),await e.push("/")}catch(a){console.error("로그인 요청 중 오류 발생:",a)}finally{Bi=!1}},i=async o=>{if(localStorage.setItem("token",o),ei.value=o,!localStorage.getItem("id"))try{const a=await fetch(Vi+"/api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const c=await a.json();bo.value=c.userId,localStorage.setItem("id",c.userId),localStorage.setItem("username",c.nickname)}catch(a){console.error("Profile loading failed:",a)}},s=async()=>{try{const o=await fetch(Vi+"/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);localStorage.removeItem("token"),localStorage.removeItem("id"),ei.value=null,bo.value=null}catch(o){console.error("Profile loading failed:",o)}await e.push("/"),window.location.reload()};return Ze(async()=>{if(!Bi){ei.value=localStorage.getItem("token"),bo.value=localStorage.getItem("id");const o=n();o&&await r(o)}}),{token:ei,isLoggedIn:xb,handleKakaoLogin:t,handleLogout:s,getAuthCode:n,sendKakaoLoginRequest:r}}const Yn="/assets/Harvard-QXnsY4wZ.jpg",Zn="/assets/Ib-edu-r77b4Uhw.jpg",er="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20400%20400'%3e%3c!--%20그라데이션%20정의%20--%3e%3cdefs%3e%3c!--%20토마토%20본체%20그라데이션%20--%3e%3cradialGradient%20id='tomatoGradient'%20cx='40%25'%20cy='40%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23ff8787'/%3e%3cstop%20offset='70%25'%20style='stop-color:%23ff6b6b'/%3e%3cstop%20offset='100%25'%20style='stop-color:%23fa5252'/%3e%3c/radialGradient%3e%3c!--%20잎사귀%20그라데이션%20--%3e%3clinearGradient%20id='leafGradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%2369db7c'/%3e%3cstop%20offset='100%25'%20style='stop-color:%2337b24d'/%3e%3c/linearGradient%3e%3c!--%20잎사귀%20그림자%20--%3e%3cfilter%20id='leafShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='2'/%3e%3cfeOffset%20dx='2'%20dy='2'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.3'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c!--%203D%20효과를%20위한%20필터%20--%3e%3cfilter%20id='shadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='5'/%3e%3cfeOffset%20dx='3'%20dy='3'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.2'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c!--%20그림자%20효과가%20있는%20본체%20--%3e%3cg%20filter='url(%23shadow)'%3e%3ccircle%20cx='200'%20cy='220'%20r='120'%20fill='url(%23tomatoGradient)'/%3e%3c/g%3e%3c!--%20토마토%20줄기와%20잎사귀%20--%3e%3cg%20filter='url(%23leafShadow)'%3e%3cpath%20d='M190%2085%20C170%2070,%20150%2085,%20170%20105%20C190%20125,%20210%2090,%20190%2085'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M210%2080%20C230%2065,%20250%2080,%20230%20100%20C210%20120,%20190%2085,%20210%2080'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M200%2075%20C220%2060,%20240%2075,%20220%2095%20C200%20115,%20180%2080,%20200%2075'%20fill='url(%23leafGradient)'/%3e%3c/g%3e%3c!--%203D%20효과를%20위한%20하이라이트%20--%3e%3cellipse%20cx='160'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3cellipse%20cx='240'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3c!--%20눈%20(입체적인%20버전)%20--%3e%3cg%3e%3c!--%20왼쪽%20눈%20--%3e%3cellipse%20cx='155'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='155'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='160'%20cy='185'%20r='6'%20fill='white'/%3e%3c!--%20오른쪽%20눈%20--%3e%3cellipse%20cx='245'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='245'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='250'%20cy='185'%20r='6'%20fill='white'/%3e%3c/g%3e%3c!--%20볼%20--%3e%3ccircle%20cx='140'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3ccircle%20cx='260'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3c!--%20입%20(부드러운%20버전)%20--%3e%3cpath%20d='M160%20235%20C180%20265,%20220%20265,%20240%20235'%20fill='%232b2b2b'%20opacity='0.7'/%3e%3cpath%20d='M165%20238%20C185%20268,%20215%20268,%20235%20238'%20fill='%23ff6b6b'/%3e%3cpath%20d='M170%20245%20C190%20265,%20210%20265,%20230%20245'%20fill='white'%20opacity='0.3'/%3e%3c!--%20추가적인%20하이라이트%20--%3e%3ccircle%20cx='180'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='220'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='200'%20cy='160'%20r='3'%20fill='white'%20opacity='0.4'/%3e%3c/svg%3e",tr="/assets/base-BSXWYRaa.css",nr="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNjAgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iaG90R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRjQxNkMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGNEIyQiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gQmFkZ2UgYmFja2dyb3VuZCAtLT4NCiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9InVybCgjaG90R3JhZGllbnQpIi8+DQogIA0KICA8IS0tIEZsYW1lIGljb24gLS0+DQogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsNCkiPg0KICAgIDxwYXRoIGQ9Ik03LDAgQzcsMCAxMSw0IDExLDggQzExLDEyIDcsMTQgNSwxNCBDMywxNCAwLDEyIDAsOCBDMCw0IDQsMCA0LDAgQzQsMCA1LjUsMiA3LDAiIA0KICAgICAgICAgIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiPg0KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgDQogICAgICAgICAgICAgICBkdXI9IjFzIiANCiAgICAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiANCiAgICAgICAgICAgICAgIHZhbHVlcz0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMDsNCiAgICAgICAgICAgICAgICAgICAgICAgTTcsMSBDNywxIDEyLDUgMTIsOSBDMTIsMTMgNywxNSA1LDE1IEMzLDE1IC0xLDEzIC0xLDkgQy0xLDUgNCwxIDQsMSBDNCwxIDUuNSwzIDcsMTsNCiAgICAgICAgICAgICAgICAgICAgICAgTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMCIvPg0KICAgIDwvcGF0aD4NCiAgPC9nPg0KICANCiAgPCEtLSBIT1QgdGV4dCAtLT4NCiAgPHRleHQgeD0iMzIiIHk9IjE2LjUiIA0KICAgICAgICBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIA0KICAgICAgICBmb250LXdlaWdodD0iYm9sZCIgDQogICAgICAgIGZvbnQtc2l6ZT0iMTIiIA0KICAgICAgICBmaWxsPSJ3aGl0ZSIgDQogICAgICAgIHRleHQtYW5jaG9yPSJtaWRkbGUiPg0KICAgIEhPVA0KICA8L3RleHQ+DQo8L3N2Zz4=",rr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='2500'%20height='2500'%20viewBox='0%200%20256%20256'%3e%3cpath%20d='M128%2036C70.562%2036%2024%2072.713%2024%20118c0%2029.279%2019.466%2054.97%2048.748%2069.477-1.593%205.494-10.237%2035.344-10.581%2037.689%200%200-.207%201.762.934%202.434s2.483.15%202.483.15c3.272-.457%2037.943-24.811%2043.944-29.04%205.995.849%2012.168%201.29%2018.472%201.29%2057.438%200%20104-36.712%20104-82%200-45.287-46.562-82-104-82z'/%3e%3cpath%20fill='%23FFE812'%20d='M70.5%20146.625c-3.309%200-6-2.57-6-5.73V105.25h-9.362c-3.247%200-5.888-2.636-5.888-5.875s2.642-5.875%205.888-5.875h30.724c3.247%200%205.888%202.636%205.888%205.875s-2.642%205.875-5.888%205.875H76.5v35.645c0%203.16-2.691%205.73-6%205.73zM123.112%20146.547c-2.502%200-4.416-1.016-4.993-2.65l-2.971-7.778-18.296-.001-2.973%207.783c-.575%201.631-2.488%202.646-4.99%202.646a9.155%209.155%200%200%201-3.814-.828c-1.654-.763-3.244-2.861-1.422-8.52l14.352-37.776c1.011-2.873%204.082-5.833%207.99-5.922%203.919.088%206.99%203.049%208.003%205.928l14.346%2037.759c1.826%205.672.236%207.771-1.418%208.532a9.176%209.176%200%200%201-3.814.827c-.001%200%200%200%200%200zm-11.119-21.056L106%20108.466l-5.993%2017.025h11.986zM138%20145.75c-3.171%200-5.75-2.468-5.75-5.5V99.5c0-3.309%202.748-6%206.125-6s6.125%202.691%206.125%206v35.25h12.75c3.171%200%205.75%202.468%205.75%205.5s-2.579%205.5-5.75%205.5H138zM171.334%20146.547c-3.309%200-6-2.691-6-6V99.5c0-3.309%202.691-6%206-6s6%202.691%206%206v12.896l16.74-16.74c.861-.861%202.044-1.335%203.328-1.335%201.498%200%203.002.646%204.129%201.772%201.051%201.05%201.678%202.401%201.764%203.804.087%201.415-.384%202.712-1.324%203.653l-13.673%2013.671%2014.769%2019.566a5.951%205.951%200%200%201%201.152%204.445%205.956%205.956%200%200%201-2.328%203.957%205.94%205.94%200%200%201-3.609%201.211%205.953%205.953%200%200%201-4.793-2.385l-14.071-18.644-2.082%202.082v13.091a6.01%206.01%200%200%201-6.002%206.003z'/%3e%3c/svg%3e",ir="/assets/%EC%86%8C%EA%B0%9C%ED%8E%98%EC%9D%B4%EC%A7%80-USY0SuCo.svg",Pb=["src"],Ab=Ae({__name:"KakaoLoginButton",props:{buttonColor:{},buttonRadius:{},buttonPadding:{},buttonFontSize:{},buttonTextColor:{},hasBorder:{type:Boolean},buttonBorder:{},buttonBorderColor:{},hoverColor:{}},emits:["click"],setup(e,{emit:t}){const{handleKakaoLogin:n}=Hs(),r=t,i=async()=>{r("click"),await n()},s=e,o=K(null),a=()=>{o.value&&s.hoverColor&&(o.value.style.backgroundColor=s.hoverColor)},c=()=>{o.value&&(o.value.style.backgroundColor=s.buttonColor||"",o.value.style.color=s.buttonTextColor||"")},l=u=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${u}`],import.meta.url).href;return(u,f)=>(U(),H("button",{class:"start-button",style:We({backgroundColor:u.buttonColor,borderRadius:u.buttonRadius,padding:u.buttonPadding,fontSize:u.buttonFontSize,color:u.buttonTextColor,border:u.hasBorder?u.buttonBorder:"none",borderColor:u.hasBorder?u.buttonBorderColor:"transparent"}),onClick:i,onMouseover:a,onMouseleave:c,ref_key:"buttonRef",ref:o},[d("img",{src:l("kakao.svg"),alt:"카카오 로그인",class:"kakao-icon"},null,8,Pb),f[0]||(f[0]=Ve(" 시작하기 "))],36))}}),ke=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},ja=ke(Ab,[["__scopeId","data-v-8f2cc1bc"]]),ti={LF:`
`,NULL:"\0"};class fn{constructor(t){const{command:n,headers:r,body:i,binaryBody:s,escapeHeaderValues:o,skipContentLengthHeader:a}=t;this.command=n,this.headers=Object.assign({},r||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=a||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}static fromRawFrame(t,n){const r={},i=s=>s.replace(/^\s+|\s+$/g,"");for(const s of t.headers.reverse()){s.indexOf(":");const o=i(s[0]);let a=i(s[1]);n&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(a=fn.hdrValueUnEscape(a)),r[o]=a}return new fn({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:n})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?fn.toUnit8Array(t,this._binaryBody).buffer:t+this._body+ti.NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const n of Object.keys(this.headers||{})){const r=this.headers[n];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${n}:${fn.hdrValueEscape(`${r}`)}`):t.push(`${n}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(ti.LF)+ti.LF+ti.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,n){const r=new TextEncoder().encode(t),i=new Uint8Array([0]),s=new Uint8Array(r.length+n.length+i.length);return s.set(r),s.set(n,r.length),s.set(i,r.length+n.length),s}static marshall(t){return new fn(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const wl=0,ji=10,Fi=13,Nb=58;class Mb{constructor(t,n){this.onFrame=t,this.onIncomingPing=n,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,n=!1){let r;if(typeof t=="string"?r=this._encoder.encode(t):r=new Uint8Array(t),n&&r[r.length-1]!==0){const i=new Uint8Array(r.length+1);i.set(r,0),i[r.length]=0,r=i}for(let i=0;i<r.length;i++){const s=r[i];this._onByte(s)}}_collectFrame(t){if(t!==wl&&t!==Fi){if(t===ji){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==Fi){if(t===ji){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==Fi){if(t===ji){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===Nb){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==Fi){if(t===ji){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(n=>n[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===wl){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Zt;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(Zt=Zt||(Zt={}));var Ct;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"})(Ct=Ct||(Ct={}));class ut{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}ut.V1_0="1.0";ut.V1_1="1.1";ut.V1_2="1.2";ut.default=new ut([ut.V1_2,ut.V1_1,ut.V1_0]);function Db(e,t){e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,i=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=o=>{const a=new Date().getTime()-r.getTime();t(`Discarded socket (#${i})  closed after ${a}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),s==null||s.call(e,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}class Lb{constructor(t,n,r){this._client=t,this._webSocket=n,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===ut.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const s=i.headers.subscription,o=this._subscriptions[s]||this.onUnhandledMessage,a=i,c=this,l=this._connectedVersion===ut.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(u={})=>c.ack(l,s,u),a.nack=(u={})=>c.nack(l,s,u),o(a)},RECEIPT:i=>{const s=this._receiptWatchers[i.headers["receipt-id"]];s?(s(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const t=new Mb(n=>{const r=fn.fromRawFrame(n,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=n=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data;this.debug(`<<< ${r}`)}t.parseChunk(n.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=n=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(n)},this._webSocket.onerror=n=>{this.onWebSocketError(n)},this._webSocket.onopen=()=>{const n=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),n["accept-version"]=this.stompVersions.supportedVersions(),n["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:n})}}_setupHeartbeat(t){if(t.version!==ut.V1_1&&t.version!==ut.V1_2||!t["heart-beat"])return;const[n,r]=t["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&r!==0){const i=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${i}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===Zt.OPEN&&(this._webSocket.send(ti.LF),this.debug(">>> PING"))},i)}if(this.heartbeatIncoming!==0&&n!==0){const i=Math.max(this.heartbeatIncoming,n);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const s=Date.now()-this._lastServerActivityTS;s>i*2&&(this.debug(`did not receive server activity for the last ${s}ms`),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Zt.CONNECTING||this._webSocket.readyState===Zt.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&Db(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:n,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=t,a=new fn({command:n,headers:r,body:i,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let c=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof c=="string"&&(c=new TextEncoder().encode(c)),typeof c!="string"||!this.splitLargeFrames)this._webSocket.send(c);else{let l=c;for(;l.length>0;){const u=l.substring(0,this.maxWebSocketChunkSize);l=l.substring(this.maxWebSocketChunkSize),this._webSocket.send(u),this.debug(`chunk sent = ${u.length}, remaining = ${l.length}`)}}}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,n=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(n)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Zt.CONNECTING||this._webSocket.readyState===Zt.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:n,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=t,a=Object.assign({destination:n},r);this._transmit({command:"SEND",headers:a,body:i,binaryBody:s,skipContentLengthHeader:o})}watchForReceipt(t,n){this._receiptWatchers[t]=n}subscribe(t,n,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=t,this._subscriptions[r.id]=n,this._transmit({command:"SUBSCRIBE",headers:r});const i=this;return{id:r.id,unsubscribe(s){return i.unsubscribe(r.id,s)}}}unsubscribe(t,n={}){n=Object.assign({},n),delete this._subscriptions[t],n.id=t,this._transmit({command:"UNSUBSCRIBE",headers:n})}begin(t){const n=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:n}});const r=this;return{id:n,commit(){r.commit(n)},abort(){r.abort(n)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,n,r={}){r=Object.assign({},r),this._connectedVersion===ut.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"ACK",headers:r})}nack(t,n,r={}){return r=Object.assign({},r),this._connectedVersion===ut.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"NACK",headers:r})}}class hp{constructor(t={}){this.stompVersions=ut.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Ct.INACTIVE;const n=()=>{};this.debug=n,this.beforeConnect=n,this.onConnect=n,this.onDisconnect=n,this.onUnhandledMessage=n,this.onUnhandledReceipt=n,this.onUnhandledFrame=n,this.onStompError=n,this.onWebSocketClose=n,this.onWebSocketError=n,this.logRawCommunication=!1,this.onChangeState=n,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}get webSocket(){var t;return(t=this._stompHandler)==null?void 0:t._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Ct.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}configure(t){Object.assign(this,t)}activate(){const t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Ct.ACTIVE),this._connect()};this.state===Ct.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}async _connect(){if(await this.beforeConnect(),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new Lb(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:n=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(n)},onDisconnect:n=>{this.onDisconnect(n)},onStompError:n=>{this.onStompError(n)},onWebSocketClose:n=>{this._stompHandler=void 0,this.state===Ct.DEACTIVATING&&this._changeState(Ct.INACTIVE),this.onWebSocketClose(n),this.active&&this._schedule_reconnect()},onWebSocketError:n=>{this.onWebSocketError(n)},onUnhandledMessage:n=>{this.onUnhandledMessage(n)},onUnhandledReceipt:n=>{this.onUnhandledReceipt(n)},onUnhandledFrame:n=>{this.onUnhandledFrame(n)}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}async deactivate(t={}){var s;const n=t.force||!1,r=this.active;let i;if(this.state===Ct.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Ct.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Zt.CLOSED){const o=this._stompHandler.onWebSocketClose;i=new Promise((a,c)=>{this._stompHandler.onWebSocketClose=l=>{o(l),a()}})}else return this._changeState(Ct.INACTIVE),Promise.resolve();return n?(s=this._stompHandler)==null||s.discardWebsocket():r&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,n){this._checkConnection(),this._stompHandler.watchForReceipt(t,n)}subscribe(t,n,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,n,r)}unsubscribe(t,n={}){this._checkConnection(),this._stompHandler.unsubscribe(t,n)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,n,r={}){this._checkConnection(),this._stompHandler.ack(t,n,r)}nack(t,n,r={}){this._checkConnection(),this._stompHandler.nack(t,n,r)}}const sr=Of("matching",{state:()=>({isMatching:!1,isMatched:!1,matchingDetails:{format:"",category:"",subject:"",matchedCount:0,participants:[],debateId:null,openviduToken:null},matchedCount:0,isExpanded:!0}),actions:{setFormat(e){this.matchingDetails={...this.matchingDetails,format:e}},setCategory(e){this.matchingDetails={...this.matchingDetails,category:e}},startMatching(){this.isMatching=!0,this.isMatched=!1,this.matchedCount=0},setMatchedCount(e){this.matchedCount=e,this.matchingDetails.matchedCount=e},cancelMatching(){this.isMatching=!1,this.isMatched=!1,this.clearMatching()},completeMatching(e,t){this.isMatching=!1,this.isMatched=!0,this.matchingDetails.subject=e,this.matchingDetails.participants=t},setDebateId(e){this.matchingDetails.debateId=e},setOpenviduToken(e){this.matchingDetails.openviduToken=e},clearMatching(){this.matchedCount=0,this.matchingDetails={format:"",category:"",subject:"",matchedCount:0,participants:[],debateId:null,openviduToken:null},this.isMatching=!1,this.isMatched=!1},toggleMatchingExpanded(){this.isExpanded=!this.isExpanded}}}),$b={class:"matching-status-container"},Vb={class:"matching-card"},Bb={class:"expanded-content"},jb={class:"header-section"},Fb={class:"header-main"},Ub={class:"category-info"},Hb={class:"category-title"},Wb={class:"status-info"},qb={class:"status-subtitle"},Gb={class:"participants-section"},zb={class:"participants-header"},Kb={class:"count"},Jb={class:"participants-list"},Qb={class:"progress-section"},Xb={class:"progress-container"},Yb={__name:"MatchingStatus",setup(e){const t="https://i12a802.p.ssafy.io",n="wss://i12a802.p.ssafy.io",r=sr(),i=K(localStorage.getItem("token")),s=vt(),o=K(0),a=K(!1),c=K(5);K(null);const l=K("POLITICS"),u=Ie(()=>r.matchingDetails||null),f=Ie(()=>r.matchedCount||0);console.log("matchingStore:",r),console.log("matchingStore.isMatching:",r.isMatching);const g=new hp({brokerURL:n+"/ws",connectHeaders:{Authorization:`Bearer ${i.value}`},debug:v=>console.log(v),reconnectDelay:5e3,onConnect:()=>{console.log("WebSocket Connected");const v=localStorage.getItem("id");g.subscribe(`/user/${v}/matching`,async m=>{const C=JSON.parse(m.body);switch(console.log("Received Message from matching topic:",C),console.log(C.messageType),C.messageType){case"MATCHING_UPDATE":C.payload&&C.payload.waitingUserCount!==void 0&&(console.log("Updated waiting user count:",C.payload.waitingUserCount),r.setMatchedCount(C.payload.waitingUserCount));break;case"MATCHING_SUCCESS":if(C.payload){r.setDebateId(C.payload.debateId),localStorage.setItem("openviduToken",C.payload.openviduToken),console.log("Authorization Token:",i.value);try{const k=await De.get(`${t}/api/debates/${C.payload.debateId}/room`,{headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"}}),w=k.data.subject,h=k.data.users.map(S=>({name:S.nickname,image:S.profileImageUrl}));console.log("response_p:",k.data.users),console.log(h),r.completeMatching(w,h),_(),g.deactivate()}catch(k){k.response&&k.response.status===401?console.error("Unauthorized. Please check your token."):console.error("Failed to fetch debate room information:",k)}}break;case"CANCEL_SUCCESS":C.payload&&(r.cancelMatching(),o.value=0,g.deactivate(),console.log("Matching cancelled successfully"));break;default:console.log("Unhandled message type:",C.messageType);break}}),g.publish({destination:`/pub/matching.join/${l.value}`,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"JOIN",payload:{userId:v}})})},onDisconnect:()=>console.log("WebSocket Disconnected")}),p=v=>{l.value=v,console.log("소켓 연결 시도"),g.activate()},_=()=>{a.value=!0,c.value=5;const v=setInterval(()=>{c.value>0?c.value--:(clearInterval(v),a.value=!1,s.push({name:"debatePrepare",params:{debateId:r.matchingDetails.debateId}}))},1e3)},b=()=>{const v=localStorage.getItem("id");if(!v){console.error("User ID not found");return}g.publish({destination:`/pub/matching.cancel/${l.value}`,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"CANCEL",payload:{userId:v}})})};return Ze(()=>{r.isMatching&&p(r.matchingDetails.category)}),(v,m)=>(U(),H("div",$b,[d("div",Vb,[d("div",Bb,[d("section",jb,[d("div",Fb,[d("div",Ub,[m[1]||(m[1]=d("span",{class:"label"},"주제 카테고리",-1)),d("h2",Hb,[Ve(q(u.value.category||"기본 카테고리")+" ",1),m[0]||(m[0]=d("span",{class:"emoji"},"🤔",-1))])]),d("div",Wb,[m[2]||(m[2]=d("h3",{class:"status-title"},"함께 토론할 친구를 찾고 있어요!",-1)),d("p",qb,q(u.value.format||"기본 형식")+" 토론을 위해 4명의 참가자가 필요해요 ",1)])])]),d("section",Gb,[d("div",zb,[m[3]||(m[3]=d("span",{class:"label"},"현재 매칭된 인원",-1)),d("span",Kb,q(f.value)+"/4명",1)]),d("div",Jb,[we(ym,{name:"participant"},{default:Pt(()=>[(U(!0),H(he,null,_e(o.value,(C,k)=>(U(),H("div",{key:k,class:ge(["participant",{active:C}])},q(C||"?"),3))),128))]),_:1})])]),d("div",Qb,[d("div",Xb,[d("div",{class:"progress-bar",style:We({width:`${f.value/4*100}%`})},null,4)])]),d("div",{class:"action-section"},[d("button",{onClick:b,class:"cancel-button"}," 매칭 취소하기 ")])])])]))}},Zb=ke(Yb,[["__scopeId","data-v-5620dd5f"]]),ey={class:"nav"},ty={class:"nav-container"},ny={class:"logo"},ry={class:"menu"},iy={class:"sidebar-footer"},sy={key:1,class:"login-container"},oy={__name:"Navigation",setup(e){const t=sr(),{isLoggedIn:n,handleLogout:r}=Hs(),i=()=>{t.toggleMatchingExpanded()};return(s,o)=>{const a=At("router-link");return U(),H(he,null,[d("nav",ey,[d("div",ty,[d("div",ny,[we(a,{to:"/",class:"home-link"},{default:Pt(()=>o[1]||(o[1]=[d("div",{class:"logo-circle"},[d("div",{class:"logo-inner-circle"}),d("div",{class:"logo-core"})],-1),d("span",{class:"logo-text"},"토마톡",-1)])),_:1})]),d("div",ry,[we(a,{to:"/practice-main",class:"menu-item"},{default:Pt(()=>o[2]||(o[2]=[Ve("토론 연습하기")])),_:1}),He(t).isMatching?(U(),H("div",{key:0,onClick:i,class:"menu-item matching-active"},o[3]||(o[3]=[d("span",null,"매칭 진행중",-1),d("div",{class:"matching-indicator"},null,-1)]))):(U(),yt(a,{key:1,to:"/debate-select",class:"menu-item"},{default:Pt(()=>o[4]||(o[4]=[Ve("실전 토론")])),_:1})),we(a,{to:"/debate-list",class:"menu-item"},{default:Pt(()=>o[5]||(o[5]=[Ve("토론 방청하기")])),_:1})]),d("div",iy,[He(n)?(U(),H("button",{key:0,class:"sidebar-auth-item",onClick:o[0]||(o[0]=(...c)=>He(r)&&He(r)(...c))},o[6]||(o[6]=[d("span",{class:"sidebar-text"}," 로그아웃 ",-1)]))):(U(),H("div",sy,[we(ja,{class:"action-button",buttonColor:"white",buttonRadius:"1.75rem",buttonPadding:"1rem 2.5rem",buttonFontSize:"1.125rem",buttonTextColor:"black",hasBorder:"true",buttonBorder:"0.125rem solid #ff6b6b",buttonBorderColor:"#ff6b6b",hoverColor:"#ff6b6b"})]))])])]),He(t).isMatching&&He(t).isExpanded?(U(),yt(Zb,{key:0})):Te("",!0)],64)}}},ay=ke(oy,[["__scopeId","data-v-879b80ab"]]),cy=["src"],ly=Ae({__name:"ProfileImage",props:{imageSrc:{},size:{}},setup(e){const t=Ie(()=>new URL("@/assets/defaultImage.svg",import.meta.url).href);return(n,r)=>(U(),H("div",{class:"profile-avatar",style:We({width:n.size+"px",height:n.size+"px"})},[d("img",{src:n.imageSrc||t.value,alt:"프로필 이미지",class:"profile-image",style:We({width:n.size+"px",height:n.size+"px"})},null,12,cy)],4))}}),uy=ke(ly,[["__scopeId","data-v-12f39c99"]]),dy={class:"profile-container"},fy={class:"profile-name"},py={key:0,class:"connector"},hy={class:"discussion-info"},vy={class:"info-content"},my={class:"timer-section"},gy={class:"timer-container"},by={class:"countdown"},yy={class:"timer-circle",viewBox:"0 0 50 50"},Ey={class:"timer-number"},_y={class:"auto-enter-text"},Sy=Ae({__name:"MatchingCompleteModal",props:{initialCountdown:{},debateId:{}},emits:["close","startDiscussion","resetMatching"],setup(e,{emit:t}){const n=sr(),r=e,i=t,s=K(r.initialCountdown),o=vt(),a=K([]),c=K("");return Ze(async()=>{c.value=n.matchingDetails.subject;const l=setInterval(()=>{s.value>0?s.value--:(clearInterval(l),i("startDiscussion"),i("resetMatching"),o.push({name:"debatePrepare",params:{debateId:r.debateId}}))},1e3)}),(l,u)=>(U(),yt(Na,{name:"modal"},{default:Pt(()=>[d("div",{class:"modal-overlay",onClick:u[1]||(u[1]=f=>l.$emit("close"))},[d("div",{class:"modal-content",onClick:u[0]||(u[0]=Ri(()=>{},["stop"]))},[u[5]||(u[5]=d("h3",{class:"modal-title"},"모든 참가자가 준비되었습니다",-1)),d("div",dy,[(U(!0),H(he,null,_e(a.value,(f,g)=>(U(),H(he,{key:f.name},[d("div",{class:ge(["profile-item",{"current-user":f.name==="YOU"}])},[we(uy,{src:f.image,size:50},null,8,["src"]),d("span",fy,q(f.name),1)],2),g<a.value.length-1?(U(),H("div",py)):Te("",!0)],64))),128))]),d("div",hy,[u[2]||(u[2]=d("span",{class:"info-label"},"토론 주제",-1)),d("p",vy,q(c.value),1)]),d("div",my,[u[4]||(u[4]=d("p",{class:"timer-text"},"잠시 후 토론이 시작됩니다",-1)),d("div",gy,[d("div",by,[(U(),H("svg",yy,[u[3]||(u[3]=d("circle",{class:"timer-circle-bg",r:"20",cx:"25",cy:"25"},null,-1)),d("circle",{class:"timer-circle-progress",r:"20",cx:"25",cy:"25",style:We({strokeDashoffset:`${(1-s.value/5)*125.6}px`})},null,4)])),d("span",Ey,q(s.value),1)])]),d("p",_y,q(s.value)+"초 후 자동 입장",1)])])])]),_:1}))}}),wy=ke(Sy,[["__scopeId","data-v-ef8a97e5"]]),Cy=Ae({name:"Footer"}),Iy={class:"footer"};function Ry(e,t,n,r,i,s){return U(),H("footer",Iy,t[0]||(t[0]=[d("div",{class:"footer-bottom"},[d("div",{class:"footer-links"},[d("a",{href:"#",class:"footer-link"},"이용약관"),d("a",{href:"#",class:"footer-link"},"개인정보처리방침")])],-1)]))}const Oy=ke(Cy,[["render",Ry],["__scopeId","data-v-cd1b449b"]]),ky={class:"app-container flex justify-center"},Ty={class:"app"},xy={key:0,class:"matching-modal"},Py=Ae({__name:"App",setup(e){const t=sr(),n=vt(),r=()=>{t.matchingDetails.participants=[],t.isMatching=!1,t.isMatched=!1,console.log("매칭 상태가 초기화되었습니다.")},i=K("김토론"),s=()=>{const u=t.matchingDetails.debateId;r(),n.push({name:"debatePrepare",params:{debateId:u}})},o=()=>{t.isMatched=!1},a=Tb(),c=["/debate/","/debate-prepare/"],l=Ie(()=>c.some(u=>a.path.startsWith(u)));return(u,f)=>{const g=At("router-view");return U(),H("div",ky,[d("div",Ty,[l.value?Te("",!0):(U(),yt(ay,{key:0,class:"nav"})),d("div",{class:ge(["app-content",{"no-navbar":l.value}])},[d("main",null,[we(g,{userName:i.value},null,8,["userName"])])],2),l.value?Te("",!0):(U(),yt(Oy,{key:1}))]),He(t).isMatched?(U(),H("div",xy,[we(wy,{initialCountdown:5,debateId:He(t).matchingDetails.debateId,participantsData:He(t).matchingDetails.participants,onClose:o,onStartDiscussion:s,onResetMatching:r},null,8,["debateId","participantsData"])])):Te("",!0)])}}}),Ay={class:"hero"},Ny={class:"hero-content"},My={class:"hero-buttons"},Dy=["src"],Ly=Ae({__name:"Hero",setup(e){const t=K(!1);Hs();const n=s=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${s}`],import.meta.url).href,r=()=>{t.value=!0},i=()=>{t.value=!1};return(s,o)=>{const a=At("router-link");return U(),H("section",Ay,[d("div",Ny,[o[1]||(o[1]=d("h1",{class:"hero-title"},[Ve(" 토론 실력을 키우는 "),d("span",{class:"highlight"},"가장 스마트한 방법")],-1)),o[2]||(o[2]=d("h2",{class:"hero-description"},[Ve(" 단계별 토론 연습부터 실전 토론까지,"),d("br"),Ve(" 성장의 달콤함을 지금 경험해보세요. ")],-1)),d("div",My,[we(ja,{class:"action-button",buttonColor:"white",buttonRadius:1.75,buttonPadding:"1rem 2.5rem",buttonFontSize:"1.125rem",buttonTextColor:"black",hasBorder:!0,buttonBorder:"0.125rem solid #ff6b6b",buttonBorderColor:"#ff6b6b",hoverColor:"#ff6b6b"}),we(a,{to:"/info",class:"action-button secondary-button"},{default:Pt(()=>o[0]||(o[0]=[Ve(" 더 알아보기 ")])),_:1})])]),d("div",{class:"character-section",onMouseenter:r,onMouseleave:i},[we(a,{to:"/info",class:"tori-character"},{default:Pt(()=>[d("img",{src:n("Tori.svg"),alt:"토리 이미지",class:"Tori"},null,8,Dy)]),_:1}),d("div",{class:ge(["hover-text",{"is-visible":t.value}])},o[3]||(o[3]=[en('<h3 data-v-81cffa6d>안녕하세요!🙌</h3><p data-v-81cffa6d><span class="no-wrap" data-v-81cffa6d>토론 마스터 클래스 <strong data-v-81cffa6d>토마톡</strong>의 리더 <span class="highlight" data-v-81cffa6d><strong data-v-81cffa6d>토리</strong></span>에요🍅 </span></p><p class="no-wrap" data-v-81cffa6d> 체계적인 토론 학습부터 실전 매칭까지, <br data-v-81cffa6d>당신의 성장을 <span class="highlight" data-v-81cffa6d><strong data-v-81cffa6d>토리</strong></span>가 함께할게요! </p>',3)]),2)],32)])}}}),$y=ke(Ly,[["__scopeId","data-v-81cffa6d"]]),Vy={class:"features"},By={class:"feature-cards"},jy={class:"feature-card"},Fy={class:"feature-header"},Uy={class:"feature-emoji"},Hy={class:"feature-title"},Wy={class:"feature-description"},qy=Ae({__name:"Features",setup(e){const t=[{emoji:"🤖",title:"AI 토론 연습",description:"AI 토론 연습으로 부담 없이 실력을 키워보세요"},{emoji:"🗣️",title:"실전 토론",description:"다양한 주제로 실제 토론을 경험해보세요"},{emoji:"📈",title:"성장 기록",description:"내 토론 스타일을 분석받고 발전시켜보세요"}];return(n,r)=>(U(),H("section",Vy,[r[0]||(r[0]=d("h2",{class:"section-title"},[Ve(" 여러분의 토론 실력 성장을 위한 "),d("br"),Ve("모든 과정을 지원해드려요 ")],-1)),d("div",By,[(U(),H(he,null,_e(t,i=>d("div",{class:"feature-card",key:i.title},[d("div",jy,[d("div",Fy,[d("span",Uy,q(i.emoji),1),d("h3",Hy,q(i.title),1)]),d("p",Wy,q(i.description),1)])])),64))])]))}}),Gy=ke(qy,[["__scopeId","data-v-75b7aa7c"]]),zy=Ae({name:"Curriculum",setup(){return{steps:[{step:1,emoji:"🎯",title:"토론 기초 다지기",features:["토론의 기본 규칙","논리적 사고 훈련","주장과 근거 구성"]},{step:2,emoji:"💡",title:"AI 토론 연습",features:["AI 토론봇과 1:1 토론","실시간 피드백"]},{step:3,emoji:"🎓",title:"실전 토론 도전",features:["실시간 매칭 토론","관중 피드백 시스템","토론 기록 분석"]}]}}}),Ky={class:"curriculum"},Jy={class:"steps"},Qy={class:"step-emoji"},Xy={class:"step-number"},Yy={class:"step-title"},Zy={class:"step-features"};function eE(e,t,n,r,i,s){return U(),H("section",Ky,[t[0]||(t[0]=d("h2",{class:"section-title"},"토론 마스터를 향한 체계적인 커리큘럼",-1)),d("div",Jy,[(U(!0),H(he,null,_e(e.steps,o=>(U(),H("div",{class:"step-card",key:o.step},[d("span",Qy,q(o.emoji),1),d("div",Xy,"STEP "+q(o.step),1),d("h3",Yy,q(o.title),1),d("ul",Zy,[(U(!0),H(he,null,_e(o.features,a=>(U(),H("li",{key:a},q(a),1))),128))])]))),128))])])}const tE=ke(zy,[["render",eE],["__scopeId","data-v-65f334ab"]]),nE={class:"cta"},rE={class:"cta-content"},iE={class:"button-wrapper"},sE=Ae({__name:"CallToAction",setup(e){return Hs(),(t,n)=>(U(),H("section",nE,[d("div",rE,[n[0]||(n[0]=d("h2",{class:"cta-title"},"지금 바로 시작하세요",-1)),n[1]||(n[1]=d("p",{class:"cta-description"},"토리와 함께 토론의 즐거움을 경험해보세요",-1)),d("div",iE,[we(ja,{class:"action-button",buttonColor:"white",buttonRadius:1.75,buttonPadding:"1rem 2.5",buttonFontSize:"1rem",buttonTextColor:"black",hasBorder:!0,buttonBorder:"0.125rem solid #ff6b6b",buttonBorderColor:"#ff6b6b",hoverColor:"#ff6b6b"})])])]))}}),vp=ke(sE,[["__scopeId","data-v-f9164539"]]),oE=Ae({name:"Home",components:{Hero:$y,Features:Gy,Curriculum:tE,CallToAction:vp}});function aE(e,t,n,r,i,s){const o=At("Hero"),a=At("Features"),c=At("Curriculum"),l=At("CallToAction");return U(),H("div",null,[we(o),we(a),we(c),we(l)])}const cE=ke(oE,[["render",aE]]),lE="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNjAgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iaG90R3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRjQxNkMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGNEIyQiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gQmFkZ2UgYmFja2dyb3VuZCAtLT4NCiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9InVybCgjaG90R3JhZGllbnQpIi8+DQogIA0KICA8IS0tIEZsYW1lIGljb24gLS0+DQogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsNCkiPg0KICAgIDxwYXRoIGQ9Ik03LDAgQzcsMCAxMSw0IDExLDggQzExLDEyIDcsMTQgNSwxNCBDMywxNCAwLDEyIDAsOCBDMCw0IDQsMCA0LDAgQzQsMCA1LjUsMiA3LDAiIA0KICAgICAgICAgIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiPg0KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgDQogICAgICAgICAgICAgICBkdXI9IjFzIiANCiAgICAgICAgICAgICAgIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiANCiAgICAgICAgICAgICAgIHZhbHVlcz0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMDsNCiAgICAgICAgICAgICAgICAgICAgICAgTTcsMSBDNywxIDEyLDUgMTIsOSBDMTIsMTMgNywxNSA1LDE1IEMzLDE1IC0xLDEzIC0xLDkgQy0xLDUgNCwxIDQsMSBDNCwxIDUuNSwzIDcsMTsNCiAgICAgICAgICAgICAgICAgICAgICAgTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMCIvPg0KICAgIDwvcGF0aD4NCiAgPC9nPg0KICANCiAgPCEtLSBIT1QgdGV4dCAtLT4NCiAgPHRleHQgeD0iMzIiIHk9IjE2LjUiIA0KICAgICAgICBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIA0KICAgICAgICBmb250LXdlaWdodD0iYm9sZCIgDQogICAgICAgIGZvbnQtc2l6ZT0iMTIiIA0KICAgICAgICBmaWxsPSJ3aGl0ZSIgDQogICAgICAgIHRleHQtYW5jaG9yPSJtaWRkbGUiPg0KICAgIEhPVA0KICA8L3RleHQ+DQo8L3N2Zz4=";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ui={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=({size:e,strokeWidth:t=2,absoluteStrokeWidth:n,color:r,iconNode:i,name:s,class:o,...a},{slots:c})=>Pe("svg",{...Ui,width:e||Ui.width,height:e||Ui.height,stroke:r||Ui.stroke,"stroke-width":n?Number(t)*24/Number(e):t,class:["lucide",`lucide-${uE(s??"icon")}`],...a},[...i.map(l=>Pe(...l)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=(e,t)=>(n,{slots:r})=>Pe(dE,{...n,iconNode:t,name:e},r);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Ti("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Ti("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=Ti("GraduationCapIcon",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=Ti("SwordIcon",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Ti("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),gE={class:"debate-container"},bE={class:"cards-container"},yE={class:"cards-wrapper"},EE=["onMouseenter"],_E={class:"card-header"},SE={class:"badges-container"},wE={key:0,src:lE,alt:"HOT",class:"hot-badge"},CE={class:"viewers-count"},IE={class:"category"},RE={class:"debate-title"},OE=["onClick"],kE=Ae({__name:"HotDebate",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(null),i=vt(),s=Ie(()=>[...n.value].sort((u,f)=>f.spectatorsCount-u.spectatorsCount)),o=(u,f)=>{const g=[{x:0,z:40,scale:1.1},{x:-250,z:20,scale:.95},{x:250,z:20,scale:.9}],p=r.value===u.debateId,_=r.value!==null,b=g[f];return p?{transform:`
        translate3d(${b.x}px, -2rem, 100px)
        scale(${b.scale*1.05})
        rotate3d(0, 1, 0, 0deg)
      `,zIndex:30}:_?{transform:`
        translate3d(${b.x}px, 0, ${b.z-20}px)
        scale(${b.scale*.95})
        rotate3d(0, 1, 0, ${f===1?10:f===2?-10:0}deg)
      `,zIndex:f===0?20:10}:{transform:`
      translate3d(${b.x}px, 0, ${b.z}px)
      scale(${b.scale})
      rotate3d(0, 1, 0, ${f===0?0:f===1?10:-10}deg)
    `,zIndex:f===0?20:10,opacity:1}},a=async()=>{try{const u=await De.get(t+"/api/debates",{params:{cursor:9007199254740991,size:3,status:"IN_PROGRESS",sortBy:"POPULARITY"}});n.value=u.data.content}catch(u){console.error("인기 토론을 불러오지 못했습니다:",u)}},c=u=>({POLITICS:"정치/국제",ECONOMY:"경제/노동",ETHICS:"윤리/법",SCIENCE:"과학/기술",EDUCATION:"교육/사회"})[u]||u,l=u=>{i.push(`/debate/${u}`)};return Ze(()=>{a()}),(u,f)=>(U(),H("div",gE,[f[1]||(f[1]=d("h2",{class:"title"},"🔥많은 사람들이 방청 중인 토론이에요!",-1)),d("div",bE,[d("div",yE,[(U(!0),H(he,null,_e(s.value,(g,p)=>(U(),H("div",{key:g.debateId,class:"card-position",style:We(o(g,p)),onMouseenter:_=>r.value=g.debateId,onMouseleave:f[0]||(f[0]=_=>r.value=null)},[d("div",{class:ge(["debate-card",r.value===g.debateId?"hovered":""])},[d("div",{class:ge(["rank-badge",p===0?"rank-first":""])},q(p+1),3),d("div",_E,[d("div",SE,[p===0?(U(),H("img",wE)):Te("",!0)]),d("div",CE,[we(He(mE),{size:16}),d("span",null,q(g.spectatorsCount)+"명",1)])]),d("div",IE,q(c(g.category)),1),d("h3",RE,q(g.subject),1),d("button",{class:ge(["join-button",r.value===g.debateId?"hovered":""]),onClick:_=>l(g.debateId)}," 방청하기 ",10,OE)],2)],44,EE))),128))])])]))}}),TE=ke(kE,[["__scopeId","data-v-4c8bc2f5"]]),xE={class:"debate-container"},PE={class:"content-wrapper"},AE={class:"bubbles-container"},NE=["onClick"],ME={class:"bubble-content"},DE={class:"category-name"},LE={class:"debate-count"},$E={class:"debates-container"},VE={class:"debate-list"},BE={key:0,class:"loading"},jE={key:1,class:"error-message"},FE={class:"debate-label"},UE={class:"debate-title"},HE={class:"participants"},WE=["onClick"],qE={key:0,class:"loading"},GE={key:1,class:"empty-state"},zE=Ae({__name:"DebateCategories",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(!0),i=K(!1),s=K(null),o=K(null),a=K(5),c=K("POLITICS"),l=K(null),u=[{value:"POLITICS",label:"정치",color:"#ff6b6b"},{value:"ECONOMY",label:"경제",color:"#ffd43b"},{value:"ETHICS",label:"윤리",color:"#69db7c"},{value:"SCIENCE",label:"과학",color:"#4dabf7"},{value:"EDUCATION",label:"사회",color:"#748ffc"}],f=async k=>{try{console.log(`Connecting to debate: ${k}`),window.location.href="/debate"}catch(w){console.error("Failed to connect to debate:",w)}},g=async(k=!1)=>{try{if(!c.value)return;k?i.value=!0:r.value=!0;const h=(await De.get(t+"/api/debates",{params:{cursor:o.value,size:a.value,status:"IN_PROGRESS",categories:c.value}})).data.content;h&&h.length>0&&(o.value=Number(h[h.length-1].debateId),n.value=k?[...n.value,...h]:h)}catch{s.value="토론 목록을 불러오지 못했습니다."}finally{r.value=!1,i.value=!1}},p=Ie(()=>{const k={};return u.forEach(w=>{k[w.value]={debateCount:0}}),n.value.forEach(w=>{k[w.category]&&k[w.category].debateCount++}),k}),_=k=>k.toLocaleString("ko-KR"),b=()=>{const k=u.find(w=>w.value===c.value);return k?k.label:"전체"},v=k=>{c.value=k,g()};let m=null;const C=()=>{l.value&&(m=new IntersectionObserver(k=>{k.forEach(w=>{w.isIntersecting&&n.value.length>=a.value&&g(!0)})},{threshold:1}),m.observe(l.value))};return Ze(()=>{C()}),Ci(()=>{m&&l.value&&m.unobserve(l.value)}),(k,w)=>(U(),H("div",xE,[w[0]||(w[0]=d("h2",{class:"title"},"🎯 진행 중인 토론을 주제별로 모아놨어요",-1)),d("div",PE,[d("div",AE,[(U(),H(he,null,_e(u,h=>{var S;return d("div",{key:h.value,class:ge(["category-bubble",{selected:c.value===h.value}]),onClick:x=>v(h.value)},[d("div",ME,[d("span",DE,q(h.label),1),d("span",LE,q(((S=p.value[h.value])==null?void 0:S.debateCount)||0)+"개 진행중",1)])],10,NE)}),64))]),d("div",$E,[c.value?(U(),H(he,{key:0},[d("div",VE,[r.value?(U(),H("div",BE," 토론 목록을 불러오는 중... ")):s.value?(U(),H("div",jE,q(s.value),1)):(U(!0),H(he,{key:2},_e(n.value,h=>(U(),H("div",{key:h.debateId,class:"debate-item"},[d("span",FE,q(b()),1),d("span",UE,q(h.subject),1),d("span",HE,q(_(h.spectatorsCount))+"명 참여",1),d("button",{onClick:S=>f(h.debateId),class:"enter-button"}," 방청하기 ",8,WE)]))),128))]),d("div",{ref_key:"sentinel",ref:l},null,512),i.value?(U(),H("div",qE," 추가 토론 목록을 불러오는 중... ")):Te("",!0)],64)):(U(),H("div",GE,"카테고리를 선택해주세요"))])])]))}}),KE=ke(zE,[["__scopeId","data-v-1e4cbef6"]]),JE={class:"container mx-auto px-4 py-8"},QE=Ae({__name:"DebateExplorer",setup(e){const t=K(null),n=K(0),r=K([{id:"politics",name:"정치",activeDebateCount:5,color:"#4A90E2"},{id:"economics",name:"경제",activeDebateCount:3,color:"#50E3C2"},{id:"society",name:"사회",activeDebateCount:4,color:"#F5A623"},{id:"science",name:"과학",activeDebateCount:2,color:"#7ED321"}]);Ze(async()=>{t.value={id:"1",title:"AI 기술 발전이 일자리에 미치는 영향",category:"technology",duration:0,spectatorCount:38,participants:0,startTime:"2024-02-15T15:00:00",endTime:""},n.value=152});const i=o=>{console.log(`Spectating debate: ${o}`)},s=o=>{console.log(`Selected category: ${o}`)};return(o,a)=>(U(),H("main",JE,[we(TE,{"hot-debate":t.value,"total-spectators":n.value,onSpectate:i},null,8,["hot-debate","total-spectators"]),we(KE,{categories:r.value,onSelectCategory:s},null,8,["categories"])]))}}),XE={class:"dashboard"},YE={class:"welcome-section"},ZE={class:"welcome-content"},e_={class:"tori-character"},t_=["src"],n_={class:"welcome-text"},r_={class:"progress-stats-section"},i_={class:"progress-stats-wrapper"},s_={class:"stages-section"},o_={class:"stages-row"},a_={class:"stage-item"},c_={class:"stage-info"},l_={class:"stage-title"},u_={class:"stage-progress"},d_={class:"stats-row"},f_={class:"stat-title"},p_=["onClick"],h_={class:"stat-subtext"},v_=Ae({__name:"MainView",setup(e){const t=vt(),n=f=>{t.push(`/stats/${f}`)},r=f=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${f}`],import.meta.url).href,i=K(localStorage.getItem("username")||"김토론"),s=K({debateCount:24,winRate:67,feedbackCount:42,weeklyDebateIncrease:3,percentileRank:30,newFeedbacks:2}),o=K([{key:"debate-count",title:"참여한 토론",value:`${s.value.debateCount}회`,subtext:`지난 주 대비 +${s.value.weeklyDebateIncrease}회`},{key:"score",title:"점수",value:`${s.value.winRate}점`,subtext:`상위 ${s.value.percentileRank}%`},{key:"feedback",title:"받은 피드백",value:`${s.value.feedbackCount}개`,subtext:`새 피드백 +${s.value.newFeedbacks}개`}]),a=K([{title:"기본기",progress:"3/3 완료",status:"completed"},{title:"실전 연습",progress:"2/5 진행중",status:"current"},{title:"실전 토론",progress:"0/3 준비중",status:"locked"}]),c=f=>{switch(f){case"completed":return"#FF6B6B";case"current":return"#FF6B6B";default:return"#F6F6F6"}},l=f=>f==="locked"?"#111827":"#FFFFFF",u=f=>a.value[f].status==="completed"?"#FF6B6B":"#F6F6F6";return K([{title:"AI 토론 연습 시작하기",subtitle:"현재 진행중인 연습: 28명"},{title:"실전 토론 참여하기",subtitle:"대기 중인 토론: 5개"},{title:"토론 구경하기",subtitle:"현재 진행중: 12개"}]),K([{title:"AI 기술 발전이 일자리에 미치는 영향",level:"중급 토론",spectators:38},{title:"환경보호를 위한 개인의 실천방안",level:"고급 토론",spectators:27}]),(f,g)=>(U(),H("main",XE,[d("section",YE,[d("div",ZE,[d("div",e_,[d("img",{src:r("Tori.svg"),alt:"토리 이미지",class:"Tori"},null,8,t_)]),d("div",n_,[d("h2",null,q(i.value)+"님, 중급 토론가까지 앞으로 2단계!",1),g[0]||(g[0]=d("p",null," 오늘도 열심히 해봐요 💪 토론 실력이 날이 갈수록 좋아지고 있어요! ",-1))])])]),d("section",r_,[d("div",i_,[d("div",s_,[d("div",o_,[(U(!0),H(he,null,_e(a.value,(p,_)=>(U(),H(he,{key:_},[d("div",a_,[d("div",{class:"stage-circle",style:We({backgroundColor:c(p.status)})},[d("div",{class:"stage-number",style:We({color:l(p.status)})},q(_+1),5)],4),d("div",c_,[d("div",l_,q(p.title),1),d("div",u_,q(p.progress),1)])]),_<a.value.length-1?(U(),H("div",{key:0,class:"stage-connector",style:We({backgroundColor:u(_)})},null,4)):Te("",!0)],64))),128))])]),g[1]||(g[1]=d("div",{class:"vertical-divider"},null,-1)),d("div",d_,[(U(!0),H(he,null,_e(o.value,p=>(U(),H("div",{key:p.key,class:"stat-item"},[d("div",f_,q(p.title),1),d("button",{class:"stat-value",onClick:_=>n(p.key)},q(p.value),9,p_),d("div",h_,q(p.subtext),1)]))),128))])])]),we(QE)]))}}),m_=ke(v_,[["__scopeId","data-v-ba5c72b5"]]),g_="/assets/Harvard-QXnsY4wZ.jpg",b_="/assets/Ib-edu-r77b4Uhw.jpg",y_={class:"future-education-container"},E_={class:"cases-section"},__={class:"case-card"},S_={class:"case-image"},w_={class:"image-container harvard-image"},C_=["src"],I_={class:"case-card"},R_={class:"case-image"},O_={class:"image-container ib-image"},k_=["src"],T_={__name:"Introduce",setup(e){return(t,n)=>(U(),H("div",y_,[n[4]||(n[4]=d("div",{class:"hero-section"},[d("h1",{class:"main-heading"},[Ve(" 미래 교육의 핵심, "),d("span",{class:"highlight"},"토론으로 시작하세요")]),d("p",{class:"sub-heading"}," 세계는 이미 토론 중심 교육으로 변화하고 있습니다 ")],-1)),d("div",E_,[d("div",__,[d("div",S_,[d("div",w_,[d("img",{src:He(g_),alt:"Harvard",style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,C_)]),n[0]||(n[0]=d("div",{class:"overlay-gradient"},null,-1))]),n[1]||(n[1]=en('<div class="case-content"><div class="case-badge">World Leading University</div><h2>하버드 대학교</h2><div class="stats-container"><div class="stat-item"><span class="stat-number">80</span><span class="stat-label">%</span></div><div class="stat-description"><p>수업이 토론으로 진행됩니다</p><p class="detail-text"> 비판적 사고와 문제해결 능력 개발에 초점을 맞춥니다 </p></div></div></div>',1))]),d("div",I_,[d("div",R_,[d("div",O_,[d("img",{src:He(b_),alt:"Harvard",style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,k_)]),n[2]||(n[2]=d("div",{class:"overlay-gradient"},null,-1))]),n[3]||(n[3]=en('<div class="case-content"><div class="case-badge">Global Education Programme</div><h2>IB 교육과정</h2><div class="stats-container"><div class="stat-icon"><div class="icon-circle">ToK</div></div><div class="stat-description"><p>Theory of Knowledge</p><p class="detail-text"> 체계적인 토론과 비판적 사고 학습을 통해 미래 인재를 양성합니다 </p></div></div></div>',1))])]),n[5]||(n[5]=en('<div class="korea-section"><h2 class="section-title"> 2025년, 한국 교육의 새로운 전환이 시작됩니다 </h2><div class="news-cards"><div class="news-card"><div class="news-content"><div class="news-marker"></div><div class="news-text"><h3>교육부, 2025년까지 전국 100개교<br>IB 도입 추진</h3><p class="news-date">연합뉴스 2024.01</p></div><span class="arrow-icon">→</span></div></div><div class="news-card"><div class="news-content"><div class="news-marker"></div><div class="news-text"><h3>경기도교육청, IB 교육과정<br>확대 시행</h3><p class="news-date">한국경제 2024.02</p></div><span class="arrow-icon">→</span></div></div></div></div><div class="cta-section"><h2>토론 중심 교육으로의 전환, 함께 시작하세요</h2></div>',2))]))}},x_={class:"tomatalk-container"},P_={class:"features-grid"},A_=["onMouseenter","onClick"],N_={class:"preview-area"},M_={class:"content-area"},D_={class:"card-title"},L_={class:"card-description"},$_={class:"card-description"},V_={class:"action-button"},B_=Ae({__name:"ServiceDescription",setup(e){const t=Ae({name:"DebatePreview",setup(){return()=>Pe("div",{class:"debate-preview"},[Pe("div",{class:"message-box ai-message"},[Pe("div",{class:"message-content"},'안녕하세요! 오늘의 토론 주제는 "AI 윤리"입니다.')]),Pe("div",{class:"message-box user-message"},[Pe("div",{class:"message-content"},"AI 발전이 인류에게 미치는 영향에 대해 논의해볼까요?")])])}}),n=Ae({name:"LiveDebatePreview",setup(){return()=>Pe("div",{class:"live-debate-preview"},[Pe("div",{class:"video-grid"},[...Array(4).fill(null).map((l,u)=>Pe("div",{key:u,class:"video-box"}))])])}}),r=Ae({name:"WatchingPreview",setup(){return()=>Pe("div",{class:"watching-preview"},[Pe("div",{class:"debate-item"},[Pe("div",{class:"debate-title"},"기후변화와 경제발전"),Pe("div",{class:"debate-status"},"LIVE"),Pe("div",{class:"debate-participants"},"참여자 12명")]),Pe("div",{class:"debate-item"},[Pe("div",{class:"debate-title"},"교육 평가 방식의 변화"),Pe("div",{class:"debate-status"},"LIVE"),Pe("div",{class:"debate-participants"},"참여자 8명")])])}}),i=Ae({name:"MyPagePreview",setup(){return()=>Pe("div",{class:"mypage-preview"},[Pe("div",{class:"stats-section"},[Pe("h4",null,"토론 참여 현황"),Pe("div",{class:"stats-graph"})]),Pe("div",{class:"certificate-section"},[Pe("div",{class:"certificate-icon"}),Pe("div",{class:"certificate-info"},[Pe("div",{class:"certificate-title"},"토론왕 인증서"),Pe("div",{class:"certificate-date"},"2024.02.16 획득")])])])}}),s=K(null);K(!1);const o=K(!0),a=K([{title:"토론 연습",description1:"AI 토리와 함께하는",description2:"1:1 맞춤형 토론 연습",buttonText:"연습 시작하기",preview:t},{title:"실전 토론",description1:"다른 사용자들과 함께하는",description2:"실시간 화상 토론",buttonText:"토론 참여하기",preview:n},{title:"진행 중인 토론",description1:"실시간으로 진행되는",description2:"토론 구경하기",buttonText:"구경하기",preview:r},{title:"마이페이지",description1:"나의 토론 기록과",description2:"실력 인증서 확인",buttonText:"기록 보기",preview:i}]),c=l=>{console.log(`Clicked feature: ${l.title}`)};return Ze(()=>{o.value=!0}),(l,u)=>(U(),H("div",x_,[u[2]||(u[2]=d("div",{class:"header-section"},[d("h1",{class:"title-text"},"토마톡에서 경험하는 토론 학습")],-1)),d("div",P_,[(U(!0),H(he,null,_e(a.value,(f,g)=>(U(),H("div",{key:f.title,class:ge(["feature-card",{hovered:s.value===g}]),onMouseenter:p=>s.value=g,onMouseleave:u[0]||(u[0]=p=>s.value=null),onClick:p=>c(f)},[d("div",N_,[(U(),yt(ov(f.preview)))]),d("div",M_,[d("h3",D_,q(f.title),1),d("p",L_,q(f.description1),1),d("p",$_,q(f.description2),1),d("button",V_,[d("span",null,q(f.buttonText),1),u[1]||(u[1]=d("span",{class:"arrow-icon"},"→",-1))])])],42,A_))),128))])]))}}),j_=ke(B_,[["__scopeId","data-v-ad89dfc1"]]),F_={class:"journey-container"},U_={class:"step-circle"},H_={class:"step-number"},W_={class:"step-icon"},q_={class:"step-card"},G_={class:"card-header"},z_={class:"subtitle"},K_={class:"content-box"},J_=Ae({__name:"CurriculumnInfo",setup(e){const t=[{number:1,title:"기초 다지기",subtitle:"토리와 첫 토론 시작",points:["토론의 기본 구조 이해하기","주장과 근거 구성 연습하기"],icon:"📚",color:"#4F46E5"},{number:2,title:"실전 연습",subtitle:"AI와 함께하는 토론",points:["반론 전략 학습하기","논리적 사고력 훈련하기"],icon:"🤖",color:"#7C3AED"},{number:3,title:"실전 토론",subtitle:"다른 유저와 토론",points:["실시간 토론에 참여하기","발언 분석 레포트로 피드백 받기"],icon:"👥",color:"#EC4899"}],n=K(!1);return Ze(()=>{const r=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(n.value=!0,r.disconnect())})},{threshold:.2}),i=document.querySelector(".journey-container");i&&r.observe(i)}),(r,i)=>(U(),H("div",F_,[i[1]||(i[1]=d("div",{class:"title-section"},[d("h1",null,"토론 마스터가 되는 여정"),d("p",null,"4단계 학습을 통해 토론 실력을 체계적으로 키워보세요")],-1)),d("div",{class:ge(["timeline",{"timeline-visible":n.value}])},[i[0]||(i[0]=d("div",{class:"progress-line"},null,-1)),(U(),H(he,null,_e(t,(s,o)=>d("div",{key:o,class:"journey-step",style:We({"--step-delay":`${.2*(o+1)}s`,"--step-color":s.color})},[d("div",U_,[d("span",H_,q(s.number),1),d("span",W_,q(s.icon),1)]),d("div",q_,[d("div",G_,[d("h2",null,q(s.title),1),d("p",z_,q(s.subtitle),1)]),d("div",K_,[d("ul",null,[(U(!0),H(he,null,_e(s.points,(a,c)=>(U(),H("li",{key:c},q(a),1))),128))])])])],4)),64))],2)]))}}),Q_=ke(J_,[["__scopeId","data-v-dc555703"]]),X_=Ae({name:"Info",components:{Introduce:T_,ServiceDescription:j_,CurriculumnInfo:Q_,CallToAction:vp}});function Y_(e,t,n,r,i,s){const o=At("Introduce"),a=At("ServiceDescription"),c=At("CurriculumnInfo"),l=At("CallToAction");return U(),H("div",null,[we(o),we(a),we(c),we(l)])}const Z_=ke(X_,[["render",Y_]]),e1={class:"module-item"},t1={class:"module-content"},n1={class:"icon-container"},r1={class:"info-container"},i1={class:"title-row"},s1={key:0,class:"status completed"},o1={key:1,class:"status locked"},a1={class:"description"},c1={key:0,class:"progress-container"},l1={class:"progress-bar"},u1={class:"progress-footer"},d1={class:"progress-text"},f1={class:"button-container"},p1=Ae({__name:"ModuleItem",props:{title:{},description:{},progress:{},completed:{type:Boolean,default:!1},locked:{type:Boolean,default:!1},targetUrl:{default:"/prep/explain"}},setup(e){const t=vt(),n=e,r=Ie(()=>n.completed?"다시 학습하기":n.progress>0?"이어서 학습하기":"학습 시작하기");function i(){if(n.locked){alert("아직 준비중 입니다.");return}t.push(n.targetUrl)}return(s,o)=>(U(),H("div",e1,[d("div",t1,[d("div",n1,[we(He(fE),{size:20,class:"icon"})]),d("div",r1,[d("div",i1,[d("h4",null,q(s.title),1),s.completed?(U(),H("div",s1,"완료")):Te("",!0),s.locked?(U(),H("div",o1,"잠김")):Te("",!0)]),d("p",a1,q(s.description),1),s.locked?Te("",!0):(U(),H("div",c1,[d("div",l1,[d("div",{class:"progress-fill",style:We({width:`${s.progress}%`})},null,4)]),d("div",u1,[d("div",d1,q(s.progress)+"% 완료",1)])])),d("div",f1,[d("button",{class:ge(["action-button",{completed:s.completed,"in-progress":!s.completed&&s.progress>0,"not-started":!s.completed&&s.progress===0,disabled:s.locked}]),onClick:i},[Ve(q(r.value)+" ",1),we(He(pE),{size:16})],2)])])])]))}}),lr=ke(p1,[["__scopeId","data-v-3346c102"]]),h1={class:"preview-section"},v1={class:"chat-container"},m1={class:"chat-message tori"},g1=["src"],b1={class:"chat-message tori"},y1=["src"],E1={class:"modal-footer"},_1={__name:"PreviewModal",emits:["close"],setup(e){const t=n=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${n}`],import.meta.url).href;return(n,r)=>(U(),H("div",{class:"modal-overlay",onClick:r[2]||(r[2]=i=>n.$emit("close"))},[d("div",{class:"modal-content",onClick:r[1]||(r[1]=Ri(()=>{},["stop"]))},[r[6]||(r[6]=d("h2",null,"토리와 함께하는 토론 미리보기",-1)),d("div",h1,[d("div",v1,[d("div",m1,[d("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,g1),r[3]||(r[3]=d("div",{class:"message"}," 안녕하세요! 저는 토론 코치 토리입니다. 교복 자율화에 대해 어떻게 생각하시나요? 그 이유도 함께 말씀해주세요. ",-1))]),r[5]||(r[5]=d("div",{class:"chat-message user"},[d("div",{class:"avatar"},"나"),d("div",{class:"message"}," 저는 교복 자율화에 찬성합니다. 학생들이 자유롭게 옷을 선택하면서 개성을 표현하고 자율성을 기를 수 있다고 생각해요. ")],-1)),d("div",b1,[d("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,y1),r[4]||(r[4]=d("div",{class:"message"}," 말씀하신 의견을 뒷받침할 수 있는 구체적인 사례나 경험을 들어 설명해주실 수 있나요? ",-1))])])]),r[7]||(r[7]=en('<div class="explanation-section" data-v-a0e01801><h3 data-v-a0e01801>토론은 4단계로 진행됩니다</h3><ul data-v-a0e01801><li data-v-a0e01801><span class="step" data-v-a0e01801>1</span><div class="step-content" data-v-a0e01801><strong data-v-a0e01801>주장 세우기</strong><p data-v-a0e01801>주제에 대한 자신의 입장과 이유를 설명합니다</p></div></li><li data-v-a0e01801><span class="step" data-v-a0e01801>2</span><div class="step-content" data-v-a0e01801><strong data-v-a0e01801>근거 찾기</strong><p data-v-a0e01801>구체적인 사례나 경험을 통해 주장을 뒷받침합니다</p></div></li><li data-v-a0e01801><span class="step" data-v-a0e01801>3</span><div class="step-content" data-v-a0e01801><strong data-v-a0e01801>다른 관점 고려하기</strong><p data-v-a0e01801>반대 입장의 우려사항과 해결방안을 생각합니다</p></div></li><li data-v-a0e01801><span class="step" data-v-a0e01801>4</span><div class="step-content" data-v-a0e01801><strong data-v-a0e01801>주장 강화하기</strong><p data-v-a0e01801>지금까지의 대화를 바탕으로 자신의 입장을 다시 정리합니다</p></div></li></ul></div>',1)),d("div",E1,[d("button",{class:"close-button",onClick:r[0]||(r[0]=i=>n.$emit("close"))},"알겠습니다")])])]))}},S1=ke(_1,[["__scopeId","data-v-a0e01801"]]),w1={class:"modal-header"},C1={class:"stance-section"},I1={class:"stance-options"},R1={class:"overview-section"},O1={class:"overview-content"},k1={class:"main-points"},T1={class:"references"},x1={class:"modal-footer"},P1=["disabled"],A1={__name:"PrepareModal",props:{topic:{type:Object,required:!0}},emits:["close","start"],setup(e,{emit:t}){const n=e,r=t,i=K(""),s=()=>{i.value&&(r("start",n.topic.id,i.value),r("close"))};return(o,a)=>(U(),H("div",{class:"modal-overlay",onClick:a[4]||(a[4]=c=>o.$emit("close"))},[d("div",{class:"modal-content",onClick:a[3]||(a[3]=Ri(()=>{},["stop"]))},[d("div",w1,[a[5]||(a[5]=d("h2",null,"토론 준비하기",-1)),d("p",null,q(e.topic.title),1),d("button",{class:"close-button",onClick:a[0]||(a[0]=c=>o.$emit("close"))},"✕")]),d("section",C1,[a[8]||(a[8]=d("h3",null,"1. 나의 입장 선택하기",-1)),d("div",I1,[d("div",{class:ge(["stance-card",{active:i.value==="agree"}]),onClick:a[1]||(a[1]=c=>i.value="agree")},a[6]||(a[6]=[d("h4",null,"찬성",-1),d("p",null,"필요하다고 생각합니다",-1)]),2),d("div",{class:ge(["stance-card",{active:i.value==="disagree"}]),onClick:a[2]||(a[2]=c=>i.value="disagree")},a[7]||(a[7]=[d("h4",null,"반대",-1),d("p",null,"필요하지 않다고 생각합니다",-1)]),2)])]),d("section",R1,[a[11]||(a[11]=d("h3",null,"2. 토론 개요 확인하기",-1)),d("div",O1,[d("div",k1,[a[9]||(a[9]=d("h4",null,"주요 논점",-1)),d("ul",null,[(U(!0),H(he,null,_e(e.topic.mainPoints,(c,l)=>(U(),H("li",{key:l},q(c),1))),128))])]),d("div",T1,[a[10]||(a[10]=d("h4",null,"참고자료",-1)),d("ul",null,[(U(!0),H(he,null,_e(e.topic.references,(c,l)=>(U(),H("li",{key:l},q(c),1))),128))])])])]),d("div",x1,[d("button",{class:"start-button",disabled:!i.value,onClick:s}," 토론 시작하기 ",8,P1)])])]))}},N1=ke(A1,[["__scopeId","data-v-b1cc7b71"]]),M1={class:"debate-container"},D1={class:"header"},L1={class:"content-wrapper"},$1={class:"header-content"},V1={class:"topic-info"},B1={class:"topic-title-container"},j1={class:"topic-title"},F1={class:"stage-progress"},U1={class:"progress-bar"},H1={class:"marker-circle"},W1={class:"marker-label"},q1={class:"header-timer-container"},G1={viewBox:"0 0 36 36",class:"circular-timer"},z1=["stroke-dashoffset"],K1={class:"timer-content"},J1={class:"timer-text"},Q1={class:"timer-count"},X1={class:"content-wrapper"},Y1={class:"main-content"},Z1={class:"tori-section"},eS={class:"tori-avatar"},tS=["src"],nS={class:"question-box"},rS={class:"controls"},iS={class:"content-wrapper"},sS={class:"controls-content"},oS=["disabled"],aS={class:"mic-icon"},cS={key:0,class:"mic-waves"},lS={class:"mic-status"},yo=15,uS=Ae({__name:"AiDebateRoom",props:{topic:{type:Object,required:!0,default:()=>({title:"",mainPoints:[]})},stance:{type:String,required:!0,default:"agree"}},emits:["debate-complete"],setup(e,{emit:t}){let n=null,r=null,i=null,s=null;const o="wss://i12a802.p.ssafy.io/python",a="https://i12a802.p.ssafy.io/python";async function c(){try{n=await navigator.mediaDevices.getUserMedia({audio:!0}),r=new AudioContext({sampleRate:16e3}),await r.audioWorklet.addModule("/pcm-processor.js"),i=new AudioWorkletNode(r,"pcm-processor"),s=new WebSocket(`${o}/api/audio/basic?topic_id=${f.topic.id}&stance=${f.stance}&step=${h.value[p.value].step}&user_id=2`),s.binaryType="arraybuffer",i.port.onmessage=B=>{const j=new Int16Array(B.data);console.log("메인 스레드: PCM 데이터 (Int16Array):",j),s&&s.readyState===WebSocket.OPEN?(s.send(B.data),console.log("메인 스레드: WebSocket으로 데이터 전송")):console.warn("메인 스레드: WebSocket 연결 상태가 OPEN이 아님:",s==null?void 0:s.readyState)},r.createMediaStreamSource(n).connect(i).connect(r.destination),console.log("오디오 캡처 및 전송 시작")}catch(O){console.error("오디오 처리 시작 중 오류 발생:",O)}}async function l(){try{const O=await fetch(a+"/api/practice/basic",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:f.topic.title,user_id:2})});if(!O.ok)throw new Error("서버 응답 오류");const B=await O.json();return console.log("채점 결과:",B),{strengths:B.strength,improvements:B.improvement,strategy:B.strategy,recordedAnswers:C.value}}catch(O){return console.error("채점 결과 조회 실패:",O),{strengths:"채점 결과를 가져오는 데 실패했습니다.",improvements:"",strategy:"",recordedAnswers:[]}}}function u(){s&&(s.readyState===WebSocket.OPEN&&(s.close(),console.log("WebSocket 연결 종료")),s=null),i&&(i.disconnect(),i=null,console.log("AudioWorkletNode 연결 해제")),r&&(r.close().then(()=>{console.log("AudioContext 종료")}).catch(O=>{console.error("AudioContext 종료 중 오류 발생:",O)}),r=null),n&&(n.getTracks().forEach(O=>O.stop()),n=null,console.log("MediaStream 트랙 중지(마이크 끄기)"))}const f=e,g=t,p=K(0),_=K(yo),b=K(!0),v=K(!1),m=K(45),C=K([]),k=Ie(()=>h.value[p.value]),w=Ie(()=>{const O=b.value?yo:45;return 100-(b.value?_.value:m.value)/O*100}),h=Ie(()=>{var O,B,j;return[{step:1,title:"1단계: 주장 세우기",description:"자신의 입장을 명확하게 밝히고 핵심 주장을 제시하세요",question:((O=f.topic)==null?void 0:O.title)??"주제에 대한 당신의 입장은 무엇인가요?",hint:`${f.stance==="agree"?"찬성":"반대"} 입장에서 주장을 명확히 설명해주세요.`},{step:2,title:"2단계: 근거 찾기",description:"주장을 뒷받침하는 구체적인 근거를 제시하세요",question:"당신의 주장을 뒷받침하는 구체적인 사례나 근거는 무엇인가요?",hint:`${((j=(B=f.topic)==null?void 0:B.mainPoints)==null?void 0:j[0])??"주요 논점"}와 관련된 구체적인 사례나 근거를 들어 설명해주세요.`},{step:3,title:"3단계: 다른 관점 고려하기",description:"반대 입장의 주장과 근거를 고려하고 대응하세요",question:"반대 입장에서 제기할 수 있는 주장은 무엇이며, 이에 대해 어떻게 생각하시나요?",hint:`${f.stance==="agree"?"반대":"찬성"} 입장에서 제기할 수 있는 의견을 고려하고 답변해주세요.`},{step:4,title:"4단계: 주장 강화하기",description:"앞선 논의를 종합하여 최종 주장을 강화하세요",question:"지금까지의 논의를 종합하여, 최종 입장을 말씀해주세요.",hint:"근거와 반론을 고려한 균형 잡힌 시각으로 최종 주장을 정리해주세요."}]});let S,x;const y=()=>{S=setInterval(()=>{_.value>0?_.value--:(clearInterval(S),b.value=!1,I())},1e3)},I=()=>{v.value=!0,c(),x=setInterval(()=>{m.value>0?m.value--:A()},1e3)},A=async()=>{if(clearInterval(x),v.value=!1,p.value<h.value.length-1)E();else{u(),await new Promise(B=>setTimeout(B,5e3));const O=await l();g("debate-complete",O)}},M=async()=>{if(C.value[p.value]||(C.value[p.value]="사용자가 스킵함"),clearInterval(S),clearInterval(x),p.value===h.value.length-1)if(b.value)b.value=!1,I();else{u(),await new Promise(B=>setTimeout(B,5e3));const O=await l();g("debate-complete",O)}else b.value?(b.value=!1,I()):E()},N=()=>{clearInterval(S),clearInterval(x),_.value=yo,m.value=45,b.value=!0,v.value=!1,u(),y()},E=()=>{u(),p.value<h.value.length-1&&(p.value++,N())},T=O=>{const B=Math.floor(O/60),j=O%60;return`${B.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`},$=()=>{b.value||(v.value=!v.value)},P=O=>{try{return new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${O}`],import.meta.url).href}catch(B){return console.error("Error loading image:",B),""}},R=O=>{const B=O.target;B.style.display="none",B.parentElement&&(B.parentElement.innerHTML="<span>토리</span>")};return Ze(()=>{y()}),Xn(()=>{clearInterval(S),clearInterval(x),u()}),(O,B)=>(U(),H("div",M1,[d("header",D1,[d("div",L1,[d("div",$1,[d("div",V1,[d("div",B1,[d("h1",j1,q(e.topic.title),1),d("div",{class:ge(["stance-badge",{"stance-agree":e.stance==="agree","stance-disagree":e.stance==="disagree"}])},q(e.stance==="agree"?"찬성":"반대"),3)])]),d("div",F1,[d("div",U1,[B[0]||(B[0]=d("div",{class:"progress-background"},null,-1)),d("div",{class:"progress-fill",style:We({width:`${(p.value+1)*25}%`})},null,4),(U(!0),H(he,null,_e(h.value,(j,G)=>(U(),H("div",{key:G,class:ge(["stage-marker",{completed:p.value>=G,active:p.value===G}]),style:We({left:`${G/(h.value.length-1)*100}%`})},[d("div",H1,q(G+1),1),d("div",W1,q(j.title.split(": ")[1]),1)],6))),128))])]),d("div",q1,[d("div",{class:ge(["timer-circle",{"preparation-time":b.value}])},[(U(),H("svg",G1,[B[1]||(B[1]=d("path",{d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"#eee","stroke-width":"3"},null,-1)),d("path",{d:`M18 2.0845\r
                    a 15.9155 15.9155 0 0 1 0 31.831\r
                    a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"#ff6b6b","stroke-width":"3","stroke-dasharray":"100, 100","stroke-dashoffset":w.value},null,8,z1)])),d("div",K1,[B[2]||(B[2]=d("div",{class:"timer-icon"},"⏱️",-1)),d("div",J1,q(b.value?"준비 시간":"발표 시간"),1),d("div",Q1,q(T(b.value?_.value:m.value)),1)])],2)])])])]),d("div",X1,[d("div",Y1,[d("section",Z1,[d("div",eS,[d("img",{src:P("Tori.svg"),alt:"토리",class:"tori-image",onError:R},null,40,tS)]),d("div",nS,[d("h2",null,q(k.value.question),1),d("p",null,q(k.value.hint),1)])])])]),d("footer",rS,[d("div",iS,[d("div",sS,[d("button",{class:ge(["mic-button",{active:v.value}]),onClick:$,disabled:b.value},[d("div",aS,[v.value?(U(),H("div",cS,B[3]||(B[3]=[d("span",null,null,-1),d("span",null,null,-1),d("span",null,null,-1)]))):Te("",!0),B[4]||(B[4]=d("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[d("path",{d:"M12 2C11.175 2 10.5 2.675 10.5 3.5V11.5C10.5 12.325 11.175 13 12 13C12.825 13 13.5 12.325 13.5 11.5V3.5C13.5 2.675 12.825 2 12 2Z",fill:"currentColor"}),d("path",{d:"M17 8V11.5C17 14.535 14.535 17 11.5 17C8.465 17 6 14.535 6 11.5V8H4V11.5C4 15.35 6.94 18.505 10.5 19.07V22H13.5V19.07C17.06 18.505 20 15.35 20 11.5V8H17Z",fill:"currentColor"})],-1))]),d("span",lS,q(v.value?"마이크 켜짐":"마이크 꺼짐"),1)],10,oS),d("button",{class:"skip-button",onClick:M},B[5]||(B[5]=[d("span",{class:"skip-text"},"다음 단계",-1),d("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"skip-icon"},[d("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])])]))}}),dS=ke(uS,[["__scopeId","data-v-78b42dac"]]),fS={class:"debate-result"},pS={class:"result-header"},hS={class:"header-content"},vS={class:"tori-character"},mS=["src"],gS={class:"analysis-cards"},bS={class:"analysis-card"},yS={class:"card-content"},ES={class:"analysis-card"},_S={class:"card-content"},SS={class:"analysis-card"},wS={class:"card-content"},CS=Ae({__name:"AiDebateResult",props:{analysis:{type:Object,required:!0,default:()=>({strengths:"",improvements:"",strategy:""})}},setup(e){const t=n=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${n}`],import.meta.url).href;return(n,r)=>(U(),H("div",fS,[d("section",pS,[d("div",hS,[d("div",vS,[d("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori"},null,8,mS)]),r[0]||(r[0]=d("div",{class:"header-text"},[d("h2",null,"토론 연습 결과"),d("p",null,"탁월한 분석력과 논리적인 전개가 돋보였어요!")],-1))])]),d("section",gS,[d("div",bS,[r[2]||(r[2]=d("div",{class:"card-icon"},"💪",-1)),d("div",yS,[r[1]||(r[1]=d("h3",null,"강점 분석",-1)),d("p",null,q(e.analysis.strengths||"분석된 강점이 없습니다."),1)])]),d("div",ES,[r[4]||(r[4]=d("div",{class:"card-icon"},"🔍",-1)),d("div",_S,[r[3]||(r[3]=d("h3",null,"보완할 점",-1)),d("p",null,q(e.analysis.improvements||"분석된 보완할 점이 없습니다."),1)])]),d("div",SS,[r[6]||(r[6]=d("div",{class:"card-icon"},"🚀",-1)),d("div",wS,[r[5]||(r[5]=d("h3",null,"효과적인 토론 전략",-1)),d("p",null,q(e.analysis.strategy||"분석된 전략이 없습니다."),1)])])])]))}}),IS=ke(CS,[["__scopeId","data-v-65d07c32"]]),RS={class:"modal-content"},OS={__name:"DebateModal",props:{topic:{type:Object,required:!0},stance:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const n=K(!1),r=K({strengths:"",improvements:"",strategy:"",recordedAnswers:[]}),i=o=>{r.value=o,n.value=!0},s=()=>{n.value=!1,r.value={strengths:"",improvements:"",strategy:"",recordedAnswers:[]}};return(o,a)=>(U(),H("div",{class:"modal-overlay",onClick:a[2]||(a[2]=Ri(c=>o.$emit("close"),["self"]))},[d("div",RS,[d("button",{class:"close-button",onClick:a[0]||(a[0]=c=>o.$emit("close"))},"✕"),n.value?(U(),yt(IS,{key:1,topic:e.topic,stance:e.stance,analysis:r.value,onRetry:s,onClose:a[1]||(a[1]=c=>o.$emit("close"))},null,8,["topic","stance","analysis"])):(U(),yt(dS,{key:0,topic:e.topic,stance:e.stance,onDebateComplete:i},null,8,["topic","stance"]))])]))}},kS=ke(OS,[["__scopeId","data-v-ccb3d73e"]]),TS={class:"debate-dashboard"},xS={key:0,class:"first-visit-banner"},PS={class:"banner-content"},AS=["src"],NS={class:"level-tabs"},MS={key:1,class:"level-description"},DS={key:2,class:"level-description"},LS={class:"topics-section"},$S={class:"topic-list"},VS={class:"topic-content"},BS=["onClick"],jS={__name:"AIDebate",setup(e){const t=K(!1),n=K(!1),r=K(!1),i=K(null),s=K(""),o=K(1),a=K(!1),c=_=>new URL(Object.assign({"../assets/Harvard.jpg":Yn,"../assets/Ib-edu.jpg":Zn,"../assets/Tori.svg":er,"../assets/base.css":tr,"../assets/hot-badge.svg":nr,"../assets/kakao.svg":rr,"../assets/소개페이지.svg":ir})[`../assets/${_}`],import.meta.url).href,l=(_,b)=>{i.value=u.value.find(v=>v.id===_),s.value=b,r.value=!0},u=K([{id:1,level:1,title:"교복 자율화, 찬성? 반대?",participants:12,mainPoints:["학생 개성 표현의 자유","학교 소속감과 정체성","경제적 영향과 비용"],references:["2023년 학생 복지 만족도 조사","교복 자율화 시행 학교 사례"]},{id:2,level:1,title:"급식 메뉴 선택제 도입, 어떻게 생각하시나요?",participants:8,mainPoints:["학생 선호도 반영","영양 균형 고려","급식 운영의 효율성"],references:["학교 급식 만족도 조사","선택식 급식 운영 사례"]},{id:3,level:2,title:"학원 자율 등원제, 도입해야 할까요?",participants:15,mainPoints:["학습 효율성","학생 자기주도성","사교육 영향"],references:["자율 등원제 시행 효과 연구","학생 스트레스 관련 조사"]},{id:4,level:2,title:"디지털 교과서 전면 도입, 찬성하시나요?",participants:10,mainPoints:["학습 효과성","환경적 영향","디지털 격차"],references:["디지털 교과서 시범 학교 결과","학생 건강 영향 연구"]},{id:5,level:2,title:"방과후 학교 의무화, 어떻게 보시나요?",participants:13,mainPoints:["교육 기회 평등","학생 자유시간","학교 운영 부담"],references:["방과후 학교 효과성 분석","학부모 만족도 조사"]}]),f=Ie(()=>u.value.filter(_=>_.level===o.value)),g=_=>{i.value=_,n.value=!0},p=_=>{o.value===1?g(_):alert("아직 준비중 입니다.")};return(_,b)=>(U(),H("main",TS,[a.value?Te("",!0):(U(),H("div",xS,[d("div",PS,[d("img",{src:c("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,AS),b[6]||(b[6]=d("p",null,"토리와 함께하는 AI 토론이 처음이신가요?",-1)),d("button",{class:"preview-button-small",onClick:b[0]||(b[0]=v=>t.value=!0)}," 사용 방법 보기 ")])])),d("div",NS,[d("button",{class:ge(["level-tab",{active:o.value===1}]),onClick:b[1]||(b[1]=v=>o.value=1)},b[7]||(b[7]=[d("div",{class:"tab-badge level-1"},"1",-1),Ve(" 기초 다지기 ")]),2),d("button",{class:ge(["level-tab",{active:o.value===2}]),onClick:b[2]||(b[2]=v=>o.value=2)},b[8]||(b[8]=[d("div",{class:"tab-badge level-2"},"2",-1),Ve(" 실전 토론하기 ")]),2)]),o.value===1?(U(),H("div",MS,b[9]||(b[9]=[d("h3",null,"기초 다지기",-1),d("p",null,"토리의 질문에 답하며 논리적 사고력을 키워요",-1),d("p",{class:"time"},"소요 시간: 5분",-1)]))):Te("",!0),o.value===2?(U(),H("div",DS,b[10]||(b[10]=[d("h3",null,"실전 토론하기",-1),d("p",null,"토리와 서로 다른 입장에서 토론을 진행해요",-1),d("p",{class:"time"},"소요 시간: 5분",-1)]))):Te("",!0),d("section",LS,[d("div",$S,[(U(!0),H(he,null,_e(f.value,v=>(U(),H("div",{key:v.id,class:"topic-card"},[d("div",VS,[d("h3",null,q(v.title),1)]),d("button",{class:ge(["prepare-button",{locked:o.value===2}]),onClick:m=>p(v)}," 준비하기 ",10,BS)]))),128))])]),t.value?(U(),yt(S1,{key:3,onClose:b[3]||(b[3]=v=>t.value=!1)})):Te("",!0),n.value?(U(),yt(N1,{key:4,topic:i.value,onClose:b[4]||(b[4]=v=>n.value=!1),onStart:l},null,8,["topic"])):Te("",!0),r.value?(U(),yt(kS,{key:5,topic:i.value,stance:s.value,onClose:b[5]||(b[5]=v=>r.value=!1)},null,8,["topic","stance"])):Te("",!0)]))}},mp=ke(jS,[["__scopeId","data-v-312f6fcd"]]),FS={class:"debate-practice"},US={class:"learning-container"},HS={class:"learning-content"},WS={class:"tab-navigation"},qS={key:0,class:"theory-content"},GS={class:"stage"},zS={class:"modules"},KS={class:"stage"},JS={class:"modules"},QS={class:"stage"},XS={class:"modules"},YS={key:1},ZS=Ae({__name:"PracticeMain",setup(e){const t=K("theory");return(n,r)=>(U(),H("div",FS,[r[7]||(r[7]=d("div",{class:"header-container"},[d("div",{class:"header-content"},[d("div",{class:"header-top"},[d("div",{class:"header-title"},[d("h1",null,"토론 연습하기"),d("p",null,"기초부터 심화까지, 체계적인 토론 학습")])])])],-1)),d("div",US,[d("div",HS,[d("div",WS,[d("button",{onClick:r[0]||(r[0]=i=>t.value="theory"),class:ge(["tab-button",{active:t.value==="theory"}])},[we(He(hE),{size:20}),r[2]||(r[2]=Ve(" 기초 이론 "))],2),d("button",{onClick:r[1]||(r[1]=i=>t.value="ai"),class:ge(["tab-button",{active:t.value==="ai"}])},[we(He(vE),{size:20}),r[3]||(r[3]=Ve(" 실전 연습 "))],2)]),t.value==="theory"?(U(),H("div",qS,[d("div",GS,[r[4]||(r[4]=d("div",{class:"stage-header"},[d("h3",null,"1단계: 토론의 이해"),d("p",null,"토론의 기본 개념과 요소 학습")],-1)),d("div",zS,[we(lr,{title:"토론의 기본 이해",description:"토론의 정의, 목적, 유형, 규칙 학습",progress:0,completed:!1,locked:!0}),we(lr,{title:"논리적 사고의 기초",description:"연역법, 귀납법, 논리적 오류 이해하기",progress:0,completed:!1,locked:!0})])]),d("div",KS,[r[5]||(r[5]=d("div",{class:"stage-header"},[d("h3",null,"2단계: 토론 표현력"),d("p",null,"효과적인 주장과 설득 기술 습득")],-1)),d("div",JS,[we(lr,{title:"주장과 근거",description:"PREP/CEDA 기법을 활용한 논리 구성",progress:0,completed:!1}),we(lr,{title:"설득력 있는 말하기",description:"톤, 속도, 제스처 등 비언어적 표현",progress:0,completed:!1,locked:!0})])]),d("div",QS,[r[6]||(r[6]=d("div",{class:"stage-header"},[d("h3",null,"3단계: 분석과 대응"),d("p",null,"상대방 주장 분석과 효과적인 반론")],-1)),d("div",XS,[we(lr,{title:"주장 분석하기",description:"상대방 논리구조 파악과 약점 찾기",progress:0,completed:!1,locked:!0}),we(lr,{title:"반론과 재반론",description:"효과적인 반론 구성과 즉각 대응",progress:0,completed:!1,locked:!0})])])])):t.value==="ai"?(U(),H("div",YS,[we(mp)])):Te("",!0)])])]))}}),ew=ke(ZS,[["__scopeId","data-v-ffa6716c"]]),tw={class:"category-selection"},nw={class:"category-grid"},rw=["onClick"],iw={class:"icon-circle"},sw={class:"icon"},ow={class:"category-title"},aw={class:"category-description"},cw=["disabled"],lw=Ae({__name:"CategorySelection",emits:["select"],setup(e,{emit:t}){const n=vt(),r=sr(),i=[{id:"SCIENCE",icon:"💡",title:"과학/기술",description:"AI, 우주, 환경, 생명과학"},{id:"POLITICS",icon:"⚖️",title:"사회/정치",description:"정책, 제도, 법률, 인권"},{id:"ECONOMY",icon:"💰",title:"경제",description:"금융, 산업, 노동, 복지"},{id:"EDUCATION",icon:"📚",title:"교육/문화",description:"교육제도, 예술, 미디어"},{id:"ETHICS",icon:"🤔",title:"윤리/철학",description:"도덕, 가치관, 철학적 담론"}],s=K(""),o=f=>{s.value=f},a=t,c=f=>{o(f),a("select",f),r.setCategory(f)},l=()=>{n.push("/debate-select")},u=()=>{s.value&&(r.startMatching(),n.push("/"))};return(f,g)=>(U(),H("div",tw,[g[2]||(g[2]=en('<header class="header" data-v-ad2ce33e><div class="header-content" data-v-ad2ce33e><h1 class="title" data-v-ad2ce33e>주제 카테고리 선택</h1><div class="steps" data-v-ad2ce33e><div class="step" data-v-ad2ce33e><div class="step-circle" data-v-ad2ce33e>1</div><span class="step-text" data-v-ad2ce33e>토론 방식</span></div><div class="step-line" data-v-ad2ce33e></div><div class="step active" data-v-ad2ce33e><div class="step-circle" data-v-ad2ce33e>2</div><span class="step-text" data-v-ad2ce33e>주제 카테고리</span></div><div class="step-line" data-v-ad2ce33e></div><div class="step" data-v-ad2ce33e><div class="step-circle" data-v-ad2ce33e>3</div><span class="step-text" data-v-ad2ce33e>상대 매칭하기</span></div></div></div></header><div class="info-box" data-v-ad2ce33e><p data-v-ad2ce33e> 💡 토론 주제는 매칭이 완료된 후 공개됩니다. 준비 시간이 주어지니 걱정하지 마세요! </p></div>',2)),d("div",nw,[(U(),H(he,null,_e(i,p=>d("div",{key:p.id,class:ge(["category-card",{selected:s.value===p.id}]),onClick:_=>c(p.id)},[d("div",iw,[d("span",sw,q(p.icon),1)]),d("h2",ow,q(p.title),1),d("p",aw,q(p.description),1)],10,rw)),64))]),d("button",{class:"before-button",onClick:l},g[0]||(g[0]=[d("span",{class:"arrow"},"←",-1)])),d("button",{class:"next-button",disabled:!s.value,onClick:u},g[1]||(g[1]=[d("span",{class:"arrow"},"→",-1)]),8,cw)]))}}),uw=ke(lw,[["__scopeId","data-v-ad2ce33e"]]),dw={class:"debate-container"},fw={class:"content"},pw={class:"format-cards"},hw=["onClick"],vw={class:"format-icon"},mw={class:"format-info"},gw={class:"format-details"},bw={key:0,class:"format-detail-panel"},yw={class:"detail-section"},Ew={class:"detail-section"},_w={class:"process-box"},Sw={class:"detail-section2"},ww={class:"tips-box"},Cw=["disabled"],Iw=Ae({__name:"DebateFormatSelection",setup(e){const t=vt(),n=[{id:"casual",title:"Casual 토론",emoji:"🗣️",description:"토론은 4명이 참가하며, 랜덤으로 찬성(2명)과 반대(2명)이 배정됩니다. 하지만 같은 진영이라도 팀이 아니며, 기여도에 따라 순위가 차등 결정됩니다. 같은 진영의 주장이라도 논리적으로 맞지 않다면 지적할 수 있습니다. 논리적으로 사고하고 설득력 있는 주장을 펼쳐보세요!",duration:"30분",difficulty:2,shortDescription:"토론 실력을 키우는 실전 방식",process:["참가자 4명이 랜덤으로 찬성(2명)과 반대(2명) 진영으로 배정됩니다.","같은 진영이지만 팀이 아니며, 기여도에 따라 순위가 매겨집니다.","준비 시간 (5분): 주제를 확인하고 논리를 구성합니다.","입론 (각 5분): 찬성 1명 → 반대 1명 → 찬성 1명 → 반대 1명 순서로 발언합니다.","두 번째 주장 (각 3분): 동일한 순서로 추가 주장을 펼칩니다.","같은 진영의 주장이라도 논리적으로 맞지 않다면 지적할 수 있습니다."],tips:["같은 진영이라도 경쟁 관계이므로 논리적으로 우위를 점하세요.","기여도가 높은 참가자가 더 높은 평가를 받습니다.","상대방뿐만 아니라 같은 진영의 논리적 오류도 지적할 수 있습니다."]}],r=K("casual"),i=Ie(()=>n.find(c=>c.id===r.value)),s=sr(),o=c=>{r.value=c,s.setFormat(c)},a=()=>{t.push("/category-selection")};return Ze(()=>{s.setFormat("casual")}),(c,l)=>(U(),H("div",dw,[l[4]||(l[4]=en('<header class="header" data-v-22de5d2d><div class="header-content" data-v-22de5d2d><h1 class="title" data-v-22de5d2d>실전 토론 시작하기</h1><div class="steps" data-v-22de5d2d><div class="step active" data-v-22de5d2d><div class="step-circle" data-v-22de5d2d>1</div><span class="step-text" data-v-22de5d2d>토론 방식 선택</span></div><div class="step-line" data-v-22de5d2d></div><div class="step" data-v-22de5d2d><div class="step-circle" data-v-22de5d2d>2</div><span class="step-text" data-v-22de5d2d>주제 선택</span></div><div class="step-line" data-v-22de5d2d></div><div class="step" data-v-22de5d2d><div class="step-circle" data-v-22de5d2d>3</div><span class="step-text" data-v-22de5d2d>상대 매칭하기</span></div></div></div></header>',1)),d("div",fw,[d("div",pw,[(U(),H(he,null,_e(n,u=>d("div",{key:u.id,class:ge(["format-card",{selected:r.value===u.id}]),onClick:f=>o(u.id)},[d("div",vw,q(u.emoji),1),d("div",mw,[d("h3",null,q(u.title),1),d("p",null,q(u.shortDescription),1)]),d("div",gw,[d("span",null,"• 진행 시간: "+q(u.duration),1),d("span",null,"• 난이도: "+q("⭐".repeat(u.difficulty)),1)])],10,hw)),64))]),i.value?(U(),H("div",bw,[d("h2",null,q(i.value.title),1),d("section",yw,[l[0]||(l[0]=d("h3",null,"토론 설명",-1)),d("p",null,q(i.value.description),1)]),d("section",Ew,[l[1]||(l[1]=d("h3",null,"진행 방식",-1)),d("div",_w,[(U(!0),H(he,null,_e(i.value.process,(u,f)=>(U(),H("div",{key:f,class:"process-step"},q(f+1)+". "+q(u),1))),128))])]),d("section",Sw,[l[2]||(l[2]=d("h3",null,"토리의 Tip",-1)),d("div",ww,[(U(!0),H(he,null,_e(i.value.tips,(u,f)=>(U(),H("div",{key:f,class:"tip"}," 💡 "+q(u),1))),128))])])])):Te("",!0)]),d("button",{class:"next-button",disabled:!r.value,onClick:a},l[3]||(l[3]=[d("span",{class:"arrow"},"→",-1)]),8,Cw)]))}}),Rw=ke(Iw,[["__scopeId","data-v-22de5d2d"]]),Ow={class:"debate-dashboard"},kw={class:"debate-content grid grid-cols-2"},Tw={class:"debate-bubbles col-span-1"},xw=["onClick"],Pw={class:"bubble-content"},Aw={class:"category-title"},Nw={class:"debate-count"},Mw={class:"viewer-count"},Dw={class:"debate-list col-span-1"},Lw={class:"category-header"},$w={class:"sort-options"},Vw={class:"debate-cards"},Bw={key:0,class:"loading"},jw={key:1,class:"error-message"},Fw={key:0,class:"popular-badge"},Uw=["onClick"],Hw={key:3,class:"loading"},Ww=Ae({__name:"OngoingDebate",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(!0),i=K(!1),s=K(null),o=K("latest"),a=K(null),c=K(100),l=K(["POLITICS"]),u=K(null),f=K(null),g=[{value:"POLITICS",label:"정치/국제",color:"#ff6b6b",size:80},{value:"ECONOMY",label:"경제/노동",color:"#ffd43b",size:80},{value:"ETHICS",label:"윤리/법",color:"#69db7c",size:80},{value:"SCIENCE",label:"과학/기술",color:"#4dabf7",size:80},{value:"EDUCATION",label:"교육/사회",color:"#748ffc",size:80}],p=I=>{console.log(I),window.location.href=`/debate/${I}`},_={latest:"LATEST",popular:"POPULARITY"},b=async(I=!1)=>{try{I?i.value=!0:r.value=!0;const A=l.value.join(","),N=(await De.get(t+"/api/debates",{params:{cursor:a.value,size:c.value,status:"IN_PROGRESS",sortBy:_[o.value],categories:A}})).data.content;N&&N.length>0&&(a.value=Number(N[N.length-1].debateId),n.value=I?[...n.value,...N]:N)}catch{s.value="토론 목록을 불러오지 못했습니다."}finally{r.value=!1,i.value=!1}},v=Ie(()=>{const I={};return g.forEach(A=>{I[A.value]={...A,debateCount:0,totalViewers:0}}),n.value.forEach(A=>{I[A.category]&&(I[A.category].debateCount++,I[A.category].totalViewers+=A.spectatorsCount)}),I}),m=Ie(()=>{const I=Object.values(v.value);I.sort((E,T)=>T.totalViewers-E.totalViewers);const A=Math.max(...I.map(E=>E.totalViewers||0)),M=120,N=200;return I.map(E=>{let T=E.totalViewers?Math.max(M,E.totalViewers/A*N):M;const $=Math.max(100,E.label.length*10+E.debateCount.toString().length*5);return{...E,size:Math.max(T,$)}})}),C=I=>I.toLocaleString("ko-KR"),k=(I,A)=>`${I}:${String(A).padStart(2,"0")}`,w=()=>{const I=g.find(A=>A.value===l.value[0]);return I?I.label:"전체"},h=I=>I.spectatorsCount>=50,S=I=>{l.value=I};let x=null;const y=()=>{u.value&&(x=new IntersectionObserver(I=>{I.forEach(A=>{A.isIntersecting&&n.value.length>=c.value&&b(!0)})},{root:f.value,threshold:1}),x.observe(u.value))};return Ze(()=>{b(),y()}),Ci(()=>{x&&u.value&&x.unobserve(u.value)}),gt([o,l],()=>{b(!1)},{deep:!0}),(I,A)=>(U(),H("div",Ow,[A[2]||(A[2]=d("header",{class:"debate-header"},[d("h1",{class:"title"},"진행중인 토론"),d("p",{class:"subtitle"},"다양한 주제의 토론에 참여하고 의견을 나눠보세요")],-1)),d("main",kw,[d("section",Tw,[(U(!0),H(he,null,_e(m.value,(M,N)=>(U(),H("div",{key:M.value,class:"bubble",style:We({backgroundColor:M.color,width:`${M.size}px`,height:`${M.size}px`}),onClick:E=>S([M.value])},[d("div",Pw,[d("div",Aw,q(M.label),1),d("div",Nw,q(M.debateCount)+"개 토론",1),d("div",Mw,q(C(M.totalViewers))+"명 관전 ",1)])],12,xw))),128))]),d("section",Dw,[d("div",Lw,[d("h2",null,q(w())+" 토론",1),d("div",$w,[Xe(d("select",{"onUpdate:modelValue":A[0]||(A[0]=M=>o.value=M),class:"sort-select"},A[1]||(A[1]=[d("option",{value:"latest"},"최신순",-1),d("option",{value:"popular"},"인기순",-1)]),512),[[Im,o.value]])])]),d("div",Vw,[r.value?(U(),H("div",Bw,"토론 목록을 불러오는 중...")):s.value?(U(),H("div",jw,q(s.value),1)):(U(!0),H(he,{key:2},_e(n.value,M=>(U(),H("div",{key:M.debateId,class:"debate-card"},[d("h3",null,q(M.subject),1),d("p",null,q(C(M.spectatorsCount))+"명 관전중",1),d("p",null," 시작: "+q(k(M.startedAtHour,M.startedAtMinute)),1),d("p",null,"예상 소요 시간: "+q(M.estimatedTimeMinute)+"분",1),h(M)?(U(),H("span",Fw,"실시간 인기")):Te("",!0),d("button",{onClick:N=>p(M.debateId),class:"enter-button"}," 방청하기 ",8,Uw)]))),128)),d("div",{ref_key:"sentinel",ref:u},null,512),i.value?(U(),H("div",Hw," 추가 토론 목록을 불러오는 중... ")):Te("",!0)])])])]))}}),qw=ke(Ww,[["__scopeId","data-v-ade3ad0f"]]);function gp(e,t=5e3){const n=K(null),r=K([]),i=K(!1),s=K(localStorage.getItem("token")),a=sr().matchingDetails.debateId,c=K(null),l=K(null),u=()=>{console.log("🔄 Connecting to WebSocket via STOMP:",e),l.value=new hp({brokerURL:e,connectHeaders:{Authorization:`Bearer ${s.value}`},debug:g=>console.log(g),reconnectDelay:t,onConnect:()=>{var p,_;console.log("✅ STOMP WebSocket Connected"),i.value=!0;const g=localStorage.getItem("id");(p=l.value)==null||p.subscribe(`/sub/debate/${a}`,async b=>{const v=JSON.parse(b.body);console.log("Received Message from debate topic:",v),c.value=v.payload,r.value.push(v),console.log(v.messageType)}),(_=l.value)==null||_.publish({destination:`/pub/debate.join/${a}`,headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"JOIN",payload:{userId:g}})})},onDisconnect:()=>{console.log("❌ STOMP WebSocket Disconnected"),i.value=!1},onStompError:g=>{console.error("⚠️ STOMP Error:",g),i.value=!1}}),l.value.activate()},f=()=>{if(!l.value||!i.value){console.error("⚠️ WebSocket이 연결되지 않았습니다.");return}const g=localStorage.getItem("id");l.value.publish({destination:`/pub/debate.skip/${a}`,headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"SKIP",payload:{userId:g}})}),console.log("🚀 발언 스킵 요청을 보냈습니다.")};return Ze(u),Xn(()=>{l.value&&l.value.active&&(console.log("Deactivating STOMP client..."),l.value.deactivate())}),{socket:n,messages:r,isConnected:i,debateState:c,skipTurn:f}}const bp=Of("savedItems",()=>{const e=K([]);function t(i){e.value.unshift(i)}function n(i){e.value.unshift(i)}function r(i){e.value=e.value.filter(s=>s.id!==i)}return{savedItems:e,addMemo:t,addResource:n,removeMemo:r}},{persist:!0}),Gw={class:"debate-preparation-container"},zw={class:"welcome-section"},Kw={class:"welcome-content"},Jw={class:"welcome-info"},Qw={class:"flex justify-between"},Xw={class:"subject"},Yw={class:"stance-section"},Zw={class:"timer-section flex justify-between"},eC={class:"timer"},tC={class:"main-content py-2"},nC={class:"left-panel"},rC={class:"tabs"},iC={class:"content-area"},sC={key:0,class:"memo-input"},oC={class:"tag-input"},aC={class:"tags"},cC=["onClick"],lC={key:1,class:"resource-input"},uC={class:"resource-type-selection"},dC=["onClick"],fC={class:"tag-input"},pC={class:"tags"},hC=["onClick"],vC={class:"right-panel"},mC={class:"search-area"},gC={class:"result"},bC={class:"saved-items"},yC={class:"item-header"},EC={class:"item-title"},_C={class:"item-type"},SC={class:"item-tags"},wC={class:"item-content"},CC={class:"item-footer"},IC=Ae({__name:"DebateWaiting",props:{debateId:{}},setup(e){const t=vt(),n=e,r=`wss://i12a802.p.ssafy.io/ws/sub/debate/${n.debateId}`,{debateState:i}=gp(r);Ie(()=>{var J;return((J=i.value)==null?void 0:J.status)||"PREPARING"});const s=K(""),o=K(!0),a=K([]),c=async()=>{var J;try{const ee=localStorage.getItem("token");if(console.log("토큰 확인:",ee),!ee)throw new Error("로그인이 필요합니다.");const X=await De.get(`/api/debates/${n.debateId}/room`,{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});X.status===200&&(s.value=X.data.subject,o.value=X.data.participant,a.value=X.data.users)}catch(ee){console.error("토론방 정보를 불러오는 데 실패했습니다:",((J=ee.response)==null?void 0:J.data)||ee.message)}},l=localStorage.getItem("userId")||"",u=Ie(()=>{var X;const ee=(((X=i.value)==null?void 0:X.participants)||[]).find(pe=>pe.userId===l);return ee?ee.position:"찬성"}),f=bp(),g=Ie(()=>{const J=E.value.toLowerCase().trim();return J?f.savedItems.filter(ee=>{var z,Z;const X=((z=ee.title)==null?void 0:z.toLowerCase())||"",pe=((Z=ee.content)==null?void 0:Z.toLowerCase())||"",F=ee.tags||[];return X.includes(J)||pe.includes(J)||F.some(ne=>ne.toLowerCase().includes(J))}):f.savedItems}),p=K(20),_=K(null),b=Ie(()=>{const J=Math.floor(p.value/60),ee=p.value%60;return`${J}:${ee.toString().padStart(2,"0")}`}),v=()=>{p.value=20,_.value&&clearInterval(_.value),_.value=setInterval(()=>{p.value>0?p.value--:(clearInterval(_.value),_.value=null)},1e3)};Ze(()=>{console.log("20초 후 토론 페이지로 이동합니다."),c(),v(),setTimeout(()=>{console.log("드가자"),t.push({name:"debateRoom",params:{debateId:n.debateId}})},2e4)}),Xn(()=>{_.value&&clearInterval(_.value)});const m=K("memo"),C=K(""),k=K(""),w=K([]),h=K(""),S=[{value:"url",label:"🔗 URL"},{value:"document",label:"📄 문서"},{value:"image",label:"🖼️ 이미지"}],x=K("url"),y=K(""),I=K(""),A=K([]),M=K(""),N=K(null),E=K(""),T=()=>{h.value.trim()&&(w.value.push(h.value.trim()),h.value="")},$=J=>{w.value=w.value.filter(ee=>ee!==J)},P=()=>{M.value.trim()&&(A.value.push(M.value.trim()),M.value="")},R=J=>{A.value=A.value.filter(ee=>ee!==J)},O=J=>{const ee=J.target;ee.files&&ee.files.length>0&&(N.value=ee.files[0])},B=()=>{if(!k.value.trim()){alert("메모 제목을 입력해주세요");return}const J={id:Date.now().toString(),title:k.value,content:C.value,tags:w.value,type:"memo",createdAt:new Date().toLocaleDateString("ko-KR")};f.addMemo(J),C.value="",k.value="",w.value=[]},j=()=>{var ee;if(!I.value.trim()){alert("자료 제목을 입력해주세요");return}const J={id:Date.now().toString(),title:I.value,content:x.value==="url"?y.value:((ee=N.value)==null?void 0:ee.name)||"",tags:A.value,type:"resource",resourceType:x.value,createdAt:new Date().toLocaleDateString("ko-KR")};f.addResource(J),y.value="",I.value="",A.value=[],N.value=null,x.value="url"},G=J=>{switch(J){case"url":return"🔗";case"document":return"📄";case"image":return"🖼️";default:return"📁"}};return(J,ee)=>(U(),H("main",Gw,[d("section",zw,[d("div",Kw,[d("div",Jw,[ee[9]||(ee[9]=d("div",{class:"topic-section"},[d("h2",null,"토론 주제")],-1)),d("div",Qw,[d("p",Xw,q(s.value),1),d("div",Yw,[d("h2",null,"내 입장 : "+q(u.value),1)])])]),d("div",Zw,[ee[10]||(ee[10]=d("h2",null,"곧 토론이 시작됩니다!",-1)),d("div",eC,q(b.value),1)])])]),d("div",tC,[d("div",nC,[d("div",rC,[d("button",{onClick:ee[0]||(ee[0]=X=>m.value="memo"),class:ge({active:m.value==="memo"})}," 메모 ",2),d("button",{onClick:ee[1]||(ee[1]=X=>m.value="resource"),class:ge({active:m.value==="resource"})}," 자료 ",2)]),d("div",iC,[m.value==="memo"?(U(),H("div",sC,[Xe(d("textarea",{"onUpdate:modelValue":ee[2]||(ee[2]=X=>C.value=X),placeholder:"토론을 위한 메모를 자유롭게 작성하세요"},null,512),[[et,C.value]]),Xe(d("input",{"onUpdate:modelValue":ee[3]||(ee[3]=X=>k.value=X),placeholder:"메모 제목을 입력하세요"},null,512),[[et,k.value]]),d("div",oC,[Xe(d("input",{"onUpdate:modelValue":ee[4]||(ee[4]=X=>h.value=X),onKeyup:gs(T,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[et,h.value]]),d("button",{onClick:T,class:"tagbutton"},"태그 추가")]),d("div",aC,[(U(!0),H(he,null,_e(w.value,X=>(U(),H("span",{key:X,class:"tag"},[Ve(" # "+q(X)+" ",1),d("button",{onClick:pe=>$(X)},"×",8,cC)]))),128))]),d("button",{onClick:B,class:"save-button"},"메모 저장")])):(U(),H("div",lC,[d("div",uC,[(U(),H(he,null,_e(S,X=>d("button",{key:X.value,onClick:pe=>x.value=X.value,class:ge({active:x.value===X.value})},q(X.label),11,dC)),64))]),x.value==="url"?Xe((U(),H("input",{key:0,"onUpdate:modelValue":ee[5]||(ee[5]=X=>y.value=X),placeholder:"URL을 입력하세요"},null,512)),[[et,y.value]]):Te("",!0),x.value==="document"?(U(),H("input",{key:1,type:"file",onChange:O,accept:".pdf,.doc,.docx"},null,32)):Te("",!0),x.value==="image"?(U(),H("input",{key:2,type:"file",onChange:O,accept:"image/*"},null,32)):Te("",!0),Xe(d("input",{"onUpdate:modelValue":ee[6]||(ee[6]=X=>I.value=X),placeholder:"자료 제목을 입력하세요"},null,512),[[et,I.value]]),d("div",fC,[Xe(d("input",{"onUpdate:modelValue":ee[7]||(ee[7]=X=>M.value=X),onKeyup:gs(P,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[et,M.value]]),d("button",{onClick:P,class:"tagbutton"},"태그 추가")]),d("div",pC,[(U(!0),H(he,null,_e(A.value,X=>(U(),H("span",{key:X,class:"tag"},[Ve(" # "+q(X)+" ",1),d("button",{onClick:pe=>R(X)},"×",8,hC)]))),128))]),d("button",{onClick:j,class:"save-button"},"자료 저장")]))])]),d("div",vC,[d("div",mC,[Xe(d("input",{"onUpdate:modelValue":ee[8]||(ee[8]=X=>E.value=X),placeholder:"메모나 자료 검색"},null,512),[[et,E.value]])]),d("h3",gC,q(E.value?"검색 결과":"최근 저장됨"),1),d("div",bC,[(U(!0),H(he,null,_e(g.value,X=>(U(),H("div",{key:X.id,class:ge(["saved-item",{"memo-item":X.type==="memo","resource-item":X.type==="resource"}])},[d("div",yC,[d("span",EC,q(X.title),1),d("span",_C,q(X.type==="memo"?"메모":G(X.resourceType||"")),1)]),d("div",SC,[(U(!0),H(he,null,_e(X.tags,pe=>(U(),H("span",{key:pe,class:ge(["tag",{"memo-tag":X.type==="memo","resource-tag":X.type==="resource"}])}," # "+q(pe),3))),128))]),d("div",wC,q(X.content),1),d("div",CC,q(X.createdAt),1)],2))),128))])])])]))}}),RC=ke(IC,[["__scopeId","data-v-80327489"]]),OC="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20400%20400'%3e%3c!--%20그라데이션%20정의%20--%3e%3cdefs%3e%3c!--%20토마토%20본체%20그라데이션%20--%3e%3cradialGradient%20id='tomatoGradient'%20cx='40%25'%20cy='40%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23ff8787'/%3e%3cstop%20offset='70%25'%20style='stop-color:%23ff6b6b'/%3e%3cstop%20offset='100%25'%20style='stop-color:%23fa5252'/%3e%3c/radialGradient%3e%3c!--%20잎사귀%20그라데이션%20--%3e%3clinearGradient%20id='leafGradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%2369db7c'/%3e%3cstop%20offset='100%25'%20style='stop-color:%2337b24d'/%3e%3c/linearGradient%3e%3c!--%20잎사귀%20그림자%20--%3e%3cfilter%20id='leafShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='2'/%3e%3cfeOffset%20dx='2'%20dy='2'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.3'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c!--%203D%20효과를%20위한%20필터%20--%3e%3cfilter%20id='shadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='5'/%3e%3cfeOffset%20dx='3'%20dy='3'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.2'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c!--%20그림자%20효과가%20있는%20본체%20--%3e%3cg%20filter='url(%23shadow)'%3e%3ccircle%20cx='200'%20cy='220'%20r='120'%20fill='url(%23tomatoGradient)'/%3e%3c/g%3e%3c!--%20토마토%20줄기와%20잎사귀%20--%3e%3cg%20filter='url(%23leafShadow)'%3e%3cpath%20d='M190%2085%20C170%2070,%20150%2085,%20170%20105%20C190%20125,%20210%2090,%20190%2085'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M210%2080%20C230%2065,%20250%2080,%20230%20100%20C210%20120,%20190%2085,%20210%2080'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M200%2075%20C220%2060,%20240%2075,%20220%2095%20C200%20115,%20180%2080,%20200%2075'%20fill='url(%23leafGradient)'/%3e%3c/g%3e%3c!--%203D%20효과를%20위한%20하이라이트%20--%3e%3cellipse%20cx='160'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3cellipse%20cx='240'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3c!--%20눈%20(입체적인%20버전)%20--%3e%3cg%3e%3c!--%20왼쪽%20눈%20--%3e%3cellipse%20cx='155'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='155'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='160'%20cy='185'%20r='6'%20fill='white'/%3e%3c!--%20오른쪽%20눈%20--%3e%3cellipse%20cx='245'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='245'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='250'%20cy='185'%20r='6'%20fill='white'/%3e%3c/g%3e%3c!--%20볼%20--%3e%3ccircle%20cx='140'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3ccircle%20cx='260'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3c!--%20입%20(부드러운%20버전)%20--%3e%3cpath%20d='M160%20235%20C180%20265,%20220%20265,%20240%20235'%20fill='%232b2b2b'%20opacity='0.7'/%3e%3cpath%20d='M165%20238%20C185%20268,%20215%20268,%20235%20238'%20fill='%23ff6b6b'/%3e%3cpath%20d='M170%20245%20C190%20265,%20210%20265,%20230%20245'%20fill='white'%20opacity='0.3'/%3e%3c!--%20추가적인%20하이라이트%20--%3e%3ccircle%20cx='180'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='220'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='200'%20cy='160'%20r='3'%20fill='white'%20opacity='0.4'/%3e%3c/svg%3e";var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={},Pr={},Il;function yp(){return Il||(Il=1,function(e){var t=Pr&&Pr.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();function n(r){if(!r)return n.__;Array.prototype.reduce||(Array.prototype.reduce=function(o,a){for(var c=a,l=0;l<this.length;l++)c=o(c,this[l],l,this);return c});var i="",s=("."+r).split(".").reduce(function(o,a,c,l){i?i+="."+a:i=a;var u=o["__"+i];return u===void 0&&(n.Logger.prototype=o,u=new n.Logger(i),o["__"+i]=u),u},n.__);return s}(function(r){r.requestId="",r.entryId=0,r._createXMLHttpRequest=function(){return new XMLHttpRequest},r._getTime=function(){return new Date().getTime()},r._console=console,r._appenderNames=[];function i(P,R,O){if(R[P]!==void 0){if(R[P]===null){delete O[P];return}O[P]=R[P]}}function s(P){if(r.enabled!=null&&!r.enabled)return!1;try{if(P.userAgentRegex&&!new RegExp(P.userAgentRegex).test(navigator.userAgent))return!1}catch{}try{if(P.ipRegex&&r.clientIP&&!new RegExp(P.ipRegex).test(r.clientIP))return!1}catch{}return!0}function o(P,R){try{if(P.disallow&&new RegExp(P.disallow).test(R))return!1}catch{}return!0}function a(P){return typeof P=="function"?P instanceof RegExp?P.toString():P():P}var c=function(){function P(R,O,B){this.msg=R,this.meta=O,this.finalString=B}return P}();function l(P){var R=a(P),O;switch(typeof R){case"string":return new c(R,null,R);case"number":return O=R.toString(),new c(O,null,O);case"boolean":return O=R.toString(),new c(O,null,O);case"undefined":return new c("undefined",null,"undefined");case"object":return R instanceof RegExp||R instanceof String||R instanceof Number||R instanceof Boolean?(O=R.toString(),new c(O,null,O)):(typeof r.serialize=="function"?O=r.serialize.call(this,R):O=JSON.stringify(R),new c("",R,O));default:return new c("unknown",null,"unknown")}}function u(P){return i("enabled",P,this),i("maxMessages",P,this),i("defaultAjaxUrl",P,this),i("clientIP",P,this),i("requestId",P,this),i("defaultBeforeSend",P,this),i("serialize",P,this),this}r.setOptions=u;function f(){return-2147483648}r.getAllLevel=f;function g(){return 1e3}r.getTraceLevel=g;function p(){return 2e3}r.getDebugLevel=p;function _(){return 3e3}r.getInfoLevel=_;function b(){return 4e3}r.getWarnLevel=b;function v(){return 5e3}r.getErrorLevel=v;function m(){return 6e3}r.getFatalLevel=m;function C(){return 2147483647}r.getOffLevel=C;function k(P){return P<=1e3?"trace":P<=2e3?"debug":P<=3e3?"info":P<=4e3?"warn":P<=5e3?"error":"fatal"}var w=function(){function P(R,O){this.inner=O,this.name="JL.Exception",this.message=l(R).finalString}return P}();r.Exception=w,w.prototype=new Error;var h=function(){function P(R,O,B,j,G){this.l=R,this.m=O,this.n=B,this.t=j,this.u=G}return P}();r.LogItem=h;function S(P,R,O){return r.entryId++,new h(P,R,O,r._getTime(),r.entryId)}function x(P){P.id&&(clearTimeout(P.id),P.id=null)}function y(P,R,O){var B=this;P.id||(P.id=setTimeout(function(){O.call(B)},R))}var I=function(){function P(R,O){this.appenderName=R,this.sendLogItems=O,this.level=r.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var B="Trying to create an appender without a name or with an empty name";if(R==null)throw B;if(r._appenderNames.indexOf(R)!=-1)throw R?"Multiple appenders use the same name "+R:B;r._appenderNames.push(R)}return P.prototype.addLogItemsToBuffer=function(R){if(this.batchBuffer.length>=this.maxBatchSize){this.nbrLogItemsSkipped+=R.length;return}if(r.maxMessages!=null){if(r.maxMessages<1)return;r.maxMessages-=R.length}this.batchBuffer=this.batchBuffer.concat(R);var O=this;y(this.batchTimeoutTimer,this.batchTimeout,function(){O.sendBatch.call(O)})},P.prototype.batchBufferHasOverdueMessages=function(){for(var R=0;R<this.batchBuffer.length;R++){var O=r._getTime()-this.batchBuffer[R].t;if(O>this.batchTimeout)return!0}return!1},P.prototype.batchBufferHasStrandedMessage=function(){return r.maxMessages!=null&&r.maxMessages<1&&this.batchBuffer.length>0},P.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},P.prototype.onSendingEnded=function(){x(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},P.prototype.setOptions=function(R){if(i("level",R,this),i("ipRegex",R,this),i("userAgentRegex",R,this),i("disallow",R,this),i("sendWithBufferLevel",R,this),i("storeInBufferLevel",R,this),i("bufferSize",R,this),i("batchSize",R,this),i("maxBatchSize",R,this),i("batchTimeout",R,this),i("sendTimeout",R,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new r.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},P.prototype.log=function(R,O,B,j,G,J,ee){var X;if(s(this)&&o(this,J)&&!(G<this.storeInBufferLevel)){if(X=S(G,J,ee),G<this.level){this.bufferSize>0&&(this.buffer.push(X),this.buffer.length>this.bufferSize&&this.buffer.shift());return}this.addLogItemsToBuffer([X]),G>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()}},P.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&(x(this.batchTimeoutTimer),this.batchBuffer.length!=0)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var R=this;y(this.sendTimeoutTimer,this.sendTimeout,function(){R.onSendingEnded.call(R)}),this.sendLogItems(this.batchBuffer,function(){R.batchBuffer.splice(0,R.nbrLogItemsBeingSent),R.nbrLogItemsSkipped>0&&(R.batchBuffer.push(S(b(),"Lost "+R.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",R.appenderName)),R.nbrLogItemsSkipped=0),R.onSendingEnded.call(R)})}},P}();r.Appender=I;var A=function(P){t(R,P);function R(O){return P.call(this,O,R.prototype.sendLogItemsAjax)||this}return R.prototype.setOptions=function(O){return i("url",O,this),i("beforeSend",O,this),P.prototype.setOptions.call(this,O),this},R.prototype.sendLogItemsAjax=function(O,B){try{if(!s(this))return;this.xhr&&this.xhr.readyState!=0&&this.xhr.readyState!=4&&this.xhr.abort(),this.xhr=r._createXMLHttpRequest();var j="/jsnlog.logger";r.defaultAjaxUrl!=null&&(j=r.defaultAjaxUrl),this.url&&(j=this.url),this.xhr.open("POST",j),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",r.requestId);var G=this;this.xhr.onreadystatechange=function(){G.xhr.readyState==4&&G.xhr.status>=200&&G.xhr.status<300&&B()};var J={r:r.requestId,lg:O};typeof this.beforeSend=="function"?this.beforeSend.call(this,this.xhr,J):typeof r.defaultBeforeSend=="function"&&r.defaultBeforeSend.call(this,this.xhr,J);var ee=JSON.stringify(J);this.xhr.send(ee)}catch{}},R}(I);r.AjaxAppender=A;var M=function(P){t(R,P);function R(O){return P.call(this,O,R.prototype.sendLogItemsConsole)||this}return R.prototype.clog=function(O){r._console.log(O)},R.prototype.cerror=function(O){r._console.error?r._console.error(O):this.clog(O)},R.prototype.cwarn=function(O){r._console.warn?r._console.warn(O):this.clog(O)},R.prototype.cinfo=function(O){r._console.info?r._console.info(O):this.clog(O)},R.prototype.cdebug=function(O){r._console.debug?r._console.debug(O):this.cinfo(O)},R.prototype.sendLogItemsConsole=function(O,B){try{if(!s(this)||!r._console)return;var j;for(j=0;j<O.length;++j){var G=O[j],J=G.n+": "+G.m;typeof window>"u"&&(J=new Date(G.t)+" | "+J),G.l<=r.getDebugLevel()?this.cdebug(J):G.l<=r.getInfoLevel()?this.cinfo(J):G.l<=r.getWarnLevel()?this.cwarn(J):this.cerror(J)}}catch{}B()},R}(I);r.ConsoleAppender=M;var N=function(){function P(R){this.loggerName=R,this.seenRegexes=[]}return P.prototype.setOptions=function(R){return i("level",R,this),i("userAgentRegex",R,this),i("disallow",R,this),i("ipRegex",R,this),i("appenders",R,this),i("onceOnly",R,this),this.seenRegexes=[],this},P.prototype.buildExceptionObject=function(R){var O={};return R.stack?O.stack=R.stack:O.e=R,R.message&&(O.message=R.message),R.name&&(O.name=R.name),R.data&&(O.data=R.data),R.inner&&(O.inner=this.buildExceptionObject(R.inner)),O},P.prototype.log=function(R,O,B){var j=0,G,J;if(!this.appenders)return this;if(R>=this.level&&s(this)&&(B?(J=this.buildExceptionObject(B),J.logData=a(O)):J=O,G=l(J),o(this,G.finalString))){if(this.onceOnly)for(j=this.onceOnly.length-1;j>=0;){if(new RegExp(this.onceOnly[j]).test(G.finalString)){if(this.seenRegexes[j])return this;this.seenRegexes[j]=!0}j--}for(G.meta=G.meta||{},j=this.appenders.length-1;j>=0;)this.appenders[j].log(k(R),G.msg,G.meta,function(){},R,G.finalString,this.loggerName),j--}return this},P.prototype.trace=function(R){return this.log(g(),R)},P.prototype.debug=function(R){return this.log(p(),R)},P.prototype.info=function(R){return this.log(_(),R)},P.prototype.warn=function(R){return this.log(b(),R)},P.prototype.error=function(R){return this.log(v(),R)},P.prototype.fatal=function(R){return this.log(m(),R)},P.prototype.fatalException=function(R,O){return this.log(m(),R,O)},P}();r.Logger=N;function E(P){return new A(P)}r.createAjaxAppender=E;function T(P){return new M(P)}r.createConsoleAppender=T;var $;typeof window<"u"?$=new A(""):$=new M(""),r.__=new r.Logger(""),r.__.setOptions({level:r.getDebugLevel(),appenders:[$]})})(n||(n={})),e.__esModule=!0,e.JL=n,typeof __jsnlog_configure=="function"&&__jsnlog_configure(n),typeof window<"u"&&!window.onerror&&(window.onerror=function(r,i,s,o,a){return n("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:r?r.message||r:"",url:i,"line number":s,column:o},a),!1}),typeof window<"u"&&!window.onunhandledrejection&&(window.onunhandledrejection=function(r){n("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:r.reason?r.reason.message:r.message||null},r.reason)})}(Pr)),Pr}var zt={},Ar={},Eo={},Rl;function Ep(){return Rl||(Rl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalRecorderState=void 0,function(t){t.READY="READY",t.RECORDING="RECORDING",t.PAUSED="PAUSED",t.FINISHED="FINISHED"}(e.LocalRecorderState||(e.LocalRecorderState={}))}(Eo)),Eo}var Nr={},Mr={},Ol;function kC(){if(Ol)return Mr;Ol=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.ConsoleLogger=void 0;var e=function(){function t(n){this.logger=n,this.log=n.log,this.info=n.info,this.debug=n.debug,this.warn=n.warn,this.error=n.error}return t}();return Mr.ConsoleLogger=e,Mr}var _o={},kl;function _p(){return kl||(kl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OpenViduLoggerConfiguration=void 0,function(t){t.disabled="disabled",t.debug="debug",t.debug_app="debug_app"}(e.OpenViduLoggerConfiguration||(e.OpenViduLoggerConfiguration={}))}(_o)),_o}var Tl;function ot(){if(Tl)return Nr;Tl=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.OpenViduLogger=void 0;var e=yp(),t=kC(),n=_p(),r=function(){function i(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new t.ConsoleLogger(globalThis.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return i.configureJSNLog=function(s,o){var a=this;try{if(globalThis.LOG_JSNLOG_RESULTS||this.instance&&s.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(s)&&this.instance.canConfigureJSNLog(s,this.instance)){s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var c=s.finalUserId,l=s.session.sessionId,u=function(g){var p=g.onreadystatechange;g.onreadystatechange=function(){a.isInvalidResponse(g)&&(Object.defineProperty(g,"readyState",{value:4}),Object.defineProperty(g,"status",{value:200}),a.instance.disableLogger()),p()},g.setRequestHeader("Authorization","Basic "+btoa("".concat(c,"%/%").concat(l)+":"+o)),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),g.setRequestHeader("OV-Final-User-Id",c),g.setRequestHeader("OV-Session-Id",l),g.setRequestHeader("OV-Token",o)};this.instance.currentAppender=e.JL.createAjaxAppender("appender-".concat(c,"-").concat(l)),this.instance.currentAppender.setOptions({beforeSend:u,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var f=function(g){var p=function(){var b=new WeakSet;return function(v,m){if(typeof m=="object"&&m!=null){if(b.has(m)||globalThis.HTMLElement&&m instanceof HTMLElement)return;b.add(m)}return m}},_=JSON.stringify(g,p());return _.length>a.instance.MAX_LENGTH_STRING_JSON&&(_="".concat(_.substring(0,a.instance.MAX_LENGTH_STRING_JSON),"...")),globalThis.LOG_JSNLOG_RESULTS&&console.log(_),_};e.JL.setOptions({defaultAjaxUrl:s.httpUri+this.instance.JSNLOG_URL,serialize:f,enabled:!0}),(0,e.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=l,this.instance.info("JSNLog configured.")}}catch(g){console.error("Error configuring JSNLog: "),console.error(g),this.instance.disableLogger()}},i.getInstance=function(){return i.instance||(i.instance=new i),i.instance},i.isInvalidResponse=function(s){return s.status==401||s.status==403||s.status==404||s.status==0},i.prototype.canConfigureJSNLog=function(s,o){return s.session.sessionId!=o.loggingSessionId},i.prototype.isOpenViduBrowserLogsDebugActive=function(s){return s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug||s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug_app},i.prototype.getConsoleWithJSNLog=function(){return function(s){return{log:function(){s.defaultConsoleLogger.log.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().info(arguments)},info:function(){s.defaultConsoleLogger.info.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().info(arguments)},debug:function(){s.defaultConsoleLogger.debug.apply(s.defaultConsoleLogger.logger,arguments)},warn:function(){s.defaultConsoleLogger.warn.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().warn(arguments)},error:function(){s.defaultConsoleLogger.error.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().error(arguments)}}}(this)},i.prototype.replaceWindowConsole=function(){globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.getConsoleWithJSNLog().log,globalThis.console.info=this.getConsoleWithJSNLog().info,globalThis.console.debug=this.getConsoleWithJSNLog().debug,globalThis.console.warn=this.getConsoleWithJSNLog().warn,globalThis.console.error=this.getConsoleWithJSNLog().error},i.prototype.disableLogger=function(){e.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.defaultConsoleLogger.log,globalThis.console.info=this.defaultConsoleLogger.info,globalThis.console.debug=this.defaultConsoleLogger.debug,globalThis.console.warn=this.defaultConsoleLogger.warn,globalThis.console.error=this.defaultConsoleLogger.error},i.prototype.log=function(){this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().info(arguments)},i.prototype.debug=function(){this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},i.prototype.info=function(){this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().info(arguments)},i.prototype.warn=function(){this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().warn(arguments)},i.prototype.error=function(){this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().error(arguments)},i.prototype.flush=function(){this.isJSNLogSetup&&this.currentAppender!=null&&this.currentAppender.sendBatch()},i.prototype.enableProdMode=function(){this.isProdMode=!0},i}();return Nr.OpenViduLogger=r,Nr}var Dr={},ni={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */var TC=ni.exports,xl;function xC(){return xl||(xl=1,function(e,t){(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=t,s=e&&!e.nodeType&&e,o=i&&s&&typeof Cl=="object"&&Cl;o&&(o.global===o||o.window===o||o.self===o)&&(r=o);var a=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,u=l.hasOwnProperty,f=l.toString;function g(y){return y=String(y),y.charAt(0).toUpperCase()+y.slice(1)}function p(y,I,A){var M={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return I&&A&&/^Win/i.test(y)&&!/^Windows Phone /i.test(y)&&(M=M[/[\d.]+$/.exec(y)])&&(y="Windows "+M),y=String(y),I&&A&&(y=y.replace(RegExp(I,"i"),A)),y=b(y.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),y}function _(y,I){var A=-1,M=y?y.length:0;if(typeof M=="number"&&M>-1&&M<=a)for(;++A<M;)I(y[A],A,y);else v(y,I)}function b(y){return y=h(y),/^(?:webOS|i(?:OS|P))/.test(y)?y:g(y)}function v(y,I){for(var A in y)u.call(y,A)&&I(y[A],A,y)}function m(y){return y==null?g(y):f.call(y).slice(8,-1)}function C(y,I){var A=y!=null?typeof y[I]:"number";return!/^(?:boolean|number|string|undefined)$/.test(A)&&(A=="object"?!!y[I]:!0)}function k(y){return String(y).replace(/([ -])(?!$)/g,"$1?")}function w(y,I){var A=null;return _(y,function(M,N){A=I(A,M,N,y)}),A}function h(y){return String(y).replace(/^ +| +$/g,"")}function S(y){var I=r,A=y&&typeof y=="object"&&m(y)!="String";A&&(I=y,y=null);var M=I.navigator||{},N=M.userAgent||"";y||(y=N);var E=A?!!M.likeChrome:/\bChrome\b/.test(y)&&!/internal|\n/i.test(f.toString()),T="Object",$=A?T:"ScriptBridgingProxyObject",P=A?T:"Environment",R=A&&I.java?"JavaPackage":m(I.java),O=A?T:"RuntimeObject",B=/\bJava/.test(R)&&I.java,j=B&&m(I.environment)==P,G=B?"a":"α",J=B?"b":"β",ee=I.document||{},X=I.operamini||I.opera,pe=c.test(pe=A&&X?X["[[Class]]"]:m(X))?pe:X=null,F,z=y,Z=[],ne=null,se=y==N,re=se&&X&&typeof X.version=="function"&&X.version(),V,D=de([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),L=ce(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Q=be([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=le({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),W=ie(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function de(Se){return w(Se,function(Ee,ve){return Ee||RegExp("\\b"+(ve.pattern||k(ve))+"\\b","i").exec(y)&&(ve.label||ve)})}function le(Se){return w(Se,function(Ee,ve,Le){return Ee||(ve[Q]||ve[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Q)]||RegExp("\\b"+k(Le)+"(?:\\b|\\w*\\d)","i").exec(y))&&Le})}function ce(Se){return w(Se,function(Ee,ve){return Ee||RegExp("\\b"+(ve.pattern||k(ve))+"\\b","i").exec(y)&&(ve.label||ve)})}function ie(Se){return w(Se,function(Ee,ve){var Le=ve.pattern||k(ve);return!Ee&&(Ee=RegExp("\\b"+Le+"(?:/[\\d.]+|[ \\w.]*)","i").exec(y))&&(Ee=p(Ee,Le,ve.label||ve)),Ee})}function be(Se){return w(Se,function(Ee,ve){var Le=ve.pattern||k(ve);return!Ee&&(Ee=RegExp("\\b"+Le+" *\\d+[.\\w_]*","i").exec(y)||RegExp("\\b"+Le+" *\\w+-[\\w]*","i").exec(y)||RegExp("\\b"+Le+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(y))&&((Ee=String(ve.label&&!RegExp(Le,"i").test(ve.label)?ve.label:Ee).split("/"))[1]&&!/[\d.]+/.test(Ee[0])&&(Ee[0]+=" "+Ee[1]),ve=ve.label||ve,Ee=b(Ee[0].replace(RegExp(Le,"i"),ve).replace(RegExp("; *(?:"+ve+"[_-])?","i")," ").replace(RegExp("("+ve+")[-_.]?(\\w)","i"),"$1 $2"))),Ee})}function fe(Se){return w(Se,function(Ee,ve){return Ee||(RegExp(ve+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(y)||0)[1]||null})}function ye(){return this.description||""}if(D&&(D=[D]),/\bAndroid\b/.test(W)&&!Q&&(F=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(y))&&(Q=h(F[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Y&&!Q?Q=be([Y]):Y&&Q&&(Q=Q.replace(RegExp("^("+k(Y)+")[-_.\\s]","i"),Y+" ").replace(RegExp("^("+k(Y)+")[-_.]?(\\w)","i"),Y+" $2")),(F=/\bGoogle TV\b/.exec(Q))&&(Q=F[0]),/\bSimulator\b/i.test(y)&&(Q=(Q?Q+" ":"")+"Simulator"),L=="Opera Mini"&&/\bOPiOS\b/.test(y)&&Z.push("running in Turbo/Uncompressed mode"),L=="IE"&&/\blike iPhone OS\b/.test(y)?(F=S(y.replace(/like iPhone OS/,"")),Y=F.manufacturer,Q=F.product):/^iP/.test(Q)?(L||(L="Safari"),W="iOS"+((F=/ OS ([\d_]+)/i.exec(y))?" "+F[1].replace(/_/g,"."):"")):L=="Konqueror"&&/^Linux\b/i.test(W)?W="Kubuntu":Y&&Y!="Google"&&(/Chrome/.test(L)&&!/\bMobile Safari\b/i.test(y)||/\bVita\b/.test(Q))||/\bAndroid\b/.test(W)&&/^Chrome/.test(L)&&/\bVersion\//i.test(y)?(L="Android Browser",W=/\bAndroid\b/.test(W)?W:"Android"):L=="Silk"?(/\bMobi/i.test(y)||(W="Android",Z.unshift("desktop mode")),/Accelerated *= *true/i.test(y)&&Z.unshift("accelerated")):L=="UC Browser"&&/\bUCWEB\b/.test(y)?Z.push("speed mode"):L=="PaleMoon"&&(F=/\bFirefox\/([\d.]+)\b/.exec(y))?Z.push("identifying as Firefox "+F[1]):L=="Firefox"&&(F=/\b(Mobile|Tablet|TV)\b/i.exec(y))?(W||(W="Firefox OS"),Q||(Q=F[1])):!L||(F=!/\bMinefield\b/i.test(y)&&/\b(?:Firefox|Safari)\b/.exec(L))?(L&&!Q&&/[\/,]|^[^(]+?\)/.test(y.slice(y.indexOf(F+"/")+8))&&(L=null),(F=Q||Y||W)&&(Q||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(W))&&(L=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(W)?W:F)+" Browser")):L=="Electron"&&(F=(/\bChrome\/([\d.]+)\b/.exec(y)||0)[1])&&Z.push("Chromium "+F),re||(re=fe(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",k(L),"(?:Firefox|Minefield|NetFront)"])),(F=D=="iCab"&&parseFloat(re)>3&&"WebKit"||/\bOpera\b/.test(L)&&(/\bOPR\b/.test(y)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(y)&&!/^(?:Trident|EdgeHTML)$/.test(D)&&"WebKit"||!D&&/\bMSIE\b/i.test(y)&&(W=="Mac OS"?"Tasman":"Trident")||D=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(L)&&"NetFront")&&(D=[F]),L=="IE"&&(F=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(y)||0)[1])?(L+=" Mobile",W="Windows Phone "+(/\+$/.test(F)?F:F+".x"),Z.unshift("desktop mode")):/\bWPDesktop\b/i.test(y)?(L="IE Mobile",W="Windows Phone 8.x",Z.unshift("desktop mode"),re||(re=(/\brv:([\d.]+)/.exec(y)||0)[1])):L!="IE"&&D=="Trident"&&(F=/\brv:([\d.]+)/.exec(y))&&(L&&Z.push("identifying as "+L+(re?" "+re:"")),L="IE",re=F[1]),se){if(C(I,"global"))if(B&&(F=B.lang.System,z=F.getProperty("os.arch"),W=W||F.getProperty("os.name")+" "+F.getProperty("os.version")),j){try{re=I.require("ringo/engine").version.join("."),L="RingoJS"}catch{(F=I.system)&&F.global.system==I.system&&(L="Narwhal",W||(W=F[0].os||null))}L||(L="Rhino")}else typeof I.process=="object"&&!I.process.browser&&(F=I.process)&&(typeof F.versions=="object"&&(typeof F.versions.electron=="string"?(Z.push("Node "+F.versions.node),L="Electron",re=F.versions.electron):typeof F.versions.nw=="string"&&(Z.push("Chromium "+re,"Node "+F.versions.node),L="NW.js",re=F.versions.nw)),L||(L="Node.js",z=F.arch,W=F.platform,re=/[\d.]+/.exec(F.version),re=re?re[0]:null));else m(F=I.runtime)==$?(L="Adobe AIR",W=F.flash.system.Capabilities.os):m(F=I.phantom)==O?(L="PhantomJS",re=(F=F.version||null)&&F.major+"."+F.minor+"."+F.patch):typeof ee.documentMode=="number"&&(F=/\bTrident\/(\d+)/i.exec(y))?(re=[re,ee.documentMode],(F=+F[1]+4)!=re[1]&&(Z.push("IE "+re[1]+" mode"),D&&(D[1]=""),re[1]=F),re=L=="IE"?String(re[1].toFixed(1)):re[0]):typeof ee.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(L)&&(Z.push("masking as "+L+" "+re),L="IE",re="11.0",D=["Trident"],W="Windows");W=W&&b(W)}if(re&&(F=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(re)||/(?:alpha|beta)(?: ?\d)?/i.exec(y+";"+(se&&M.appMinorVersion))||/\bMinefield\b/i.test(y)&&"a")&&(ne=/b/i.test(F)?"beta":"alpha",re=re.replace(RegExp(F+"\\+?$"),"")+(ne=="beta"?J:G)+(/\d+\+?/.exec(F)||"")),L=="Fennec"||L=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(W))L="Firefox Mobile";else if(L=="Maxthon"&&re)re=re.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Q))Q=="Xbox 360"&&(W=null),Q=="Xbox 360"&&/\bIEMobile\b/.test(y)&&Z.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(L)||L&&!Q&&!/Browser|Mobi/.test(L))&&(W=="Windows CE"||/Mobi/i.test(y)))L+=" Mobile";else if(L=="IE"&&se)try{I.external===null&&Z.unshift("platform preview")}catch{Z.unshift("embedded")}else(/\bBlackBerry\b/.test(Q)||/\bBB10\b/.test(y))&&(F=(RegExp(Q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(y)||0)[1]||re)?(F=[F,/BB10/.test(y)],W=(F[1]?(Q=null,Y="BlackBerry"):"Device Software")+" "+F[0],re=null):this!=v&&Q!="Wii"&&(se&&X||/Opera/.test(L)&&/\b(?:MSIE|Firefox)\b/i.test(y)||L=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(W)||L=="IE"&&(W&&!/^Win/.test(W)&&re>5.5||/\bWindows XP\b/.test(W)&&re>8||re==8&&!/\bTrident\b/.test(y)))&&!c.test(F=S.call(v,y.replace(c,"")+";"))&&F.name&&(F="ing as "+F.name+((F=F.version)?" "+F:""),c.test(L)?(/\bIE\b/.test(F)&&W=="Mac OS"&&(W=null),F="identify"+F):(F="mask"+F,pe?L=b(pe.replace(/([a-z])([A-Z])/g,"$1 $2")):L="Opera",/\bIE\b/.test(F)&&(W=null),se||(re=null)),D=["Presto"],Z.push(F));(F=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(y)||0)[1])&&(F=[parseFloat(F.replace(/\.(\d)$/,".0$1")),F],L=="Safari"&&F[1].slice(-1)=="+"?(L="WebKit Nightly",ne="alpha",re=F[1].slice(0,-1)):(re==F[1]||re==(F[2]=(/\bSafari\/([\d.]+\+?)/i.exec(y)||0)[1]))&&(re=null),F[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(y)||0)[1],F[0]==537.36&&F[2]==537.36&&parseFloat(F[1])>=28&&D=="WebKit"&&(D=["Blink"]),!se||!E&&!F[1]?(D&&(D[1]="like Safari"),F=(F=F[0],F<400?1:F<500?2:F<526?3:F<533?4:F<534?"4+":F<535?5:F<537?6:F<538?7:F<601?8:F<602?9:F<604?10:F<606?11:F<608?12:"12")):(D&&(D[1]="like Chrome"),F=F[1]||(F=F[0],F<530?1:F<532?2:F<532.05?3:F<533?4:F<534.03?5:F<534.07?6:F<534.1?7:F<534.13?8:F<534.16?9:F<534.24?10:F<534.3?11:F<535.01?12:F<535.02?"13+":F<535.07?15:F<535.11?16:F<535.19?17:F<536.05?18:F<536.1?19:F<537.01?20:F<537.11?"21+":F<537.13?23:F<537.18?24:F<537.24?25:F<537.36?26:D!="Blink"?"27":"28")),D&&(D[1]+=" "+(F+=typeof F=="number"?".x":/[.+]/.test(F)?"":"+")),L=="Safari"&&(!re||parseInt(re)>45)?re=F:L=="Chrome"&&/\bHeadlessChrome/i.test(y)&&Z.unshift("headless")),L=="Opera"&&(F=/\bzbov|zvav$/.exec(W))?(L+=" ",Z.unshift("desktop mode"),F=="zvav"?(L+="Mini",re=null):L+="Mobile",W=W.replace(RegExp(" *"+F+"$"),"")):L=="Safari"&&/\bChrome\b/.exec(D&&D[1])?(Z.unshift("desktop mode"),L="Chrome Mobile",re=null,/\bOS X\b/.test(W)?(Y="Apple",W="iOS 4.3+"):W=null):/\bSRWare Iron\b/.test(L)&&!re&&(re=fe("Chrome")),re&&re.indexOf(F=/[\d.]+$/.exec(W))==0&&y.indexOf("/"+F+"-")>-1&&(W=h(W.replace(F,""))),W&&W.indexOf(L)!=-1&&!RegExp(L+" OS").test(W)&&(W=W.replace(RegExp(" *"+k(L)+" *"),"")),D&&!/\b(?:Avant|Nook)\b/.test(L)&&(/Browser|Lunascape|Maxthon/.test(L)||L!="Safari"&&/^iOS/.test(W)&&/\bSafari\b/.test(D[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(L)&&D[1])&&(F=D[D.length-1])&&Z.push(F),Z.length&&(Z=["("+Z.join("; ")+")"]),Y&&Q&&Q.indexOf(Y)<0&&Z.push("on "+Y),Q&&Z.push((/^on /.test(Z[Z.length-1])?"":"on ")+Q),W&&(F=/ ([\d.+]+)$/.exec(W),V=F&&W.charAt(W.length-F[0].length-1)=="/",W={architecture:32,family:F&&!V?W.replace(F[0],""):W,version:F?F[1]:null,toString:function(){var Se=this.version;return this.family+(Se&&!V?" "+Se:"")+(this.architecture==64?" 64-bit":"")}}),(F=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(z))&&!/\bi686\b/i.test(z)?(W&&(W.architecture=64,W.family=W.family.replace(RegExp(" *"+F),"")),L&&(/\bWOW64\b/i.test(y)||se&&/\w(?:86|32)$/.test(M.cpuClass||M.platform)&&!/\bWin64; x64\b/i.test(y))&&Z.unshift("32-bit")):W&&/^OS X/.test(W.family)&&L=="Chrome"&&parseFloat(re)>=39&&(W.architecture=64),y||(y=null);var me={};return me.description=y,me.layout=D&&D[0],me.manufacturer=Y,me.name=L,me.prerelease=ne,me.product=Q,me.ua=y,me.version=L&&re,me.os=W||{architecture:null,family:null,version:null,toString:function(){return"null"}},me.parse=S,me.toString=ye,me.version&&Z.unshift(re),me.name&&Z.unshift(L),W&&L&&!(W==String(W).split(" ")[0]&&(W==L.split(" ")[0]||Q))&&Z.push(Q?"("+W+")":"on "+W),Z.length&&(me.description=Z.join(" ")),me}var x=S();i&&s?v(x,function(y,I){i[I]=y}):r.platform=x}).call(TC)}(ni,ni.exports)),ni.exports}var Pl;function yn(){if(Pl)return Dr;Pl=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.PlatformUtils=void 0;var e=xC(),t=function(){function n(){}return n.getInstance=function(){return this.instance||(this.instance=new n),n.instance},n.prototype.isChromeBrowser=function(){return e.name==="Chrome"},n.prototype.isSafariBrowser=function(){return e.name==="Safari"},n.prototype.isChromeMobileBrowser=function(){return e.name==="Chrome Mobile"},n.prototype.isFirefoxBrowser=function(){return e.name==="Firefox"},n.prototype.isFirefoxMobileBrowser=function(){return e.name==="Firefox Mobile"||e.name==="Firefox for iOS"},n.prototype.isOperaBrowser=function(){return e.name==="Opera"},n.prototype.isOperaMobileBrowser=function(){return e.name==="Opera Mobile"},n.prototype.isEdgeBrowser=function(){var r=e!=null&&e.version?parseFloat(e.version):-1;return e.name==="Microsoft Edge"&&r>=80},n.prototype.isEdgeMobileBrowser=function(){var r,i,s=e!=null&&e.version?parseFloat(e.version):-1;return e.name==="Microsoft Edge"&&(((r=e.os)===null||r===void 0?void 0:r.family)==="Android"||((i=e.os)===null||i===void 0?void 0:i.family)==="iOS")&&s>45},n.prototype.isAndroidBrowser=function(){return e.name==="Android Browser"},n.prototype.isElectron=function(){return e.name==="Electron"},n.prototype.isNodeJs=function(){return e.name==="Node.js"},n.prototype.isSamsungBrowser=function(){return e.name==="Samsung Internet Mobile"||e.name==="Samsung Internet"},n.prototype.isMotorolaEdgeDevice=function(){var r;return((r=e.product)===null||r===void 0?void 0:r.toLowerCase().includes("motorola edge"))||!1},n.prototype.isIPhoneOrIPad=function(){var r=e.ua?e.ua:navigator.userAgent,i="ontouchend"in document,s=/\b(\w*Macintosh\w*)\b/.test(r)&&i,o=/\b(\w*iPhone\w*)\b/.test(r)&&/\b(\w*Mobile\w*)\b/.test(r)&&i;return s||o},n.prototype.isIOSWithSafari=function(){var r=e.ua?e.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(r)&&!/\b(\w*CriOS\w*)\b/.test(r)&&!/\b(\w*FxiOS\w*)\b/.test(r)},n.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&e.ua.indexOf("Safari")===-1},n.prototype.isIonicAndroid=function(){return e.os.family==="Android"&&e.name=="Android Browser"},n.prototype.isMobileDevice=function(){return e.os.family==="iOS"||e.os.family==="Android"},n.prototype.isReactNative=function(){return!1},n.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()||this.isMotorolaEdgeDevice()},n.prototype.canScreenShare=function(){var r=e!=null&&e.version?parseFloat(e.version):-1;return this.isMobileDevice()?!1:this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&r>=13},n.prototype.getName=function(){return e.name||""},n.prototype.getVersion=function(){return e.version||""},n.prototype.getFamily=function(){return e.os.family||""},n.prototype.getDescription=function(){return e.description||""},n}();return Dr.PlatformUtils=t,Dr}var So,Al;function PC(){if(Al)return So;Al=1;function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}return e.prototype.define=function(t,n){for(let r in t){let i=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<i.length;s++){const o=i[s];if(o[0]!=="*"){if(!n&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(n||!this._extensions[r]){const s=i[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}},e.prototype.getType=function(t){t=String(t);let n=t.replace(/^.*[/\\]/,"").toLowerCase(),r=n.replace(/^.*\./,"").toLowerCase(),i=n.length<t.length;return(r.length<n.length-1||!i)&&this._types[r]||null},e.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null},So=e,So}var wo,Nl;function AC(){return Nl||(Nl=1,wo={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}),wo}var Co,Ml;function NC(){if(Ml)return Co;Ml=1;let e=PC();return Co=new e(AC()),Co}var Dl;function Sp(){if(Dl)return Ar;Dl=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.LocalRecorder=void 0;var e=Ep(),t=ot(),n=yn(),r=NC(),i=t.OpenViduLogger.getInstance(),s,o=function(){function a(c){this.stream=c,this.chunks=[],s=n.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=e.LocalRecorderState.READY}return a.prototype.record=function(c){var l=this;return new Promise(function(u,f){try{if(typeof c=="string"||c instanceof String)return f(`When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: "`.concat(c,'" }'));if(typeof MediaRecorder>"u")throw i.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(l.state!==e.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+l.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");i.log("Starting local recording of stream '"+l.stream.streamId+"' of connection '"+l.connectionId+"'"),c?c.mimeType||(c.mimeType="video/webm"):c={mimeType:"video/webm"},l.mediaRecorder=new MediaRecorder(l.stream.getMediaStream(),c),l.mediaRecorder.start()}catch(g){return f(g)}return l.mediaRecorder.ondataavailable=function(g){g.data.size>0&&l.chunks.push(g.data)},l.mediaRecorder.onerror=function(g){i.error("MediaRecorder error: ",g)},l.mediaRecorder.onstart=function(){i.log("MediaRecorder started (state="+l.mediaRecorder.state+")")},l.mediaRecorder.onstop=function(){l.onStopDefault()},l.mediaRecorder.onpause=function(){i.log("MediaRecorder paused (state="+l.mediaRecorder.state+")")},l.mediaRecorder.onresume=function(){i.log("MediaRecorder resumed (state="+l.mediaRecorder.state+")")},l.state=e.LocalRecorderState.RECORDING,u()})},a.prototype.stop=function(){var c=this;return new Promise(function(l,u){try{if(c.state===e.LocalRecorderState.READY||c.state===e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+c.state+"'). Call 'LocalRecorder.start()' before");c.mediaRecorder.onstop=function(){return c.onStopDefault(),l()},c.mediaRecorder.stop()}catch(f){return u(f)}})},a.prototype.pause=function(){var c=this;return new Promise(function(l,u){try{return c.state!==e.LocalRecorderState.RECORDING?u(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+c.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(c.mediaRecorder.pause(),c.state=e.LocalRecorderState.PAUSED,l())}catch(f){return u(f)}})},a.prototype.resume=function(){var c=this;return new Promise(function(l,u){try{if(c.state!==e.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+c.state+"'). Call 'LocalRecorder.pause()' before");return c.mediaRecorder.resume(),c.state=e.LocalRecorderState.RECORDING,l()}catch(f){return u(f)}})},a.prototype.preview=function(c){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,s.isSafariBrowser()&&(this.videoPreview.playsInline=!0),typeof c=="string"){var l=document.getElementById(c);l&&(this.videoPreview=l.appendChild(this.videoPreview))}else this.videoPreview=c.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},a.prototype.clean=function(){var c=this,l=function(){delete c.blob,c.chunks=[],c.state=e.LocalRecorderState.READY};this.state===e.LocalRecorderState.RECORDING||this.state===e.LocalRecorderState.PAUSED?this.stop().then(function(){return l()}).catch(function(){return l()}):l()},a.prototype.download=function(){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var c=document.createElement("a");c.style.display="none",document.body.appendChild(c);var l=globalThis.URL.createObjectURL(this.blob);c.href=l,c.download=this.id+"."+r.getExtension(this.blob.type),c.click(),globalThis.URL.revokeObjectURL(l),document.body.removeChild(c)},a.prototype.getBlob=function(){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},a.prototype.uploadAsBinary=function(c,l){var u=this;return new Promise(function(f,g){if(u.state!==e.LocalRecorderState.FINISHED)return g(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+u.state+"'). Call 'LocalRecorder.stop()' before"));var p=new XMLHttpRequest;if(p.open("POST",c,!0),typeof l=="object")for(var _=0,b=Object.keys(l);_<b.length;_++){var v=b[_];p.setRequestHeader(v,l[v])}p.onreadystatechange=function(){if(p.readyState===4)return p.status.toString().charAt(0)==="2"?f(p.responseText):g(p.status)},p.send(u.blob)})},a.prototype.uploadAsMultipartfile=function(c,l){var u=this;return new Promise(function(f,g){if(u.state!==e.LocalRecorderState.FINISHED)return g(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+u.state+"'). Call 'LocalRecorder.stop()' before"));var p=new XMLHttpRequest;if(p.open("POST",c,!0),typeof l=="object")for(var _=0,b=Object.keys(l);_<b.length;_++){var v=b[_];p.setRequestHeader(v,l[v])}var m=new FormData;m.append("file",u.blob,u.id+"."+r.getExtension(u.blob.type)),p.onreadystatechange=function(){if(p.readyState===4)return p.status.toString().charAt(0)==="2"?f(p.responseText):g(p.status)},p.send(m)})},a.prototype.onStopDefault=function(){i.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=globalThis.URL.createObjectURL(this.blob),this.state=e.LocalRecorderState.FINISHED},a}();return Ar.LocalRecorder=o,Ar}var Tt={},xt={},Lr={},Kt={},$r={},In={},Vr={},Ll;function ft(){if(Ll)return Vr;Ll=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Event=void 0;var e=function(){function t(n,r,i){this.hasBeenPrevented=!1,this.cancelable=n,this.target=r,this.type=i}return t.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},t.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},t}();return Vr.Event=e,Vr}var $l;function Sr(){if($l)return In;$l=1;var e=In&&In.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(In,"__esModule",{value:!0}),In.StreamPropertyChangedEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c,l,u){var f=r.call(this,!1,s,"streamPropertyChanged")||this;return f.stream=o,f.changedProperty=a,f.newValue=c,f.oldValue=l,f.reason=u,f}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return In.StreamPropertyChangedEvent=n,In}var Io={},Vl;function wr(){return Vl||(Vl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OpenViduError=e.OpenViduErrorName=void 0,function(n){n.BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",n.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",n.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",n.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",n.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",n.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",n.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",n.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",n.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",n.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",n.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",n.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",n.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",n.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",n.VIRTUAL_BACKGROUND_ERROR="VIRTUAL_BACKGROUND_ERROR",n.GENERIC_ERROR="GENERIC_ERROR"}(e.OpenViduErrorName||(e.OpenViduErrorName={}));var t=function(){function n(r,i){this.name=r,this.message=i}return n}();e.OpenViduError=t}(Io)),Io}var Bl;function Fa(){if(Bl)return $r;Bl=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.Filter=void 0;var e=Sr(),t=wr(),n=ot(),r=n.OpenViduLogger.getInstance(),i=function(){function s(o,a){this.handlers=new Map,this.type=o,this.options=a}return s.prototype.execMethod=function(o,a){var c=this;return new Promise(function(l,u){var f;r.info("Executing filter method to stream "+c.stream.streamId);var g,p=function(v){r.info("Filter method successfully executed on Stream "+c.stream.streamId);var m=Object.assign({},c.stream.filter);return c.stream.filter.lastExecMethod={method:o,params:g},v&&(c.stream.session.emitEvent("streamPropertyChanged",[new e.StreamPropertyChangedEvent(c.stream.session,c.stream,"filter",c.stream.filter,m,"execFilterMethod")]),c.stream.streamManager.emitEvent("streamPropertyChanged",[new e.StreamPropertyChangedEvent(c.stream.streamManager,c.stream,"filter",c.stream.filter,m,"execFilterMethod")])),l()};if(c.type.startsWith("VB:")){if(typeof a=="string")try{a=JSON.parse(a)}catch(v){return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+v))}if(g=a,o==="update")if(!((f=c.stream.virtualBackgroundSinkElements)===null||f===void 0)&&f.VB)c.stream.virtualBackgroundSinkElements.VB.updateValues(a).then(function(){return p(!1)}).catch(function(v){return v.name===t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?u(new t.OpenViduError(v.name,v.message)):u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+v))});else return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));else return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(o,'"')))}else{var _=void 0;if(typeof a!="string")try{_=JSON.stringify(a)}catch{var b="'params' property must be a JSON formatted object";return r.error(b),u(b)}else _=a;g=_,c.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:c.stream.streamId,method:o,params:_},function(v,m){return v?(r.error("Error executing filter method for Stream "+c.stream.streamId,v),v.code===401?u(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):u(v)):p(!0)})}})},s.prototype.addEventListener=function(o,a){var c=this;return new Promise(function(l,u){r.info("Adding filter event listener to event "+o+" to stream "+c.stream.streamId),c.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:c.stream.streamId,eventType:o},function(f,g){return f?(r.error("Error adding filter event listener to event "+o+"for Stream "+c.stream.streamId,f),f.code===401?u(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):u(f)):(c.handlers.set(o,a),r.info("Filter event listener to event "+o+" successfully applied on Stream "+c.stream.streamId),l())})})},s.prototype.removeEventListener=function(o){var a=this;return new Promise(function(c,l){r.info("Removing filter event listener to event "+o+" to stream "+a.stream.streamId),a.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:a.stream.streamId,eventType:o},function(u,f){return u?(r.error("Error removing filter event listener to event "+o+"for Stream "+a.stream.streamId,u),u.code===401?l(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):l(u)):(a.handlers.delete(o),r.info("Filter event listener to event "+o+" successfully removed on Stream "+a.stream.streamId),c())})})},s}();return $r.Filter=i,$r}var Rn={},On={},Br={},is={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */var MC=is.exports,jl;function Ua(){return jl||(jl=1,function(e){(function(t){function n(){}var r=n.prototype,i=t.EventEmitter;function s(c,l){for(var u=c.length;u--;)if(c[u].listener===l)return u;return-1}function o(c){return function(){return this[c].apply(this,arguments)}}r.getListeners=function(l){var u=this._getEvents(),f,g;if(l instanceof RegExp){f={};for(g in u)u.hasOwnProperty(g)&&l.test(g)&&(f[g]=u[g])}else f=u[l]||(u[l]=[]);return f},r.flattenListeners=function(l){var u=[],f;for(f=0;f<l.length;f+=1)u.push(l[f].listener);return u},r.getListenersAsObject=function(l){var u=this.getListeners(l),f;return u instanceof Array&&(f={},f[l]=u),f||u};function a(c){return typeof c=="function"||c instanceof RegExp?!0:c&&typeof c=="object"?a(c.listener):!1}r.addListener=function(l,u){if(!a(u))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(l),g=typeof u=="object",p;for(p in f)f.hasOwnProperty(p)&&s(f[p],u)===-1&&f[p].push(g?u:{listener:u,once:!1});return this},r.on=o("addListener"),r.addOnceListener=function(l,u){return this.addListener(l,{listener:u,once:!0})},r.once=o("addOnceListener"),r.defineEvent=function(l){return this.getListeners(l),this},r.defineEvents=function(l){for(var u=0;u<l.length;u+=1)this.defineEvent(l[u]);return this},r.removeListener=function(l,u){var f=this.getListenersAsObject(l),g,p;for(p in f)f.hasOwnProperty(p)&&(g=s(f[p],u),g!==-1&&f[p].splice(g,1));return this},r.off=o("removeListener"),r.addListeners=function(l,u){return this.manipulateListeners(!1,l,u)},r.removeListeners=function(l,u){return this.manipulateListeners(!0,l,u)},r.manipulateListeners=function(l,u,f){var g,p,_=l?this.removeListener:this.addListener,b=l?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(g in u)u.hasOwnProperty(g)&&(p=u[g])&&(typeof p=="function"?_.call(this,g,p):b.call(this,g,p));else for(g=f.length;g--;)_.call(this,u,f[g]);return this},r.removeEvent=function(l){var u=typeof l,f=this._getEvents(),g;if(u==="string")delete f[l];else if(l instanceof RegExp)for(g in f)f.hasOwnProperty(g)&&l.test(g)&&delete f[g];else delete this._events;return this},r.removeAllListeners=o("removeEvent"),r.emitEvent=function(l,u){var f=this.getListenersAsObject(l),g,p,_,b,v;for(b in f)if(f.hasOwnProperty(b))for(g=f[b].slice(0),_=0;_<g.length;_++)p=g[_],p.once===!0&&this.removeListener(l,p.listener),v=p.listener.apply(this,u||[]),v===this._getOnceReturnValue()&&this.removeListener(l,p.listener);return this},r.trigger=o("emitEvent"),r.emit=function(l){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,u)},r.setOnceReturnValue=function(l){return this._onceReturnValue=l,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=i,n},e.exports?e.exports=n:t.EventEmitter=n})(typeof window<"u"?window:MC||{})}(is)),is.exports}var Fl;function Ha(){if(Fl)return Br;Fl=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.EventDispatcher=void 0;var e=ot(),t=Ua(),n=e.OpenViduLogger.getInstance(),r=function(){function i(){this.userHandlerArrowHandler=new WeakMap,this.ee=new t}return i.prototype.onAux=function(s,o,a){var c=function(l){l?n.debug(o,l):n.debug(o),a(l)};return this.userHandlerArrowHandler.set(a,c),this.ee.on(s,c),this},i.prototype.onceAux=function(s,o,a){var c=this,l=function(u){u?n.debug(o,u):n.debug(o),a(u),c.userHandlerArrowHandler.delete(a)};return this.userHandlerArrowHandler.set(a,l),this.ee.once(s,l),this},i.prototype.offAux=function(s,o){if(!o)this.ee.removeAllListeners(s);else{var a=this.userHandlerArrowHandler.get(o);a&&this.ee.off(s,a),this.userHandlerArrowHandler.delete(o)}return this},i}();return Br.EventDispatcher=r,Br}var kn={},Ul;function Wa(){if(Ul)return kn;Ul=1;var e=kn&&kn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(kn,"__esModule",{value:!0}),kn.StreamManagerEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,s,o)||this;return c.value=a,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return kn.StreamManagerEvent=n,kn}var Tn={},Hl;function wp(){if(Hl)return Tn;Hl=1;var e=Tn&&Tn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.VideoElementEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,o,a)||this;return c.element=s,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Tn.VideoElementEvent=n,Tn}var jr={},Wl;function Cr(){return Wl||(Wl=1,function(e){var t=jr&&jr.__extends||function(){var i=function(s,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(a[l]=c[l])},i(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(s,o);function a(){this.constructor=s}s.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEvent=e.ExceptionEventName=void 0;var n=ft();(function(i){i.ICE_CANDIDATE_ERROR="ICE_CANDIDATE_ERROR",i.ICE_CONNECTION_FAILED="ICE_CONNECTION_FAILED",i.ICE_CONNECTION_DISCONNECTED="ICE_CONNECTION_DISCONNECTED",i.NO_STREAM_PLAYING_EVENT="NO_STREAM_PLAYING_EVENT",i.SPEECH_TO_TEXT_DISCONNECTED="SPEECH_TO_TEXT_DISCONNECTED"})(e.ExceptionEventName||(e.ExceptionEventName={}));var r=function(i){t(s,i);function s(o,a,c,l,u){var f=i.call(this,!1,o,"exception")||this;return f.name=a,f.origin=c,f.message=l,f.data=u,f}return s.prototype.callDefaultBehavior=function(){},s}(n.Event);e.ExceptionEvent=r}(jr)),jr}var Ro={},ql;function Ws(){return ql||(ql=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VideoInsertMode=void 0,function(t){t.AFTER="AFTER",t.APPEND="APPEND",t.BEFORE="BEFORE",t.PREPEND="PREPEND",t.REPLACE="REPLACE"}(e.VideoInsertMode||(e.VideoInsertMode={}))}(Ro)),Ro}var Gl;function qa(){if(Gl)return On;Gl=1;var e=On&&On.__extends||function(){var f=function(g,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(_[v]=b[v])},f(g,p)};return function(g,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");f(g,p);function _(){this.constructor=g}g.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}();Object.defineProperty(On,"__esModule",{value:!0}),On.StreamManager=void 0;var t=Ha(),n=Wa(),r=wp(),i=Cr(),s=Ws(),o=ot(),a=yn(),c=o.OpenViduLogger.getInstance(),l,u=function(f){e(g,f);function g(p,_){var b=f.call(this)||this;if(b.videos=[],b.lazyLaunchVideoElementCreatedEvent=!1,l=a.PlatformUtils.getInstance(),b.stream=p,b.stream.streamManager=b,b.remote=!b.stream.isLocal(),_){var v=void 0;typeof _=="string"?v=document.getElementById(_):_ instanceof HTMLElement&&(v=_),v&&(b.firstVideoElement={targetElement:v,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(l.isSafariBrowser()||l.isIPhoneOrIPad()&&(l.isChromeMobileBrowser()||l.isEdgeMobileBrowser()||l.isOperaMobileBrowser()||l.isFirefoxMobileBrowser()))&&(b.firstVideoElement.video.playsInline=!0),b.targetElement=v,b.element=v)}return b.canPlayListener=function(){b.deactivateStreamPlayingEventExceptionTimeout(),b.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(b,"streamPlaying",void 0)])},b}return g.prototype.on=function(p,_){return f.prototype.onAux.call(this,p,"Event '"+p+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",_),p==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),p==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(p==="publisherStartSpeaking"&&this.stream.enableHarkSpeakingEvent(),p==="publisherStopSpeaking"&&this.stream.enableHarkStoppedSpeakingEvent(),p==="streamAudioVolumeChange"&&this.stream.enableHarkVolumeChangeEvent(!1)),this},g.prototype.once=function(p,_){return f.prototype.onceAux.call(this,p,"Event '"+p+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",_),p==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),p==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(p==="publisherStartSpeaking"&&this.stream.enableOnceHarkSpeakingEvent(),p==="publisherStopSpeaking"&&this.stream.enableOnceHarkStoppedSpeakingEvent(),p==="streamAudioVolumeChange"&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},g.prototype.off=function(p,_){if(f.prototype.offAux.call(this,p,_),p==="publisherStartSpeaking"){var b=this.ee.getListeners(p).length+this.stream.session.ee.getListeners(p).length;b===0&&this.stream.disableHarkSpeakingEvent(!1)}if(p==="publisherStopSpeaking"){var v=this.ee.getListeners(p).length+this.stream.session.ee.getListeners(p).length;v===0&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if(p==="streamAudioVolumeChange"){var m=this.ee.getListeners(p).length;m===0&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},g.prototype.addVideoElement=function(p){this.initializeVideoProperties(p),!this.remote&&this.stream.displayMyRemote()&&p.srcObject!==this.stream.getMediaStream()&&(p.srcObject=this.stream.getMediaStream());for(var _=0,b=this.videos;_<b.length;_++){var v=b[_];if(v.video===p)return 0}for(var m=1,C=0,k=this.stream.session.streamManagers;C<k.length;C++){var w=k[C];if(w.disassociateVideo(p)){m=-1;break}}return this.stream.session.streamManagers.forEach(function(h){h.disassociateVideo(p)}),this.pushNewStreamManagerVideo({video:p,id:p.id,canplayListenerAdded:!1}),c.info("New video element associated to ",this),m},g.prototype.createVideoElement=function(p,_){var b;if(typeof p=="string"){if(b=document.getElementById(p),!b)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+p)}else if(p instanceof HTMLElement)b=p;else throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+p);var v=this.createVideo();this.initializeVideoProperties(v);var m=_||s.VideoInsertMode.APPEND;switch(m){case s.VideoInsertMode.AFTER:b.parentNode.insertBefore(v,b.nextSibling);break;case s.VideoInsertMode.APPEND:b.appendChild(v);break;case s.VideoInsertMode.BEFORE:b.parentNode.insertBefore(v,b);break;case s.VideoInsertMode.PREPEND:b.insertBefore(v,b.childNodes[0]);break;case s.VideoInsertMode.REPLACE:b.parentNode.replaceChild(v,b);break;default:m=s.VideoInsertMode.APPEND,b.appendChild(v);break}var C={targetElement:b,video:v,insertMode:m,id:v.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(C),this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(C.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,v},g.prototype.updatePublisherSpeakingEventsOptions=function(p){var _=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},b=typeof p.interval=="number"?p.interval:typeof _.interval=="number"?_.interval:100,v=typeof p.threshold=="number"?p.threshold:typeof _.threshold=="number"?_.threshold:-50;this.stream.harkOptions={interval:b,threshold:v},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(b),this.stream.speechEvent.setThreshold(v))},g.prototype.initializeVideoProperties=function(p){!this.remote&&this.stream.displayMyRemote()||p.srcObject!==this.stream.getMediaStream()&&(p.srcObject=this.stream.getMediaStream()),p.autoplay=!0,p.controls=!1,(l.isSafariBrowser()||l.isIPhoneOrIPad()&&(l.isChromeMobileBrowser()||l.isEdgeMobileBrowser()||l.isOperaMobileBrowser()||l.isFirefoxMobileBrowser()))&&(p.playsInline=!0),p.id||(p.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=p.id)),this.remote&&this.isMirroredVideo(p)?this.removeMirrorVideo(p):!this.remote&&!this.stream.displayMyRemote()&&(p.muted=!0,this.isMirroredVideo(p)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(p):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(p))},g.prototype.removeAllVideos=function(){for(var p=this,_=this.stream.session.streamManagers.length-1;_>=0;--_)this.stream.session.streamManagers[_]===this&&this.stream.session.streamManagers.splice(_,1);this.videos.forEach(function(b){b.video&&b.video.removeEventListener&&b.video.removeEventListener("canplay",p.canPlayListener),b.canplayListenerAdded=!1,b.targetElement&&(b.video.parentNode.removeChild(b.video),p.ee.emitEvent("videoElementDestroyed",[new r.VideoElementEvent(b.video,p,"videoElementDestroyed")])),p.removeSrcObject(b),p.videos=p.videos.filter(function(v){return!v.targetElement})})},g.prototype.disassociateVideo=function(p){for(var _=!1,b=0;b<this.videos.length;b++)if(this.videos[b].video===p){this.videos[b].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(b,1),_=!0,c.info("Video element disassociated from ",this);break}return _},g.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},g.prototype.updateMediaStream=function(p){this.videos.forEach(function(_){if(_.video.srcObject=p,l.isIonicIos()){var b=_.video.parentElement,v=_.video;b.replaceChild(v,_.video),_.video=v}})},g.prototype.emitEvent=function(p,_){this.ee.emitEvent(p,_)},g.prototype.createVideo=function(){return document.createElement("video")},g.prototype.removeSrcObject=function(p){p.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},g.prototype.pushNewStreamManagerVideo=function(p){this.videos.push(p),this.addPlayEventToFirstVideo(),this.stream.session.streamManagers.indexOf(this)===-1&&this.stream.session.streamManagers.push(this)},g.prototype.mirrorVideo=function(p){l.isIonicIos()||(p.style.transform="rotateY(180deg)",p.style.webkitTransform="rotateY(180deg)")},g.prototype.removeMirrorVideo=function(p){p.style.transform="unset",p.style.webkitTransform="unset"},g.prototype.isMirroredVideo=function(p){return p.style.transform==="rotateY(180deg)"||p.style.webkitTransform==="rotateY(180deg)"},g.prototype.activateStreamPlayingEventExceptionTimeout=function(){var p=this;if(this.remote&&this.streamPlayingEventExceptionTimeout==null){var _=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout(function(){var b="StreamManager of Stream "+p.stream.streamId+" ("+(p.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+_+" ms";c.warn(b),p.stream.session.emitEvent("exception",[new i.ExceptionEvent(p.stream.session,i.ExceptionEventName.NO_STREAM_PLAYING_EVENT,p,b)]),delete p.streamPlayingEventExceptionTimeout},_)}},g.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},g}(t.EventDispatcher);return On.StreamManager=u,On}var zl;function Ga(){if(zl)return Rn;zl=1;var e=Rn&&Rn.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.Subscriber=void 0;var t=qa(),n=ot(),r=n.OpenViduLogger.getInstance(),i=function(s){e(o,s);function o(a,c,l){var u=s.call(this,a,c)||this;return u.element=u.targetElement,u.stream=a,u.properties=l,u}return o.prototype.subscribeToAudio=function(a){return this.stream.getMediaStream().getAudioTracks().forEach(function(c){c.enabled=a}),this.stream.audioActive=a,r.info("'Subscriber' has "+(a?"subscribed to":"unsubscribed from")+" its audio stream"),this},o.prototype.subscribeToVideo=function(a){return this.stream.getMediaStream().getVideoTracks().forEach(function(c){c.enabled=a}),this.stream.videoActive=a,r.info("'Subscriber' has "+(a?"subscribed to":"unsubscribed from")+" its video stream"),this},o.prototype.replaceTrackInMediaStream=function(a,c){var l=this.stream.getMediaStream(),u;a.kind==="video"?(u=l.getVideoTracks()[0],c&&(this.stream.lastVideoTrackConstraints=a.getConstraints())):u=l.getAudioTracks()[0],l.removeTrack(u),u.stop(),l.addTrack(a)},o}(t.StreamManager);return Rn.Subscriber=i,Rn}var Ke={},Oo,Kl;function DC(){if(Kl)return Oo;Kl=1;var e=["stun:","turn:"];return Oo=function(t){var n=(t||{}).url||t,r,i,s={};return typeof n!="string"&&!(n instanceof String)||(n=n.trim(),r=e[e.indexOf(n.slice(0,5))],!r)?t:(n=n.slice(5),i=n.split("@"),s.username=t.username,s.credential=t.credential,i.length>1&&(n=i[1],i=i[0].split(":"),s.username=i[0],s.credential=(t||{}).credential||i[1]||""),s.url=r+n,s.urls=[s.url],s)},Oo}const LC=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"],$C=[];var ko,Jl;function VC(){if(Jl)return ko;Jl=1;var e=DC(),t=function(n){var r={stun:(n||{}).stun||LC,turn:(n||{}).turn||$C},i=(n||{}).stunCount||2,s=(n||{}).turnCount||0,o;function a(c,l){for(var u=[],f=[].concat(r[c]),g;f.length&&u.length<l;)g=Math.random()*f.length|0,u=u.concat(f.splice(g,1));return u.map(function(p){return typeof p!="string"&&!(p instanceof String)?p:e(c+":"+p)})}return o=[].concat(a("stun",i)),s&&(o=o.concat(a("turn",s))),o};return ko=t,ko}var To={},Fr={},Hi={},Ql;function Cp(){if(Ql)return Hi;Ql=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.default=n;let e;const t=new Uint8Array(16);function n(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return Hi}var ur={},Ur={},Hr={},Xl;function BC(){if(Xl)return Hr;Xl=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Hr.default=e,Hr}var Yl;function qs(){if(Yl)return Ur;Yl=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.default=void 0;var e=t(BC());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){return typeof i=="string"&&e.default.test(i)}var r=n;return Ur.default=r,Ur}var Zl;function Gs(){if(Zl)return ur;Zl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.default=void 0,ur.unsafeStringify=r;var e=t(qs());function t(o){return o&&o.__esModule?o:{default:o}}const n=[];for(let o=0;o<256;++o)n.push((o+256).toString(16).slice(1));function r(o,a=0){return n[o[a+0]]+n[o[a+1]]+n[o[a+2]]+n[o[a+3]]+"-"+n[o[a+4]]+n[o[a+5]]+"-"+n[o[a+6]]+n[o[a+7]]+"-"+n[o[a+8]]+n[o[a+9]]+"-"+n[o[a+10]]+n[o[a+11]]+n[o[a+12]]+n[o[a+13]]+n[o[a+14]]+n[o[a+15]]}function i(o,a=0){const c=r(o,a);if(!(0,e.default)(c))throw TypeError("Stringified UUID is invalid");return c}var s=i;return ur.default=s,ur}var eu;function jC(){if(eu)return Fr;eu=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.default=void 0;var e=n(Cp()),t=Gs();function n(l){return l&&l.__esModule?l:{default:l}}let r,i,s=0,o=0;function a(l,u,f){let g=u&&f||0;const p=u||new Array(16);l=l||{};let _=l.node||r,b=l.clockseq!==void 0?l.clockseq:i;if(_==null||b==null){const h=l.random||(l.rng||e.default)();_==null&&(_=r=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),b==null&&(b=i=(h[6]<<8|h[7])&16383)}let v=l.msecs!==void 0?l.msecs:Date.now(),m=l.nsecs!==void 0?l.nsecs:o+1;const C=v-s+(m-o)/1e4;if(C<0&&l.clockseq===void 0&&(b=b+1&16383),(C<0||v>s)&&l.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=v,o=m,i=b,v+=122192928e5;const k=((v&268435455)*1e4+m)%4294967296;p[g++]=k>>>24&255,p[g++]=k>>>16&255,p[g++]=k>>>8&255,p[g++]=k&255;const w=v/4294967296*1e4&268435455;p[g++]=w>>>8&255,p[g++]=w&255,p[g++]=w>>>24&15|16,p[g++]=w>>>16&255,p[g++]=b>>>8|128,p[g++]=b&255;for(let h=0;h<6;++h)p[g+h]=_[h];return u||(0,t.unsafeStringify)(p)}var c=a;return Fr.default=c,Fr}var Wr={},sn={},qr={},tu;function Ip(){if(tu)return qr;tu=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.default=void 0;var e=t(qs());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");let s;const o=new Uint8Array(16);return o[0]=(s=parseInt(i.slice(0,8),16))>>>24,o[1]=s>>>16&255,o[2]=s>>>8&255,o[3]=s&255,o[4]=(s=parseInt(i.slice(9,13),16))>>>8,o[5]=s&255,o[6]=(s=parseInt(i.slice(14,18),16))>>>8,o[7]=s&255,o[8]=(s=parseInt(i.slice(19,23),16))>>>8,o[9]=s&255,o[10]=(s=parseInt(i.slice(24,36),16))/1099511627776&255,o[11]=s/4294967296&255,o[12]=s>>>24&255,o[13]=s>>>16&255,o[14]=s>>>8&255,o[15]=s&255,o}var r=n;return qr.default=r,qr}var nu;function Rp(){if(nu)return sn;nu=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.URL=sn.DNS=void 0,sn.default=o;var e=Gs(),t=n(Ip());function n(a){return a&&a.__esModule?a:{default:a}}function r(a){a=unescape(encodeURIComponent(a));const c=[];for(let l=0;l<a.length;++l)c.push(a.charCodeAt(l));return c}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";sn.DNS=i;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";sn.URL=s;function o(a,c,l){function u(f,g,p,_){var b;if(typeof f=="string"&&(f=r(f)),typeof g=="string"&&(g=(0,t.default)(g)),((b=g)===null||b===void 0?void 0:b.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+f.length);if(v.set(g),v.set(f,g.length),v=l(v),v[6]=v[6]&15|c,v[8]=v[8]&63|128,p){_=_||0;for(let m=0;m<16;++m)p[_+m]=v[m];return p}return(0,e.unsafeStringify)(v)}try{u.name=a}catch{}return u.DNS=i,u.URL=s,u}return sn}var Gr={},ru;function FC(){if(ru)return Gr;ru=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.default=void 0;function e(p){if(typeof p=="string"){const _=unescape(encodeURIComponent(p));p=new Uint8Array(_.length);for(let b=0;b<_.length;++b)p[b]=_.charCodeAt(b)}return t(r(i(p),p.length*8))}function t(p){const _=[],b=p.length*32,v="0123456789abcdef";for(let m=0;m<b;m+=8){const C=p[m>>5]>>>m%32&255,k=parseInt(v.charAt(C>>>4&15)+v.charAt(C&15),16);_.push(k)}return _}function n(p){return(p+64>>>9<<4)+14+1}function r(p,_){p[_>>5]|=128<<_%32,p[n(_)-1]=_;let b=1732584193,v=-271733879,m=-1732584194,C=271733878;for(let k=0;k<p.length;k+=16){const w=b,h=v,S=m,x=C;b=c(b,v,m,C,p[k],7,-680876936),C=c(C,b,v,m,p[k+1],12,-389564586),m=c(m,C,b,v,p[k+2],17,606105819),v=c(v,m,C,b,p[k+3],22,-1044525330),b=c(b,v,m,C,p[k+4],7,-176418897),C=c(C,b,v,m,p[k+5],12,1200080426),m=c(m,C,b,v,p[k+6],17,-1473231341),v=c(v,m,C,b,p[k+7],22,-45705983),b=c(b,v,m,C,p[k+8],7,1770035416),C=c(C,b,v,m,p[k+9],12,-1958414417),m=c(m,C,b,v,p[k+10],17,-42063),v=c(v,m,C,b,p[k+11],22,-1990404162),b=c(b,v,m,C,p[k+12],7,1804603682),C=c(C,b,v,m,p[k+13],12,-40341101),m=c(m,C,b,v,p[k+14],17,-1502002290),v=c(v,m,C,b,p[k+15],22,1236535329),b=l(b,v,m,C,p[k+1],5,-165796510),C=l(C,b,v,m,p[k+6],9,-1069501632),m=l(m,C,b,v,p[k+11],14,643717713),v=l(v,m,C,b,p[k],20,-373897302),b=l(b,v,m,C,p[k+5],5,-701558691),C=l(C,b,v,m,p[k+10],9,38016083),m=l(m,C,b,v,p[k+15],14,-660478335),v=l(v,m,C,b,p[k+4],20,-405537848),b=l(b,v,m,C,p[k+9],5,568446438),C=l(C,b,v,m,p[k+14],9,-1019803690),m=l(m,C,b,v,p[k+3],14,-187363961),v=l(v,m,C,b,p[k+8],20,1163531501),b=l(b,v,m,C,p[k+13],5,-1444681467),C=l(C,b,v,m,p[k+2],9,-51403784),m=l(m,C,b,v,p[k+7],14,1735328473),v=l(v,m,C,b,p[k+12],20,-1926607734),b=u(b,v,m,C,p[k+5],4,-378558),C=u(C,b,v,m,p[k+8],11,-2022574463),m=u(m,C,b,v,p[k+11],16,1839030562),v=u(v,m,C,b,p[k+14],23,-35309556),b=u(b,v,m,C,p[k+1],4,-1530992060),C=u(C,b,v,m,p[k+4],11,1272893353),m=u(m,C,b,v,p[k+7],16,-155497632),v=u(v,m,C,b,p[k+10],23,-1094730640),b=u(b,v,m,C,p[k+13],4,681279174),C=u(C,b,v,m,p[k],11,-358537222),m=u(m,C,b,v,p[k+3],16,-722521979),v=u(v,m,C,b,p[k+6],23,76029189),b=u(b,v,m,C,p[k+9],4,-640364487),C=u(C,b,v,m,p[k+12],11,-421815835),m=u(m,C,b,v,p[k+15],16,530742520),v=u(v,m,C,b,p[k+2],23,-995338651),b=f(b,v,m,C,p[k],6,-198630844),C=f(C,b,v,m,p[k+7],10,1126891415),m=f(m,C,b,v,p[k+14],15,-1416354905),v=f(v,m,C,b,p[k+5],21,-57434055),b=f(b,v,m,C,p[k+12],6,1700485571),C=f(C,b,v,m,p[k+3],10,-1894986606),m=f(m,C,b,v,p[k+10],15,-1051523),v=f(v,m,C,b,p[k+1],21,-2054922799),b=f(b,v,m,C,p[k+8],6,1873313359),C=f(C,b,v,m,p[k+15],10,-30611744),m=f(m,C,b,v,p[k+6],15,-1560198380),v=f(v,m,C,b,p[k+13],21,1309151649),b=f(b,v,m,C,p[k+4],6,-145523070),C=f(C,b,v,m,p[k+11],10,-1120210379),m=f(m,C,b,v,p[k+2],15,718787259),v=f(v,m,C,b,p[k+9],21,-343485551),b=s(b,w),v=s(v,h),m=s(m,S),C=s(C,x)}return[b,v,m,C]}function i(p){if(p.length===0)return[];const _=p.length*8,b=new Uint32Array(n(_));for(let v=0;v<_;v+=8)b[v>>5]|=(p[v/8]&255)<<v%32;return b}function s(p,_){const b=(p&65535)+(_&65535);return(p>>16)+(_>>16)+(b>>16)<<16|b&65535}function o(p,_){return p<<_|p>>>32-_}function a(p,_,b,v,m,C){return s(o(s(s(_,p),s(v,C)),m),b)}function c(p,_,b,v,m,C,k){return a(_&b|~_&v,p,_,m,C,k)}function l(p,_,b,v,m,C,k){return a(_&v|b&~v,p,_,m,C,k)}function u(p,_,b,v,m,C,k){return a(_^b^v,p,_,m,C,k)}function f(p,_,b,v,m,C,k){return a(b^(_|~v),p,_,m,C,k)}var g=e;return Gr.default=g,Gr}var iu;function UC(){if(iu)return Wr;iu=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.default=void 0;var e=n(Rp()),t=n(FC());function n(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v3",48,t.default);return Wr.default=i,Wr}var zr={},Kr={},su;function HC(){if(su)return Kr;su=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return Kr.default=t,Kr}var ou;function WC(){if(ou)return zr;ou=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.default=void 0;var e=r(HC()),t=r(Cp()),n=Gs();function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a,c){if(e.default.randomUUID&&!a&&!o)return e.default.randomUUID();o=o||{};const l=o.random||(o.rng||t.default)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,a){c=c||0;for(let u=0;u<16;++u)a[c+u]=l[u];return a}return(0,n.unsafeStringify)(l)}var s=i;return zr.default=s,zr}var Jr={},Qr={},au;function qC(){if(au)return Qr;au=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.default=void 0;function e(i,s,o,a){switch(i){case 0:return s&o^~s&a;case 1:return s^o^a;case 2:return s&o^s&a^o&a;case 3:return s^o^a}}function t(i,s){return i<<s|i>>>32-s}function n(i){const s=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const u=unescape(encodeURIComponent(i));i=[];for(let f=0;f<u.length;++f)i.push(u.charCodeAt(f))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const a=i.length/4+2,c=Math.ceil(a/16),l=new Array(c);for(let u=0;u<c;++u){const f=new Uint32Array(16);for(let g=0;g<16;++g)f[g]=i[u*64+g*4]<<24|i[u*64+g*4+1]<<16|i[u*64+g*4+2]<<8|i[u*64+g*4+3];l[u]=f}l[c-1][14]=(i.length-1)*8/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=(i.length-1)*8&4294967295;for(let u=0;u<c;++u){const f=new Uint32Array(80);for(let m=0;m<16;++m)f[m]=l[u][m];for(let m=16;m<80;++m)f[m]=t(f[m-3]^f[m-8]^f[m-14]^f[m-16],1);let g=o[0],p=o[1],_=o[2],b=o[3],v=o[4];for(let m=0;m<80;++m){const C=Math.floor(m/20),k=t(g,5)+e(C,p,_,b)+v+s[C]+f[m]>>>0;v=b,b=_,_=t(p,30)>>>0,p=g,g=k}o[0]=o[0]+g>>>0,o[1]=o[1]+p>>>0,o[2]=o[2]+_>>>0,o[3]=o[3]+b>>>0,o[4]=o[4]+v>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,o[0]&255,o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,o[1]&255,o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,o[2]&255,o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,o[3]&255,o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,o[4]&255]}var r=n;return Qr.default=r,Qr}var cu;function GC(){if(cu)return Jr;cu=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.default=void 0;var e=n(Rp()),t=n(qC());function n(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v5",80,t.default);return Jr.default=i,Jr}var Xr={},lu;function zC(){if(lu)return Xr;lu=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.default=void 0;var e="00000000-0000-0000-0000-000000000000";return Xr.default=e,Xr}var Yr={},uu;function KC(){if(uu)return Yr;uu=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.default=void 0;var e=t(qs());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var r=n;return Yr.default=r,Yr}var du;function Op(){return du||(du=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=u(jC()),n=u(UC()),r=u(WC()),i=u(GC()),s=u(zC()),o=u(KC()),a=u(qs()),c=u(Gs()),l=u(Ip());function u(f){return f&&f.__esModule?f:{default:f}}}(To)),To}var fu;function JC(){if(fu)return Ke;fu=1;var e=Ke&&Ke.__extends||function(){var _=function(b,v){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,C){m.__proto__=C}||function(m,C){for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(m[k]=C[k])},_(b,v)};return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");_(b,v);function m(){this.constructor=b}b.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),t=Ke&&Ke.__assign||function(){return t=Object.assign||function(_){for(var b,v=1,m=arguments.length;v<m;v++){b=arguments[v];for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(_[C]=b[C])}return _},t.apply(this,arguments)},n=Ke&&Ke.__awaiter||function(_,b,v,m){function C(k){return k instanceof v?k:new v(function(w){w(k)})}return new(v||(v=Promise))(function(k,w){function h(y){try{x(m.next(y))}catch(I){w(I)}}function S(y){try{x(m.throw(y))}catch(I){w(I)}}function x(y){y.done?k(y.value):C(y.value).then(h,S)}x((m=m.apply(_,b||[])).next())})},r=Ke&&Ke.__generator||function(_,b){var v={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},m,C,k,w;return w={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function h(x){return function(y){return S([x,y])}}function S(x){if(m)throw new TypeError("Generator is already executing.");for(;w&&(w=0,x[0]&&(v=0)),v;)try{if(m=1,C&&(k=x[0]&2?C.return:x[0]?C.throw||((k=C.return)&&k.call(C),0):C.next)&&!(k=k.call(C,x[1])).done)return k;switch(C=0,k&&(x=[x[0]&2,k.value]),x[0]){case 0:case 1:k=x;break;case 4:return v.label++,{value:x[1],done:!1};case 5:v.label++,C=x[1],x=[0];continue;case 7:x=v.ops.pop(),v.trys.pop();continue;default:if(k=v.trys,!(k=k.length>0&&k[k.length-1])&&(x[0]===6||x[0]===2)){v=0;continue}if(x[0]===3&&(!k||x[1]>k[0]&&x[1]<k[3])){v.label=x[1];break}if(x[0]===6&&v.label<k[1]){v.label=k[1],k=x;break}if(k&&v.label<k[2]){v.label=k[2],v.ops.push(x);break}k[2]&&v.ops.pop(),v.trys.pop();continue}x=b.call(_,v)}catch(y){x=[6,y],C=0}finally{m=k=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.WebRtcPeerSendrecv=Ke.WebRtcPeerSendonly=Ke.WebRtcPeerRecvonly=Ke.WebRtcPeer=void 0;var i=VC(),s=Op(),o=Cr(),a=ot(),c=yn(),l=a.OpenViduLogger.getInstance(),u=function(){function _(b){var v=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],c.PlatformUtils.getInstance(),this.configuration=t(t({},b),{iceServers:b.iceServers&&b.iceServers.length>0?b.iceServers:i(),rtcConfiguration:b.rtcConfiguration!==void 0?b.rtcConfiguration:{},mediaStream:b.mediaStream!==void 0?b.mediaStream:null,mode:b.mode?b.mode:"sendrecv",id:b.id?b.id:this.generateUniqueId()}),l.debug(`[WebRtcPeer] configuration:
`.concat(JSON.stringify(this.configuration,null,2)));var m=this.configuration.rtcConfiguration?this.configuration.rtcConfiguration:{iceServers:this.configuration.iceServers};!m.iceServers&&this.configuration.iceServers&&(m.iceServers=this.configuration.iceServers),this.pc=new RTCPeerConnection(m),this.pc.addEventListener("icecandidate",function(C){if(C.candidate!==null){var k=C.candidate,w=new RTCIceCandidate(k);v.configuration.onIceCandidate(w),w.candidate!==""&&v.localCandidatesQueue.push(w)}}),this.pc.addEventListener("signalingstatechange",function(){return n(v,void 0,void 0,function(){var C,k;return r(this,function(w){switch(w.label){case 0:if(this.pc.signalingState!=="stable")return[3,6];w.label=1;case 1:if(!(this.iceCandidateList.length>0))return[3,6];C=this.iceCandidateList.shift(),w.label=2;case 2:return w.trys.push([2,4,,5]),[4,this.pc.addIceCandidate(C)];case 3:return w.sent(),[3,5];case 4:return k=w.sent(),l.error("Error when calling RTCPeerConnection#addIceCandidate for RTCPeerConnection "+this.getId(),k),[3,5];case 5:return[3,1];case 6:return[2]}})})})}return _.prototype.getId=function(){return this.configuration.id},_.prototype.dispose=function(){if(l.debug("Disposing WebRtcPeer"),this.pc){if(this.pc.signalingState==="closed")return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},_.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var b=this.configuration.mediaConstraints.audio,v=this.configuration.mediaConstraints.video,m={offerToReceiveAudio:this.configuration.mode!=="sendonly"&&b,offerToReceiveVideo:this.configuration.mode!=="sendonly"&&v};return l.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(m)),this.pc.createOffer(m)},_.prototype.createOffer=function(){var b,v,m,C,k,w,h,S;return n(this,void 0,void 0,function(){var x,y,I,A,M,N,E,T,$,P,R,O,B,j,G,J,ee,ne,X,pe,F,z,Z,ne;return r(this,function(se){switch(se.label){case 0:if("addTransceiver"in this.pc)l.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it");else return l.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(this.configuration.mode==="recvonly")return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));x=0,y=this.configuration.mediaStream.getTracks(),se.label=1;case 1:if(!(x<y.length))return[3,6];if(I=y[x],A={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},I.kind==="video"&&this.configuration.simulcast)for(M=I.getSettings(),N=I.getConstraints(),E=(m=(v=(b=M.width)!==null&&b!==void 0?b:N.width.ideal)!==null&&v!==void 0?v:N.width)!==null&&m!==void 0?m:0,T=(w=(k=(C=M.height)!==null&&C!==void 0?C:N.height.ideal)!==null&&k!==void 0?k:N.height)!==null&&w!==void 0?w:0,l.info("[createOffer] Video track dimensions: ".concat(E,"x").concat(T)),$=E*T,P=0,$>=960*540?P=3:$>=480*270?P=2:P=1,A.sendEncodings=[],R=0;R<P;R++)O=Math.pow(2,P-R-1),B={rid:"rdiv"+O.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(I.contentHint)?(B.scaleResolutionDownBy=1,B.maxFramerate=Math.floor(30/O)):B.scaleResolutionDownBy=O,A.sendEncodings.push(B);if(j=this.pc.addTransceiver(I,A),I.kind!=="video")return[3,5];if(G=j.sender.getParameters(),J=!1,!((h=G.degradationPreference)===null||h===void 0)&&h.length||(["detail","text"].includes(I.contentHint)?G.degradationPreference="maintain-resolution":G.degradationPreference="balanced",l.info("[createOffer] Video sender Degradation Preference set: ".concat(G.degradationPreference)),J=!0),this.configuration.simulcast&&((S=G.encodings)===null||S===void 0?void 0:S.length)!==A.sendEncodings.length&&(G.encodings=A.sendEncodings,J=!0),!J)return[3,5];l.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),se.label=2;case 2:return se.trys.push([2,4,,5]),[4,j.sender.setParameters(G)];case 3:return se.sent(),[3,5];case 4:throw ee=se.sent(),ne="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",ee instanceof Error&&(ne+=": ".concat(ee.message)),new Error(ne);case 5:return x++,[3,1];case 6:return[3,8];case 7:for(X=0,pe=["audio","video"];X<pe.length;X++)F=pe[X],this.configuration.mediaConstraints[F]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(F,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));se.label=8;case 8:return se.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return z=se.sent(),[3,11];case 10:throw Z=se.sent(),ne="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",Z instanceof Error&&(ne+=": ".concat(Z.message)),new Error(ne);case 11:return[2,z]}})})},_.prototype.deprecatedPeerConnectionTrackApi=function(){for(var b=0,v=this.configuration.mediaStream.getTracks();b<v.length;b++){var m=v[b];this.pc.addTrack(m,this.configuration.mediaStream)}},_.prototype.createAnswer=function(){var b=this;return new Promise(function(v,m){if("getTransceivers"in b.pc){l.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var C=function(A){if(!b.configuration.mediaConstraints[A])return"continue";var M=b.pc.getTransceivers().find(function(N){return N.receiver.track.kind===A});if(M)M.direction=b.configuration.mode;else return{value:m(new Error("".concat(A," requested, but no transceiver was created from remote description")))}},k=0,w=["audio","video"];k<w.length;k++){var h=w[k],S=C(h);if(typeof S=="object")return S.value}b.pc.createAnswer().then(function(A){return v(A)}).catch(function(A){return m(A)})}else{var x=void 0,y=!0;if(b.configuration.mediaConstraints){x=typeof b.configuration.mediaConstraints.audio=="boolean"?b.configuration.mediaConstraints.audio:!0,y=typeof b.configuration.mediaConstraints.video=="boolean"?b.configuration.mediaConstraints.video:!0;var I={offerToReceiveAudio:x,offerToReceiveVideo:y};b.pc.createAnswer(I).then(function(A){return v(A)}).catch(function(A){return m(A)})}}})},_.prototype.processLocalOffer=function(b){var v=this;return new Promise(function(m,C){v.pc.setLocalDescription(b).then(function(){var k=v.pc.localDescription;return k?(l.debug("Local description set",k.sdp),m()):C("Local description is not defined")}).catch(function(k){return C(k)})})},_.prototype.processRemoteOffer=function(b){var v=this;return new Promise(function(m,C){var k={type:"offer",sdp:b};if(l.debug("SDP offer received, setting remote description",k),v.pc.signalingState==="closed")return C("RTCPeerConnection is closed when trying to set remote description");v.setRemoteDescription(k).then(function(){return m()}).catch(function(w){return C(w)})})},_.prototype.processLocalAnswer=function(b){var v=this;return new Promise(function(m,C){if(l.debug("SDP answer created, setting local description"),v.pc.signalingState==="closed")return C("RTCPeerConnection is closed when trying to set local description");v.pc.setLocalDescription(b).then(function(){return m()}).catch(function(k){return C(k)})})},_.prototype.processRemoteAnswer=function(b){var v=this;return new Promise(function(m,C){var k={type:"answer",sdp:b};if(l.debug("SDP answer received, setting remote description"),v.pc.signalingState==="closed")return C("RTCPeerConnection is closed when trying to set remote description");v.setRemoteDescription(k).then(function(){m()}).catch(function(w){return C(w)})})},_.prototype.setRemoteDescription=function(b){return n(this,void 0,void 0,function(){return r(this,function(v){return[2,this.pc.setRemoteDescription(b)]})})},_.prototype.addIceCandidate=function(b){var v=this;return new Promise(function(m,C){switch(l.debug("Remote ICE candidate received",b),v.remoteCandidatesQueue.push(b),v.pc.signalingState){case"closed":C(new Error("PeerConnection object is closed"));break;case"stable":v.pc.remoteDescription?v.pc.addIceCandidate(b).then(function(){return m()}).catch(function(k){return C(k)}):(v.iceCandidateList.push(b),m());break;default:v.iceCandidateList.push(b),m()}})},_.prototype.addIceConnectionStateChangeListener=function(b){var v=this;this.pc.addEventListener("iceconnectionstatechange",function(){var m=v.pc.iceConnectionState;switch(m){case"disconnected":var C="IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "disconnected". Possible network disconnection';l.warn(C),v.configuration.onIceConnectionStateException(o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,C);break;case"failed":var k="IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') to "failed"';l.error(k),v.configuration.onIceConnectionStateException(o.ExceptionEventName.ICE_CONNECTION_FAILED,k);break;case"closed":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "closed"');break;case"new":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "new"');break;case"checking":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "checking"');break;case"connected":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "connected"');break;case"completed":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "completed"');break}})},_.prototype.generateUniqueId=function(){return(0,s.v4)()},_}();Ke.WebRtcPeer=u;var f=function(_){e(b,_);function b(v){return v.mode="recvonly",_.call(this,v)||this}return b}(u);Ke.WebRtcPeerRecvonly=f;var g=function(_){e(b,_);function b(v){return v.mode="sendonly",_.call(this,v)||this}return b}(u);Ke.WebRtcPeerSendonly=g;var p=function(_){e(b,_);function b(v){return v.mode="sendrecv",_.call(this,v)||this}return b}(u);return Ke.WebRtcPeerSendrecv=p,Ke}var Jt={},pu;function QC(){if(pu)return Jt;pu=1;var e=Jt&&Jt.__awaiter||function(a,c,l,u){function f(g){return g instanceof l?g:new l(function(p){p(g)})}return new(l||(l=Promise))(function(g,p){function _(m){try{v(u.next(m))}catch(C){p(C)}}function b(m){try{v(u.throw(m))}catch(C){p(C)}}function v(m){m.done?g(m.value):f(m.value).then(_,b)}v((u=u.apply(a,c||[])).next())})},t=Jt&&Jt.__generator||function(a,c){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,f,g,p;return p={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function _(v){return function(m){return b([v,m])}}function b(v){if(u)throw new TypeError("Generator is already executing.");for(;p&&(p=0,v[0]&&(l=0)),l;)try{if(u=1,f&&(g=v[0]&2?f.return:v[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,v[1])).done)return g;switch(f=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,f=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=c.call(a,l)}catch(m){v=[6,m],f=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.WebRtcStats=void 0;var n=ot(),r=yn(),i=n.OpenViduLogger.getInstance(),s,o=function(){function a(c){this.stream=c,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,s=r.PlatformUtils.getInstance()}return a.prototype.isEnabled=function(){return this.webRtcStatsEnabled},a.prototype.initWebRtcStats=function(){var c=this,l;try{l=localStorage.getItem(this.STATS_ITEM_NAME)}catch{}if(l){this.webRtcStatsEnabled=!0;var u=JSON.parse(l);i.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),i.warn("localStorage item: "+JSON.stringify(u)),this.POST_URL=u.httpEndpoint,this.statsInterval=u.interval,this.webRtcStatsIntervalId=setInterval(function(){return e(c,void 0,void 0,function(){return t(this,function(f){switch(f.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return f.sent(),[2]}})})},this.statsInterval*1e3)}else i.debug("WebRtc stats not enabled")},a.prototype.getSelectedIceCandidateInfo=function(){var c=this;return new Promise(function(l,u){return e(c,void 0,void 0,function(){var f,g,p,_,b,v,m,C,k,w,h,S,x,y,N,E,I,A,P,M,N,E,T,$,P;return t(this,function(R){switch(R.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(f=R.sent(),p=new Map,_=new Map,b=new Map,f.forEach(function(O){switch(O.type==="transport"&&(s.isChromium()||s.isSafariBrowser()||s.isReactNative())&&(g=O),O.type){case"candidate-pair":p.set(O.id,O);break;case"local-candidate":_.set(O.id,O);break;case"remote-candidate":b.set(O.id,O);break}}),g!=null)m=g.selectedCandidatePairId,v=p.get(m);else for(C=p.size,k=p.values(),w=0;w<C;w++)if(h=k.next().value,h.selected){v=h;break}if(S=v.localCandidateId,x=v.remoteCandidateId,y=_.get(S),y)for(N=this.stream.getLocalIceCandidateList(),E=N.filter(function(O){return!!O.candidate&&(O.candidate.indexOf(y.ip)>=0||O.candidate.indexOf(y.address)>=0)&&O.candidate.indexOf(y.port)>=0}),y.raw=[],I=0,A=E;I<A.length;I++)P=A[I],y.raw.push(P.candidate);else y="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(M=b.get(x),M)for(N=this.stream.getRemoteIceCandidateList(),E=N.filter(function(O){return!!O.candidate&&(O.candidate.indexOf(M.ip)>=0||O.candidate.indexOf(M.address)>=0)&&O.candidate.indexOf(M.port)>=0}),M.raw=[],T=0,$=E;T<$.length;T++)P=$[T],M.raw.push(P.candidate);else M="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,l({localCandidate:y,remoteCandidate:M})]}})})})},a.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),i.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},a.prototype.sendStats=function(c,l){return e(this,void 0,void 0,function(){var u,f;return t(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),u={headers:{"Content-type":"application/json"},body:JSON.stringify(l),method:"POST"},[4,fetch(c,u)];case 1:return g.sent(),[3,3];case 2:return f=g.sent(),i.error("sendStats error: ".concat(JSON.stringify(f))),[3,3];case 3:return[2]}})})},a.prototype.sendStatsToHttpEndpoint=function(){return e(this,void 0,void 0,function(){var c,l,u;return t(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return c=f.sent(),l=this.generateJSONStatsResponse(c),[4,this.sendStats(this.POST_URL,l)];case 2:return f.sent(),[3,4];case 3:return u=f.sent(),i.log(u),[3,4];case 4:return[2]}})})},a.prototype.getCommonStats=function(){return e(this,void 0,void 0,function(){var c=this;return t(this,function(l){return[2,new Promise(function(u,f){return e(c,void 0,void 0,function(){var g,p,_,b,v,m=this;return t(this,function(C){switch(C.label){case 0:return C.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return g=C.sent(),p=this.getWebRtcStatsResponseOutline(),_=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],b=["availableOutgoingBitrate","currentRoundTripTime"],g.forEach(function(k){var w=k.mediaType!=null?k.mediaType:k.kind,h=function(S,x){k[x]!=null&&p[S]!=null&&(!w&&_.indexOf(x)>-1&&(w="video"),S!=null&&w!=null&&x!=null&&p[S][w]!=null?p[S][w][x]=Number(k[x]):S!=null&&x!=null&&b.includes(x)&&(p[S][x]=Number(k[x])))};switch(k.type){case"outbound-rtp":h("outbound","bytesSent"),h("outbound","packetsSent"),h("outbound","framesEncoded"),h("outbound","nackCount"),h("outbound","firCount"),h("outbound","pliCount"),h("outbound","qpSum");break;case"inbound-rtp":h("inbound","bytesReceived"),h("inbound","packetsReceived"),h("inbound","packetsLost"),h("inbound","jitter"),h("inbound","framesDecoded"),h("inbound","nackCount"),h("inbound","firCount"),h("inbound","pliCount");break;case"track":h("inbound","jitterBufferDelay"),h("inbound","framesReceived"),h("outbound","framesDropped"),h("outbound","framesSent"),h(m.stream.isLocal()?"outbound":"inbound","frameHeight"),h(m.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":h("candidatepair","currentRoundTripTime"),h("candidatepair","availableOutgoingBitrate");break}}),(!(p!=null&&p.candidatepair)||Object.keys(p.candidatepair).length===0)&&delete p.candidatepair,[2,u(p)];case 2:return v=C.sent(),i.error("Error getting common stats: ",v),[2,f(v)];case 3:return[2]}})})})]})})},a.prototype.generateJSONStatsResponse=function(c){return{"@timestamp":new Date().toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:s.getName(),platform_description:s.getDescription(),stream:"webRTC",webrtc_stats:c}},a.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},a}();return Jt.WebRtcStats=o,Jt}var xn={},hu;function kp(){if(hu)return xn;hu=1;var e=xn&&xn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(xn,"__esModule",{value:!0}),xn.PublisherSpeakingEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,o)||this;return l.type=o,l.connection=a,l.streamId=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return xn.PublisherSpeakingEvent=n,xn}var xo={},vu;function za(){return vu||(vu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeOfVideo=void 0,function(t){t.CAMERA="CAMERA",t.SCREEN="SCREEN",t.CUSTOM="CUSTOM",t.IPCAM="IPCAM"}(e.TypeOfVideo||(e.TypeOfVideo={}))}(xo)),xo}var Po,mu;function XC(){if(mu)return Po;mu=1,Po=e;function e(){}return e.mixin=function(t){var n=t.prototype||t;n.isWildEmitter=!0,n.on=function(r,i,s){this.callbacks=this.callbacks||{};var o=arguments.length===3,a=o?arguments[1]:void 0,c=o?arguments[2]:arguments[1];return c._groupName=a,(this.callbacks[r]=this.callbacks[r]||[]).push(c),this},n.once=function(r,i,s){var o=this,a=arguments.length===3,c=a?arguments[1]:void 0,l=a?arguments[2]:arguments[1];function u(){o.off(r,u),l.apply(this,arguments)}return this.on(r,c,u),this},n.releaseGroup=function(r){this.callbacks=this.callbacks||{};var i,s,o,a;for(i in this.callbacks)for(a=this.callbacks[i],s=0,o=a.length;s<o;s++)a[s]._groupName===r&&(a.splice(s,1),s--,o--);return this},n.off=function(r,i){this.callbacks=this.callbacks||{};var s=this.callbacks[r],o;return s?arguments.length===1?(delete this.callbacks[r],this):(o=s.indexOf(i),o!==-1&&(s.splice(o,1),s.length===0&&delete this.callbacks[r]),this):this},n.emit=function(r){this.callbacks=this.callbacks||{};var i=[].slice.call(arguments,1),s=this.callbacks[r],o=this.getWildcardCallbacks(r),a,c,l;if(s)for(l=s.slice(),a=0,c=l.length;a<c&&l[a];++a)l[a].apply(this,i);if(o)for(c=o.length,l=o.slice(),a=0,c=l.length;a<c&&l[a];++a)l[a].apply(this,[r].concat(i));return this},n.getWildcardCallbacks=function(r){this.callbacks=this.callbacks||{};var i,s,o=[];for(i in this.callbacks)s=i.split("*"),(i==="*"||s.length===2&&r.slice(0,s[0].length)===s[0])&&(o=o.concat(this.callbacks[i]));return o}},e.mixin(e),Po}var Ao,gu;function YC(){if(gu)return Ao;gu=1;var e=XC();function t(i,s){var o=-1/0;i.getFloatFrequencyData(s);for(var a=4,c=s.length;a<c;a++)s[a]>o&&s[a]<0&&(o=s[a]);return o}var n;typeof window<"u"&&(n=window.AudioContext||window.webkitAudioContext);var r=null;return Ao=function(i,a){var o=new e;if(!n)return o;var a=a||{},c=a.smoothing||.1,l=a.interval||50,u=a.threshold,f=a.play,g=a.history||10,p=!0;r=a.audioContext||r||new n;var _,b,v;v=r.createAnalyser(),v.fftSize=512,v.smoothingTimeConstant=c,b=new Float32Array(v.frequencyBinCount),i.jquery&&(i=i[0]),i instanceof HTMLAudioElement||i instanceof HTMLVideoElement?(_=r.createMediaElementSource(i),typeof f>"u"&&(f=!0),u=u||-50):(_=r.createMediaStreamSource(i),u=u||-50),_.connect(v),f&&v.connect(r.destination),o.speaking=!1,o.suspend=function(){return r.suspend()},o.resume=function(){return r.resume()},Object.defineProperty(o,"state",{get:function(){return r.state}}),r.onstatechange=function(){o.emit("state_change",r.state)},o.setThreshold=function(k){u=k},o.setInterval=function(k){l=k},o.stop=function(){p=!1,o.emit("volume_change",-100,u),o.speaking&&(o.speaking=!1,o.emit("stopped_speaking")),v.disconnect(),_.disconnect()},o.speakingHistory=[];for(var m=0;m<g;m++)o.speakingHistory.push(0);var C=function(){setTimeout(function(){if(p){var k=t(v,b);o.emit("volume_change",k,u);var w=0;if(k>u&&!o.speaking){for(var h=o.speakingHistory.length-3;h<o.speakingHistory.length;h++)w+=o.speakingHistory[h];w>=2&&(o.speaking=!0,o.emit("speaking"))}else if(k<u&&o.speaking){for(var h=0;h<o.speakingHistory.length;h++)w+=o.speakingHistory[h];w==0&&(o.speaking=!1,o.emit("stopped_speaking"))}o.speakingHistory.shift(),o.speakingHistory.push(0+(k>u)),C()}},l)};return C(),o},Ao}var bu;function Ka(){if(bu)return Kt;bu=1;var e=Kt&&Kt.__awaiter||function(w,h,S,x){function y(I){return I instanceof S?I:new S(function(A){A(I)})}return new(S||(S=Promise))(function(I,A){function M(T){try{E(x.next(T))}catch($){A($)}}function N(T){try{E(x.throw(T))}catch($){A($)}}function E(T){T.done?I(T.value):y(T.value).then(M,N)}E((x=x.apply(w,h||[])).next())})},t=Kt&&Kt.__generator||function(w,h){var S={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},x,y,I,A;return A={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function M(E){return function(T){return N([E,T])}}function N(E){if(x)throw new TypeError("Generator is already executing.");for(;A&&(A=0,E[0]&&(S=0)),S;)try{if(x=1,y&&(I=E[0]&2?y.return:E[0]?y.throw||((I=y.return)&&I.call(y),0):y.next)&&!(I=I.call(y,E[1])).done)return I;switch(y=0,I&&(E=[E[0]&2,I.value]),E[0]){case 0:case 1:I=E;break;case 4:return S.label++,{value:E[1],done:!1};case 5:S.label++,y=E[1],E=[0];continue;case 7:E=S.ops.pop(),S.trys.pop();continue;default:if(I=S.trys,!(I=I.length>0&&I[I.length-1])&&(E[0]===6||E[0]===2)){S=0;continue}if(E[0]===3&&(!I||E[1]>I[0]&&E[1]<I[3])){S.label=E[1];break}if(E[0]===6&&S.label<I[1]){S.label=I[1],I=E;break}if(I&&S.label<I[2]){S.label=I[2],S.ops.push(E);break}I[2]&&S.ops.pop(),S.trys.pop();continue}E=h.call(w,S)}catch(T){E=[6,T],y=0}finally{x=I=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Stream=void 0;var n=Fa(),r=Ga(),i=JC(),s=QC(),o=Cr(),a=kp(),c=Wa(),l=Sr(),u=wr(),f=za(),g=ot(),p=yn(),_=Op(),b=YC(),v=Ua(),m=g.OpenViduLogger.getInstance(),C,k=function(){function w(h,S){var x=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new v,C=p.PlatformUtils.getInstance(),this.session=h,S.hasOwnProperty("id")?(this.inboundStreamOpts=S,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=this.inboundStreamOpts.frameRate===-1?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length===0&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=S,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=f.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?f.TypeOfVideo.SCREEN:f.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",function(){var y;x.streamManager.updateMediaStream(x.mediaStream),m.debug("Video srcObject ["+((y=x.mediaStream)===null||y===void 0?void 0:y.id)+"] updated in stream ["+x.streamId+"]")})}return w.prototype.reconnect=function(){return this.reconnectStream("API")},w.prototype.applyFilter=function(h,S){var x=this;return new Promise(function(y,I){return e(x,void 0,void 0,function(){var A,M,N,E,T,$,P=this;return t(this,function(R){if(this.filter)return[2,I(new u.OpenViduError(u.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(A=function(O,B){if(O)return m.error("Error applying filter for Stream "+P.streamId,O),O.code===401?I(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):I(O);m.info("Filter successfully applied on Stream "+P.streamId);var j=P.filter;return P.filter=new n.Filter(h,S),P.filter.stream=P,B&&(P.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(P.session,P,"filter",P.filter,j,"applyFilter")]),P.streamManager.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(P.streamManager,P,"filter",P.filter,j,"applyFilter")])),y(P.filter)},h.startsWith("VB:")){if(!this.hasVideo)return[2,I(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||this.streamManager.videos.length===0)return[2,I(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(this.session.token?M=this.session.token:M=S.token,!M)return[2,I(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(N=this.session.getTokenParams(M),N.edition!=="pro"&&N.edition!=="enterprise")return[2,I(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];M=encodeURIComponent(btoa(M)),m.info("Applying Virtual Background to stream "+this.streamId),E=function(){return e(P,void 0,void 0,function(){var O,B,j,G,J,ee,X;return t(this,function(pe){switch(pe.label){case 0:return pe.trys.push([0,8,,9]),O=this.streamId+"_"+(0,_.v4)(),B=this.mediaStream.clone(),j=this.streamManager.videos[0].video.cloneNode(!1),j.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+O,j.srcObject=B,j.muted=!0,this.virtualBackgroundSourceElements={videoClone:j,mediaStreamClone:B},VirtualBackground.VirtualBackground.hideHtmlElement(j,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(j,O),[4,j.play()];case 1:switch(pe.sent(),G=new VirtualBackground.VirtualBackground({id:O,openviduServerUrl:new URL(N.httpUri),openviduToken:M,inputVideo:j,inputResolution:"160x96",outputFramerate:24}),J=void 0,ee=h,ee){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,G.backgroundBlur(S)];case 3:return J=pe.sent(),[3,7];case 4:return[4,G.backgroundImage(S)];case 5:return J=pe.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+h);case 7:return this.virtualBackgroundSinkElements={VB:G,video:J},j.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),A(void 0,!1),[3,9];case 8:return X=pe.sent(),X.name===u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?A(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,X.message),!1):A(X,!1),[3,9];case 9:return[2]}})})},typeof VirtualBackground>"u"?(T=document.createElement("script"),T.type="text/javascript",T.src=N.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+M,T.onload=function(){return e(P,void 0,void 0,function(){var O;return t(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,,3]),[4,E()];case 1:return B.sent(),y(new n.Filter(h,S)),[3,3];case 2:return O=B.sent(),I(O),[3,3];case 3:return[2]}})})},document.body.appendChild(T)):E().then(function(){return y(new n.Filter(h,S))}).catch(function(O){return I(O)})}else{if(!this.session.sessionConnected())return[2,I(this.session.notConnectedError())];m.info("Applying server filter to stream "+this.streamId),S=S??{},$=S,typeof $!="string"&&($=JSON.stringify($)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:h,options:$},function(O,B){A(O,!0)})}return[2]})})})},w.prototype.removeFilter=function(){return e(this,void 0,void 0,function(){return t(this,function(h){switch(h.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,h.sent()]}})})},w.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},w.prototype.getMediaStream=function(){return this.mediaStream},w.prototype.removeFilterAux=function(h){var S=this;return new Promise(function(x,y){return e(S,void 0,void 0,function(){var I,A,M,N=this,E;return t(this,function(T){switch(T.label){case 0:if(I=function($,P){if($)return delete N.filter,m.error("Error removing filter for Stream "+N.streamId,$),$.code===401?y(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):y($);m.info("Filter successfully removed from Stream "+N.streamId);var R=N.filter;return delete N.filter,P&&(N.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(N.session,N,"filter",N.filter,R,"applyFilter")]),N.streamManager.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(N.streamManager,N,"filter",N.filter,R,"applyFilter")])),x()},!this.filter)return[3,11];if(!(!((E=this.filter)===null||E===void 0)&&E.type.startsWith("VB:")))return[3,9];T.label=1;case 1:return T.trys.push([1,7,,8]),A=this.virtualBackgroundSourceElements.mediaStreamClone,h?[3,5]:this.streamManager.remote?(this.streamManager.replaceTrackInMediaStream(A.getVideoTracks()[0],!1),[3,4]):[3,2];case 2:return[4,this.streamManager.replaceTrackAux(A.getVideoTracks()[0],!1)];case 3:T.sent(),T.label=4;case 4:return[3,6];case 5:A.getTracks().forEach(function($){return $.stop()}),T.label=6;case 6:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,I(void 0,!1)];case 7:return M=T.sent(),[2,I(M,!1)];case 8:return[3,10];case 9:if(!this.session.sessionConnected())return[2,y(this.session.notConnectedError())];m.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},function($,P){return I($,!0)}),T.label=10;case 10:return[3,12];case 11:return[2,y(new u.OpenViduError(u.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 12:return[2]}})})})},w.prototype.setMediaStream=function(h){this.mediaStream=h},w.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},w.prototype.getWebRtcPeer=function(){return this.webRtcPeer},w.prototype.subscribeToMyRemote=function(h){this.isSubscribeToRemote=h},w.prototype.setOutboundStreamOptions=function(h){this.outboundStreamOpts=h},w.prototype.subscribe=function(){var h=this;return new Promise(function(S,x){h.initWebRtcPeerReceive(!1).then(function(){return S()}).catch(function(y){return x(y)})})},w.prototype.publish=function(){var h=this;return new Promise(function(S,x){h.isLocalStreamReadyToPublish?h.initWebRtcPeerSend(!1).then(function(){return S()}).catch(function(y){return x(y)}):h.ee.once("stream-ready-to-publish",function(){h.publish().then(function(){return S()}).catch(function(y){return x(y)})})})},w.prototype.disposeWebRtcPeer=function(){var h;this.webRtcPeer&&(this.webRtcPeer.dispose(),h=this.webRtcPeer.getId()),this.stopWebRtcStats(),m.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+h+"] from 'Stream' with id ["+this.streamId+"] is now closed")},w.prototype.disposeMediaStream=function(){return e(this,void 0,void 0,function(){var h;return t(this,function(S){switch(S.label){case 0:if(!(this.filter&&this.filter.type.startsWith("VB:")))return[3,4];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return S.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return h=S.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),h),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(function(x){x.stop()}),this.mediaStream.getVideoTracks().forEach(function(x){x.stop()}),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach(function(x){x.stop()}),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach(function(x){x.stop()}),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),m.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}})})},w.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},w.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.audioSource!==null&&this.outboundStreamOpts.publisherProperties.audioSource!==!1},w.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.videoSource!==null&&this.outboundStreamOpts.publisherProperties.videoSource!==!1},w.prototype.isSendScreen=function(){var h=!1;if(typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack){var S=this.outboundStreamOpts.publisherProperties.videoSource.getSettings();S.displaySurface&&(h=["monitor","window","browser"].includes(S.displaySurface))}return!h&&C.isElectron()&&(h=typeof this.outboundStreamOpts.publisherProperties.videoSource=="string"&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),h||(h=this.outboundStreamOpts.publisherProperties.videoSource==="screen"),!!this.outboundStreamOpts&&h},w.prototype.enableHarkSpeakingEvent=function(){var h=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",function(){h.session.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(h.session,"publisherStartSpeaking",h.connection,h.streamId)]),h.streamManager.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(h.streamManager,"publisherStartSpeaking",h.connection,h.streamId)]),h.harkSpeakingEnabledOnce=!1}))},w.prototype.enableOnceHarkSpeakingEvent=function(){var h=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",function(){h.harkSpeakingEnabledOnce&&(h.session.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(h.session,"publisherStartSpeaking",h.connection,h.streamId)]),h.streamManager.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(h.streamManager,"publisherStartSpeaking",h.connection,h.streamId)])),h.disableHarkSpeakingEvent(!0)}))},w.prototype.disableHarkSpeakingEvent=function(h){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,h){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},w.prototype.enableHarkStoppedSpeakingEvent=function(){var h=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",function(){h.session.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(h.session,"publisherStopSpeaking",h.connection,h.streamId)]),h.streamManager.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(h.streamManager,"publisherStopSpeaking",h.connection,h.streamId)]),h.harkStoppedSpeakingEnabledOnce=!1}))},w.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var h=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",function(){h.harkStoppedSpeakingEnabledOnce&&(h.session.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(h.session,"publisherStopSpeaking",h.connection,h.streamId)]),h.streamManager.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(h.streamManager,"publisherStopSpeaking",h.connection,h.streamId)])),h.disableHarkStoppedSpeakingEvent(!0)}))},w.prototype.disableHarkStoppedSpeakingEvent=function(h){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,h){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},w.prototype.enableHarkVolumeChangeEvent=function(h){var S=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabled||h)&&(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",function(x){var y=S.speechEvent.oldVolumeValue,I={newValue:x,oldValue:y};S.speechEvent.oldVolumeValue=x,S.streamManager.emitEvent("streamAudioVolumeChange",[new c.StreamManagerEvent(S.streamManager,"streamAudioVolumeChange",I)])})):this.harkVolumeChangeEnabled=!0},w.prototype.enableOnceHarkVolumeChangeEvent=function(h){var S=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabledOnce||h)&&(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",function(x){var y=S.speechEvent.oldVolumeValue,I={newValue:x,oldValue:y};S.speechEvent.oldVolumeValue=x,S.disableHarkVolumeChangeEvent(!0),S.streamManager.emitEvent("streamAudioVolumeChange",[new c.StreamManagerEvent(S.streamManager,"streamAudioVolumeChange",I)])})):this.harkVolumeChangeEnabledOnce=!0},w.prototype.disableHarkVolumeChangeEvent=function(h){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,h){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},w.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},w.prototype.getSelectedIceCandidate=function(){var h=this;return new Promise(function(S,x){h.webRtcStats.getSelectedIceCandidateInfo().then(function(y){return S(y)}).catch(function(y){return x(y)})})},w.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},w.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},w.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return m.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var h=this.getRTCPeerConnection().iceConnectionState;return h!=="connected"&&h!=="completed"},w.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var h=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};h.interval=typeof h.interval=="number"?h.interval:100,h.threshold=typeof h.threshold=="number"?h.threshold:-50,this.speechEvent=b(this.mediaStream,h)}return!0}return!1},w.prototype.setupReconnectionEventEmitter=function(h,S){return this.reconnectionEventEmitter==null?(this.reconnectionEventEmitter=new v,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",function(){return h()}),this.reconnectionEventEmitter.once("error",function(x){return S(x)}),!0)},w.prototype.initWebRtcPeerSend=function(h){var S=this;return new Promise(function(x,y){var I;if(h){if(S.setupReconnectionEventEmitter(x,y))return}else S.initHarkEvents();var A=function(){var T;return h&&((T=S.reconnectionEventEmitter)===null||T===void 0||T.emitEvent("success"),delete S.reconnectionEventEmitter),x()},M=function(T){var $;return h&&(($=S.reconnectionEventEmitter)===null||$===void 0||$.emitEvent("error",[T]),delete S.reconnectionEventEmitter),y(T)},N=function(T){m.debug("Sending SDP offer to publish as "+S.streamId,T);var $=h?"reconnectStream":"publishVideo",P;if(h)P={stream:S.streamId,sdpString:T};else{var R=void 0;S.isSendVideo()&&(R=typeof MediaStreamTrack<"u"&&S.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?f.TypeOfVideo.CUSTOM:S.isSendScreen()?f.TypeOfVideo.SCREEN:f.TypeOfVideo.CAMERA),P={doLoopback:S.displayMyRemote()||!1,hasAudio:S.isSendAudio(),hasVideo:S.isSendVideo(),audioActive:S.audioActive,videoActive:S.videoActive,typeOfVideo:R,frameRate:S.frameRate?S.frameRate:-1,videoDimensions:JSON.stringify(S.videoDimensions),filter:S.outboundStreamOpts.publisherProperties.filter,sdpOffer:T}}S.session.openvidu.sendRequest($,P,function(O,B){O?O.code===401?M(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):M("Error on publishVideo: "+JSON.stringify(O)):S.webRtcPeer.processRemoteAnswer(B.sdpAnswer).then(function(){S.streamId=B.id,S.creationTime=B.createdAt,S.isLocalStreamPublished=!0,S.publishedOnce=!0,S.displayMyRemote()&&(S.localMediaStreamWhenSubscribedToRemote=S.mediaStream,S.remotePeerSuccessfullyEstablished(h)),h?S.ee.emitEvent("stream-reconnected-by-publisher",[]):S.ee.emitEvent("stream-created-by-publisher",[]),S.initWebRtcStats(),m.info("'Publisher' ("+S.streamId+") successfully "+(h?"reconnected":"published")+" to session"),A()}).catch(function(j){M(j)})})},E={mediaConstraints:{audio:S.hasAudio,video:S.hasVideo},simulcast:(I=S.outboundStreamOpts.publisherProperties.videoSimulcast)!==null&&I!==void 0?I:S.session.openvidu.videoSimulcast,onIceCandidate:S.connection.sendIceCandidate.bind(S.connection),onIceConnectionStateException:S.onIceConnectionStateExceptionHandler.bind(S),iceServers:S.getIceServersConf(),rtcConfiguration:S.session.openvidu.advancedConfiguration.rtcConfiguration,mediaStream:S.mediaStream,mediaServer:S.session.openvidu.mediaServer,typeOfVideo:S.typeOfVideo?f.TypeOfVideo[S.typeOfVideo]:void 0};S.session.openvidu.mediaServer!=="mediasoup"&&(E.simulcast=!1),h&&S.disposeWebRtcPeer(),S.displayMyRemote()?S.webRtcPeer=new i.WebRtcPeerSendrecv(E):S.webRtcPeer=new i.WebRtcPeerSendonly(E),S.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+S.connection.connectionId),S.webRtcPeer.createOffer().then(function(T){S.webRtcPeer.processLocalOffer(T).then(function(){N(T.sdp)}).catch(function($){M(new Error("(publish) SDP process local offer error: "+JSON.stringify($)))})}).catch(function(T){M(new Error("(publish) SDP create offer error: "+JSON.stringify(T)))})})},w.prototype.finalResolveForSubscription=function(h,S){var x;return m.info("'Subscriber' ("+this.streamId+") successfully "+(h?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(h),this.initWebRtcStats(),h&&((x=this.reconnectionEventEmitter)===null||x===void 0||x.emitEvent("success"),delete this.reconnectionEventEmitter),S()},w.prototype.finalRejectForSubscription=function(h,S,x){var y;return m.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(h?"reconnect":"subscribe")+": "+S.toString()),h&&((y=this.reconnectionEventEmitter)===null||y===void 0||y.emitEvent("error",[S]),delete this.reconnectionEventEmitter),x(S)},w.prototype.initWebRtcPeerReceive=function(h){var S=this;return new Promise(function(x,y){h&&S.setupReconnectionEventEmitter(x,y)||(S.session.openvidu.mediaServer==="mediasoup"?S.initWebRtcPeerReceiveFromServer(h).then(function(){return S.finalResolveForSubscription(h,x)}).catch(function(I){return S.finalRejectForSubscription(h,I,y)}):S.initWebRtcPeerReceiveFromClient(h).then(function(){return S.finalResolveForSubscription(h,x)}).catch(function(I){return S.finalRejectForSubscription(h,I,y)}))})},w.prototype.initWebRtcPeerReceiveFromClient=function(h){var S=this;return new Promise(function(x,y){S.completeWebRtcPeerReceive(h,!1).then(function(I){S.webRtcPeer.processRemoteAnswer(I.sdpAnswer).then(function(){return x()}).catch(function(A){return y(A)})}).catch(function(I){return y(I)})})},w.prototype.initWebRtcPeerReceiveFromServer=function(h){var S=this;return new Promise(function(x,y){S.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:S.streamId,reconnect:h},function(I,A){if(I)return y(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(I)));S.completeWebRtcPeerReceive(h,!1,A.sdpOffer).then(function(){return x()}).catch(function(M){return y(M)})})})},w.prototype.completeWebRtcPeerReceive=function(h,S,x){var y=this;return new Promise(function(I,A){m.debug("'Session.subscribe(Stream)' called");var M=function(E){m.debug("Sending local SDP ".concat(x?"answer":"offer"," to subscribe to ").concat(y.streamId),E);var T=h?"reconnectStream":"receiveVideoFrom",$={};$[h?"stream":"sender"]=y.streamId,x?$[h?"sdpString":"sdpAnswer"]=E:$.sdpOffer=E,h&&($.forciblyReconnect=S),y.session.openvidu.sendRequest(T,$,function(P,R){return P?A(new Error("Error on "+T+" : "+JSON.stringify(P))):I(R)})},N={mediaConstraints:{audio:y.hasAudio,video:y.hasVideo},simulcast:!1,onIceCandidate:y.connection.sendIceCandidate.bind(y.connection),onIceConnectionStateException:y.onIceConnectionStateExceptionHandler.bind(y),iceServers:y.getIceServersConf(),rtcConfiguration:y.session.openvidu.advancedConfiguration.rtcConfiguration,mediaServer:y.session.openvidu.mediaServer,typeOfVideo:y.typeOfVideo?f.TypeOfVideo[y.typeOfVideo]:void 0};h&&y.disposeWebRtcPeer(),y.webRtcPeer=new i.WebRtcPeerRecvonly(N),y.webRtcPeer.addIceConnectionStateChangeListener(y.streamId),x?y.webRtcPeer.processRemoteOffer(x).then(function(){y.webRtcPeer.createAnswer().then(function(E){y.webRtcPeer.processLocalAnswer(E).then(function(){M(E.sdp)}).catch(function(T){return A(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(T)))})}).catch(function(E){return A(new Error("(subscribe) SDP create answer error: "+JSON.stringify(E)))})}).catch(function(E){return A(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(E)))}):y.webRtcPeer.createOffer().then(function(E){y.webRtcPeer.processLocalOffer(E).then(function(){M(E.sdp)}).catch(function(T){return A(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(T)))})}).catch(function(E){return A(new Error("(subscribe) SDP create offer error: "+JSON.stringify(E)))})})},w.prototype.remotePeerSuccessfullyEstablished=function(h){h&&this.mediaStream!=null&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var S,x=0,y=this.webRtcPeer.pc.getReceivers();x<y.length;x++)S=y[x],S.track&&this.mediaStream.addTrack(S.track);if(m.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof r.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var I=h?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=I}if(this.mediaStream.getVideoTracks()[0]){var I=h?this.videoActive:!!this.videoActive&&!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=I}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},w.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},w.prototype.onIceConnectionStateExceptionHandler=function(h,S,x){switch(h){case o.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new o.ExceptionEvent(this.session,h,this,S,x)])},w.prototype.onIceConnectionFailed=function(){m.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(o.ExceptionEventName.ICE_CONNECTION_FAILED)},w.prototype.onIceConnectionDisconnected=function(){var h=this;m.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var S=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(S).then(function(x){switch(x){case"failed":m.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(h.streamId," (").concat(h.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":m.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(h.streamId," (").concat(h.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(x));break;case"closed":case"checking":case"new":case"disconnected":m.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(h.streamId," (").concat(h.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(S," ms: ").concat(x)),h.reconnectStreamAndLogResultingIceConnectionState(o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}})},w.prototype.reconnectStreamAndLogResultingIceConnectionState=function(h){return e(this,void 0,void 0,function(){var S,x;return t(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(h)];case 1:switch(S=y.sent(),S){case"connected":case"completed":m.log("[".concat(h,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(h,". Current ICE connection state: ").concat(S));break;default:m.error("[".concat(h,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(h,". Current ICE connection state: ").concat(S));break}return[3,3];case 2:return x=y.sent(),m.error("[".concat(h,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(h,": ").concat(x)),[3,3];case 3:return[2]}})})},w.prototype.reconnectStreamAndReturnIceConnectionState=function(h){return e(this,void 0,void 0,function(){var S,x;return t(this,function(y){switch(y.label){case 0:m.log("[".concat(h,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(h)),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.reconnectStream(h)];case 2:return y.sent(),S=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(S)];case 3:return x=y.sent(),m.warn("[".concat(h,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(x)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}})})},w.prototype.awaitWebRtcPeerConnectionState=function(h){return e(this,void 0,void 0,function(){var S,x,y,I;return t(this,function(A){switch(A.label){case 0:S=this.getRTCPeerConnection().iceConnectionState,x=150,y=Math.ceil(h/x),I=0,A.label=1;case 1:return I<y?(S=this.getRTCPeerConnection().iceConnectionState,S==="connected"||S==="completed"?[3,4]:[4,new Promise(function(M){return setTimeout(M,x)})]):[3,4];case 2:A.sent(),A.label=3;case 3:return I++,[3,1];case 4:return[2,S]}})})},w.prototype.reconnectStream=function(h){return e(this,void 0,void 0,function(){var S,x;return t(this,function(y){switch(y.label){case 0:return[4,this.isWebsocketConnected(h,3e3)];case 1:if(S=y.sent(),S)return m.log("[".concat(h,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw x="[".concat(h,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),m.error(x),Error(x)}})})},w.prototype.isWebsocketConnected=function(h,S){var x=this;return new Promise(function(y,I){var A=x.session.openvidu.getWsReadyState();if(A===1){var M=setTimeout(function(){return console.warn("[".concat(h,"] Websocket timeout of ").concat(S,"ms")),y(!1)},S);x.session.openvidu.sendRequest("echo",{},function(N,E){return clearTimeout(M),N?(console.warn("[".concat(h,"] Websocket 'echo' returned error: ").concat(N)),y(!1)):y(!0)})}else return console.warn("[".concat(h,"] Websocket readyState is ").concat(A)),y(!1)})},w.prototype.initWebRtcStats=function(){this.webRtcStats=new s.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},w.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},w.prototype.getIceServersConf=function(){var h,S;return this.session.openvidu.advancedConfiguration.iceServers?S=this.session.openvidu.advancedConfiguration.iceServers==="freeice"?void 0:this.session.openvidu.advancedConfiguration.iceServers:!((h=this.session.openvidu.advancedConfiguration.rtcConfiguration)===null||h===void 0)&&h.iceServers?S=this.session.openvidu.advancedConfiguration.rtcConfiguration.iceServers:this.session.openvidu.iceServers?S=this.session.openvidu.iceServers:S=void 0,S},w.prototype.gatherStatsForPeer=function(){var h=this;return new Promise(function(S,x){h.isLocal()?h.getRTCPeerConnection().getSenders().forEach(function(y){return y.getStats().then(function(I){I.forEach(function(A){if(h.isReportWanted(A)){var M={};M.type=A.type,M.timestamp=A.timestamp,M.id=A.id,A.type==="outbound-rtp"&&(M.ssrc=A.ssrc,M.firCount=A.firCount,M.pliCount=A.pliCount,M.nackCount=A.nackCount,M.qpSum=A.qpSum,A.kind?M.mediaType=A.kind:A.mediaType?M.mediaType=A.mediaType:M.mediaType=A.id.indexOf("VideoStream")!==-1?"video":"audio",M.mediaType==="video"&&(M.framesEncoded=A.framesEncoded),M.packetsSent=A.packetsSent,M.bytesSent=A.bytesSent),A.type==="candidate-pair"&&A.totalRoundTripTime!==void 0&&(M.availableOutgoingBitrate=A.availableOutgoingBitrate,M.rtt=A.currentRoundTripTime,M.averageRtt=A.totalRoundTripTime/A.responsesReceived),A.type==="remote-inbound-rtp"||A.type,m.log(M)}})})}):h.getRTCPeerConnection().getReceivers().forEach(function(y){return y.getStats().then(function(I){I.forEach(function(A){if(h.isReportWanted(A)){var M={};M.type=A.type,M.timestamp=A.timestamp,M.id=A.id,A.type==="inbound-rtp"&&(M.ssrc=A.ssrc,M.firCount=A.firCount,M.pliCount=A.pliCount,M.nackCount=A.nackCount,M.qpSum=A.qpSum,A.kind?M.mediaType=A.kind:A.mediaType?M.mediaType=A.mediaType:M.mediaType=A.id.indexOf("VideoStream")!==-1?"video":"audio",M.mediaType==="video"&&(M.framesDecoded=A.framesDecoded),M.packetsReceived=A.packetsReceived,M.packetsLost=A.packetsLost,M.jitter=A.jitter,M.bytesReceived=A.bytesReceived),A.type==="candidate-pair"&&A.totalRoundTripTime!==void 0&&(M.availableIncomingBitrate=A.availableIncomingBitrate,M.rtt=A.currentRoundTripTime,M.averageRtt=A.totalRoundTripTime/A.responsesReceived),A.type==="remote-inbound-rtp"||A.type,m.log(M)}})})})})},w.prototype.isReportWanted=function(h){return h.type==="inbound-rtp"&&!this.isLocal()||h.type==="outbound-rtp"&&this.isLocal()||h.type==="candidate-pair"&&h.nominated&&h.bytesSent>0},w}();return Kt.Stream=k,Kt}var yu;function Tp(){if(yu)return Lr;yu=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Connection=void 0;var e=Ka(),t=ot(),n=Cr(),r=t.OpenViduLogger.getInstance(),i=function(){function s(o,a){this.session=o,this.disposed=!1;var c="'Connection' created ";a.role?(this.localOptions=a,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,c+="(local)"):(this.remoteOptions=a,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),c+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),r.info(c)}return s.prototype.sendIceCandidate=function(o){var a=this;this.disposed?r.warn("Connection ".concat(this.connectionId," disposed when trying to send an ICE candidate. ICE candidate not sent")):(r.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,o),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex},function(c,l){c&&(r.error("Error sending ICE candidate: "+JSON.stringify(c)),a.session.emitEvent("exception",[new n.ExceptionEvent(a.session,n.ExceptionEventName.ICE_CANDIDATE_ERROR,a.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",c)]))}))},s.prototype.initRemoteStreams=function(o){var a=this;o.forEach(function(c){var l={id:c.id,createdAt:c.createdAt,connection:a,hasAudio:c.hasAudio,hasVideo:c.hasVideo,audioActive:c.audioActive,videoActive:c.videoActive,typeOfVideo:c.typeOfVideo,frameRate:c.frameRate,videoDimensions:c.videoDimensions?JSON.parse(c.videoDimensions):void 0,filter:c.filter?c.filter:void 0},u=new e.Stream(a.session,l);a.addStream(u)}),r.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},s.prototype.addStream=function(o){o.connection=this,this.stream=o},s.prototype.removeStream=function(){delete this.stream},s.prototype.dispose=function(){this.disposed=!0,this.removeStream()},s}();return Lr.Connection=i,Lr}var Pn={},Eu;function xp(){if(Eu)return Pn;Eu=1;var e=Pn&&Pn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.ConnectionEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,s,o,a)||this;return u.connection=c,u.reason=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Pn.ConnectionEvent=n,Pn}var An={},_u;function Pp(){if(_u)return An;_u=1;var e=An&&An.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(An,"__esModule",{value:!0}),An.FilterEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,s,o)||this;return c.data=a,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return An.FilterEvent=n,An}var Nn={},Su;function Ap(){if(Su)return Nn;Su=1;var e=Nn&&Nn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.RecordingEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,!1,s,o)||this;return u.id=a,c!==a&&(u.name=c),u.reason=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Nn.RecordingEvent=n,Nn}var Mn={},wu;function Ja(){if(wu)return Mn;wu=1;var e=Mn&&Mn.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.SessionDisconnectedEvent=void 0;var t=ft(),n=ot(),r=n.OpenViduLogger.getInstance(),i=function(s){e(o,s);function o(a,c){var l=s.call(this,!0,a,"sessionDisconnected")||this;return l.reason=c,l}return o.prototype.callDefaultBehavior=function(){r.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var a=this.target;a.remoteConnections.forEach(function(c){var l,u,f,g,p,_,b,v,m=c.connectionId;if(!((l=a.remoteConnections.get(m))===null||l===void 0)&&l.stream){(u=a.remoteConnections.get(m))===null||u===void 0||u.stream.disposeWebRtcPeer(),(f=a.remoteConnections.get(m))===null||f===void 0||f.stream.disposeMediaStream(),!((g=a.remoteConnections.get(m))===null||g===void 0)&&g.stream.streamManager&&((p=a.remoteConnections.get(m))===null||p===void 0||p.stream.streamManager.removeAllVideos());var C=(b=(_=a.remoteConnections.get(m))===null||_===void 0?void 0:_.stream)===null||b===void 0?void 0:b.streamId;C&&a.remoteStreamsCreated.delete(C),(v=a.remoteConnections.get(m))===null||v===void 0||v.dispose()}a.remoteConnections.delete(m)})},o}(t.Event);return Mn.SessionDisconnectedEvent=i,Mn}var Dn={},Cu;function Np(){if(Cu)return Dn;Cu=1;var e=Dn&&Dn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.SignalEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,"signal")||this;return o&&(l.type="signal:"+o),l.data=a,l.from=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Dn.SignalEvent=n,Dn}var Ln={},Iu;function Mp(){if(Iu)return Ln;Iu=1;var e=Ln&&Ln.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.SpeechToTextEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c,l,u){var f=r.call(this,!1,s,"speechToTextMessage")||this;return f.connection=o,f.text=a,f.reason=c,f.raw=l,f.lang=u,f}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Ln.SpeechToTextEvent=n,Ln}var $n={},Ru;function Qa(){if(Ru)return $n;Ru=1;var e=$n&&$n.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(u[g]=f[g])},a(c,l)};return function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty($n,"__esModule",{value:!0}),$n.StreamEvent=void 0;var t=ft(),n=Xa(),r=zs(),i=ot(),s=i.OpenViduLogger.getInstance(),o=function(a){e(c,a);function c(l,u,f,g,p){var _=a.call(this,l,u,f)||this;return _.stream=g,_.reason=p,_}return c.prototype.callDefaultBehavior=function(){if(this.type==="streamDestroyed"){if(this.target instanceof r.Session)s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof n.Publisher){s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var l=this.target.openvidu.publishers,u=0;u<l.length;u++)if(l[u]===this.target){l.splice(u,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var f=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(f&&f.remoteOptions)for(var g=f.remoteOptions.streams,u=g.length-1;u>=0;--u)g[u].id===this.stream.streamId&&g.splice(u,1)}},c}(t.Event);return $n.StreamEvent=o,$n}var Vn={},Ou;function Dp(){if(Ou)return Vn;Ou=1;var e=Vn&&Vn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.ConnectionPropertyChangedEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,!1,s,"connectionPropertyChanged")||this;return u.connection=o,u.changedProperty=a,u.newValue=c,u.oldValue=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Vn.ConnectionPropertyChangedEvent=n,Vn}var Bn={},ku;function Lp(){if(ku)return Bn;ku=1;var e=Bn&&Bn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.NetworkQualityLevelChangedEvent=void 0;var t=ft(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,"networkQualityLevelChanged")||this;return l.newValue=o,l.oldValue=a,l.connection=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Bn.NetworkQualityLevelChangedEvent=n,Bn}var No,Tu;function $p(){if(Tu)return No;Tu=1;var e={};return No=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},No}var Mo,xu;function Vp(){if(xu)return Mo;xu=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return Mo={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Mo}var Wi={exports:{}},Pu;function ZC(){return Pu||(Pu=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Vp(),s=$p();t=e.exports={};const o=t.re=[],a=t.safeRe=[],c=t.src=[],l=t.t={};let u=0;const f="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[f,r]],p=b=>{for(const[v,m]of g)b=b.split(`${v}*`).join(`${v}{0,${m}}`).split(`${v}+`).join(`${v}{1,${m}}`);return b},_=(b,v,m)=>{const C=p(v),k=u++;s(b,k,v),l[b]=k,c[k]=v,o[k]=new RegExp(v,m?"g":void 0),a[k]=new RegExp(C,m?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),_("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),_("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${f}+`),_("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),_("FULL",`^${c[l.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),_("LOOSE",`^${c[l.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),_("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),_("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?(?:${c[l.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",c[l.COERCE],!0),_("COERCERTLFULL",c[l.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",_("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",_("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Wi,Wi.exports)),Wi.exports}var Do,Au;function e2(){if(Au)return Do;Au=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Do=r=>r?typeof r!="object"?e:r:t,Do}var Lo,Nu;function t2(){if(Nu)return Lo;Nu=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),o=e.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return Lo={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},Lo}var $o,Mu;function Bp(){if(Mu)return $o;Mu=1;const e=$p(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Vp(),{safeRe:r,t:i}=ZC(),s=e2(),{compareIdentifiers:o}=t2();class a{constructor(l,u){if(u=s(u),l instanceof a){if(l.loose===!!u.loose&&l.includePrerelease===!!u.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",l,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const f=l.trim().match(u.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(g=>{if(/^[0-9]+$/.test(g)){const p=+g;if(p>=0&&p<n)return p}return g}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(e("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let u=0;do{const f=this.prerelease[u],g=l.prerelease[u];if(e("prerelease compare",u,f,g),f===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(f===void 0)return-1;if(f===g)continue;return o(f,g)}while(++u)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let u=0;do{const f=this.build[u],g=l.build[u];if(e("build compare",u,f,g),f===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(f===void 0)return-1;if(f===g)continue;return o(f,g)}while(++u)}inc(l,u,f){switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,f),this.inc("pre",u,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,f),this.inc("pre",u,f);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const g=Number(f)?1:0;if(!u&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[g];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(u===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(g)}}if(u){let p=[u,g];f===!1&&(p=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return $o=a,$o}var Vo,Du;function n2(){if(Du)return Vo;Du=1;const e=Bp();return Vo=(n,r)=>new e(n,r).major,Vo}var Bo,Lu;function r2(){if(Lu)return Bo;Lu=1;const e=Bp();return Bo=(n,r)=>new e(n,r).minor,Bo}var $u;function zs(){if($u)return xt;$u=1;var e=xt&&xt.__extends||function(){var M=function(N,E){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,$){T.__proto__=$}||function(T,$){for(var P in $)Object.prototype.hasOwnProperty.call($,P)&&(T[P]=$[P])},M(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");M(N,E);function T(){this.constructor=N}N.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}}(),t=xt&&xt.__awaiter||function(M,N,E,T){function $(P){return P instanceof E?P:new E(function(R){R(P)})}return new(E||(E=Promise))(function(P,R){function O(G){try{j(T.next(G))}catch(J){R(J)}}function B(G){try{j(T.throw(G))}catch(J){R(J)}}function j(G){G.done?P(G.value):$(G.value).then(O,B)}j((T=T.apply(M,N||[])).next())})},n=xt&&xt.__generator||function(M,N){var E={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},T,$,P,R;return R={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function O(j){return function(G){return B([j,G])}}function B(j){if(T)throw new TypeError("Generator is already executing.");for(;R&&(R=0,j[0]&&(E=0)),E;)try{if(T=1,$&&(P=j[0]&2?$.return:j[0]?$.throw||((P=$.return)&&P.call($),0):$.next)&&!(P=P.call($,j[1])).done)return P;switch($=0,P&&(j=[j[0]&2,P.value]),j[0]){case 0:case 1:P=j;break;case 4:return E.label++,{value:j[1],done:!1};case 5:E.label++,$=j[1],j=[0];continue;case 7:j=E.ops.pop(),E.trys.pop();continue;default:if(P=E.trys,!(P=P.length>0&&P[P.length-1])&&(j[0]===6||j[0]===2)){E=0;continue}if(j[0]===3&&(!P||j[1]>P[0]&&j[1]<P[3])){E.label=j[1];break}if(j[0]===6&&E.label<P[1]){E.label=P[1],P=j;break}if(P&&E.label<P[2]){E.label=P[2],E.ops.push(j);break}P[2]&&E.ops.pop(),E.trys.pop();continue}j=N.call(M,E)}catch(G){j=[6,G],$=0}finally{T=P=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.Session=void 0;var r=Tp(),i=Fa(),s=Ga(),o=Ha(),a=xp(),c=Pp(),l=Ap(),u=Ja(),f=Np(),g=Mp(),p=Qa(),_=Sr(),b=Dp(),v=Lp(),m=wr(),C=Ws(),k=ot(),w=yn(),h=n2(),S=r2(),x=Cr(),y=k.OpenViduLogger.getInstance(),I,A=function(M){e(N,M);function N(E){var T=M.call(this)||this;return T.streamManagers=[],T.remoteStreamsCreated=new Map,T.remoteConnections=new Map,I=w.PlatformUtils.getInstance(),T.openvidu=E,T}return N.prototype.connect=function(E,T){var $=this;return new Promise(function(P,R){if($.processToken(E),$.openvidu.checkSystemRequirements())$.options={sessionId:$.sessionId,participantId:E,metadata:T?$.stringClientMetadata(T):""},$.connectAux(E).then(function(){return P()}).catch(function(O){return R(O)});else return R(new m.OpenViduError(m.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+I.getName()+" (version "+I.getVersion()+") for "+I.getFamily()+" is not supported in OpenVidu"))})},N.prototype.disconnect=function(){this.leave(!1,"disconnect")},N.prototype.subscribe=function(E,T,$,P){var R={};$&&typeof $!="function"?R={insertMode:typeof $.insertMode<"u"?typeof $.insertMode=="string"?C.VideoInsertMode[$.insertMode]:R.insertMode:C.VideoInsertMode.APPEND,subscribeToAudio:typeof $.subscribeToAudio<"u"?$.subscribeToAudio:!0,subscribeToVideo:typeof $.subscribeToVideo<"u"?$.subscribeToVideo:!0}:R={insertMode:C.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var O=void 0;if($&&typeof $=="function"?O=$:P&&(O=P),!this.sessionConnected())throw O!==void 0&&O(this.notConnectedError()),this.notConnectedError();y.info("Subscribing to "+E.connection.connectionId),E.subscribe().then(function(){y.info("Subscribed correctly to "+E.connection.connectionId),O!==void 0&&O(void 0)}).catch(function(j){O!==void 0&&O(j)});var B=new s.Subscriber(E,T,R);return B.targetElement&&E.streamManager.createVideoElement(B.targetElement,R.insertMode),B},N.prototype.subscribeAsync=function(E,T,$){var P=this;return new Promise(function(R,O){if(!P.sessionConnected())return O(P.notConnectedError());var B,j=function(G){return G?O(G):R(B)};$?B=P.subscribe(E,T,$,j):B=P.subscribe(E,T,j)})},N.prototype.unsubscribe=function(E){var T=this;return new Promise(function($,P){if(T.sessionConnected()){var R=E.stream.connection.connectionId;y.info("Unsubscribing from "+R),T.openvidu.sendRequest("unsubscribeFromVideo",{sender:E.stream.connection.connectionId},function(O,B){return O?(y.error("Error unsubscribing from "+R),P(O)):(y.info("Unsubscribed correctly from "+R),E.stream.streamManager.removeAllVideos(),E.stream.disposeWebRtcPeer(),E.stream.disposeMediaStream(),$())})}else return P(T.notConnectedError())})},N.prototype.publish=function(E){var T=this;return new Promise(function($,P){if(!T.sessionConnected())return P(T.notConnectedError());E.session=T,E.stream.session=T,E.stream.publishedOnce?E.initialize().then(function(){T.connection.addStream(E.stream),E.reestablishStreamPlayingEvent(),E.stream.publish().then(function(){return T.sendVideoData(E,8,!0,5),$()}).catch(function(R){return P(R)})}).catch(function(R){return P(R)}):(T.connection.addStream(E.stream),E.stream.publish().then(function(){return T.sendVideoData(E,8,!0,5),$()}).catch(function(R){return P(R)}))})},N.prototype.unpublish=function(E){var T=this;return new Promise(function($,P){if(!T.sessionConnected())throw T.notConnectedError();var R=E.stream;if(R.connection){if(R.connection!==T.connection)return P(new Error("The associated Connection object of this Publisher is not your local Connection.  Only moderators can force unpublish on remote Streams via 'forceUnpublish' method"));y.info("Unpublishing local media ("+R.connection.connectionId+")"),T.openvidu.sendRequest("unpublishVideo",function(O,B){if(O)return P(O);y.info("Media unpublished correctly"),R.disposeWebRtcPeer(),R.connection.stream==R&&delete R.connection.stream;var j=new p.StreamEvent(!0,E,"streamDestroyed",E.stream,"unpublish");return E.emitEvent("streamDestroyed",[j]),j.callDefaultBehavior(),$()})}else return P(new Error("The associated Connection object of this Publisher is null"))})},N.prototype.forceDisconnect=function(E){var T=this;return new Promise(function($,P){if(!T.sessionConnected())return P(T.notConnectedError());y.info("Forcing disconnect for connection "+E.connectionId),T.openvidu.sendRequest("forceDisconnect",{connectionId:E.connectionId},function(R,O){return R?(y.error("Error forcing disconnect for Connection "+E.connectionId,R),R.code===401?P(new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):P(R)):(y.info("Forcing disconnect correctly for Connection "+E.connectionId),$())})})},N.prototype.forceUnpublish=function(E){var T=this;return new Promise(function($,P){if(!T.sessionConnected())return P(T.notConnectedError());y.info("Forcing unpublish for stream "+E.streamId),T.openvidu.sendRequest("forceUnpublish",{streamId:E.streamId},function(R,O){return R?(y.error("Error forcing unpublish for Stream "+E.streamId,R),R.code===401?P(new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):P(R)):(y.info("Forcing unpublish correctly for Stream "+E.streamId),$())})})},N.prototype.signal=function(E){var T=this;return new Promise(function($,P){if(!T.sessionConnected())return P(T.notConnectedError());var R={};if(E.to&&E.to.length>0){var O=[];E.to.forEach(function(j){j.connectionId&&O.push(j.connectionId)}),R.to=O}else R.to=[];R.data=E.data?E.data:"";var B=E.type?E.type:"signal";B&&B.substring(0,7)!=="signal:"&&(B="signal:"+B),R.type=B,T.openvidu.sendRequest("sendMessage",{message:JSON.stringify(R)},function(j,G){return j?P(j):$()})})},N.prototype.subscribeToSpeechToText=function(E,T){var $=this;return new Promise(function(P,R){$.openvidu.sendRequest("subscribeToSpeechToText",{connectionId:E.connection.connectionId,lang:T},function(O,B){return O?R(O):P()})})},N.prototype.unsubscribeFromSpeechToText=function(E){var T=this;return new Promise(function($,P){T.openvidu.sendRequest("unsubscribeFromSpeechToText",{connectionId:E.connection.connectionId},function(R,O){return R?P(R):$()})})},N.prototype.on=function(E,T){var $,P,R,O;return M.prototype.onAux.call(this,E,"Event '"+E+"' triggered by 'Session'",T),E==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(B){var j;!((j=B.stream)===null||j===void 0)&&j.hasAudio&&B.stream.enableHarkSpeakingEvent()}),!((P=($=this.connection)===null||$===void 0?void 0:$.stream)===null||P===void 0)&&P.hasAudio&&this.connection.stream.enableHarkSpeakingEvent()),E==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(B){var j;!((j=B.stream)===null||j===void 0)&&j.hasAudio&&B.stream.enableHarkStoppedSpeakingEvent()}),!((O=(R=this.connection)===null||R===void 0?void 0:R.stream)===null||O===void 0)&&O.hasAudio&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},N.prototype.once=function(E,T){var $,P,R,O;return M.prototype.onceAux.call(this,E,"Event '"+E+"' triggered once by 'Session'",T),E==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(B){var j;!((j=B.stream)===null||j===void 0)&&j.hasAudio&&B.stream.enableOnceHarkSpeakingEvent()}),!((P=($=this.connection)===null||$===void 0?void 0:$.stream)===null||P===void 0)&&P.hasAudio&&this.connection.stream.enableOnceHarkSpeakingEvent()),E==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(B){var j;!((j=B.stream)===null||j===void 0)&&j.hasAudio&&B.stream.enableOnceHarkStoppedSpeakingEvent()}),!((O=(R=this.connection)===null||R===void 0?void 0:R.stream)===null||O===void 0)&&O.hasAudio&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},N.prototype.off=function(E,T){var $=this,P,R,O,B;return M.prototype.offAux.call(this,E,T),E==="publisherStartSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach(function(j){var G;!((G=j.stream)===null||G===void 0)&&G.streamManager&&($.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,j.stream.streamManager)||j.stream.disableHarkSpeakingEvent(!1))}),!((R=(P=this.connection)===null||P===void 0?void 0:P.stream)===null||R===void 0)&&R.streamManager&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),E==="publisherStopSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach(function(j){var G;!((G=j.stream)===null||G===void 0)&&G.streamManager&&($.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,j.stream.streamManager)||j.stream.disableHarkStoppedSpeakingEvent(!1))}),!((B=(O=this.connection)===null||O===void 0?void 0:O.stream)===null||B===void 0)&&B.streamManager&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},N.prototype.onParticipantJoined=function(E){var T=this;this.getConnection(E.id,"").then(function($){y.warn("Connection "+$.connectionId+" already exists in connections list")}).catch(function($){var P=new r.Connection(T,E);T.remoteConnections.set(E.id,P),T.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,T,"connectionCreated",P,"")])})},N.prototype.onParticipantLeft=function(E){var T=this;this.getRemoteConnection(E.connectionId,"onParticipantLeft").then(function($){if($.stream){var P=$.stream,R=new p.StreamEvent(!0,T,"streamDestroyed",P,E.reason);T.ee.emitEvent("streamDestroyed",[R]),R.callDefaultBehavior(),T.remoteStreamsCreated.delete(P.streamId)}$.dispose(),T.remoteConnections.delete($.connectionId),T.ee.emitEvent("connectionDestroyed",[new a.ConnectionEvent(!1,T,"connectionDestroyed",$,E.reason)])}).catch(function($){y.error($)})},N.prototype.onParticipantPublished=function(E){var T=this,$=function(R){T.remoteConnections.set(R.connectionId,R),T.remoteStreamsCreated.get(R.stream.streamId)||T.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,T,"streamCreated",R.stream,"")]),T.remoteStreamsCreated.set(R.stream.streamId,!0)},P;this.getRemoteConnection(E.id,"onParticipantPublished").then(function(R){P=R,E.metadata=R.data,P.remoteOptions=E,P.initRemoteStreams(E.streams),$(P)}).catch(function(R){P=new r.Connection(T,E),$(P)})},N.prototype.onParticipantUnpublished=function(E){var T=this;E.connectionId===this.connection.connectionId?this.stopPublisherStream(E.reason):this.getRemoteConnection(E.connectionId,"onParticipantUnpublished").then(function($){var P=new p.StreamEvent(!0,T,"streamDestroyed",$.stream,E.reason);if(T.ee.emitEvent("streamDestroyed",[P]),P.callDefaultBehavior(),$.stream!=null){var R=$.stream.streamId;T.remoteStreamsCreated.delete(R),$.removeStream()}}).catch(function($){y.error($)})},N.prototype.onParticipantEvicted=function(E){E.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,E.reason)},N.prototype.onNewMessage=function(E){var T=this;y.info("New signal: "+JSON.stringify(E));var $=E.type?E.type.replace(/^(signal:)/,""):void 0;E.from?this.getConnection(E.from,"Connection '"+E.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then(function(P){T.ee.emitEvent("signal",[new f.SignalEvent(T,$,E.data,P)]),E.type&&E.type!=="signal"&&T.ee.emitEvent(E.type,[new f.SignalEvent(T,$,E.data,P)])}).catch(function(P){y.error(P)}):(this.ee.emitEvent("signal",[new f.SignalEvent(this,$,E.data,void 0)]),E.type&&E.type!=="signal"&&this.ee.emitEvent(E.type,[new f.SignalEvent(this,$,E.data,void 0)]))},N.prototype.onStreamPropertyChanged=function(E){var T=this,$=function(P){var R,O;if(P.stream&&P.stream.streamId===E.streamId){var B=P.stream,j=void 0;switch(E.property){case"audioActive":j=B.audioActive,E.newValue=E.newValue==="true",B.audioActive=E.newValue;break;case"videoActive":j=B.videoActive,E.newValue=E.newValue==="true",B.videoActive=E.newValue;var G=(O=(R=B==null?void 0:B.getMediaStream())===null||R===void 0?void 0:R.getVideoTracks())===null||O===void 0?void 0:O[0];G&&!G.enabled&&B.videoActive&&(G.enabled=!0);break;case"videoTrack":E.newValue=JSON.parse(E.newValue);break;case"audioTrack":E.newValue=JSON.parse(E.newValue);break;case"videoDimensions":j=B.videoDimensions,E.newValue=JSON.parse(JSON.parse(E.newValue)),B.videoDimensions=E.newValue;break;case"filter":j=B.filter,E.newValue=Object.keys(E.newValue).length>0?E.newValue:void 0,E.newValue!==void 0?(B.filter=new i.Filter(E.newValue.type,E.newValue.options),B.filter.stream=B,E.newValue.lastExecMethod&&(B.filter.lastExecMethod=E.newValue.lastExecMethod)):delete B.filter,E.newValue=B.filter;break}T.ee.emitEvent("streamPropertyChanged",[new _.StreamPropertyChangedEvent(T,B,E.property,E.newValue,j,E.reason)]),B.streamManager&&B.streamManager.emitEvent("streamPropertyChanged",[new _.StreamPropertyChangedEvent(B.streamManager,B,E.property,E.newValue,j,E.reason)])}else y.error("No stream with streamId '"+E.streamId+"' found for connection '"+E.connectionId+"' on 'streamPropertyChanged' event")};E.connectionId===this.connection.connectionId?$(this.connection):this.getRemoteConnection(E.connectionId,"onStreamPropertyChanged").then(function(P){$(P)}).catch(function(P){y.error(P)})},N.prototype.onConnectionPropertyChanged=function(E){var T;switch(E.property){case"role":T=this.connection.role.slice(),this.connection.role=E.newValue,this.connection.localOptions.role=E.newValue;break;case"record":T=this.connection.record,E.newValue=E.newValue==="true",this.connection.record=E.newValue,this.connection.localOptions.record=E.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new b.ConnectionPropertyChangedEvent(this,this.connection,E.property,E.newValue,T)])},N.prototype.onNetworkQualityLevelChangedChanged=function(E){var T=this;E.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new v.NetworkQualityLevelChangedEvent(this,E.newValue,E.oldValue,this.connection)]):this.getConnection(E.connectionId,"Connection not found for connectionId "+E.connectionId).then(function($){T.ee.emitEvent("networkQualityLevelChanged",[new v.NetworkQualityLevelChangedEvent(T,E.newValue,E.oldValue,$)])}).catch(function($){y.error($)})},N.prototype.recvIceCandidate=function(E){var T={candidate:E.candidate,sdpMLineIndex:E.sdpMLineIndex,sdpMid:E.sdpMid},$=new RTCIceCandidate(T);this.getConnection(E.senderConnectionId,"Connection not found for connectionId "+E.senderConnectionId+" owning endpoint "+E.endpointName+". Ice candidate will be ignored: "+$).then(function(P){var R=P.stream;R.getWebRtcPeer().addIceCandidate($).catch(function(O){y.error("Error adding candidate for "+R.streamId+" stream of endpoint "+E.endpointName+": "+O)})}).catch(function(P){y.error(P)})},N.prototype.onSessionClosed=function(E){y.info("Session closed: "+JSON.stringify(E));var T=E.sessionId;T!==void 0?this.ee.emitEvent("session-closed",[{session:T}]):y.warn("Session undefined on session closed",E)},N.prototype.onLostConnection=function(E){y.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,E)},N.prototype.onRecoveredConnection=function(){y.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},N.prototype.onMediaError=function(E){y.error("Media error: "+JSON.stringify(E));var T=E.error;T?this.ee.emitEvent("error-media",[{error:T}]):y.warn("Received undefined media error:",E)},N.prototype.onRecordingStarted=function(E){this.ee.emitEvent("recordingStarted",[new l.RecordingEvent(this,"recordingStarted",E.id,E.name)])},N.prototype.onRecordingStopped=function(E){this.ee.emitEvent("recordingStopped",[new l.RecordingEvent(this,"recordingStopped",E.id,E.name,E.reason)])},N.prototype.onBroadcastStarted=function(){this.ee.emitEvent("broadcastStarted",[])},N.prototype.onBroadcastStopped=function(){this.ee.emitEvent("broadcastStopped",[])},N.prototype.onFilterEventDispatched=function(E){var T=this,$=E.connectionId;this.getConnection($,"No connection found for connectionId "+$).then(function(P){y.info('Filter event of type "'.concat(E.eventType,'" dispatched'));var R=P.stream;if(!R||!R.filter)return y.error('Filter event of type "'.concat(E.eventType,'" dispatched for stream ').concat(R.streamId," but there is no ").concat(R?"filter":"stream"," defined"));var O=R.filter.handlers.get(E.eventType);if(!O||typeof O!="function"){var B=Array.from(R.filter.handlers.keys());return y.error('Filter event of type "'.concat(E.eventType,'" not handled or not a function! Active filter events: ').concat(B.join(",")))}else O.call(T,new c.FilterEvent(R.filter,E.eventType,E.data))})},N.prototype.onForciblyReconnectSubscriber=function(E){var T=this;return new Promise(function($,P){T.getRemoteConnection(E.connectionId,"onForciblyReconnectSubscriber").then(function(R){if(R.stream&&R.stream.streamId===E.streamId){var O=R.stream;if(O.setupReconnectionEventEmitter($,P)){if(O.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent!=null)return O.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=E,P("Ongoing forced subscriber reconnection");O.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=E;var B=function(){var G=O.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent;delete O.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent,T.onForciblyReconnectSubscriber(G)};O.reconnectionEventEmitter.once("success",function(){B()}),O.reconnectionEventEmitter.once("error",function(){B()});return}O.completeWebRtcPeerReceive(!0,!0,E.sdpOffer).then(function(){return O.finalResolveForSubscription(!0,$)}).catch(function(G){return O.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(E.streamId,": ").concat(G.toString()),P)})}else{var j="No stream with streamId '"+E.streamId+"' found for connection '"+E.connectionId+"' on 'streamPropertyChanged' event";return y.error(j),P(j)}}).catch(function(R){return y.error(R),P(R)})})},N.prototype.reconnectBrokenStreams=function(){y.info("Re-establishing media connections...");var E=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),E=!0),this.remoteConnections.forEach(function(T){T.stream&&T.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Subscriber "+T.stream.streamId),T.stream.initWebRtcPeerReceive(!0),E=!0)}),E||y.info("There were no media streams in need of a reconnection")},N.prototype.onSpeechToTextMessage=function(E){return t(this,void 0,void 0,function(){var T,$;return n(this,function(P){switch(P.label){case 0:return[4,this.getConnection(E.connectionId,"No connection found for connectionId "+E.connectionId)];case 1:return T=P.sent(),$=new g.SpeechToTextEvent(this,T,E.text,E.reason.toLowerCase(),E.raw,E.lang),this.ee.emitEvent("speechToTextMessage",[$]),[2]}})})},N.prototype.onSpeechToTextDisconnected=function(E){return t(this,void 0,void 0,function(){return n(this,function(T){return this.emitEvent("exception",[new x.ExceptionEvent(this,x.ExceptionEventName.SPEECH_TO_TEXT_DISCONNECTED,this,E.message)]),[2]})})},N.prototype.emitEvent=function(E,T){this.ee.emitEvent(E,T)},N.prototype.leave=function(E,T){var $=this;if(E=!!E,y.info("Leaving Session (forced="+E+")"),this.stopVideoDataIntervals(),this.connection){if(!this.connection.disposed&&!E?this.openvidu.sendRequest("leaveRoom",function(R,O){R&&y.error("leaveRoom error: ".concat(JSON.stringify(R))),$.openvidu.closeWs()}):this.openvidu.closeWs(),this.stopPublisherStream(T),!this.connection.disposed){var P=new u.SessionDisconnectedEvent(this,T);this.ee.emitEvent("sessionDisconnected",[P]),P.callDefaultBehavior()}}else y.warn("You were not connected to the session "+this.sessionId);y.flush()},N.prototype.initializeParams=function(E){var T={token:E||"",session:this.sessionId,platform:I.getDescription()?I.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder(),stt:this.openvidu.getStt()};return T},N.prototype.sendVideoData=function(E,T,$,P){var R=this,O,B;if(T===void 0&&(T=1),$===void 0&&($=!1),P===void 0&&(P=1),I.isChromeBrowser()||I.isChromeMobileBrowser()||I.isOperaBrowser()||I.isOperaMobileBrowser()||I.isEdgeBrowser()||I.isEdgeMobileBrowser()||I.isElectron()||I.isSafariBrowser()&&!I.isIonicIos()||I.isAndroidBrowser()||I.isSamsungBrowser()||I.isIonicAndroid()||I.isIOSWithSafari()){var j=function(){return t(R,void 0,void 0,function(){var J,ee,X;return n(this,function(pe){switch(pe.label){case 0:return J=E.stream.getRTCPeerConnection(),J.connectionState!=="connected"?[3,2]:[4,J.getStats()];case 1:ee=pe.sent(),X=[],ee.forEach(function(F){"frameWidth"in F&&"frameHeight"in F&&X.length===0&&X.push(F)}),X.length>0&&this.openvidu.sendRequest("videoData",{height:X[0].frameHeight,width:X[0].frameWidth,videoActive:E.stream.videoActive!=null?E.stream.videoActive:!1,audioActive:E.stream.audioActive!=null?E.stream.audioActive:!1},function(F,z){F&&y.error("Error sending 'videoData' event",F)}),pe.label=2;case 2:return[2]}})})};if($){var G=1;this.videoDataInterval=setInterval(function(){G<P?(G++,j()):clearInterval(R.videoDataInterval)},T*1e3)}else this.videoDataTimeout=setTimeout(j,T*1e3)}else I.isFirefoxBrowser()||I.isFirefoxMobileBrowser()||I.isIonicIos()||I.isReactNative()?this.openvidu.sendRequest("videoData",{height:((O=E.stream.videoDimensions)===null||O===void 0?void 0:O.height)||0,width:((B=E.stream.videoDimensions)===null||B===void 0?void 0:B.width)||0,videoActive:E.stream.videoActive!=null?E.stream.videoActive:!1,audioActive:E.stream.audioActive!=null?E.stream.audioActive:!1},function(J,ee){J&&y.error("Error sending 'videoData' event",J)}):y.error("Browser "+I.getName()+" (version "+I.getVersion()+") for "+I.getFamily()+" is not supported in OpenVidu for Network Quality")},N.prototype.sessionConnected=function(){return this.connection!=null},N.prototype.notConnectedError=function(){return new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},N.prototype.anySpeechEventListenerEnabled=function(E,T,$){var P=this.ee.getListeners(E);T&&(P=P.filter(function(j){return j.once}));var R=P.length;if(R>0)return!0;var O=0;if($){var B=$.ee.getListeners(E);T&&(B=B.filter(function(j){return j.once})),O=B.length}return O>0},N.prototype.getTokenParams=function(E){var T=E.match(/^(wss?)\:\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(T){var $={protocol:T[1],host:T[2],hostname:T[3],port:T[4],pathname:T[5],search:T[6],hash:T[7]},P=E.split("?"),R=decodeURI(P[1]).split("&").map(function(O){return O.split("=")}).reduce(function(O,B){var j=B[0],G=B[1];return O[j]=G,O},{});return{sessionId:R.sessionId,secret:R.secret,recorder:R.recorder,stt:R.stt,webrtcStatsInterval:R.webrtcStatsInterval,sendBrowserLogs:R.sendBrowserLogs,edition:R.edition,wsUri:$.protocol+"://"+$.host+"/openvidu",httpUri:"https://"+$.host}}else throw new Error('Token not valid: "'.concat(E,'"'))},N.prototype.connectAux=function(E){var T=this;return new Promise(function($,P){T.openvidu.startWs(function(R){if(R)return P(R);var O=T.initializeParams(E);T.openvidu.sendRequest("joinRoom",O,function(B,j){if(B)return P(B);T.processJoinRoomResponse(j,E),T.connection=new r.Connection(T,j);var G={connections:new Array,streams:new Array},J=j.value;return J.forEach(function(ee){var X=new r.Connection(T,ee);T.remoteConnections.set(X.connectionId,X),G.connections.push(X),X.stream&&(T.remoteStreamsCreated.set(X.stream.streamId,!0),G.streams.push(X.stream))}),T.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,T,"connectionCreated",T.connection,"")]),G.connections.forEach(function(ee){T.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,T,"connectionCreated",ee,"")])}),G.streams.forEach(function(ee){T.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,T,"streamCreated",ee,"")])}),j.recordingId&&j.recordingName&&T.ee.emitEvent("recordingStarted",[new l.RecordingEvent(T,"recordingStarted",j.recordingId,j.recordingName)]),$()})})})},N.prototype.stopPublisherStream=function(E){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[E]))},N.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},N.prototype.stringClientMetadata=function(E){return typeof E!="string"?JSON.stringify(E):E},N.prototype.getConnection=function(E,T){var $=this;return new Promise(function(P,R){var O=$.remoteConnections.get(E);return O?P(O):$.connection.connectionId===E?P($.connection):R(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,T))})},N.prototype.getRemoteConnection=function(E,T){var $=this;return new Promise(function(P,R){var O=$.remoteConnections.get(E);if(O)return P(O);var B="Remote connection "+E+" unknown when '"+T+"'. Existing remote connections: "+JSON.stringify($.remoteConnections.keys());return R(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,B))})},N.prototype.processToken=function(E){var T=this.getTokenParams(E);this.sessionId=T.sessionId,T.secret&&(this.openvidu.secret=T.secret),T.recorder&&(this.openvidu.recorder=!0),T.stt&&(this.openvidu.stt=!0),T.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=T.webrtcStatsInterval),T.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=T.sendBrowserLogs),this.openvidu.isAtLeastPro=T.edition==="pro"||T.edition==="enterprise",this.openvidu.isEnterprise=T.edition==="enterprise",this.openvidu.wsUri=T.wsUri,this.openvidu.httpUri=T.httpUri},N.prototype.processJoinRoomResponse=function(E,T){if(this.sessionId=E.session,E.customIceServers!=null&&E.customIceServers.length>0){this.openvidu.iceServers=[];for(var $=0,P=E.customIceServers;$<P.length;$++){var R=P[$],O={urls:[R.url]};y.log("STUN/TURN server IP: "+R.url),R.username!=null&&R.credential!=null&&(O.username=R.username,O.credential=R.credential,y.log("TURN credentials ["+R.username+":"+R.credential+"]")),this.openvidu.iceServers.push(O)}}this.openvidu.role=E.role,this.openvidu.finalUserId=E.finalUserId,this.openvidu.mediaServer=E.mediaServer,this.openvidu.videoSimulcast=E.videoSimulcast,this.capabilities={subscribe:!0,publish:this.openvidu.role!=="SUBSCRIBER",forceUnpublish:this.openvidu.role==="MODERATOR",forceDisconnect:this.openvidu.role==="MODERATOR"},y.info("openvidu-server version: "+E.version),E.life!=null&&(this.openvidu.life=E.life);var B=S(E.version)-S(this.openvidu.libraryVersion);h(E.version)!==h(this.openvidu.libraryVersion)||!(B==0||B==1)?y.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(E.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):B==1&&y.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(E.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(h(E.version),".").concat(S(E.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),k.OpenViduLogger.configureJSNLog(this.openvidu,T),this.token=T},N}(o.EventDispatcher);return xt.Session=A,xt}var Vu;function Xa(){if(Vu)return Tt;Vu=1;var e=Tt&&Tt.__extends||function(){var b=function(v,m){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,k){C.__proto__=k}||function(C,k){for(var w in k)Object.prototype.hasOwnProperty.call(k,w)&&(C[w]=k[w])},b(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");b(v,m);function C(){this.constructor=v}v.prototype=m===null?Object.create(m):(C.prototype=m.prototype,new C)}}(),t=Tt&&Tt.__awaiter||function(b,v,m,C){function k(w){return w instanceof m?w:new m(function(h){h(w)})}return new(m||(m=Promise))(function(w,h){function S(I){try{y(C.next(I))}catch(A){h(A)}}function x(I){try{y(C.throw(I))}catch(A){h(A)}}function y(I){I.done?w(I.value):k(I.value).then(S,x)}y((C=C.apply(b,v||[])).next())})},n=Tt&&Tt.__generator||function(b,v){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},C,k,w,h;return h={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function S(y){return function(I){return x([y,I])}}function x(y){if(C)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(m=0)),m;)try{if(C=1,k&&(w=y[0]&2?k.return:y[0]?k.throw||((w=k.return)&&w.call(k),0):k.next)&&!(w=w.call(k,y[1])).done)return w;switch(k=0,w&&(y=[y[0]&2,w.value]),y[0]){case 0:case 1:w=y;break;case 4:return m.label++,{value:y[1],done:!1};case 5:m.label++,k=y[1],y=[0];continue;case 7:y=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(y[0]===6||y[0]===2)){m=0;continue}if(y[0]===3&&(!w||y[1]>w[0]&&y[1]<w[3])){m.label=y[1];break}if(y[0]===6&&m.label<w[1]){m.label=w[1],w=y;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(y);break}w[2]&&m.ops.pop(),m.trys.pop();continue}y=v.call(b,m)}catch(I){y=[6,I],k=0}finally{C=w=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.Publisher=void 0;var r=zs(),i=Ka(),s=qa(),o=Qa(),a=Sr(),c=wr(),l=ot(),u=yn(),f=za(),g=l.OpenViduLogger.getInstance(),p,_=function(b){e(v,b);function v(m,C,k){var w=b.call(this,new i.Stream(k.session?k.session:new r.Session(k),{publisherProperties:C,mediaConstraints:{}}),m)||this;return w.accessAllowed=!1,w.isSubscribedToRemote=!1,w.accessDenied=!1,p=u.PlatformUtils.getInstance(),w.properties=C,w.openvidu=k,w.stream.ee.on("local-stream-destroyed",function(h){w.stream.isLocalStreamPublished=!1;var S=new o.StreamEvent(!0,w,"streamDestroyed",w.stream,h);w.emitEvent("streamDestroyed",[S]),S.callDefaultBehavior()}),w}return v.prototype.publishAudio=function(m){var C=this;if(this.stream.audioActive!==m){var k=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();k.getAudioTracks().forEach(function(w){w.enabled=m}),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:m,reason:"publishAudio"},function(w,h){w?g.error("Error sending 'streamPropertyChanged' event",w):(C.session.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(C.session,C.stream,"audioActive",m,!m,"publishAudio")]),C.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(C,C.stream,"audioActive",m,!m,"publishAudio")]),C.session.sendVideoData(C.stream.streamManager))}),this.stream.audioActive=m,g.info("'Publisher' has "+(m?"published":"unpublished")+" its audio stream")}},v.prototype.publishVideo=function(m,C){var k=this;return new Promise(function(w,h){return t(k,void 0,void 0,function(){var S,x,y,I,A,M,N=this;return n(this,function(E){switch(E.label){case 0:return this.stream.videoActive===m?[3,9]:(S=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),x=!1,S.getVideoTracks().forEach(function(T){T.enabled=m,!m&&C===!0?T.stop():m&&T.readyState==="ended"&&(x=!0)}),!m&&C===!0&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:E.sent(),E.label=2;case 2:return x?(y=S.getVideoTracks()[0],S.removeTrack(y),I=function(T){return t(N,void 0,void 0,function(){var $=this;return n(this,function(P){switch(P.label){case 0:return S.addTrack(T),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(T)]:[3,2];case 1:P.sent(),P.label=2;case 2:return this.stream.lastVBFilter&&setTimeout(function(){return t($,void 0,void 0,function(){var R,O;return n(this,function(B){switch(B.label){case 0:return R=this.stream.lastVBFilter.options,O=this.stream.lastVBFilter.lastExecMethod,O&&O.method==="update"&&(R=Object.assign({},R,O.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,R)];case 1:return B.sent(),delete this.stream.lastVBFilter,[2]}})})},1),[2]}})})},C&&C instanceof MediaStreamTrack?[4,I(C)]:[3,4]):[3,8];case 3:return E.sent(),[3,8];case 4:return E.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return A=E.sent(),[4,I(A.getVideoTracks()[0])];case 6:return E.sent(),[3,8];case 7:return M=E.sent(),[2,h(M)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:m,reason:"publishVideo"},function(T,$){T?g.error("Error sending 'streamPropertyChanged' event",T):(N.session.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(N.session,N.stream,"videoActive",m,!m,"publishVideo")]),N.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(N,N.stream,"videoActive",m,!m,"publishVideo")]),N.session.sendVideoData(N.stream.streamManager))}),this.stream.videoActive=m,g.info("'Publisher' has "+(m?"published":"unpublished")+" its video stream"),[2,w()];case 9:return[2]}})})})},v.prototype.subscribeToRemote=function(m){m=m!==void 0?m:!0,this.isSubscribedToRemote=m,this.stream.subscribeToMyRemote(m)},v.prototype.on=function(m,C){var k=this;return b.prototype.on.call(this,m,C),m==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new o.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",function(){k.emitEvent("streamCreated",[new o.StreamEvent(!1,k,"streamCreated",k.stream,"")])})),m==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),m==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},v.prototype.once=function(m,C){var k=this;return b.prototype.once.call(this,m,C),m==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new o.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",function(){k.emitEvent("streamCreated",[new o.StreamEvent(!1,k,"streamCreated",k.stream,"")])})),m==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),m==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},v.prototype.off=function(m,C){return b.prototype.off.call(this,m,C),this},v.prototype.replaceTrack=function(m){return t(this,void 0,void 0,function(){return n(this,function(C){return[2,this.replaceTrackAux(m,!0)]})})},v.prototype.initialize=function(){var m=this;return new Promise(function(C,k){return t(m,void 0,void 0,function(){var w,h,S,x,y,I,A,M,N,E,T,$,$,P,R,O=this,B,j;return n(this,function(G){switch(G.label){case 0:w={},h={},S=2e3,y=function(J){return O.accessDenied=!0,O.accessAllowed=!1,g.error("Publisher initialization failed. ".concat(J.name,": ").concat(J.message)),k(J)},I=function(J){var ee,X;if(O.accessAllowed=!0,O.accessDenied=!1,typeof MediaStreamTrack<"u"&&O.properties.audioSource instanceof MediaStreamTrack&&(J.removeTrack(J.getAudioTracks()[0]),J.addTrack(O.properties.audioSource)),typeof MediaStreamTrack<"u"&&O.properties.videoSource instanceof MediaStreamTrack&&(J.removeTrack(J.getVideoTracks()[0]),J.addTrack(O.properties.videoSource)),J.getAudioTracks()[0]){var pe=O.stream.audioActive!==void 0&&O.stream.audioActive!==null?O.stream.audioActive:!!O.stream.outboundStreamOpts.publisherProperties.publishAudio;J.getAudioTracks()[0].enabled=pe}if(J.getVideoTracks()[0]){var pe=O.stream.videoActive!==void 0&&O.stream.videoActive!==null?O.stream.videoActive:!!O.stream.outboundStreamOpts.publisherProperties.publishVideo;J.getVideoTracks()[0].enabled=pe}for(var F=0,z=J.getAudioTracks();F<z.length;F++){var Z=z[F];!((ee=Z.contentHint)===null||ee===void 0)&&ee.length||(Z.contentHint="",g.info("Audio track Content Hint set: '".concat(Z.contentHint,"'")))}for(var ne=0,se=J.getVideoTracks();ne<se.length;ne++){var Z=se[ne];if(!(!((X=Z.contentHint)===null||X===void 0)&&X.length)){switch(O.stream.typeOfVideo){case f.TypeOfVideo.SCREEN:Z.contentHint="detail";break;case f.TypeOfVideo.CUSTOM:g.warn("CUSTOM type video track was provided without Content Hint!"),Z.contentHint="motion";break;case f.TypeOfVideo.CAMERA:case f.TypeOfVideo.IPCAM:default:Z.contentHint="motion";break}g.info("Video track Content Hint set: '".concat(Z.contentHint,"'"))}}return O.initializeVideoReference(J),O.stream.displayMyRemote()||O.stream.updateMediaStreamInVideos(),delete O.firstVideoElement,O.stream.isSendVideo()?O.getVideoDimensions().then(function(re){O.stream.videoDimensions={width:re.width,height:re.height},O.stream.isSendScreen()&&(O.stream.isSendAudio()&&J.getAudioTracks().length===0&&(O.stream.audioActive=!1,O.stream.hasAudio=!1,O.stream.outboundStreamOpts.publisherProperties.publishAudio=!1,O.stream.outboundStreamOpts.publisherProperties.audioSource=!1),O.screenShareResizeInterval=setInterval(function(){var V=J.getVideoTracks()[0].getSettings(),D=V.width,L=V.height,Q=D!=null&&D!==O.stream.videoDimensions.width,Y=L!=null&&L!==O.stream.videoDimensions.height;O.stream.isLocalStreamPublished&&(Q||Y)&&O.openvidu.sendVideoDimensionsChangedEvent(O,"screenResized",O.stream.videoDimensions.width,O.stream.videoDimensions.height,D||0,L||0)},650)),O.stream.isLocalStreamReadyToPublish=!0,O.stream.ee.emitEvent("stream-ready-to-publish",[])}):(O.stream.isLocalStreamReadyToPublish=!0,O.stream.ee.emitEvent("stream-ready-to-publish",[])),C()},A=function(J,ee){return t(O,void 0,void 0,function(){var X,pe;return n(this,function(F){switch(F.label){case 0:if(this.clearPermissionDialogTimer(x,S),!(this.stream.isSendScreen()&&this.properties.audioSource!=="screen"&&this.stream.isSendAudio()))return[3,5];h.audio=ee,h.video=!1,x=Date.now(),this.setPermissionDialogTimer(S),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(h)];case 2:return X=F.sent(),this.clearPermissionDialogTimer(x,S),J.addTrack(X.getAudioTracks()[0]),I(J),[3,4];case 3:return pe=F.sent(),this.clearPermissionDialogTimer(x,S),J.getAudioTracks().forEach(function(z){z.stop()}),J.getVideoTracks().forEach(function(z){z.stop()}),y(this.openvidu.generateAudioDeviceError(pe,w)),[2];case 4:return[3,6];case 5:I(J),F.label=6;case 6:return[2]}})})},M=function(J){return t(O,void 0,void 0,function(){var ee,X,pe,z,F,z,Z;return n(this,function(ne){switch(ne.label){case 0:switch(g.error("getMediaError: ".concat(J.toString())),this.clearPermissionDialogTimer(x,S),J.name==="Error"&&(J.name=J.constructor.name),pe=J.name.toLowerCase(),pe){case"notfounderror":return[3,1];case"notallowederror":return[3,5];case"overconstrainederror":return[3,6];case"aborterror":return[3,10];case"notreadableerror":return[3,10]}return[3,11];case 1:return ne.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:w.video})];case 2:return z=ne.sent(),z.getVideoTracks().forEach(function(se){se.stop()}),ee=c.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,X=J.toString(),y(new c.OpenViduError(ee,X)),[3,4];case 3:return F=ne.sent(),ee=c.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,X=F.toString(),y(new c.OpenViduError(ee,X)),[3,4];case 4:return[3,12];case 5:return ee=this.stream.isSendScreen()?c.OpenViduErrorName.SCREEN_CAPTURE_DENIED:c.OpenViduErrorName.DEVICE_ACCESS_DENIED,X=J.toString(),y(new c.OpenViduError(ee,X)),[3,12];case 6:return ne.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:w.video})];case 7:return z=ne.sent(),z.getVideoTracks().forEach(function(se){se.stop()}),J.constraint.toLowerCase()==="deviceid"?(ee=c.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,X="Audio input device with deviceId '"+w.audio.deviceId.exact+"' not found"):(ee=c.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,X="Audio input device doesn't support the value passed for constraint '"+J.constraint+"'"),y(new c.OpenViduError(ee,X)),[3,9];case 8:return Z=ne.sent(),Z.constraint.toLowerCase()==="deviceid"?(ee=c.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,X="Video input device with deviceId '"+w.video.deviceId.exact+"' not found"):(ee=c.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,X="Video input device doesn't support the value passed for constraint '"+Z.constraint+"'"),y(new c.OpenViduError(ee,X)),[3,9];case 9:return[3,12];case 10:return ee=c.OpenViduErrorName.DEVICE_ALREADY_IN_USE,X=J.toString(),y(new c.OpenViduError(ee,X)),[3,12];case 11:return ee=c.OpenViduErrorName.GENERIC_ERROR,X=J.toString(),y(new c.OpenViduError(ee,X)),[3,12];case 12:return[2]}})})},G.label=1;case 1:return G.trys.push([1,14,,15]),[4,this.openvidu.generateMediaConstraints(this.properties)];case 2:return N=G.sent(),N.videoTrack&&N.audioTrack||N.audioTrack&&((B=N.constraints)===null||B===void 0?void 0:B.video)===!1||N.videoTrack&&((j=N.constraints)===null||j===void 0?void 0:j.audio)===!1?(I(this.openvidu.addAlreadyProvidedTracks(N,new MediaStream,this.stream)),[3,13]):[3,3];case 3:w=N.constraints,E={mediaConstraints:w,publisherProperties:this.properties},this.stream.setOutboundStreamOptions(E),T=w.audio===void 0?!0:w.audio,h.audio=this.stream.isSendScreen()?!1:T,h.video=w.video,x=Date.now(),this.setPermissionDialogTimer(S),G.label=4;case 4:return G.trys.push([4,11,,13]),this.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&!p.isElectron()?[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.properties.audioSource==="screen"})]:[3,7];case 5:return $=G.sent(),this.openvidu.addAlreadyProvidedTracks(N,$),[4,A($,T)];case 6:return G.sent(),[3,10];case 7:return this.stream.lastVideoTrackConstraints=h.video,[4,navigator.mediaDevices.getUserMedia(h)];case 8:return $=G.sent(),this.openvidu.addAlreadyProvidedTracks(N,$,this.stream),[4,A($,T)];case 9:G.sent(),G.label=10;case 10:return[3,13];case 11:return P=G.sent(),[4,M(P)];case 12:return G.sent(),[3,13];case 13:return[3,15];case 14:return R=G.sent(),y(R),[3,15];case 15:return[2]}})})})},v.prototype.replaceTrackAux=function(m,C){return t(this,void 0,void 0,function(){var k,w;return n(this,function(h){switch(h.label){case 0:k=m.enabled,m.kind==="video"?m.enabled=this.stream.videoActive:m.kind==="audio"&&(m.enabled=this.stream.audioActive),h.label=1;case 1:return h.trys.push([1,5,,6]),this.stream.isLocalStreamPublished?(this.replaceTrackInMediaStream(m,C),[4,this.replaceTrackInRtcRtpSender(m)]):[3,3];case 2:return[2,h.sent()];case 3:return[2,this.replaceTrackInMediaStream(m,C)];case 4:return[3,6];case 5:throw w=h.sent(),m.enabled=k,w;case 6:return[2]}})})},v.prototype.getVideoDimensions=function(){var m=this;return new Promise(function(C,k){var w=(p.isIonicIos()||p.isIOSWithSafari())&&m.videoReference.readyState<1,h,S=function(){var x,y;if(typeof m.stream.getMediaStream().getVideoTracks()[0].getSettings=="function"){var I=m.stream.getMediaStream().getVideoTracks()[0].getSettings();x=I.width||m.videoReference.videoWidth,y=I.height||m.videoReference.videoHeight}else g.warn("MediaStreamTrack does not have getSettings method on "+p.getDescription()),x=m.videoReference.videoWidth,y=m.videoReference.videoHeight;return h!=null&&m.videoReference.removeEventListener("loadedmetadata",h),w&&document.body.removeChild(m.videoReference),C({width:x,height:y})};m.videoReference.readyState>=1?S():(h=function(){if(m.videoReference.videoWidth)S();else var x=setInterval(function(){m.videoReference.videoWidth&&(clearInterval(x),S())},40)},m.videoReference.addEventListener("loadedmetadata",h),w&&document.body.appendChild(m.videoReference))})},v.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},v.prototype.initializeVideoReference=function(m){this.videoReference=document.createElement("video"),this.videoReference.style.display="none",this.videoReference.muted=!0,this.videoReference.autoplay=!0,this.videoReference.controls=!1,(p.isSafariBrowser()||p.isIPhoneOrIPad()&&(p.isChromeMobileBrowser()||p.isEdgeMobileBrowser()||p.isOperaMobileBrowser()||p.isFirefoxMobileBrowser()))&&(this.videoReference.playsInline=!0),this.stream.setMediaStream(m),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=this.stream.getMediaStream()},v.prototype.replaceTrackInMediaStream=function(m,C){var k=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),w;m.kind==="video"?(w=k.getVideoTracks()[0],C&&(this.stream.lastVideoTrackConstraints=m.getConstraints())):w=k.getAudioTracks()[0],w.enabled=!1,w.stop(),k.removeTrack(w),k.addTrack(m);var h={oldLabel:(w==null?void 0:w.label)||"",newLabel:(m==null?void 0:m.label)||""};m.kind==="video"&&C?(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.openvidu.sendTrackChangedEvent(this,h.oldLabel,h.newLabel,"videoTrack"),this.stream.isLocalStreamPublished&&this.session.sendVideoData(this.stream.streamManager,5,!0,5)):m.kind==="audio"&&C&&this.openvidu.sendTrackChangedEvent(this,h.oldLabel,h.newLabel,"audioTrack"),m.kind==="audio"&&(this.stream.disableHarkSpeakingEvent(!1),this.stream.disableHarkStoppedSpeakingEvent(!1),this.stream.disableHarkVolumeChangeEvent(!1),this.stream.initHarkEvents())},v.prototype.setPermissionDialogTimer=function(m){var C=this;this.permissionDialogTimeout=setTimeout(function(){C.emitEvent("accessDialogOpened",[])},m)},v.prototype.clearPermissionDialogTimer=function(m,C){clearTimeout(this.permissionDialogTimeout),Date.now()-m>C&&this.emitEvent("accessDialogClosed",[])},v.prototype.replaceTrackInRtcRtpSender=function(m){return t(this,void 0,void 0,function(){var C,k;return n(this,function(w){switch(w.label){case 0:if(C=this.stream.getRTCPeerConnection().getSenders(),m.kind==="video"){if(k=C.find(function(h){return!!h.track&&h.track.kind==="video"}),!k)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else if(m.kind==="audio"){if(k=C.find(function(h){return!!h.track&&h.track.kind==="audio"}),!k)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else throw new Error("Unknown track kind "+m.kind);return[4,k.replaceTrack(m)];case 1:return w.sent(),[2]}})})},v}(s.StreamManager);return Tt.Publisher=_,Tt}var jo={},Bu;function i2(){if(Bu)return jo;Bu=1,globalThis.getScreenId=function(s,o,a){if(navigator.userAgent.indexOf("Edge")!==-1&&(navigator.msSaveOrOpenBlob||navigator.msSaveBlob)){o({video:!0});return}if(navigator.mozGetUserMedia){o(null,"firefox",{video:{mozMediaSource:s,mediaSource:s}});return}globalThis.addEventListener("message",c);function c(l){l.data&&(l.data.chromeMediaSourceId&&(l.data.chromeMediaSourceId==="PermissionDeniedError"?o("permission-denied"):o(null,l.data.chromeMediaSourceId,e(null,l.data.chromeMediaSourceId,l.data.canRequestAudioTrack)),globalThis.removeEventListener("message",c)),l.data.chromeExtensionStatus&&(o(l.data.chromeExtensionStatus,null,e(l.data.chromeExtensionStatus)),globalThis.removeEventListener("message",c)))}setTimeout(a?function(){t(a)}:t,100)};function e(s,o,a){var c={audio:!1,video:{mandatory:{chromeMediaSource:s?"screen":"desktop",maxWidth:globalThis.screen.width>1920?globalThis.screen.width:1920,maxHeight:globalThis.screen.height>1080?globalThis.screen.height:1080},optional:[]}};return a&&(c.audio={mandatory:{chromeMediaSource:s?"screen":"desktop"},optional:[]}),o&&(c.video.mandatory.chromeMediaSourceId=o,c.audio&&c.audio.mandatory&&(c.audio.mandatory.chromeMediaSourceId=o)),c}function t(s){if(!n){r(function(){t(s)});return}if(!n.isLoaded){setTimeout(function(){t(s)},100);return}s?s.forEach?n.contentWindow.postMessage({captureCustomSourceId:s},"*"):n.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):n.contentWindow.postMessage({captureSourceId:!0},"*")}var n;globalThis.getScreenConstraints=function(s){r(function(){getScreenId(function(o,a,c){c||(c={video:!0}),s(o,c.video)})})};function r(s){if(n){s();return}n=document.createElement("iframe"),n.onload=function(){n.isLoaded=!0,s()},n.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",n.style.display="none",(document.body||document.documentElement).appendChild(n)}globalThis.getChromeExtensionStatus=function(s){if(navigator.mozGetUserMedia){s("installed-enabled");return}globalThis.addEventListener("message",o);function o(a){a.data&&a.data.chromeExtensionStatus&&(s(a.data.chromeExtensionStatus),globalThis.removeEventListener("message",o))}setTimeout(i,100)};function i(){if(!n){r(i);return}if(!n.isLoaded){setTimeout(i,100);return}n.contentWindow.postMessage({getChromeExtensionStatus:!0},"*")}return jo.getScreenId=globalThis.getScreenId,jo}var jn={},ju;function s2(){if(ju)return jn;ju=1;var e="screen",t,n;if(typeof window<"u"&&typeof navigator<"u"&&typeof navigator.userAgent<"u"){var r=typeof window.InstallTrigger<"u";window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.addEventListener("message",function(f){f.origin==window.location.origin&&i(f.data)})}function i(f){if(f=="PermissionDeniedError"){if(n)return n("PermissionDeniedError");throw new Error("PermissionDeniedError")}f=="rtcmulticonnection-extension-loaded"&&(e="desktop"),f.sourceId&&n&&n(t=f.sourceId,f.canRequestAudioTrack===!0)}function s(f){if(f){if(e=="desktop")return f(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e=="screen"?f(!1):f(!0)},2e3)}}function o(f){if(!f)throw'"callback" parameter is mandatory.';if(t)return f(t);n=f,window.postMessage("get-sourceId","*")}function a(f){if(!f)throw'"callback" parameter is mandatory.';if(t)return f(t);n=f,window.postMessage("audio-plus-tab","*")}function c(f,g){if(r)return g("not-chrome");arguments.length!=2&&(g=f,f="lfcgfepafnobdloecchnfaclibenjold");var p=document.createElement("img");p.src="chrome-extension://"+f+"/icon.png",p.onload=function(){e="screen",window.postMessage("are-you-there","*"),setTimeout(function(){e=="screen"?g("installed-disabled"):g("installed-enabled")},2e3)},p.onerror=function(){g("not-installed")}}function l(f){u(f,!0)}function u(f,g){t="";var p={mozMediaSource:"window",mediaSource:"window"};if(r)return f(null,p);var _={mandatory:{chromeMediaSource:e,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};if(e=="desktop"&&!t){g?a(function(b,v){_.mandatory.chromeMediaSourceId=b,v&&(_.canRequestAudioTrack=!0),f(b=="PermissionDeniedError"?b:null,_)}):o(function(b){_.mandatory.chromeMediaSourceId=b,f(b=="PermissionDeniedError"?b:null,_)});return}e=="desktop"&&(_.mandatory.chromeMediaSourceId=t),f(null,_)}return jn.getScreenConstraints=u,jn.getScreenConstraintsWithAudio=l,jn.isChromeExtensionAvailable=s,jn.getChromeExtensionStatus=c,jn.getSourceId=o,jn}var qi={exports:{}},Fu;function o2(){if(Fu)return qi.exports;Fu=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(h,S,x){return Function.prototype.apply.call(h,S,x)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:n=function(h){return Object.getOwnPropertyNames(h)};function r(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(h){return h!==h};function s(){s.init.call(this)}qi.exports=s,qi.exports.once=m,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");o=w}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||i(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function c(w){return w._maxListeners===void 0?s.defaultMaxListeners:w._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(h){for(var S=[],x=1;x<arguments.length;x++)S.push(arguments[x]);var y=h==="error",I=this._events;if(I!==void 0)y=y&&I.error===void 0;else if(!y)return!1;if(y){var A;if(S.length>0&&(A=S[0]),A instanceof Error)throw A;var M=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw M.context=A,M}var N=I[h];if(N===void 0)return!1;if(typeof N=="function")t(N,this,S);else for(var E=N.length,T=_(N,E),x=0;x<E;++x)t(T[x],this,S);return!0};function l(w,h,S,x){var y,I,A;if(a(S),I=w._events,I===void 0?(I=w._events=Object.create(null),w._eventsCount=0):(I.newListener!==void 0&&(w.emit("newListener",h,S.listener?S.listener:S),I=w._events),A=I[h]),A===void 0)A=I[h]=S,++w._eventsCount;else if(typeof A=="function"?A=I[h]=x?[S,A]:[A,S]:x?A.unshift(S):A.push(S),y=c(w),y>0&&A.length>y&&!A.warned){A.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=w,M.type=h,M.count=A.length,r(M)}return w}s.prototype.addListener=function(h,S){return l(this,h,S,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(h,S){return l(this,h,S,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(w,h,S){var x={fired:!1,wrapFn:void 0,target:w,type:h,listener:S},y=u.bind(x);return y.listener=S,x.wrapFn=y,y}s.prototype.once=function(h,S){return a(S),this.on(h,f(this,h,S)),this},s.prototype.prependOnceListener=function(h,S){return a(S),this.prependListener(h,f(this,h,S)),this},s.prototype.removeListener=function(h,S){var x,y,I,A,M;if(a(S),y=this._events,y===void 0)return this;if(x=y[h],x===void 0)return this;if(x===S||x.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete y[h],y.removeListener&&this.emit("removeListener",h,x.listener||S));else if(typeof x!="function"){for(I=-1,A=x.length-1;A>=0;A--)if(x[A]===S||x[A].listener===S){M=x[A].listener,I=A;break}if(I<0)return this;I===0?x.shift():b(x,I),x.length===1&&(y[h]=x[0]),y.removeListener!==void 0&&this.emit("removeListener",h,M||S)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(h){var S,x,y;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[h]),this;if(arguments.length===0){var I=Object.keys(x),A;for(y=0;y<I.length;++y)A=I[y],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=x[h],typeof S=="function")this.removeListener(h,S);else if(S!==void 0)for(y=S.length-1;y>=0;y--)this.removeListener(h,S[y]);return this};function g(w,h,S){var x=w._events;if(x===void 0)return[];var y=x[h];return y===void 0?[]:typeof y=="function"?S?[y.listener||y]:[y]:S?v(y):_(y,y.length)}s.prototype.listeners=function(h){return g(this,h,!0)},s.prototype.rawListeners=function(h){return g(this,h,!1)},s.listenerCount=function(w,h){return typeof w.listenerCount=="function"?w.listenerCount(h):p.call(w,h)},s.prototype.listenerCount=p;function p(w){var h=this._events;if(h!==void 0){var S=h[w];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function _(w,h){for(var S=new Array(h),x=0;x<h;++x)S[x]=w[x];return S}function b(w,h){for(;h+1<w.length;h++)w[h]=w[h+1];w.pop()}function v(w){for(var h=new Array(w.length),S=0;S<h.length;++S)h[S]=w[S].listener||w[S];return h}function m(w,h){return new Promise(function(S,x){function y(A){w.removeListener(h,I),x(A)}function I(){typeof w.removeListener=="function"&&w.removeListener("error",y),S([].slice.call(arguments))}k(w,h,I,{once:!0}),h!=="error"&&C(w,y,{once:!0})})}function C(w,h,S){typeof w.on=="function"&&k(w,"error",h,S)}function k(w,h,S,x){if(typeof w.on=="function")x.once?w.once(h,S):w.on(h,S);else if(typeof w.addEventListener=="function")w.addEventListener(h,function y(I){x.once&&w.removeEventListener(h,y),S(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return qi.exports}var Gi={exports:{}},Uu;function a2(){return Uu||(Uu=1,typeof Object.create=="function"?Gi.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Gi.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Gi.exports}var zi={},Ki={},Hu;function c2(){if(Hu)return Ki;Hu=1;function e(n,r){var i={jsonrpc:"2.0"};if(n.method)i.method=n.method,n.params&&(i.params=n.params),r!=null&&(i.id=r);else if(r!=null){if(n.error){if(n.result!==void 0)throw new TypeError("Both result and error are defined");i.error=n.error}else if(n.result!==void 0)i.result=n.result;else throw new TypeError("No result or error is defined");i.id=r}return JSON.stringify(i)}function t(n){var r=n;(typeof n=="string"||n instanceof String)&&(r=JSON.parse(n));var i=r.jsonrpc;if(i!=="2.0")throw new TypeError("Invalid JsonRPC version '"+i+"': "+n);if(r.method==null){if(r.id==null)throw new TypeError("Invalid message: "+n);var s=r.result!==void 0,o=r.error!==void 0;if(s&&o)throw new TypeError("Both result and error are defined: "+n);if(!s&&!o)throw new TypeError("No result or error is defined: "+n);r.ack=r.id,delete r.id}return r}return Ki.pack=e,Ki.unpack=t,Ki}var Ji={},Wu;function l2(){if(Wu)return Ji;Wu=1;function e(n){throw new TypeError("Not yet implemented")}function t(n){throw new TypeError("Not yet implemented")}return Ji.pack=e,Ji.unpack=t,Ji}var qu;function u2(){if(qu)return zi;qu=1;var e=c2(),t=l2();return zi.JsonRPC=e,zi.XmlRPC=t,zi}var Fo,Gu;function d2(){if(Gu)return Fo;Gu=1;function e(){var t={};this.forEach=function(n){for(var r in t){var i=t[r];for(var s in i)n(i[s])}},this.get=function(n,r){var i=t[r];if(i!=null)return i[n]},this.remove=function(n,r){var i=t[r];if(i!=null){delete i[n];for(var s in i)return!1;delete t[r]}},this.set=function(n,r,i){if(n==null)return this.remove(r,i);var s=t[i];s==null&&(t[i]=s={}),s[r]=n}}return e.prototype.pop=function(t,n){var r=this.get(t,n);if(r!=null)return this.remove(t,n),r},Fo=e,Fo}var Uo={},Ho,zu;function jp(){if(zu)return Ho;zu=1;var e=ot().OpenViduLogger,t=e.getInstance(),n=2e3,r=3e3,i=3;function s(o){var a=!1,c,l=o.uri,u=!1,f=new WebSocket(l);f.onopen=function(){t.debug("WebSocket connected to "+l),o.onconnected&&o.onconnected()},f.onerror=function(v){t.error("Could not connect to "+l+" (invoking onerror if defined)",v),o.onerror&&o.onerror(v)};var g=function(){f.readyState===i?a?t.debug("Connection closed by user"):o.ismasternodecrashed()?t.error("Master Node has crashed. Stopping reconnection process"):(t.debug("Connection closed unexpectedly. Reconnecting..."),p(n,1)):t.debug("Close callback from previous websocket. Ignoring it")};f.onclose=g;function p(v,m){if(t.debug("reconnect (attempt #"+m+", max="+v+")"),m===1){if(u){t.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");return}else u=!0;o.onreconnecting&&o.onreconnecting()}b(v,m)}function _(v){var m=new URLSearchParams(new URL(v).search);return m.has("reconnect")||(v=Array.from(m).length>0?v+"&reconnect=true":v+"?reconnect=true"),v}function b(v,m){t.debug("Reconnection attempt #"+m),f.close(4104,"Connection closed for reconnection"),l=_(l),f=new WebSocket(l),f.onopen=function(){t.debug("Reconnected to "+l+" after "+m+" attempts..."),u=!1,c(),o.onreconnected&&o.onreconnected(),f.onclose=g},f.onerror=function(C){t.warn("Reconnection error: ",C),m===v?o.ondisconnect&&o.ondisconnect():setTimeout(function(){p(v,m+1)},r)}}this.close=function(v,m){a=!0,f.close(v,m)},this.reconnectWs=function(){t.debug("reconnectWs"),p(n,1)},this.send=function(v){f.send(v)},this.addEventListener=function(v,m){c=function(){f.addEventListener(v,m)},c()},this.getReadyState=function(){return f.readyState}}return Ho=s,Ho}var Wo,Ku;function f2(){if(Ku)return Wo;Ku=1;var e=Fp(),t=jp(),n=ot().OpenViduLogger;Date.now=Date.now||function(){return+new Date};var r=5e3,i="RECONNECTING",s="CONNECTED",o="DISCONNECTED",a=n.getInstance();function c(l){var u=this,f=l.ws,g=-1,p=0,_=!0,b=!1,v,m=o,C=f.onreconnecting,k=f.onreconnected,w=f.onconnected,h=f.onerror;l.rpc.pull=function(E,T){T.reply(null,"push")},f.onreconnecting=function(){if(a.debug("--------- ONRECONNECTING -----------"),m===i){a.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it");return}N(),m=i,C&&C()},f.onreconnected=function(){if(a.debug("--------- ONRECONNECTED -----------"),m===s){a.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it");return}m=s,I(),k&&k()},f.onconnected=function(){if(a.debug("--------- ONCONNECTED -----------"),m===s){a.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it");return}m=s,_=!0,M(),w&&w()},f.onerror=function(E){a.debug("--------- ONERROR -----------"),m=o,N(),h&&h(E)};var S=new t(f);a.debug("Connecting websocket to URI: "+f.uri);var x={request_timeout:l.rpc.requestTimeout,ping_request_timeout:l.rpc.heartbeatRequestTimeout},y=new e(e.packers.JsonRPC,x,S,function(E){a.debug("Received request: "+JSON.stringify(E));try{var T=l.rpc[E.method];T===void 0?a.error("Method "+E.method+" not registered in client"):T(E.params,E)}catch($){a.error("Exception processing request: "+JSON.stringify(E)),a.error($)}});this.send=function(E,T,$){var P=Date.now();y.encode(E,T,function(R,O){if(R){try{a.error("ERROR:"+R.message+" in Request: method:"+E+" params:"+JSON.stringify(T)+" request:"+R.request),R.data&&a.error("ERROR DATA:"+JSON.stringify(R.data))}catch{}R.requestTime=P}$&&(O!=null&&O.value!=="pong"&&a.debug("Response: "+JSON.stringify(O)),$(R,O))})};function I(){a.debug("notReconnectIfNumLessThan = "+p+" (old="+g+")"),g=p}function A(){if(_){var E=null;(p==0||p==g)&&(E={interval:l.heartbeat||r}),p++,u.send("ping",E,function(T){return function($,P){$&&(a.debug("Error in ping request #"+T+" ("+$.message+")"),T>g&&(_=!1,I(),a.debug("Server did not respond to ping message #"+T+". Reconnecting... "),S.reconnectWs()))}}(p))}else a.debug("Trying to send ping, but ping is not enabled")}function M(){b||(a.debug("Starting ping (if configured)"),b=!0,l.heartbeat!=null&&(v=setInterval(A,l.heartbeat),A()))}function N(){clearInterval(v),b=!1,_=!1,p=-1,y.cancel()}this.close=function(E,T){a.debug("Closing  with code: "+E+" because: "+T),v!=null&&(a.debug("Clearing ping interval"),clearInterval(v)),b=!1,_=!1,S.close(E,T)},this.reconnect=function(){S.reconnectWs()},this.resetPing=function(){_=!0,p=0,M()},this.getReadyState=function(){return S.getReadyState()}}return Wo=c,Wo}var Ju;function p2(){if(Ju)return Uo;Ju=1;var e=f2();return Uo.JsonRpcClient=e,Uo}var qo={},Qu;function h2(){if(Qu)return qo;Qu=1;var e=jp();return qo.WebSocketWithReconnection=e,qo}var Go,Xu;function Fp(){if(Xu)return Go;Xu=1;var e=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch{e=!0}Function.prototype.bind||(Function.prototype.bind=function(g){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var p=Array.prototype.slice.call(arguments,1),_=this,b=function(){},v=function(){return _.apply(this instanceof b&&g?this:g,p.concat(Array.prototype.slice.call(arguments)))};return b.prototype=this.prototype,v.prototype=new b,v});var t=o2().EventEmitter,n=a2(),r=u2(),i=d2(),s=5e3;function o(g){if(!g)return{};for(var p in g){var _=g[p];typeof _=="string"&&(g[p]={response:_})}return g}function a(g){if(g){if(g instanceof Function)return{send:g};if(g.send instanceof Function)return g;if(g.postMessage instanceof Function)return g.send=g.postMessage,g;if(g.write instanceof Function)return g.send=g.write,g;if(g.onmessage===void 0&&!(g.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function c(g,p){e?(this.method=g,this.params=p):(Object.defineProperty(this,"method",{value:g,enumerable:!0}),Object.defineProperty(this,"params",{value:p,enumerable:!0}))}function l(g,p,_,b){var v=this;if(!g)throw new SyntaxError("Packer is not defined");if(!g.pack||!g.unpack)throw new SyntaxError("Packer is invalid");var m=o(g.responseMethods);if(p instanceof Function){if(_!=null)throw new SyntaxError("There can't be parameters after onRequest");b=p,_=void 0,p=void 0}if(p&&p.send instanceof Function){if(_&&!(_ instanceof Function))throw new SyntaxError("Only a function can be after transport");b=_,_=p,p=void 0}if(_ instanceof Function){if(b!=null)throw new SyntaxError("There can't be parameters after onRequest");b=_,_=void 0}if(_&&_.send instanceof Function&&b&&!(b instanceof Function))throw new SyntaxError("Only a function can be after transport");p=p||{},t.call(this),b&&this.on("request",b),e?this.peerID=p.peerID:Object.defineProperty(this,"peerID",{value:p.peerID});var C=p.max_retries||0;function k(R){v.decode(R.data||R)}this.getTransport=function(){return _},this.setTransport=function(R){_&&(_.removeEventListener?_.removeEventListener("message",k):_.removeListener&&_.removeListener("data",k)),R&&(R.addEventListener?R.addEventListener("message",k):R.addListener&&R.addListener("data",k)),_=a(R)},e||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(_);var w=p.request_timeout||s,h=p.ping_request_timeout||w,S=p.response_timeout||s,x=p.duplicates_timeout||s,y=0,I=new i,A=new i,M=new i,N={};function E(R,O,B){var j={message:R,timeout:setTimeout(function(){A.remove(O,B)},S)};A.set(j,O,B)}function T(R,O){var B=setTimeout(function(){M.remove(R,O)},x);M.set(B,R,O)}function $(R,O,B,j,G){c.call(this,R,O),this.getTransport=function(){return G},this.setTransport=function(X){G=a(X)},e||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var J=A.get(B,j);G||v.getTransport()||(e?this.duplicated=!!J:Object.defineProperty(this,"duplicated",{value:!!J}));var ee=m[R];this.pack=g.pack.bind(g,this,B),this.reply=function(X,pe,F){if(X instanceof Function||X&&X.send instanceof Function){if(pe!=null)throw new SyntaxError("There can't be parameters after callback");F=X,pe=null,X=void 0}else if(pe instanceof Function||pe&&pe.send instanceof Function){if(F!=null)throw new SyntaxError("There can't be parameters after callback");F=pe,pe=null}F=a(F),J&&clearTimeout(J.timeout),j!=null&&(X&&(X.dest=j),pe&&(pe.dest=j));var z;if(X||pe!=null){if(v.peerID!=null&&(X?X.from=v.peerID:pe.from=v.peerID),ee)if(ee.error==null&&X)z={error:X};else{var Z=X?ee.error:ee.response;z={method:Z,params:X||pe}}else z={error:X,result:pe};z=g.pack(z,B)}else J?z=J.message:z=g.pack({result:null},B);return E(z,B,j),F=F||this.getTransport()||v.getTransport(),F?F.send(z):z}}n($,c);function P(R){var O=N[R];if(O){delete N[R];var B=I.pop(O.id,O.dest);B&&(clearTimeout(B.timeout),T(O.id,O.dest))}}this.cancel=function(R){if(R)return P(R);for(var R in N)P(R)},this.close=function(){var R=this.getTransport();R&&R.close&&R.close(4003,"Cancel request"),this.cancel(),M.forEach(clearTimeout),A.forEach(function(O){clearTimeout(O.timeout)})},this.encode=function(R,O,B,j,G){if(O instanceof Function){if(B!=null)throw new SyntaxError("There can't be parameters after callback");G=O,j=void 0,B=void 0,O=void 0}else if(B instanceof Function){if(j!=null)throw new SyntaxError("There can't be parameters after callback");G=B,j=void 0,B=void 0}else if(j instanceof Function){if(G!=null)throw new SyntaxError("There can't be parameters after callback");G=j,j=void 0}v.peerID!=null&&(O=O||{},O.from=v.peerID),B!=null&&(O=O||{},O.dest=B);var J={method:R,params:O};if(G){let z=function(re,V){v.cancel(J),G(re,V)},Z=function(re){var V=R==="ping"?h:w;return pe.timeout=setTimeout(se,V*Math.pow(2,X++)),N[J]={id:ee,dest:B},I.set(pe,ee,B),re=re||F||v.getTransport(),re?re.send(J):J},ne=function(re){re=a(re),console.warn(X+" retry for request message:",J);var V=M.pop(ee,B);return clearTimeout(V),Z(re)},se=function(){if(X<C)return ne(j);var re=new Error("Request has timed out");re.request=J,re.retry=ne,z(re)};var ee=y++,X=0;J=g.pack(J,ee);var pe={message:J,callback:z,responseMethods:m[R]||{}},F=a(j);return Z(j)}return J=g.pack(J),j=j||this.getTransport(),j?j.send(J):J},this.decode=function(R,O){if(!R)throw new TypeError("Message is not defined");try{R=g.unpack(R)}catch(L){return console.debug(L,R)}var B=R.id,j=R.ack,G=R.method,J=R.params||{},ee=J.from,X=J.dest;if(v.peerID!=null&&ee==v.peerID)return;if(B==null&&j==null){var pe=new c(G,J);return v.emit("request",pe)?void 0:pe}function F(){if(O=a(O)||v.getTransport(),O){var L=A.get(B,ee);if(L)return O.send(L.message)}var Q=B??j,Y=new $(G,J,Q,ee,O);if(!v.emit("request",Y))return Y}function z(L,Q,Y){L.callback(Q,Y)}function Z(L){console.warn("Response already processed",R),clearTimeout(L),T(j,ee)}if(G){if(X==null||X==v.peerID){var D=I.get(j,ee);if(D){var ne=D.responseMethods;return G==ne.error?z(D,J):G==ne.response?z(D,null,J):F()}var se=M.get(j,ee);if(se)return Z(se)}return F()}var re=R.error,V=R.result;if(!(re&&re.dest&&re.dest!=v.peerID)&&!(V&&V.dest&&V.dest!=v.peerID)){var D=I.get(j,ee);if(!D){var se=M.get(j,ee);return se?Z(se):console.warn("No callback was defined for this message",R)}z(D,re,V)}}}n(l,t),l.RpcNotification=c,Go=l;var u=p2(),f=h2();return l.clients=u,l.clients.transports=f,l.packers=r,Go}const v2="2.31.0",m2={version:v2};var Yu;function g2(){if(Yu)return zt;Yu=1;var e=zt&&zt.__awaiter||function(w,h,S,x){function y(I){return I instanceof S?I:new S(function(A){A(I)})}return new(S||(S=Promise))(function(I,A){function M(T){try{E(x.next(T))}catch($){A($)}}function N(T){try{E(x.throw(T))}catch($){A($)}}function E(T){T.done?I(T.value):y(T.value).then(M,N)}E((x=x.apply(w,h||[])).next())})},t=zt&&zt.__generator||function(w,h){var S={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},x,y,I,A;return A={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function M(E){return function(T){return N([E,T])}}function N(E){if(x)throw new TypeError("Generator is already executing.");for(;A&&(A=0,E[0]&&(S=0)),S;)try{if(x=1,y&&(I=E[0]&2?y.return:E[0]?y.throw||((I=y.return)&&I.call(y),0):y.next)&&!(I=I.call(y,E[1])).done)return I;switch(y=0,I&&(E=[E[0]&2,I.value]),E[0]){case 0:case 1:I=E;break;case 4:return S.label++,{value:E[1],done:!1};case 5:S.label++,y=E[1],E=[0];continue;case 7:E=S.ops.pop(),S.trys.pop();continue;default:if(I=S.trys,!(I=I.length>0&&I[I.length-1])&&(E[0]===6||E[0]===2)){S=0;continue}if(E[0]===3&&(!I||E[1]>I[0]&&E[1]<I[3])){S.label=E[1];break}if(E[0]===6&&S.label<I[1]){S.label=I[1],I=E;break}if(I&&S.label<I[2]){S.label=I[2],S.ops.push(E);break}I[2]&&S.ops.pop(),S.trys.pop();continue}E=h.call(w,S)}catch(T){E=[6,T],y=0}finally{x=I=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.OpenVidu=void 0;var n=Sp(),r=Xa(),i=zs(),s=Ja(),o=Sr(),a=wr(),c=Ws(),l=ot(),u=yn(),f=i2(),g=s2(),p=_p(),_=Ua(),b=Fp(),v=m2,m=l.OpenViduLogger.getInstance(),C,k=function(){function w(){var h=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.stt=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=p.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new _,C=u.PlatformUtils.getInstance(),this.libraryVersion=v.version,m.info("OpenVidu initialized"),m.info("Platform detected: "+C.getDescription()),m.info("openvidu-browser version: "+this.libraryVersion),(C.isMobileDevice()||C.isReactNative())&&this.onOrientationChanged(function(){h.publishers.forEach(function(S){S.stream.isLocalStreamPublished&&S.stream&&S.stream.hasVideo&&h.sendNewVideoDimensionsIfRequired(S,"deviceRotated",75,10)})})}return w.prototype.initSession=function(){return this.session=new i.Session(this),this.session},w.prototype.initPublisher=function(h,S,x){var y;S&&typeof S!="function"?(y=S,y={audioSource:typeof y.audioSource<"u"?y.audioSource:void 0,frameRate:typeof MediaStreamTrack<"u"&&y.videoSource instanceof MediaStreamTrack?void 0:typeof y.frameRate<"u"?y.frameRate:void 0,insertMode:typeof y.insertMode<"u"?typeof y.insertMode=="string"?c.VideoInsertMode[y.insertMode]:y.insertMode:c.VideoInsertMode.APPEND,mirror:typeof y.mirror<"u"?y.mirror:!0,publishAudio:typeof y.publishAudio<"u"?y.publishAudio:!0,publishVideo:typeof y.publishVideo<"u"?y.publishVideo:!0,resolution:typeof MediaStreamTrack<"u"&&y.videoSource instanceof MediaStreamTrack?void 0:typeof y.resolution<"u"?y.resolution:"640x480",videoSource:typeof y.videoSource<"u"?y.videoSource:void 0,videoSimulcast:y.videoSimulcast,filter:y.filter}):y={insertMode:c.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var I=new r.Publisher(h,y,this),A;return S&&typeof S=="function"?A=S:x&&(A=x),I.initialize().then(function(){A!==void 0&&A(void 0),I.emitEvent("accessAllowed",[])}).catch(function(M){A!==void 0&&A(M),I.emitEvent("accessDenied",[M])}),this.publishers.push(I),I},w.prototype.initPublisherAsync=function(h,S){var x=this;return new Promise(function(y,I){var A,M=function(N){return N?I(N):y(A)};S?A=x.initPublisher(h,S,M):A=x.initPublisher(h,M)})},w.prototype.initLocalRecorder=function(h){return new n.LocalRecorder(h)},w.prototype.checkSystemRequirements=function(){return C.isIPhoneOrIPad()?C.isIOSWithSafari()||C.isChromeMobileBrowser()||C.isFirefoxMobileBrowser()||C.isOperaMobileBrowser()||C.isEdgeMobileBrowser()||C.isIonicIos():C.isChromeBrowser()||C.isChromeMobileBrowser()||C.isFirefoxBrowser()||C.isFirefoxMobileBrowser()||C.isOperaBrowser()||C.isOperaMobileBrowser()||C.isEdgeBrowser()||C.isEdgeMobileBrowser()||C.isSamsungBrowser()||C.isSafariBrowser()||C.isAndroidBrowser()||C.isElectron()||C.isNodeJs()||C.isMotorolaEdgeDevice()},w.prototype.checkScreenSharingCapabilities=function(){return C.canScreenShare()},w.prototype.getDevices=function(){return new Promise(function(h,S){navigator.mediaDevices.enumerateDevices().then(function(x){var y,I=[];if(C.isIonicAndroid()&&typeof cordova<"u"&&(!((y=cordova==null?void 0:cordova.plugins)===null||y===void 0)&&y.EnumerateDevicesPlugin))cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then(function(A){var M=[],N=[],E=[];return M=A.filter(function(T){return T.kind==="audioinput"}),N=x.filter(function(T){return T.kind==="videoinput"}),E=x.filter(function(T){return T.kind==="audioinput"}),N.forEach(function(T,$){if(T.label)I.push({kind:T.kind,deviceId:T.deviceId,label:T.label});else{var P="";$===0?P="Front Camera":$===1?P="Back Camera":P="Unknown Camera",I.push({kind:T.kind,deviceId:T.deviceId,label:P})}}),E.forEach(function(T,$){if(T.label)I.push({kind:T.kind,deviceId:T.deviceId,label:T.label});else{var P="";switch($){case 0:P="Default";break;case 1:var R=M.filter(function(j){return j.label.includes("Built")})[0];P=R?R.label:"Built-in Microphone";break;case 2:var O=M.filter(function(j){return j.label.includes("Wired")})[0];O?P=O.label:P="Headset earpiece";break;case 3:var B=M.filter(function(j){return j.label.includes("Bluetooth")})[0];P=B?B.label:"Wireless";break;default:P="Unknown Microphone";break}I.push({kind:T.kind,deviceId:T.deviceId,label:P})}}),h(I)});else return x.forEach(function(A){(A.kind==="audioinput"||A.kind==="videoinput")&&I.push({kind:A.kind,deviceId:A.deviceId,label:A.label})}),h(I)}).catch(function(x){return m.error("Error getting devices",x),S(x)})})},w.prototype.getUserMedia=function(h){var S,x;return e(this,void 0,void 0,function(){var y,I,A,E,M,$,P,N,E,T,$,P,R,O=this;return t(this,function(B){switch(B.label){case 0:y=function(j,G){return e(O,void 0,void 0,function(){var J,ee,X,pe;return t(this,function(F){switch(F.label){case 0:J=G.audio===void 0?!0:G.audio,ee={audio:J,video:!1},F.label=1;case 1:return F.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(ee)];case 2:return X=F.sent(),j.addTrack(X.getAudioTracks()[0]),[2,j];case 3:throw pe=F.sent(),j.getAudioTracks().forEach(function(z){z.stop()}),j.getVideoTracks().forEach(function(z){z.stop()}),this.generateAudioDeviceError(pe,ee);case 4:return[2]}})})},B.label=1;case 1:return B.trys.push([1,20,,21]),[4,this.generateMediaConstraints(h)];case 2:return I=B.sent(),I.videoTrack&&I.audioTrack||I.audioTrack&&((S=I.constraints)===null||S===void 0?void 0:S.video)===!1||I.videoTrack&&((x=I.constraints)===null||x===void 0?void 0:x.audio)===!1?[2,this.addAlreadyProvidedTracks(I,new MediaStream)]:[3,3];case 3:if(I.videoTrack&&delete I.constraints.video,I.audioTrack&&delete I.constraints.audio,A=!1,typeof h.videoSource!="string")return[3,12];if(!(h.videoSource==="screen"||h.videoSource==="window"||C.isElectron()&&h.videoSource.startsWith("screen:")))return[3,12];if(A=!I.audioTrack&&h.audioSource!==null&&h.audioSource!==!1,!(navigator.mediaDevices.getDisplayMedia&&!C.isElectron()))return[3,11];B.label=4;case 4:return B.trys.push([4,9,,10]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:h.audioSource==="screen"})];case 5:return E=B.sent(),this.addAlreadyProvidedTracks(I,E),A?[4,y(E,I.constraints)]:[3,7];case 6:return[2,B.sent()];case 7:return[2,E];case 8:return[3,10];case 9:throw M=B.sent(),$=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,P=M.toString(),new a.OpenViduError($,P);case 10:return[3,11];case 11:return[3,12];case 12:N=A?{video:I.constraints.video}:I.constraints,B.label=13;case 13:return B.trys.push([13,18,,19]),[4,navigator.mediaDevices.getUserMedia(N)];case 14:return E=B.sent(),this.addAlreadyProvidedTracks(I,E),A?[4,y(E,I.constraints)]:[3,16];case 15:return[2,B.sent()];case 16:return[2,E];case 17:return[3,19];case 18:throw T=B.sent(),$=void 0,P=T.toString(),h.videoSource!=="screen"?$=a.OpenViduErrorName.DEVICE_ACCESS_DENIED:$=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,new a.OpenViduError($,P);case 19:return[3,21];case 20:throw R=B.sent(),R;case 21:return[2]}})})},w.prototype.enableProdMode=function(){m.enableProdMode()},w.prototype.setAdvancedConfiguration=function(h){this.advancedConfiguration=h},w.prototype.onOrientationChanged=function(h){globalThis.addEventListener("orientationchange",h)},w.prototype.sendNewVideoDimensionsIfRequired=function(h,S,x,y){var I=this,A,M,N,E,T=0,$=((M=(A=h==null?void 0:h.stream)===null||A===void 0?void 0:A.videoDimensions)===null||M===void 0?void 0:M.width)||0,P=((E=(N=h==null?void 0:h.stream)===null||N===void 0?void 0:N.videoDimensions)===null||E===void 0?void 0:E.height)||0,R=setInterval(function(){T++,T>y&&clearTimeout(R),h.getVideoDimensions().then(function(O){(O.width!==$||O.height!==P)&&(clearTimeout(R),I.sendVideoDimensionsChangedEvent(h,S,$,P,O.width,O.height))})},x)},w.prototype.sendVideoDimensionsChangedEvent=function(h,S,x,y,I,A){var M=this;h.stream.videoDimensions={width:I||0,height:A||0},this.sendRequest("streamPropertyChanged",{streamId:h.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(h.stream.videoDimensions),reason:S},function(N,E){N?m.error("Error sending 'streamPropertyChanged' event",N):(M.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(M.session,h.stream,"videoDimensions",h.stream.videoDimensions,{width:x,height:y},S)]),h.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(h,h.stream,"videoDimensions",h.stream.videoDimensions,{width:x,height:y},S)]),M.session.sendVideoData(h))})},w.prototype.sendTrackChangedEvent=function(h,S,x,y){var I=this,A={label:S},M={label:x},N="trackReplaced";h.stream.isLocalStreamPublished?this.sendRequest("streamPropertyChanged",{streamId:h.stream.streamId,property:y,newValue:M,reason:N},function(E,T){E?m.error("Error sending 'streamPropertyChanged' event",E):(I.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(I.session,h.stream,y,M,A,N)]),h.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(h,h.stream,y,M,A,N)]))}):(this.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(this.session,h.stream,y,M,A,N)]),h.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(h,h.stream,y,M,A,N)]))},w.prototype.generateMediaConstraints=function(h){var S=this;return new Promise(function(x,y){var I={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},A=h.audioSource,M=h.videoSource;if((A===null||A===!1)&&(I.constraints.audio=!1),(M===null||M===!1)&&(I.constraints.video=!1),I.constraints.audio===!1&&I.constraints.video===!1)return y(new a.OpenViduError(a.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if(typeof MediaStreamTrack<"u"&&A instanceof MediaStreamTrack&&(I.audioTrack=A),typeof MediaStreamTrack<"u"&&M instanceof MediaStreamTrack&&(I.videoTrack=M),A===void 0&&(I.constraints.audio=!0),M===void 0&&(I.constraints.video={width:{ideal:640},height:{ideal:480}}),M!==null&&M!==!1){if(h.resolution){var N=h.resolution.toLowerCase().split("x"),E=Number(N[0]),T=Number(N[1]);I.constraints.video={width:{ideal:E},height:{ideal:T}}}h.frameRate&&(I.constraints.video.frameRate={ideal:h.frameRate})}return S.configureDeviceIdOrScreensharing(I,h,x,y),x(I)})},w.prototype.startWs=function(h){var S={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:h,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),broadcastStarted:this.session.onBroadcastStarted.bind(this.session),broadcastStopped:this.session.onBroadcastStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session),speechToTextMessage:this.session.onSpeechToTextMessage.bind(this.session),speechToTextDisconnected:this.session.onSpeechToTextDisconnected.bind(this.session)}};this.jsonRpcClient=new b.clients.JsonRpcClient(S)},w.prototype.onMasterNodeCrashedNotification=function(h){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},w.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},w.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},w.prototype.sendRequest=function(h,S,x){var y;S&&S instanceof Function&&(x=S,S={}),m.debug('Sending request: {method:"'+h+'", params: '+JSON.stringify(S)+"}"),(y=this.jsonRpcClient)===null||y===void 0||y.send(h,S,x)},w.prototype.getWsUri=function(){return this.wsUri},w.prototype.getSecret=function(){return this.secret},w.prototype.getRecorder=function(){return this.recorder},w.prototype.getStt=function(){return this.stt},w.prototype.generateAudioDeviceError=function(h,S){h.name==="Error"&&(h.name=h.constructor.name);var x,y;switch(h.name.toLowerCase()){case"notfounderror":return x=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,y=h.toString(),new a.OpenViduError(x,y);case"notallowederror":return x=a.OpenViduErrorName.DEVICE_ACCESS_DENIED,y=h.toString(),new a.OpenViduError(x,y);case"overconstrainederror":return h.constraint.toLowerCase()==="deviceid"?(x=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,y="Audio input device with deviceId '"+S.audio.deviceId.exact+"' not found"):(x=a.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,y="Audio input device doesn't support the value passed for constraint '"+h.constraint+"'"),new a.OpenViduError(x,y);case"notreadableerror":return x=a.OpenViduErrorName.DEVICE_ALREADY_IN_USE,y=h.toString(),new a.OpenViduError(x,y);default:return new a.OpenViduError(a.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,h.toString())}},w.prototype.addAlreadyProvidedTracks=function(h,S,x){return h.videoTrack&&(S.addTrack(h.videoTrack),x&&(h.constraints.video?x.lastVideoTrackConstraints=h.constraints.video:x.lastVideoTrackConstraints=h.videoTrack.getConstraints())),h.audioTrack&&S.addTrack(h.audioTrack),S},w.prototype.configureDeviceIdOrScreensharing=function(h,S,x,y){var I=this,A=S.audioSource,M=S.videoSource;if(typeof A=="string"&&A!=="screen"&&(h.constraints.audio={deviceId:{exact:A}}),typeof M=="string")if(!this.isScreenShare(M))this.setVideoSource(h,M),A==="screen"&&(m.warn('Parameter "audioSource" is set to "screen", which means rquesting audio from screen sharing source. But "videoSource" is not set to "screen". No audio source will be requested'),h.constraints.audio=!1);else if(this.checkScreenSharingCapabilities())if(C.isElectron()){var E="screen:",T=M,$=T.substr(T.indexOf(E)+E.length);return h.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:$}},x(h)}else if(this.advancedConfiguration.screenShareChromeExtension&&!(C.isFirefoxBrowser()||C.isFirefoxMobileBrowser())&&!navigator.mediaDevices.getDisplayMedia){g.getScreenConstraints(function(R,O){if(R||O.mandatory&&O.mandatory.chromeMediaSource==="screen")if(R==="permission-denied"||R==="PermissionDeniedError"){var B=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return m.error(B),y(B)}else{var j=I.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();g.getChromeExtensionStatus(j,function(G){if(G==="installed-disabled"){var J=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return m.error(J),y(J)}if(G==="not-installed"){var ee=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,I.advancedConfiguration.screenShareChromeExtension);return m.error(ee),y(ee)}});return}else return h.constraints.video=O,x(h)});return}else{if(navigator.mediaDevices.getDisplayMedia)return x(h);var P=C.isFirefoxBrowser()||C.isFirefoxMobileBrowser()?S.videoSource:void 0;f.getScreenId(P,function(R,O,B){if(R)if(R==="not-installed"){var j=I.advancedConfiguration.screenShareChromeExtension?I.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,j);return m.error(G),y(G)}else if(R==="installed-disabled"){var G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return m.error(G),y(G)}else if(R==="permission-denied"){var G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return m.error(G),y(G)}else{var G=new a.OpenViduError(a.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return m.error(G),m.error(R),y(G)}else return h.constraints.video=B.video,x(h)});return}else{var N=new a.OpenViduError(a.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+C.getName()+" "+C.getVersion());return m.error(N),y(N)}},w.prototype.setVideoSource=function(h,S){h.constraints.video||(h.constraints.video={}),h.constraints.video.deviceId={exact:S}},w.prototype.disconnectCallback=function(){m.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},w.prototype.reconnectingCallback=function(){m.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},w.prototype.reconnectWebsocketThroughRpcConnectMethod=function(h){var S=this;this.sendRequest("connect",{sessionId:h,reconnect:!0},function(x,y){if(x)if(S.isMasterNodeCrashed())m.warn("Master Node has crashed!");else{m.error(x);var I=function(M,N){m.warn(N),S.session.onLostConnection(M),S.jsonRpcClient.close(4101,"Reconnection fault: "+N)},A=function(){S.life===-1?I("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):S.sendRequest("sessionStatus",{sessionId:S.session.sessionId},function(M,N){M!=null?console.error("Error checking session status",M):S.life===N.life?I("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):I("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")})};x.code===40007&&x.message==="reconnection error"&&console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),A()}else S.jsonRpcClient.resetPing(),S.session.onRecoveredConnection()})},w.prototype.reconnectedCallback=function(){if(m.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{m.warn("There was no previous connection when running reconnection callback");var h=new s.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[h]),h.callDefaultBehavior()}else alert("Connection error. Please reload page.")},w.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},w.prototype.isRoomAvailable=function(){return this.session!==void 0&&this.session instanceof i.Session?!0:(m.warn("Session instance not found"),!1)},w.prototype.isScreenShare=function(h){return h==="screen"||h==="window"||C.isElectron()&&h.startsWith("screen:")},w}();return zt.OpenVidu=k,zt}var zo={},Zu;function b2(){return Zu||(Zu=1,Object.defineProperty(zo,"__esModule",{value:!0})),zo}var ed;function y2(){return ed||(ed=1,function(e){var t=Cn&&Cn.__createBinding||(Object.create?function(R,O,B,j){j===void 0&&(j=B);var G=Object.getOwnPropertyDescriptor(O,B);(!G||("get"in G?!O.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return O[B]}}),Object.defineProperty(R,j,G)}:function(R,O,B,j){j===void 0&&(j=B),R[j]=O[B]}),n=Cn&&Cn.__exportStar||function(R,O){for(var B in R)B!=="default"&&!Object.prototype.hasOwnProperty.call(O,B)&&t(O,R,B)};Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=e.ExceptionEventName=e.ExceptionEvent=e.SpeechToTextEvent=e.NetworkQualityLevelChangedEvent=e.FilterEvent=e.ConnectionPropertyChangedEvent=e.StreamPropertyChangedEvent=e.VideoElementEvent=e.StreamManagerEvent=e.StreamEvent=e.SignalEvent=e.SessionDisconnectedEvent=e.RecordingEvent=e.PublisherSpeakingEvent=e.ConnectionEvent=e.Event=e.VideoInsertMode=e.TypeOfVideo=e.OpenViduErrorName=e.OpenViduError=e.LocalRecorderState=e.Filter=e.LocalRecorder=e.Connection=e.Stream=e.StreamManager=e.Subscriber=e.Publisher=e.Session=e.OpenVidu=void 0;var r=yp(),i=g2();Object.defineProperty(e,"OpenVidu",{enumerable:!0,get:function(){return i.OpenVidu}});var s=zs();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return s.Session}});var o=Xa();Object.defineProperty(e,"Publisher",{enumerable:!0,get:function(){return o.Publisher}});var a=Ga();Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return a.Subscriber}});var c=qa();Object.defineProperty(e,"StreamManager",{enumerable:!0,get:function(){return c.StreamManager}});var l=Ka();Object.defineProperty(e,"Stream",{enumerable:!0,get:function(){return l.Stream}});var u=Tp();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return u.Connection}});var f=Sp();Object.defineProperty(e,"LocalRecorder",{enumerable:!0,get:function(){return f.LocalRecorder}});var g=Fa();Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return g.Filter}});var p=Ep();Object.defineProperty(e,"LocalRecorderState",{enumerable:!0,get:function(){return p.LocalRecorderState}});var _=wr();Object.defineProperty(e,"OpenViduError",{enumerable:!0,get:function(){return _.OpenViduError}}),Object.defineProperty(e,"OpenViduErrorName",{enumerable:!0,get:function(){return _.OpenViduErrorName}});var b=za();Object.defineProperty(e,"TypeOfVideo",{enumerable:!0,get:function(){return b.TypeOfVideo}});var v=Ws();Object.defineProperty(e,"VideoInsertMode",{enumerable:!0,get:function(){return v.VideoInsertMode}});var m=ft();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return m.Event}});var C=xp();Object.defineProperty(e,"ConnectionEvent",{enumerable:!0,get:function(){return C.ConnectionEvent}});var k=kp();Object.defineProperty(e,"PublisherSpeakingEvent",{enumerable:!0,get:function(){return k.PublisherSpeakingEvent}});var w=Ap();Object.defineProperty(e,"RecordingEvent",{enumerable:!0,get:function(){return w.RecordingEvent}});var h=Ja();Object.defineProperty(e,"SessionDisconnectedEvent",{enumerable:!0,get:function(){return h.SessionDisconnectedEvent}});var S=Np();Object.defineProperty(e,"SignalEvent",{enumerable:!0,get:function(){return S.SignalEvent}});var x=Qa();Object.defineProperty(e,"StreamEvent",{enumerable:!0,get:function(){return x.StreamEvent}});var y=Wa();Object.defineProperty(e,"StreamManagerEvent",{enumerable:!0,get:function(){return y.StreamManagerEvent}});var I=wp();Object.defineProperty(e,"VideoElementEvent",{enumerable:!0,get:function(){return I.VideoElementEvent}});var A=Sr();Object.defineProperty(e,"StreamPropertyChangedEvent",{enumerable:!0,get:function(){return A.StreamPropertyChangedEvent}});var M=Dp();Object.defineProperty(e,"ConnectionPropertyChangedEvent",{enumerable:!0,get:function(){return M.ConnectionPropertyChangedEvent}});var N=Pp();Object.defineProperty(e,"FilterEvent",{enumerable:!0,get:function(){return N.FilterEvent}});var E=Lp();Object.defineProperty(e,"NetworkQualityLevelChangedEvent",{enumerable:!0,get:function(){return E.NetworkQualityLevelChangedEvent}});var T=Mp();Object.defineProperty(e,"SpeechToTextEvent",{enumerable:!0,get:function(){return T.SpeechToTextEvent}});var $=Cr();Object.defineProperty(e,"ExceptionEvent",{enumerable:!0,get:function(){return $.ExceptionEvent}}),Object.defineProperty(e,"ExceptionEventName",{enumerable:!0,get:function(){return $.ExceptionEventName}});var P=Ha();Object.defineProperty(e,"EventDispatcher",{enumerable:!0,get:function(){return P.EventDispatcher}}),n(b2(),e),r.JL.setOptions({enabled:!1})}(Cn)),Cn}var E2=y2();function _2(e){const t=K(0),n=K(0),r=K(null),i=Ie(()=>n.value>0?t.value/n.value*100:0),s=Ie(()=>{const a=Math.floor(t.value/60),c=t.value%60;return`${a}:${c<10?"0":""}${c}`}),o=()=>{if(!e.value)return;const a=new Date(e.value).getTime(),c=new Date().getTime();n.value=Math.floor((a-c)/1e3),t.value=n.value,r.value&&clearInterval(r.value),r.value=setInterval(()=>{const l=new Date().getTime();t.value=Math.max(0,Math.floor((a-l)/1e3)),t.value<=0&&(clearInterval(r.value),r.value=null)},1e3)};return gt(e,a=>{a&&o()}),Xn(()=>{r.value&&clearInterval(r.value)}),{remainingTime:t,totalDuration:n,timerProgress:i,formattedTime:s}}const S2={class:"debate-discussion-container"},w2={class:"status-bar"},C2={class:"round-label"},I2={class:"side-label"},R2={class:"debate-topic"},O2={class:"main-content"},k2={class:"video-section"},T2={class:"main-speaker-video"},x2={class:"speaker-timer"},P2={class:"timer-circle",viewBox:"0 0 60 60"},A2={class:"timer-text"},N2={class:"participant-videos"},M2={key:0,autoplay:"",muted:""},D2={key:1,class:"video-placeholder"},L2={key:0,class:"notes-container"},$2={key:0,class:"modal-overlay"},V2={class:"modal-container"},B2={class:"modal-header"},j2={class:"tabs modal-tabs flex justify-between"},F2={class:"modal-content"},U2={key:0,class:"memo-input"},H2={class:"tag-input"},W2={class:"tags"},q2=["onClick"],G2={key:1,class:"resource-input"},z2={class:"resource-type-selection"},K2=["onClick"],J2={class:"tag-input"},Q2={class:"tags"},X2=["onClick"],Y2={class:"search-area"},Z2={class:"result"},eI={class:"saved-items"},tI={class:"item-header"},nI={class:"item-title"},rI={class:"item-type"},iI={class:"item-tags"},sI={class:"item-content"},oI={class:"item-footer"},aI={key:1,class:"analysis-panel"},cI={class:"analysis-tabs"},lI={class:"quick-input"},uI={class:"saved-notes"},dI={class:"note-header"},fI={class:"note-badge"},pI={class:"note-time"},hI={class:"note-content"},vI={class:"note-header"},mI={class:"note-badge"},gI={class:"note-content"},bI={key:0,class:"timeline"},yI={class:"timeline-track"},EI={class:"stage-label"},_I={class:"stage-title"},SI={class:"stage-subtitle"},wI={key:1,class:"timeline-section"},CI={class:"timeline-summary-container"},II={class:"timeline-column"},RI={class:"argument-tabs"},OI={class:"argument-timeline"},kI={class:"timeline"},TI={class:"timeline-points"},xI=["onClick"],PI={class:"point-label"},AI={class:"summary-column"},NI={key:0,class:"speech-summary"},MI={class:"summary-content"},DI={class:"summary-tags"},LI={key:2,class:"modal-overlay2"},$I={class:"modal"},VI=Ae({__name:"Debate",props:{debateId:{}},setup(e){const t="undefined/ws",n="https://i12a802.p.ssafy.io/python",r=K("analysis"),i=K(""),s=K([]),o=ue=>{r.value=ue},a=()=>{if(i.value.trim()){const ue={type:"quick",content:i.value,time:new Date().toLocaleTimeString()};s.value=[ue,...s.value],i.value=""}},c={analysis:[{type:"prep",content:"PREP 분석 노트 내용"},{type:"logic",content:"논리성 분석 노트 내용"},{type:"quick",content:"빠른 분석 노트 내용"}],template:[{type:"structure",content:"구조화 템플릿"},{type:"evidence",content:"증거 분석 템플릿"},{type:"counter",content:"반론 구성 템플릿"}]},l=K("first"),u=Ie(()=>C.value!==null?h.value[C.value]:"발언 내용을 선택해주세요");Ie(()=>C.value!==null?_[C.value]:"-");const f=async()=>{try{const ue=await De.post(n+"/api/transcripts/",{devate_id:B.debateId,user_id:0,current_round:0});if(ue.data&&Array.isArray(ue.data))for(console.log(`제발제발제발제발제발제발제발제발제발제발제발제발제발제발 ${ue.data}`),h.value=ue.data,console.log(h.value);h.value.length<8;)h.value.push("아직 데이터가 없습니다.")}catch(ue){console.error("❌ 발언 요약 데이터 요청 실패:",ue)}},g=K(!1),p=["A(찬성)","B(반대)","C(찬성)","D(반대)","A(찬성)","B(반대)","C(찬성)","D(반대)"],_=["00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00"],b=ue=>{C.value=ue,g.value=!0},v=()=>{g.value=!1},m=ue=>{l.value=ue,k.value=null,C.value=null},C=K(null),k=K(null),w=Array(8).fill("아직 데이터가 없습니다."),h=K([...w]),S=Ie(()=>(console.log(`살려주세요 진짜로 ${l.value}`),l.value==="first"?h.value.slice(0,4):h.value.slice(4,8)));let x=null;const y="wss://i12a802.p.ssafy.io/ws",I=()=>{Z.value&&Z.value.disconnect(),Z.value=null,z.value=null,P.value=[],R.value=null,console.log("OpenVidu 세션 종료")};Ze(()=>{F(),V(),f(),x=setInterval(f,3e4),gt(Ee,ue=>{ue&&O.value&&ue.addVideoElement(O.value)}),gt(ve,ue=>{const ae=document.querySelectorAll(".participant-video video");ue.forEach((je,oe)=>{ae[oe]&&je.addVideoElement(ae[oe])})})}),Xn(()=>{x!==null&&clearInterval(x),O.value&&(O.value.srcObject=null),P.value.forEach(ue=>{ue.stream&&ue.stream.dispose()}),I()});let A=null,M=null,N=null,E=null;async function T(){try{A=await navigator.mediaDevices.getUserMedia({audio:!0}),M=new AudioContext({sampleRate:16e3}),await M.audioWorklet.addModule("/pcm-processor.js"),N=new AudioWorkletNode(M,"pcm-processor"),E=new WebSocket(`${t}/api/audio/stt?debate_id=${B.debateId}&stance=${X.value}&nickname=${ee}&round=${ce.value}`),E.binaryType="arraybuffer",N.port.onmessage=ae=>{const je=new Int16Array(ae.data);console.log("메인 스레드: PCM 데이터 (Int16Array):",je),E&&E.readyState===WebSocket.OPEN?(E.send(ae.data),console.log("메인 스레드: WebSocket으로 데이터 전송")):console.warn("메인 스레드: WebSocket 연결 상태가 OPEN이 아님:",E==null?void 0:E.readyState)},M.createMediaStreamSource(A).connect(N).connect(M.destination),console.log("오디오 캡처 및 전송 시작")}catch(ue){console.error("오디오 처리 시작 중 오류 발생:",ue)}}function $(){E&&(E.readyState===WebSocket.OPEN&&(E.close(),console.log("WebSocket 연결 종료")),E=null),N&&(N.disconnect(),N=null,console.log("AudioWorkletNode 연결 해제")),M&&(M.close().then(()=>{console.log("AudioContext 종료")}).catch(ue=>{console.error("AudioContext 종료 중 오류 발생:",ue)}),M=null),A&&(A.getTracks().forEach(ue=>ue.stop()),A=null,console.log("MediaStream 트랙 중지(마이크 끄기)"))}const P=K([]),R=K(null),O=K(null),B=e,j=K(""),G=K(!0),J=K([]),ee=localStorage.getItem("username");localStorage.getItem("id");const X=K(""),pe=localStorage.getItem("token"),F=async()=>{var ue;try{if(console.log("토큰 확인:",pe),!pe)throw new Error("로그인이 필요합니다.");const ae=await De.get(`/api/debates/${B.debateId}/room`,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"application/json"}});ae.status===200&&(j.value=ae.data.subject,G.value=ae.data.participant,J.value=ae.data.users)}catch(ae){console.error("토론방 정보를 불러오는 데 실패했습니다:",((ue=ae.response)==null?void 0:ue.data)||ae.message)}},z=K(null),Z=K(null),ne=K(""),se=K(null),re=K(!1),V=async()=>{var ue;try{console.log("OpenVidu 세션에 연결 시도"),z.value=new E2.OpenVidu,Z.value=z.value.initSession(),console.log("session:",Z.value),(ue=Z.value)==null||ue.on("streamCreated",async je=>{if(console.log("📡 streamCreated 이벤트 발생",je),!je.stream){console.error("⚠️ event.stream이 존재하지 않음");return}try{console.log("🛠️ session.value.subscribe() 실행 전...");const oe=Z.value.subscribe(je.stream,void 0);if(!oe){console.error("⚠️ subscriber가 생성되지 않음");return}console.log("✅ 구독 객체 생성 완료:",oe),P.value.push(oe),setTimeout(()=>{const Ue=oe.stream.getMediaStream().getAudioTracks();if(console.log("🎤 오디오 트랙 목록:",Ue),Ue.length>0){console.log("🔊 오디오 트랙이 존재함, subscribeToAudio 실행"),oe.subscribeToAudio(!0);const St=document.createElement("audio");St.srcObject=oe.stream.getMediaStream(),St.autoplay=!0,St.controls=!0,St.hidden=!0,document.body.appendChild(St),console.log("🎧 오디오 태그에 스트림 연결 완료")}else console.error("⚠️ 오디오 트랙이 존재하지 않음")},1e3)}catch(oe){console.error("❌ 구독 중 오류 발생:",oe)}}),Z.value.on("connectionCreated",je=>{console.log("🔗 connectionCreated 이벤트 발생",je)});const ae=D();await Z.value.connect(ae,{clientData:localStorage.getItem("id")}),G&&(R.value=z.value.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"480x360",frameRate:30,insertMode:"APPEND",mirror:!0}),console.log("Publisher 객체:",R.value),Z.value.publish(R.value),ne.value=Z.value.connection.connectionId,R.value?(Z.value.publish(R.value),console.log("🚀 퍼블리싱 완료")):console.error("⚠️ 퍼블리셔가 생성되지 않음")),console.log(Z.value.connection.connectionId),console.log("OpenVidu 세션 연결 완료")}catch(ae){console.error("OpenVidu 세션 연결 중 오류 발생:",ae)}},D=()=>{const ue=localStorage.getItem("openviduToken");if(!ue)throw new Error("토큰이 존재하지 않습니다. 먼저 매칭 페이지에서 토큰을 받아와야 합니다.");return ue},{debateState:L,skipTurn:Q}=gp(y),Y=Ie(()=>L.value||{sequence:0,status:"WAITING",currentSpeakerId:null,currentSpeakEndTime:null,nextSpeakerId:null,canInterrupt:!1,isInterrupted:!1,interruptSpeakerId:null,interruptEndTime:null,participants:[]}),W=Ie(()=>{const ue=Y.value.currentSpeakerId,je=Y.value.participants.find(oe=>oe.userId===ue);return je?je.position:"찬성"}),de=Ie(()=>{const ue=Y.value.nextSpeakerId,je=Y.value.participants.find(oe=>oe.userId===ue);return je?je.nickname:"다음 발언자 없음"}),le=Ie(()=>{const ue=Y.value.currentSpeakerId,je=Y.value.participants.find(oe=>oe.userId===ue);return je?je.nickname:"현재 발언자 없음"});Ie(()=>{switch(Y.value.status){case"READY":return["모든 참여자가 들어오길 기다리는 중입니다.","잠시만 기다려주세요"];case"PREPARING":return["곧 발언이 시작됩니다.",`${de||"알 수 없음"} 님은 준비 해주세요`];case"WAITING":return["곧이어 다음 발언이 시작됩니다.",`${le||"알 수 없음"} 님은 준비 해주세요`];case"STARTED":return["토론이 시작되었습니다!","첫 번째 발언자가 발표를 시작합니다."];case"SPEECHING":return["현재 발언 중입니다.","지금 발언자의 의견을 경청해주세요."];case"SKIP":return["발언이 건너뛰어졌습니다.","다음 발언자가 준비 중입니다."];case"FINISHED":return["토론이 종료되었습니다.","모두 수고하셨습니다!"];default:return["상태를 불러오는 중...","잠시만 기다려주세요"]}});const ce=K(1),ie=K(0);let be=!1;const fe=K([{title:"찬성 입론",subtitle:"주장 제시"},{title:"반대 입론",subtitle:"대응 논리"},{title:"찬성 반론",subtitle:"반박 및 보완"},{title:"반대 반론",subtitle:"최종 반박"}]),ye=ue=>ue<ie.value?"completed":ue===ie.value?"current":"",me=K(0);gt(()=>Y.value.status,ue=>{ue==="SPEECHING"&&(me.value++,me.value!==1&&ie.value++,ie.value===4&&(be?(console.log("step이 4지만 이미 초기화된 적이 있어 유지"),ie.value=3):(ce.value=2,ie.value=0,me.value=0,be=!0,console.log("step 초기화 & round 증가"))),console.log(`현재 step: ${ie.value}, round: ${ce.value}`),console.log("speakers:",Ee,ve)),ce.value===2&&ie.value===4&&!be&&(ie.value=0,console.log("타임라인 초기화 (라운드 2 시작)"))}),gt(()=>Y.value,ue=>{var je;if(console.log("🛠️ latestDebateState 변경 감지:",ue),!R.value){console.log("⚠️ publisher.value가 아직 초기화되지 않음");return}const ae=ue.currentSpeakerConnectionId;if(console.log("🎙️ 새로운 발언자 ID:",ae,"현재 사용자 ID:",ne.value),ue.status==="SPEECHING"&&ae===ne.value){console.log("✅ 현재 사용자가 발언자입니다. 마이크 활성화 시도...");try{R.value.publishAudio(!0),se.value=ne.value,re.value=!0,T(),console.log("🎙️ 마이크 활성화 요청 완료")}catch(oe){console.error("❌ 마이크 활성화 중 오류 발생:",oe)}}else{console.log("🔇 현재 사용자가 발언자가 아님. 마이크 비활성화 시도...");try{R.value.publishAudio(!1),re.value=!1,se.value=null,$(),console.log("🔕 마이크 비활성화 요청 완료")}catch(oe){console.error("❌ 마이크 비활성화 중 오류 발생:",oe)}}console.log(`🔄 발언자 업데이트됨: ${ae}, 사용자(${ne.value}) 마이크 상태: ${(je=R.value.stream)==null?void 0:je.audioActive}`)},{deep:!0});const Se=Ie(()=>`${ie.value/3*100}%`),Ee=Ie(()=>(P.value.find(ue=>console.log(ue.stream.connection.connectionId===Y.value.currentSpeakerConnectionId)),P.value.find(ue=>ue.stream.connection.connectionId===Y.value.currentSpeakerConnectionId)||R.value)),ve=Ie(()=>{const ue=P.value.filter(ae=>ae.stream.connection.connectionId!==Y.value.currentSpeakerConnectionId);return console.log("oP:",ve.value),ue.length>0?ue:[{nickname:"참가자 없음",stream:null,placeholder:!0},{nickname:"참가자 없음",stream:null,placeholder:!0},{nickname:"참가자 없음",stream:null,placeholder:!0}]}),Le=Ie(()=>Y.value.currentSpeakEndTime),{timerProgress:tt,formattedTime:_t}=_2(Le),Qe=K("memo"),kt=K(""),Wt=K(""),Ge=K([]),nt=K(""),xi=[{value:"url",label:"🔗 URL"},{value:"document",label:"📄 문서"},{value:"image",label:"🖼️ 이미지"}],En=K("url"),Pi=K(""),Ir=K(""),or=K([]),Rr=K(""),Ks=K(null),Ai=K(""),Za=()=>{nt.value.trim()&&(Ge.value.push(nt.value.trim()),nt.value="")},Up=ue=>{Ge.value=Ge.value.filter(ae=>ae!==ue)},ec=()=>{Rr.value.trim()&&(or.value.push(Rr.value.trim()),Rr.value="")},Hp=ue=>{or.value=or.value.filter(ae=>ae!==ue)},tc=ue=>{const ae=ue.target;ae.files&&ae.files.length>0&&(Ks.value=ae.files[0])},Wp=()=>{if(!Wt.value.trim()){alert("메모 제목을 입력해주세요");return}const ue={id:Date.now().toString(),title:Wt.value,content:kt.value,tags:Ge.value,type:"memo",createdAt:new Date().toLocaleDateString("ko-KR")};Ni.addMemo(ue),kt.value="",Wt.value="",Ge.value=[]},qp=()=>{var ae;if(!Ir.value.trim()){alert("자료 제목을 입력해주세요");return}const ue={id:Date.now().toString(),title:Ir.value,content:En.value==="url"?Pi.value:((ae=Ks.value)==null?void 0:ae.name)||"",tags:or.value,type:"resource",resourceType:En.value,createdAt:new Date().toLocaleDateString("ko-KR")};Ni.addResource(ue)},Js=K(!1),Gp=()=>{Js.value=!0,kt.value="",Wt.value="",Ge.value=[],Pi.value="",Ir.value="",or.value=[],Ks.value=null},Qs=()=>{Js.value=!1},zp=()=>{Qe.value==="memo"?Wp():qp(),Qs()},Kp=K(!1),Jp=()=>{console.log("스킵할래"),Q()},Ni=bp(),Qp=Ie(()=>{const ue=Ai.value.toLowerCase().trim();return ue?Ni.savedItems.filter(ae=>{var St,rc;const je=((St=ae.title)==null?void 0:St.toLowerCase())||"",oe=((rc=ae.content)==null?void 0:rc.toLowerCase())||"",Ue=ae.tags||[];return je.includes(ue)||oe.includes(ue)||Ue.some(eh=>eh.toLowerCase().includes(ue))}):Ni.savedItems}),Xp=ue=>{switch(ue){case"url":return"🔗";case"document":return"📄";case"image":return"🖼️";default:return"📁"}},Yp=vt(),nc=K(!1),Xs=K(5);gt(()=>Y.value.status,ue=>{ue==="FINISHED"&&(nc.value=!0,Zp())});function Zp(){let ue=setInterval(()=>{Xs.value-=1,Xs.value<=0&&(clearInterval(ue),Yp.push("/"))},1e3)}return(ue,ae)=>{var je;return U(),H("main",S2,[d("div",w2,[d("div",C2,q(ce.value)+" 라운드",1),d("div",I2,q(W.value)+" 측",1),d("h1",R2,q(j.value),1)]),d("div",O2,[d("div",k2,[d("div",T2,[re.value?(U(),H("button",{key:0,onClick:Jp,class:"absolute skip"},"스킵하기")):Te("",!0),d("video",{autoplay:"",ref_key:"mainVideoRef",ref:O},null,512),d("div",x2,[(U(),H("svg",P2,[ae[14]||(ae[14]=d("circle",{class:"timer-bg",cx:"30",cy:"30",r:"25"},null,-1)),d("circle",{class:"timer-progress",cx:"30",cy:"30",r:"25",style:We({strokeDasharray:"157",strokeDashoffset:He(tt)/100*157})},null,4)])),d("span",A2,q(He(_t)),1)])]),d("div",N2,[(U(!0),H(he,null,_e(ve.value,oe=>{var Ue,St;return U(),H("div",{key:((St=(Ue=oe.stream)==null?void 0:Ue.connection)==null?void 0:St.connectionId)||oe.nickname,class:"participant-video"},[oe.stream?(U(),H("video",M2)):(U(),H("div",D2,[d("span",null,q(oe.nickname),1)]))])}),128))])]),G.value?(U(),H("div",L2,[d("div",{class:ge(["notes-section",{visible:Kp.value}])},[d("div",{class:"add-button-container"},[d("button",{onClick:Gp,class:"add-button"},ae[15]||(ae[15]=[d("span",{class:"plus-icon"},"+",-1),Ve(" 새로운 메모/자료 추가 ")]))]),Js.value?(U(),H("div",$2,[d("div",V2,[d("div",B2,[d("h3",null,q(Qe.value==="memo"?"새 메모 작성":"새 자료 추가"),1),d("button",{onClick:Qs,class:"close-button"},"×")]),d("div",j2,[d("button",{onClick:ae[0]||(ae[0]=oe=>Qe.value="memo"),class:ge([{active:Qe.value==="memo"},"tapsButton"])}," 메모 ",2),d("button",{onClick:ae[1]||(ae[1]=oe=>Qe.value="resource"),class:ge([{active:Qe.value==="resource"},"tapsButton"])}," 자료 ",2)]),d("div",F2,[Qe.value==="memo"?(U(),H("div",U2,[Xe(d("textarea",{"onUpdate:modelValue":ae[2]||(ae[2]=oe=>kt.value=oe),placeholder:"토론을 위한 메모를 자유롭게 작성하세요"},null,512),[[et,kt.value]]),Xe(d("input",{"onUpdate:modelValue":ae[3]||(ae[3]=oe=>Wt.value=oe),placeholder:"메모 제목을 입력하세요"},null,512),[[et,Wt.value]]),d("div",H2,[Xe(d("input",{"onUpdate:modelValue":ae[4]||(ae[4]=oe=>nt.value=oe),onKeyup:gs(Za,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[et,nt.value]]),d("button",{onClick:Za},"태그 추가")]),d("div",W2,[(U(!0),H(he,null,_e(Ge.value,oe=>(U(),H("span",{key:oe,class:"tag"},[Ve(" # "+q(oe)+" ",1),d("button",{onClick:Ue=>Up(oe)},"×",8,q2)]))),128))])])):(U(),H("div",G2,[d("div",z2,[(U(),H(he,null,_e(xi,oe=>d("button",{key:oe.value,onClick:Ue=>En.value=oe.value,class:ge({active:En.value===oe.value})},q(oe.label),11,K2)),64))]),En.value==="url"?Xe((U(),H("input",{key:0,"onUpdate:modelValue":ae[5]||(ae[5]=oe=>Pi.value=oe),placeholder:"URL을 입력하세요"},null,512)),[[et,Pi.value]]):Te("",!0),En.value==="document"?(U(),H("input",{key:1,type:"file",onChange:tc,accept:".pdf,.doc,.docx"},null,32)):Te("",!0),En.value==="image"?(U(),H("input",{key:2,type:"file",onChange:tc,accept:"image/*"},null,32)):Te("",!0),Xe(d("input",{"onUpdate:modelValue":ae[6]||(ae[6]=oe=>Ir.value=oe),placeholder:"자료 제목을 입력하세요"},null,512),[[et,Ir.value]]),d("div",J2,[Xe(d("input",{"onUpdate:modelValue":ae[7]||(ae[7]=oe=>Rr.value=oe),onKeyup:gs(ec,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[et,Rr.value]]),d("button",{onClick:ec},"태그 추가")]),d("div",Q2,[(U(!0),H(he,null,_e(or.value,oe=>(U(),H("span",{key:oe,class:"tag"},[Ve(" # "+q(oe)+" ",1),d("button",{onClick:Ue=>Hp(oe)},"×",8,X2)]))),128))])]))]),d("div",{class:"modal-footer"},[d("button",{onClick:Qs,class:"cancel-button"},"취소"),d("button",{onClick:zp,class:"save-button modal-save"}," 저장 ")])])])):Te("",!0),d("div",Y2,[Xe(d("input",{"onUpdate:modelValue":ae[8]||(ae[8]=oe=>Ai.value=oe),placeholder:"메모나 자료 검색",class:"search-input"},null,512),[[et,Ai.value]])]),d("h3",Z2,q(Ai.value?"검색 결과":"메모"),1),d("div",eI,[(U(!0),H(he,null,_e(Qp.value,oe=>(U(),H("div",{key:oe.id,class:ge(["saved-item",{"memo-item":oe.type==="memo","resource-item":oe.type==="resource"}])},[d("div",tI,[d("span",nI,q(oe.title),1),d("span",rI,q(oe.type==="memo"?"메모":Xp(oe.resourceType||"")),1)]),d("div",iI,[(U(!0),H(he,null,_e([...oe.tags],Ue=>(U(),H("span",{key:Ue,class:ge(["tag",{"memo-tag":oe.type==="memo","resource-tag":oe.type==="resource"}])}," # "+q(Ue),3))),128))]),d("div",sI,q(oe.content),1),d("div",oI,q(oe.createdAt),1)],2))),128))])],2)])):(U(),H("div",aI,[d("div",cI,[d("button",{class:ge(["tab",{active:r.value==="analysis"}]),onClick:ae[9]||(ae[9]=oe=>o("analysis"))}," 분석 노트 ",2),d("button",{class:ge(["tab",{active:r.value==="template"}]),onClick:ae[10]||(ae[10]=oe=>o("template"))}," 분석 템플릿 ",2)]),d("div",lI,[ae[16]||(ae[16]=d("h3",null,"빠른 메모",-1)),Xe(d("textarea",{"onUpdate:modelValue":ae[11]||(ae[11]=oe=>i.value=oe),placeholder:"발언에 대한 생각을 자유롭게 기록해보세요"},null,512),[[et,i.value]]),d("button",{class:"submit-button",onClick:a}," 작성 ")]),d("div",uI,[r.value==="analysis"?(U(!0),H(he,{key:0},_e(c.analysis,(oe,Ue)=>(U(),H("div",{key:Ue,class:ge(["note",oe.type])},[d("div",dI,[d("span",fI,q(oe.type.toUpperCase())+" 분석",1),d("span",pI,"• "+q(new Date().toLocaleTimeString()),1)]),d("p",hI,q(oe.content),1)],2))),128)):(U(!0),H(he,{key:1},_e(c.template,(oe,Ue)=>(U(),H("div",{key:Ue,class:ge(["note",oe.type])},[d("div",vI,[d("span",mI,q(oe.type.toUpperCase()),1)]),d("p",gI,q(oe.content),1)],2))),128))])]))]),G.value?(U(),H("div",bI,[d("div",yI,[d("div",{class:"progress-bar",style:We({"--progress-width":Se.value})},null,4),(U(!0),H(he,null,_e(fe.value,(oe,Ue)=>(U(),H("div",{key:Ue,class:ge(["timeline-stage",ye(Ue)])},[ae[17]||(ae[17]=d("div",{class:"stage-point"},null,-1)),d("div",EI,[d("span",_I,q(oe.title),1),d("span",SI,q(oe.subtitle),1)])],2))),128))])])):(U(),H("div",wI,[ae[21]||(ae[21]=d("div",{class:"timeline-header"},[d("h2",null,"토론 진행 상황"),d("p",null,"클릭하여 각 발언 내용을 확인할 수 있습니다")],-1)),d("div",CI,[d("div",II,[d("div",RI,[d("button",{class:ge(["argument-tab",{active:l.value==="first"}]),onClick:ae[12]||(ae[12]=oe=>m("first"))}," 첫 번째 주장 ",2),d("button",{class:ge(["argument-tab",{active:l.value==="second"}]),onClick:ae[13]||(ae[13]=oe=>m("second"))}," 두 번째 주장 ",2)]),d("div",OI,[d("div",kI,[ae[19]||(ae[19]=d("div",{class:"timeline-track"},[d("div",{class:"timeline-progress"})],-1)),d("div",TI,[(U(!0),H(he,null,_e(S.value,(oe,Ue)=>(U(),H("div",{key:Ue,class:ge(["point",{current:C.value===Ue,disabled:!oe}]),onClick:St=>oe?b(Ue):null,style:{cursor:"pointer"}},[ae[18]||(ae[18]=d("div",{class:"point-marker"},null,-1)),d("div",PI,q(p[Ue]),1)],10,xI))),128))])])])]),d("div",AI,[g.value?(U(),H("div",NI,[d("div",{class:"summary-header"},[ae[20]||(ae[20]=d("span",{class:"summary-badge"},"발언 요약",-1)),d("button",{onClick:v,class:"close-button2"},"×")]),d("p",MI,q(u.value),1),d("div",DI,[(U(!0),H(he,null,_e(((je=k.value)==null?void 0:je.tags)||[],oe=>(U(),H("span",{key:oe,class:"tag"}," #"+q(oe),1))),128))])])):Te("",!0)])])])),nc.value?(U(),H("div",LI,[d("div",$I,[ae[22]||(ae[22]=d("p",null,"토론이 종료됩니다. 모두 수고하셨습니다.",-1)),d("p",null,q(Xs.value)+"초 후 메인 페이지로 이동합니다.",1),ae[23]||(ae[23]=d("img",{src:OC,alt:"Tori Mascot",class:"tori-mascot"},null,-1))])])):Te("",!0)])}}}),BI=ke(VI,[["__scopeId","data-v-545b0392"]]),jI={class:"debate-container"},FI={class:"main-content"},UI={class:"left-column"},HI={class:"timeline-section"},WI={class:"timeline-summary-container"},qI={class:"timeline-column"},GI={class:"argument-tabs"},zI={class:"argument-timeline"},KI={class:"timeline"},JI={class:"timeline-points"},QI=["onClick"],XI={class:"point-label"},YI={class:"point-time"},ZI={class:"summary-column"},eR={class:"speech-summary"},tR={class:"summary-header"},nR={class:"summary-badge"},rR={class:"summary-time"},iR={class:"summary-content"},sR={class:"summary-tags"},oR={class:"analysis-panel"},aR={class:"analysis-tabs"},cR={class:"quick-input"},lR={class:"saved-notes"},uR={class:"note-header"},dR={class:"note-badge"},fR={class:"note-time"},pR={class:"note-content"},hR={class:"note-header"},vR={class:"note-badge"},mR={class:"note-content"},gR={__name:"DebateForAudience",setup(e){const t={agree1:{speaker:"찬성 1",time:"5:00",content:"AI 기술의 발전 속도와 비용 효율성을 고려할 때 일자리 대체는 불가피함",tags:["통계 자료","산업 사례"]},disagree1:{speaker:"반대 1",time:"5:00",content:"AI는 보완재로서 역할을 할 뿐, 완전한 대체는 불가능함",tags:["역사적 사례","전문가 의견"]},agree2:{speaker:"찬성 2",time:"5:00",content:"단순 반복적인 업무부터 점진적 대체가 진행 중",tags:["현장 사례","연구 결과"]},disagree2:{speaker:"반대 2",time:"5:00",content:"새로운 일자리 창출 효과가 더 클 것",tags:["통계 예측","전문가 분석"]}},n=K("agree1"),r=g=>{n.value=g},i={analysis:[{type:"prep",content:"PREP 분석 노트 내용"},{type:"logic",content:"논리성 분석 노트 내용"},{type:"quick",content:"빠른 분석 노트 내용"}],template:[{type:"structure",content:"구조화 템플릿"},{type:"evidence",content:"증거 분석 템플릿"},{type:"counter",content:"반론 구성 템플릿"}]},s=K("first"),o=K("analysis"),a=K(""),c=K([]),l=g=>{s.value=g},u=g=>{o.value=g},f=()=>{if(a.value.trim()){const g={type:"quick",content:a.value,time:new Date().toLocaleTimeString()};c.value=[g,...c.value],a.value=""}};return(g,p)=>(U(),H("div",jI,[p[10]||(p[10]=d("header",{class:"header"},[d("div",{class:"header-content"},[d("div",{class:"round-badge"},"1라운드"),d("h1",{class:"debate-title"}," 인공지능 기술이 일자리를 대체하는 것은 불가피한가? ")])],-1)),d("main",FI,[d("div",UI,[p[8]||(p[8]=en('<div class="video-area" data-v-53197b7d><div class="video-player" data-v-53197b7d><span class="video-placeholder" data-v-53197b7d>실시간 토론 영상</span></div><div class="current-speaker" data-v-53197b7d><div class="speaker-badge agree" data-v-53197b7d>찬성</div><div class="speaker-info" data-v-53197b7d><div class="speaker-name" data-v-53197b7d>김토론 (찬성 1)</div><div class="speaker-status" data-v-53197b7d> 첫 번째 주장 • 입론 진행 중 • 2:45 남음 </div></div></div></div>',1)),d("div",HI,[p[7]||(p[7]=d("div",{class:"timeline-header"},[d("h2",null,"토론 진행 상황"),d("p",null,"클릭하여 각 발언 내용을 확인할 수 있습니다")],-1)),d("div",WI,[d("div",qI,[d("div",GI,[d("button",{class:ge(["argument-tab",{active:s.value==="first"}]),onClick:p[0]||(p[0]=_=>l("first"))}," 첫 번째 주장 ",2),d("button",{class:ge(["argument-tab",{active:s.value==="second"}]),onClick:p[1]||(p[1]=_=>l("second"))}," 두 번째 주장 ",2)]),d("div",zI,[d("div",KI,[p[6]||(p[6]=d("div",{class:"timeline-track"},[d("div",{class:"timeline-progress"})],-1)),d("div",JI,[(U(),H(he,null,_e(["agree1","disagree1","agree2","disagree2"],(_,b)=>d("div",{key:b,class:ge(["point",{done:b<_.indexOf(n.value),current:b===_.indexOf(n.value)}]),onClick:v=>r(_),style:{cursor:"pointer"}},[p[5]||(p[5]=d("div",{class:"point-marker"},null,-1)),d("div",XI,q(t[_].speaker),1),d("div",YI,q(t[_].time),1)],10,QI)),64))])])])]),d("div",ZI,[d("div",eR,[d("div",tR,[d("div",nR,q(t[n.value].speaker),1),d("span",rR,q(t[n.value].time),1)]),d("p",iR,q(t[n.value].content),1),d("div",sR,[(U(!0),H(he,null,_e(t[n.value].tags,(_,b)=>(U(),H("span",{key:b,class:"tag"},q(_),1))),128))])])])])])]),d("div",oR,[d("div",aR,[d("button",{class:ge(["tab",{active:o.value==="analysis"}]),onClick:p[2]||(p[2]=_=>u("analysis"))}," 분석 노트 ",2),d("button",{class:ge(["tab",{active:o.value==="template"}]),onClick:p[3]||(p[3]=_=>u("template"))}," 분석 템플릿 ",2)]),d("div",cR,[p[9]||(p[9]=d("h3",null,"빠른 메모",-1)),Xe(d("textarea",{"onUpdate:modelValue":p[4]||(p[4]=_=>a.value=_),placeholder:"발언에 대한 생각을 자유롭게 기록해보세요"},null,512),[[et,a.value]]),d("button",{class:"submit-button",onClick:f}," 작성 ")]),d("div",lR,[o.value==="analysis"?(U(!0),H(he,{key:0},_e(i.analysis,(_,b)=>(U(),H("div",{key:b,class:ge(["note",_.type])},[d("div",uR,[d("span",dR,q(_.type.toUpperCase())+" 분석",1),d("span",fR,"• "+q(new Date().toLocaleTimeString()),1)]),d("p",pR,q(_.content),1)],2))),128)):(U(!0),H(he,{key:1},_e(i.template,(_,b)=>(U(),H("div",{key:b,class:ge(["note",_.type])},[d("div",hR,[d("span",vR,q(_.type.toUpperCase()),1)]),d("p",mR,q(_.content),1)],2))),128))])])])]))}},bR=ke(gR,[["__scopeId","data-v-53197b7d"]]),yR={class:"header"},ER={class:"header-content"},_R={class:"header-title"},SR={class:"main-content"},wR={class:"score-number"},CR={class:"categories-section"},IR={class:"categories-grid"},RR={class:"category-content"},OR={class:"category-header"},kR={class:"category-title"},TR={class:"category-description"},xR={__name:"Report",props:{report:{type:Object,default:()=>({topic:"행복은 돈으로부터 오는가?",date:"2025.02.19 15:29",totalScore:87,percentile:"상위 15%",categories:[{name:"논리력",score:27,color:"#48BB78",description:`찬성과 반대 측이 명확한 주장과 근거를 제시함. 
사례를 활용하여 주장에 대한 현실적 정당성을 부여함 (예: 부유한 사람들의 행복 지수, 로또 당첨자의 불행 사례). 
데이터 인용이 부족함. 구체적인 통계나 연구 결과를 인용하면 더 설득력이 높아질 것.`},{name:"표현력",score:25,color:"#ED64A6",description:`문장이 너무 길거나 복잡하지 않고, 이해하기 쉬움. 
강조할 부분이 명확하여 전달력이 좋음. 
일부 문장에서 너무 일반적인 표현이 반복됨. "돈이 많으면 기회가 많아진다", "돈이 많다고 무조건 행복한 것은 아니다" 같은 문장은 보다 구체적인 사례나 강한 표현으로 바꿀 필요가 있음.`},{name:"전략",score:18,color:"#ECC94B",description:`서론-본론-결론 구조가 잘 갖춰져 있음. 
찬성 측이 지나치게 현실적인 접근을 하고 있고, 반대 측은 다소 추상적인 가치 중심 논리를 펼치고 있음. 상대방의 논리를 더욱 구체적으로 겨냥하면 좋을 것.`},{name:"상호작용",score:17,color:"#4FD1C5",description:`반박이 명확하게 이루어져 있고, 논점이 유지됨. 
반박이 지나치게 일반적이어서 "핵심 논리를 깨뜨리는" 강력한 논증이 부족함.`}]})}},emits:["close"],setup(e){return(t,n)=>(U(),H("div",{class:"modal-overlay",onClick:n[2]||(n[2]=r=>t.$emit("close"))},[d("div",{class:"modal-container",onClick:n[1]||(n[1]=Ri(()=>{},["stop"]))},[d("header",yR,[d("div",ER,[d("button",{class:"close-button",onClick:n[0]||(n[0]=r=>t.$emit("close"))},"×"),d("h1",_R,q(e.report.topic),1)])]),d("main",SR,[d("h2",wR,q(e.report.totalScore)+"점",1),n[4]||(n[4]=d("p",{class:"bad-word"},"클린한 발언자",-1)),d("section",CR,[n[3]||(n[3]=d("h2",{class:"section-title"},"카테고리별 평가",-1)),d("div",IR,[(U(!0),H(he,null,_e(e.report.categories,r=>(U(),H("div",{key:r.name,class:"category-card"},[d("div",{class:"category-indicator",style:We({backgroundColor:r.color})},null,4),d("div",RR,[d("div",OR,[d("h3",kR,q(r.name),1),d("span",{class:"category-score",style:We({color:r.color})},q(r.score)+"점 ",5)]),d("p",TR,q(r.description),1)])]))),128))])])])])]))}},PR=ke(xR,[["__scopeId","data-v-ff7eaefa"]]),AR={class:"app-container"},NR={class:"main-content"},MR={class:"header"},DR={class:"greeting"},LR={class:"unread-reports"},$R={class:"slider-container"},VR={class:"report-content"},BR={class:"report-type"},jR={class:"report-date"},FR={class:"report-detail"},UR={class:"report-detail"},HR={class:"report-detail"},WR=["onClick"],qR={class:"all-reports"},GR={class:"filter-buttons"},zR=["onClick"],KR={class:"read-reports"},JR={class:"read-report-type"},QR={class:"read-report-date"},XR={__name:"DebateReportMain",setup(e){const t=K(null),n=K("진성일"),r=K({topic:"",date:"",totalScore:0,percentile:"",categories:[{name:"논리력",score:29,color:"#48BB78",description:"현실적인 문제와 대안을 체계적으로 분석했습니다."},{name:"표현력",score:18,color:"#ED64A6",description:"키워드를 활용하여 명확한 메시지를 전달했으나..."},{name:"전략",score:18,color:"#ECC94B",description:"주요 논점을 잘 파악하고..."},{name:"상호작용",score:20,color:"#4FD1C5",description:"토론 중 상대방을 존중하며..."}]}),i=_=>{document.body.style.overflow="hidden",r.value={..._,percentile:"상위 15%",categories:[{name:"논리력",score:27,color:"#48BB78",description:`찬성과 반대 측이 명확한 주장과 근거를 제시함. 사례를 활용하여 주장에 대한 현실적 정당성을 부여함 (예: 부유한 사람들의 행복 지수, 로또 당첨자의 불행 사례). 
데이터 인용이 부족함. 구체적인 통계나 연구 결과를 인용하면 더 설득력이 높아질 것.`},{name:"표현력",score:25,color:"#ED64A6",description:'문장이 너무 길거나 복잡하지 않고, 이해하기 쉬움. 강조할 부분이 명확하여 전달력이 좋음. 일부 문장에서 너무 일반적인 표현이 반복됨. "돈이 많으면 기회가 많아진다", "돈이 많다고 무조건 행복한 것은 아니다" 같은 문장은 보다 구체적인 사례나 강한 표현으로 바꿀 필요가 있음.'},{name:"전략",score:18,color:"#ECC94B",description:`서론-본론-결론 구조가 잘 갖춰져 있음. 
찬성 측이 지나치게 현실적인 접근을 하고 있고, 반대 측은 다소 추상적인 가치 중심 논리를 펼치고 있음. 상대방의 논리를 더욱 구체적으로 겨냥하면 좋을 것.`},{name:"상호작용",score:17,color:"#4FD1C5",description:`반박이 명확하게 이루어져 있고, 논점이 유지됨. 
반박이 지나치게 일반적이어서 "핵심 논리를 깨뜨리는" 강력한 논증이 부족함.`}]},s.value=!0};K("실전 연습");const s=K(!1),o=()=>{document.body.style.overflow="auto",s.value=!1},a=()=>{t.value&&t.value.scrollBy({left:380*3,behavior:"smooth"})},c=()=>{t.value&&t.value.scrollBy({left:-1140,behavior:"smooth"})},l=K([{type:"실전 토론 레포트",date:"2025.02.21 15:29",topic:"행복은 돈으로부터 오는가",position:"찬성",totalScore:87},{type:"실전 연습 레포트",date:"2025.02.19 11:15",topic:"AI 윤리 문제, 개발자가 책임져야 하는가",position:"반대",totalScore:78},{type:"실전 연습 레포트",date:"2025.02.19 11:15",topic:"토론 수업을 도입하여야 하는가",position:"찬성",totalScore:78},{type:"실전 연습 레포트",date:"2025.02.19 11:15",topic:"논리적 사고 연습",position:"반대",totalScore:78},{type:"실전 연습 레포트",date:"2025.02.19 11:15",topic:"논리적 사고 연습",position:"반대",totalScore:78},{type:"실전 연습 레포트",date:"2025.02.19 11:15",topic:"논리적 사고 연습",position:"반대",totalScore:78}]),u=K(["전체","기초 이론","실전 연습","실전 토론"]),f=K("실전 연습"),g=K([{type:"기초 이론 레포트",date:"2025.02.17 10:20"}]),p=_=>{f.value=_};return(_,b)=>(U(),H(he,null,[d("div",AR,[d("main",NR,[d("header",MR,[d("h1",DR,"안녕하세요, "+q(n.value)+"님",1),b[0]||(b[0]=d("p",{class:"feedback"},"최근 토론에서 논리적 전개가 훌륭했어요!",-1)),b[1]||(b[1]=d("p",{class:"unread-notice"},"읽지 않은 레포트 3개가 있습니다",-1))]),d("section",LR,[b[3]||(b[3]=d("h2",{class:"section-title"},"읽지 않은 레포트",-1)),d("div",$R,[d("button",{class:"nav-button prev",onClick:c},"←"),d("div",{class:"report-cards",ref_key:"slider",ref:t},[(U(!0),H(he,null,_e(l.value,(v,m)=>(U(),H("div",{key:m,class:"report-card"},[b[2]||(b[2]=d("div",{class:"report-highlight"},null,-1)),d("div",VR,[d("h3",BR,q(v.type),1),d("p",jR,q(v.date),1),d("p",FR,"주제: "+q(v.topic),1),d("p",UR,"입장: "+q(v.position),1),d("p",HR,"총점: "+q(v.totalScore)+"점",1),d("button",{class:"view-button",onClick:C=>i(v)}," 바로보기 ",8,WR)])]))),128))],512),d("button",{class:"nav-button next",onClick:a},"→")])]),d("section",qR,[b[4]||(b[4]=d("h2",{class:"section-title"},"전체 레포트",-1)),d("div",GR,[(U(!0),H(he,null,_e(u.value,v=>(U(),H("button",{key:v,class:ge(["filter-button",{active:f.value===v}]),onClick:m=>p(v)},q(v),11,zR))),128))]),d("div",KR,[(U(!0),H(he,null,_e(g.value,(v,m)=>(U(),H("div",{key:m,class:"read-report-card"},[d("h3",JR,q(v.type),1),d("p",QR,q(v.date),1)]))),128))])])])]),s.value?(U(),yt(PR,{key:0,report:r.value,onClose:o},null,8,["report"])):Te("",!0)],64))}},YR=ke(XR,[["__scopeId","data-v-030f8823"]]),ZR={class:"debate-performance-container"},eO={class:"performance-card"},tO={class:"total-score-section"},nO={class:"total-score"},rO={class:"performance-categories"},iO=["onClick"],sO={class:"category-title"},oO={key:0,class:"category-details"},aO={__name:"DebateCount",setup(e){const t=K(85),n=K([{label:"논리력",score:29,color:"green-score",description:"O2의 논리력은 현실적인 문제와 대안을 체계적으로 분석했습니다. 난민 수용의 복잡한 측면을 다각도로 접근하며, 국가 주권과 사회 통합의 관점에서 깊이 있는 논거를 제시했습니다.",isExpanded:!1},{label:"표현력",score:18,color:"pink-score",description:"키워드를 활용하여 명확한 메시지를 전달했으나, 감정적 호소나 비유를 통한 표현은 다소 부족했습니다. 더 풍부한 표현 기법을 활용하면 논점의 설득력을 높일 수 있을 것입니다.",isExpanded:!1},{label:"전략",score:18,color:"yellow-score",description:"주요 논점을 잘 파악하고 상대방의 주장을 효과적으로 반박했습니다. 그러나 제한된 시간으로 인해 더 깊이 있는 분석과 확장된 논의가 다소 부족했습니다.",isExpanded:!1},{label:"상호작용",score:20,color:"teal-score",description:"토론 중 상대방을 존중하며 건설적인 대화를 이끌어냈습니다. 청중의 이해를 돕기 위해 논점을 명확히 설명하고, 다른 참가자들의 의견을 경청하는 태도를 보였습니다.",isExpanded:!1}]),r=i=>{n.value[i].isExpanded=!n.value[i].isExpanded};return(i,s)=>(U(),H("div",ZR,[d("div",eO,[s[2]||(s[2]=d("h1",{class:"report-title"},"참여한 토론 관련 데이터가 들어갈 예정입니다",-1)),s[3]||(s[3]=d("p",{class:"participant-name"},"참가자: O2",-1)),d("div",tO,[s[1]||(s[1]=d("p",{class:"total-score-label"},"총점",-1)),d("p",nO,[Ve(q(t.value)+" ",1),s[0]||(s[0]=d("span",{class:"total-score-max"},"/100",-1))])]),d("div",rO,[(U(!0),H(he,null,_e(n.value,(o,a)=>(U(),H("div",{key:a,class:"category-item"},[d("div",{class:"category-header",onClick:c=>r(a)},[d("span",sO,q(o.label),1),d("span",{class:ge(["category-score",o.color])},q(o.score)+"점 ",3)],8,iO),we(Na,{name:"slide"},{default:Pt(()=>[o.isExpanded?(U(),H("div",oO,[d("p",null,q(o.description),1)])):Te("",!0)]),_:2},1024)]))),128))])])]))}},cO=ke(aO,[["__scopeId","data-v-bed456c8"]]),lO={class:"debate-performance-container"},uO={class:"performance-card"},dO={class:"total-score-section"},fO={class:"total-score"},pO={class:"performance-categories"},hO=["onClick"],vO={class:"category-title"},mO={key:0,class:"category-details"},gO={__name:"Score",setup(e){const t=K(85),n=K([{label:"논리력",score:29,color:"green-score",description:"O2의 논리력은 현실적인 문제와 대안을 체계적으로 분석했습니다. 난민 수용의 복잡한 측면을 다각도로 접근하며, 국가 주권과 사회 통합의 관점에서 깊이 있는 논거를 제시했습니다.",isExpanded:!1},{label:"표현력",score:18,color:"pink-score",description:"키워드를 활용하여 명확한 메시지를 전달했으나, 감정적 호소나 비유를 통한 표현은 다소 부족했습니다. 더 풍부한 표현 기법을 활용하면 논점의 설득력을 높일 수 있을 것입니다.",isExpanded:!1},{label:"전략",score:18,color:"yellow-score",description:"주요 논점을 잘 파악하고 상대방의 주장을 효과적으로 반박했습니다. 그러나 제한된 시간으로 인해 더 깊이 있는 분석과 확장된 논의가 다소 부족했습니다.",isExpanded:!1},{label:"상호작용",score:20,color:"teal-score",description:"토론 중 상대방을 존중하며 건설적인 대화를 이끌어냈습니다. 청중의 이해를 돕기 위해 논점을 명확히 설명하고, 다른 참가자들의 의견을 경청하는 태도를 보였습니다.",isExpanded:!1}]),r=i=>{n.value[i].isExpanded=!n.value[i].isExpanded};return(i,s)=>(U(),H("div",lO,[d("div",uO,[s[2]||(s[2]=d("h1",{class:"report-title"},"점수 관련 모달이 들어갈 예정입니다",-1)),s[3]||(s[3]=d("p",{class:"participant-name"},"참가자: O2",-1)),d("div",dO,[s[1]||(s[1]=d("p",{class:"total-score-label"},"총점",-1)),d("p",fO,[Ve(q(t.value)+" ",1),s[0]||(s[0]=d("span",{class:"total-score-max"},"/100",-1))])]),d("div",pO,[(U(!0),H(he,null,_e(n.value,(o,a)=>(U(),H("div",{key:a,class:"category-item"},[d("div",{class:"category-header",onClick:c=>r(a)},[d("span",vO,q(o.label),1),d("span",{class:ge(["category-score",o.color])},q(o.score)+"점 ",3)],8,hO),we(Na,{name:"slide"},{default:Pt(()=>[o.isExpanded?(U(),H("div",mO,[d("p",null,q(o.description),1)])):Te("",!0)]),_:2},1024)]))),128))])])]))}},bO=ke(gO,[["__scopeId","data-v-d4f3476b"]]),yO={class:"max-w-5xl mx-auto p-4 bg-white min-h-screen"},EO={class:"flex justify-between items-center gap-4 mb-12"},_O={class:"flex-1"},SO={class:"bg-white rounded-lg shadow-sm p-6 h-full"},wO={class:"flex flex-col items-center"},CO={class:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center mb-4"},IO={class:"text-lg text-gray-600"},RO={class:"text-lg font-bold text-gray-700 mb-2"},OO={class:"text-gray-500 text-sm mb-2"},kO={class:"text-gray-500 text-xs text-center"},TO={key:0,class:"flex-shrink-0"},xO={__name:"PrepExplain",setup(e){const t=vt(),n=[{letter:"P",title:"Point",subtitle:"명확한 주장",description1:"핵심 메시지를",description2:"간단명료하게"},{letter:"R",title:"Reason",subtitle:"논리적 근거",description1:"주장을 뒷받침하는",description2:"타당한 이유 제시"},{letter:"E",title:"Example",subtitle:"구체적 예시",description1:"근거를 뒷받침하는",description2:"실제 사례 제시"},{letter:"P",title:"Point",subtitle:"주장 재강조",description1:"근거와 예시로",description2:"강화된 주장 마무리"}],r=()=>{t.push({name:"PrepDetail"})};return(i,s)=>(U(),H("div",yO,[s[2]||(s[2]=en('<div class="bg-gray-50 p-8 rounded-2xl mb-8" data-v-c5f60847><div class="flex justify-between items-start" data-v-c5f60847><div data-v-c5f60847><h1 class="text-4xl font-bold text-gray-800 mb-2" data-v-c5f60847> PREP으로 시작하는<br data-v-c5f60847>논리적인 토론 </h1><p class="text-gray-600 mt-4" data-v-c5f60847> 체계적인 논증으로 설득력 있는 토론을 시작해보세요 </p></div><div class="bg-gray-100 p-4 rounded-xl text-center" data-v-c5f60847><p class="text-gray-600 mb-1" data-v-c5f60847>예상 학습 시간</p><p class="text-2xl font-bold text-gray-700" data-v-c5f60847>30분</p></div></div></div>',1)),d("div",EO,[(U(),H(he,null,_e(n,(o,a)=>(U(),H(he,{key:a},[d("div",_O,[d("div",SO,[d("div",wO,[d("div",CO,[d("span",IO,q(o.letter),1)]),d("h3",RO,q(o.title),1),d("p",OO,q(o.subtitle),1),d("p",kO,[Ve(q(o.description1),1),s[0]||(s[0]=d("br",null,null,-1)),Ve(" "+q(o.description2),1)])])])]),a<n.length-1?(U(),H("div",TO,s[1]||(s[1]=[d("svg",{class:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):Te("",!0)],64))),64))]),d("div",{class:"text-center"},[d("button",{onClick:r,class:"px-12 py-3 bg-red-500 text-white rounded-lg hover:bg-[#ff5b5b] transition-colors"}," 시작하기 ")])]))}},PO=ke(xO,[["__scopeId","data-v-c5f60847"]]),AO={props:["length","activeStep"]},NO={class:"root"},MO={class:"container"},DO={class:"progressbar"};function LO(e,t,n,r,i,s){return U(),H("div",NO,[d("div",MO,[d("ul",DO,[(U(!0),H(he,null,_e(n.length,o=>(U(),H("li",{key:o,class:ge({active:o<=n.activeStep})},q(o),3))),128))])])])}const $O=ke(AO,[["render",LO],["__scopeId","data-v-7e3135a1"]]),VO={class:"max-w-3xl mx-auto p-4 min-h-screen"},BO={key:0,class:"flex items-center justify-center h-screen"},jO={key:1},FO={class:"flex justify-between items-center mb-4 bg-gray-50 p-4"},UO={class:"bg-white rounded-2xl p-4 shadow mb-4"},HO={class:"flex justify-between items-start"},WO={class:"text-xl text-gray-800 font-semibold"},qO={class:"bg-red-500 rounded-full w-16 h-16 flex flex-col items-center justify-center text-white"},GO={class:"font-semibold"},zO={class:"bg-white rounded-2xl p-6 shadow mb-4"},KO={class:"space-y-6"},JO={class:"flex items-baseline gap-2 mb-2"},QO={class:"font-medium text-black"},XO={class:"text-sm text-gray-500"},YO=["onUpdate:modelValue","placeholder"],ZO={class:"flex justify-center"},Ko=4,ek={__name:"PrepPracticeDetail",setup(e){const t="https://i12a802.p.ssafy.io",n="https://i12a802.p.ssafy.io/python",r=K(!1),i=vt(),s=K([]),o=K(1),a=K([]),c=K([{title:"주장",description:"핵심 주장을 작성하세요",placeholder:"주장을 입력하세요",value:""},{title:"근거",description:"주장을 뒷받침하는 근거를 제시하세요",placeholder:"근거를 입력하세요",value:""},{title:"예시",description:"구체적인 사례를 들어보세요",placeholder:"예시를 입력하세요",value:""},{title:"주장 재진술",description:"주장을 다시 한 번 강조해보세요",placeholder:"주장을 다시 한 번 강조해보세요",value:""}]),l=()=>{v(),o.value<Ko?o.value++:b(),console.log("currentStep:",o.value),console.log("현재 주제:",s.value[o.value-1]),window.scrollTo({top:0,behavior:"smooth"})},u=K(300);let f=null;const g=()=>{f&&clearInterval(f),u.value=300,f=setInterval(()=>{u.value--,u.value<=0&&(clearInterval(f),l())},1e3)},p=Ie(()=>{const m=Math.floor(u.value/60),C=u.value%60;return`${m}:${C.toString().padStart(2,"0")}`}),_=Ie(()=>s.value[o.value-1]);gt(o,()=>{g()});const b=async()=>{r.value=!0;const m=2,C={};a.value.forEach((w,h)=>{const S=h+1;C[`topic${S}`]=w.topic,C[`point${S}`]=w.point,C[`reason${S}`]=w.reason,C[`example${S}`]=w.example,C[`point_restatement${S}`]=w.point_restatement});const k={problem_id:"1-1",user_id:m,inputs:C};try{const w=await fetch(n+"/api/practice/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!w.ok)throw new Error("데이터 전송 실패");const h=await w.json();console.log("제출 결과:",h);const S=JSON.stringify(h);sessionStorage.setItem("prepResult",S),i.push({name:"PrepResult"})}catch(w){console.error("제출 중 오류 발생:",w)}finally{r.value=!1}},v=()=>{const m={topic:s.value[o.value-1],point:c.value[0].value,reason:c.value[1].value,example:c.value[2].value,point_restatement:c.value[3].value};a.value.push(m),console.log("라운드 데이터:",a.value),c.value.forEach(C=>C.value="")};return Ze(async()=>{try{const m=await fetch(t+"/api/subjects/random");if(!m.ok)throw new Error("주제 데이터를 불러오는데 실패했습니다.");const C=await m.json();console.log("주제 데이터:",C),s.value=[C.subject1,C.subject2,C.subject3,C.subject4]}catch(m){console.error("주제 불러오기 오류:",m)}g()}),Ci(()=>{f&&clearInterval(f)}),(m,C)=>(U(),H("div",VO,[r.value?(U(),H("div",BO,C[0]||(C[0]=[d("div",{class:"text-2xl font-bold"},"로딩중...",-1)]))):(U(),H("div",jO,[d("div",FO,[C[1]||(C[1]=d("h1",{class:"text-2xl font-medium text-gray-700"},"PREP 구조 작성 연습",-1)),we($O,{length:Ko,activeStep:o.value},null,8,["activeStep"])]),d("div",UO,[d("div",HO,[d("div",null,[C[2]||(C[2]=d("p",{class:"text-gray-500 text-sm mb-2"},"토론 주제",-1)),d("h2",WO,q(_.value),1)]),d("div",qO,[d("p",GO,q(p.value),1),C[3]||(C[3]=d("p",{class:"text-xs"},"남은 시간",-1))])])]),d("div",zO,[d("div",KO,[(U(!0),H(he,null,_e(c.value,(k,w)=>(U(),H("div",{key:w,class:"p-4 rounded-lg bg-gray-50"},[d("div",JO,[d("h3",QO,q(k.title),1),d("p",XO,q(k.description),1)]),Xe(d("input",{type:"text","onUpdate:modelValue":h=>k.value=h,placeholder:k.placeholder,class:"w-full p-3 rounded-lg border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#FF6B6B] focus:border-transparent"},null,8,YO),[[et,k.value]])]))),128))])]),d("div",ZO,[d("button",{onClick:l,class:"px-6 py-2 min-w-[120px] rounded-full bg-red-500 text-white"},q(o.value===Ko?"제출하기":"다음으로"),1)])]))]))}},tk={class:"w-full min-h-screen bg-white"},nk={class:"container mx-auto px-4"},rk={class:"py-5"},ik={class:"w-full p-6 rounded-2xl bg-red-50"},sk={class:"flex items-center gap-2 mb-4"},ok={class:"text-3xl font-semibold text-gray-800"},ak={class:"relative h-5 w-full bg-gray-100 rounded-full overflow-hidden"},ck={class:"grid grid-cols-2 gap-8"},lk={class:"flex items-center gap-2 mb-5"},uk={class:"text-lg font-semibold text-gray-800"},dk={class:"text-sm text-gray-600"},fk={class:"flex items-center gap-3 mb-6"},pk={class:"relative flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},hk={class:"text-sm text-gray-600"},vk={class:"space-y-2"},mk={__name:"PrepResult",setup(e){const t=vt(),n=K([]),r=Ie(()=>[{title:"주장",titleEn:"Point",score:n.value.point_score||0,maxScore:25,feedback:[n.value.point_comment||""]},{title:"근거",titleEn:"Reason",score:n.value.reason_score||0,maxScore:30,feedback:[n.value.reason_comment||""]},{title:"예시",titleEn:"Example",score:n.value.example_score||0,maxScore:25,feedback:[n.value.example_comment||""]},{title:"재진술",titleEn:"Restatement",score:n.value.point_restatement_point||0,maxScore:20,feedback:[n.value.point_restatement_comment||""]}]),i=()=>{sessionStorage.removeItem("prepResult"),t.push("/practice-main")};return Ze(()=>{const s=sessionStorage.getItem("prepResult");if(s)try{n.value=JSON.parse(s),console.log("resultObj:",n.value)}catch(o){console.error("result 파싱 오류:",o)}}),(s,o)=>(U(),H("div",tk,[o[2]||(o[2]=d("header",{class:"h-16 bg-gray-50 px-8 flex items-center"},[d("h1",{class:"text-2xl font-semibold text-gray-700"},"PREP 평가 결과")],-1)),d("div",nk,[d("div",rk,[d("div",ik,[o[1]||(o[1]=d("p",{class:"text-gray-600 text-base mb-2"},"전체 평가",-1)),d("div",sk,[d("span",ok,q(n.value.total),1),o[0]||(o[0]=d("span",{class:"text-sm text-gray-600"},"/ 100점",-1))]),d("div",ak,[d("div",{class:"absolute h-full bg-red-400 rounded-full",style:We({width:`${Number(n.value.total)}%`})},null,4)])])]),d("div",ck,[(U(!0),H(he,null,_e(r.value,(a,c)=>(U(),H("div",{key:c,class:"p-6 rounded-2xl bg-white shadow-lg"},[d("div",lk,[d("h2",uk,q(a.title),1),d("span",dk,"("+q(a.titleEn)+")",1)]),d("div",fk,[d("div",pk,[d("div",{class:"absolute h-full bg-red-400 rounded-full",style:We({width:`${a.score/a.maxScore*100}%`})},null,4)]),d("span",hk,q(a.score)+"/"+q(a.maxScore),1)]),d("div",vk,[(U(!0),H(he,null,_e(a.feedback,(l,u)=>(U(),H("p",{key:u,class:"text-sm text-gray-600"},q(l),1))),128))])]))),128))]),d("div",{class:"py-6 flex justify-end gap-4"},[d("button",{onClick:i,class:"px-6 py-2 rounded-full bg-red-400 text-white font-medium hover:bg-red-500 transition-colors"}," 처음으로 ")])])]))}},gk=Ob({history:nb("/"),routes:[{path:"/",name:"root",component:()=>new Promise(e=>{const t=localStorage.getItem("token");e(t?m_:cE)})},{path:"/info",name:"info",component:Z_},{path:"/practice-main",name:"practice-main",component:ew},{path:"/ai-debate",name:"AIDebate",component:mp},{path:"/debate-select",name:"debateSelection",component:Rw},{path:"/category-selection",name:"CategorySelection",component:uw},{path:"/debate-list",name:"debateList",component:qw},{path:"/debate-prepare/:debateId",name:"debatePrepare",component:RC,props:!0},{path:"/debate/:debateId",name:"debateRoom",component:BI,props:!0},{path:"/debate-watch",name:"debateWatchRoom",component:bR},{path:"/stats/debate-count",name:"debateCount",component:cO},{path:"/stats/score",name:"score",component:bO},{path:"/stats/feedback",name:"feedback",component:YR},{path:"/prep/explain",name:"PrepExplain",component:PO},{path:"/prep/detail",name:"PrepDetail",component:ek},{path:"/prep/result",name:"PrepResult",component:mk},{path:"/prep",redirect:"/prep/explain"}]}),Ya=Pm(Py);Ya.use(Mm().use(Jm));Ya.use(gk);Ya.mount("#app");
