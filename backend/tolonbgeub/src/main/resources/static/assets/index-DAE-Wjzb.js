(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ta(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const De={},rr=[],wt=()=>{},Ip=()=>!1,os=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),na=e=>e.startsWith("onUpdate:"),qe=Object.assign,ra=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Rp=Object.prototype.hasOwnProperty,Me=(e,t)=>Rp.call(e,t),_e=Array.isArray,ir=e=>di(e)==="[object Map]",as=e=>di(e)==="[object Set]",Ba=e=>di(e)==="[object Date]",Ie=e=>typeof e=="function",Ue=e=>typeof e=="string",Lt=e=>typeof e=="symbol",$e=e=>e!==null&&typeof e=="object",$u=e=>($e(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),Vu=Object.prototype.toString,di=e=>Vu.call(e),Op=e=>di(e).slice(8,-1),Bu=e=>di(e)==="[object Object]",ia=e=>Ue(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Gr=ta(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Tp=/-(\w)/g,Et=cs(e=>e.replace(Tp,(t,n)=>n?n.toUpperCase():"")),kp=/\B([A-Z])/g,an=cs(e=>e.replace(kp,"-$1").toLowerCase()),ls=cs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ls=cs(e=>e?`on${ls(e)}`:""),rn=(e,t)=>!Object.is(e,t),Di=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ju=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Wi=e=>{const t=parseFloat(e);return isNaN(t)?e:t},xp=e=>{const t=Ue(e)?Number(e):NaN;return isNaN(t)?e:t};let ja;const us=()=>ja||(ja=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function je(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Ue(r)?Mp(r):je(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(Ue(e)||$e(e))return e}const Pp=/;(?![^(]*\))/g,Ap=/:([^]+)/,Np=/\/\*[^]*?\*\//g;function Mp(e){const t={};return e.replace(Np,"").split(Pp).forEach(n=>{if(n){const r=n.split(Ap);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function we(e){let t="";if(Ue(e))t=e;else if(_e(e))for(let n=0;n<e.length;n++){const r=we(e[n]);r&&(t+=r+" ")}else if($e(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Lp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dp=ta(Lp);function Fu(e){return!!e||e===""}function $p(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ds(e[r],t[r]);return n}function ds(e,t){if(e===t)return!0;let n=Ba(e),r=Ba(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Lt(e),r=Lt(t),n||r)return e===t;if(n=_e(e),r=_e(t),n||r)return n&&r?$p(e,t):!1;if(n=$e(e),r=$e(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!ds(e[o],t[o]))return!1}}return String(e)===String(t)}function Vp(e,t){return e.findIndex(n=>ds(n,t))}const Uu=e=>!!(e&&e.__v_isRef===!0),X=e=>Ue(e)?e:e==null?"":_e(e)||$e(e)&&(e.toString===Vu||!Ie(e.toString))?Uu(e)?X(e.value):JSON.stringify(e,Hu,2):String(e),Hu=(e,t)=>Uu(t)?Hu(e,t.value):ir(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[Ds(r,s)+" =>"]=i,n),{})}:as(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ds(n))}:Lt(t)?Ds(t):$e(t)&&!_e(t)&&!Bu(t)?String(t):t,Ds=(e,t="")=>{var n;return Lt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rt;class Wu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=rt,!t&&rt&&(this.index=(rt.scopes||(rt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=rt;try{return rt=this,t()}finally{rt=n}}}on(){rt=this}off(){rt=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function qu(e){return new Wu(e)}function Gu(){return rt}function Bp(e,t=!1){rt&&rt.cleanups.push(e)}let Be;const $s=new WeakSet;class zu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,rt&&rt.active&&rt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$s.has(this)&&($s.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ju(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fa(this),Xu(this);const t=Be,n=Ct;Be=this,Ct=!0;try{return this.fn()}finally{Yu(this),Be=t,Ct=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)aa(t);this.deps=this.depsTail=void 0,Fa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$s.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ao(this)&&this.run()}get dirty(){return Ao(this)}}let Ku=0,zr,Kr;function Ju(e,t=!1){if(e.flags|=8,t){e.next=Kr,Kr=e;return}e.next=zr,zr=e}function sa(){Ku++}function oa(){if(--Ku>0)return;if(Kr){let t=Kr;for(Kr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;zr;){let t=zr;for(zr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Xu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Yu(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),aa(r),jp(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Ao(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ni))return;e.globalVersion=ni;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ao(e)){e.flags&=-3;return}const n=Be,r=Ct;Be=e,Ct=!0;try{Xu(e);const i=e.fn(e._value);(t.version===0||rn(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Be=n,Ct=r,Yu(e),e.flags&=-3}}function aa(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)aa(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function jp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ct=!0;const Zu=[];function cn(){Zu.push(Ct),Ct=!1}function ln(){const e=Zu.pop();Ct=e===void 0?!0:e}function Fa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Be;Be=void 0;try{t()}finally{Be=n}}}let ni=0;class Fp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ca{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Be||!Ct||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new Fp(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,ed(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=r)}return n}trigger(t){this.version++,ni++,this.notify(t)}notify(t){sa();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{oa()}}}function ed(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ed(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const qi=new WeakMap,Sn=Symbol(""),No=Symbol(""),ri=Symbol("");function Je(e,t,n){if(Ct&&Be){let r=qi.get(e);r||qi.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new ca),i.map=r,i.key=n),i.track()}}function Bt(e,t,n,r,i,s){const o=qi.get(e);if(!o){ni++;return}const a=c=>{c&&c.trigger()};if(sa(),t==="clear")o.forEach(a);else{const c=_e(e),l=c&&ia(n);if(c&&n==="length"){const u=Number(r);o.forEach((d,g)=>{(g==="length"||g===ri||!Lt(g)&&g>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(ri)),t){case"add":c?l&&a(o.get("length")):(a(o.get(Sn)),ir(e)&&a(o.get(No)));break;case"delete":c||(a(o.get(Sn)),ir(e)&&a(o.get(No)));break;case"set":ir(e)&&a(o.get(Sn));break}}oa()}function Up(e,t){const n=qi.get(e);return n&&n.get(t)}function Dn(e){const t=ke(e);return t===e?t:(Je(t,"iterate",ri),bt(e)?t:t.map(Xe))}function fs(e){return Je(e=ke(e),"iterate",ri),e}const Hp={__proto__:null,[Symbol.iterator](){return Vs(this,Symbol.iterator,Xe)},concat(...e){return Dn(this).concat(...e.map(t=>_e(t)?Dn(t):t))},entries(){return Vs(this,"entries",e=>(e[1]=Xe(e[1]),e))},every(e,t){return Dt(this,"every",e,t,void 0,arguments)},filter(e,t){return Dt(this,"filter",e,t,n=>n.map(Xe),arguments)},find(e,t){return Dt(this,"find",e,t,Xe,arguments)},findIndex(e,t){return Dt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dt(this,"findLast",e,t,Xe,arguments)},findLastIndex(e,t){return Dt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Bs(this,"includes",e)},indexOf(...e){return Bs(this,"indexOf",e)},join(e){return Dn(this).join(e)},lastIndexOf(...e){return Bs(this,"lastIndexOf",e)},map(e,t){return Dt(this,"map",e,t,void 0,arguments)},pop(){return gr(this,"pop")},push(...e){return gr(this,"push",e)},reduce(e,...t){return Ua(this,"reduce",e,t)},reduceRight(e,...t){return Ua(this,"reduceRight",e,t)},shift(){return gr(this,"shift")},some(e,t){return Dt(this,"some",e,t,void 0,arguments)},splice(...e){return gr(this,"splice",e)},toReversed(){return Dn(this).toReversed()},toSorted(e){return Dn(this).toSorted(e)},toSpliced(...e){return Dn(this).toSpliced(...e)},unshift(...e){return gr(this,"unshift",e)},values(){return Vs(this,"values",Xe)}};function Vs(e,t,n){const r=fs(e),i=r[t]();return r!==e&&!bt(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const Wp=Array.prototype;function Dt(e,t,n,r,i,s){const o=fs(e),a=o!==e&&!bt(e),c=o[t];if(c!==Wp[t]){const d=c.apply(e,s);return a?Xe(d):d}let l=n;o!==e&&(a?l=function(d,g){return n.call(this,Xe(d),g,e)}:n.length>2&&(l=function(d,g){return n.call(this,d,g,e)}));const u=c.call(o,l,r);return a&&i?i(u):u}function Ua(e,t,n,r){const i=fs(e);let s=n;return i!==e&&(bt(e)?n.length>3&&(s=function(o,a,c){return n.call(this,o,a,c,e)}):s=function(o,a,c){return n.call(this,o,Xe(a),c,e)}),i[t](s,...r)}function Bs(e,t,n){const r=ke(e);Je(r,"iterate",ri);const i=r[t](...n);return(i===-1||i===!1)&&da(n[0])?(n[0]=ke(n[0]),r[t](...n)):i}function gr(e,t,n=[]){cn(),sa();const r=ke(e)[t].apply(e,n);return oa(),ln(),r}const qp=ta("__proto__,__v_isRef,__isVue"),td=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Lt));function Gp(e){Lt(e)||(e=String(e));const t=ke(this);return Je(t,"has",e),t.hasOwnProperty(e)}class nd{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?nh:od:s?sd:id).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=_e(t);if(!i){let c;if(o&&(c=Hp[n]))return c;if(n==="hasOwnProperty")return Gp}const a=Reflect.get(t,n,He(t)?t:r);return(Lt(n)?td.has(n):qp(n))||(i||Je(t,"get",n),s)?a:He(a)?o&&ia(n)?a:a.value:$e(a)?i?cd(a):fi(a):a}}class rd extends nd{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const c=In(s);if(!bt(r)&&!In(r)&&(s=ke(s),r=ke(r)),!_e(t)&&He(s)&&!He(r))return c?!1:(s.value=r,!0)}const o=_e(t)&&ia(n)?Number(n)<t.length:Me(t,n),a=Reflect.set(t,n,r,He(t)?t:i);return t===ke(i)&&(o?rn(r,s)&&Bt(t,"set",n,r):Bt(t,"add",n,r)),a}deleteProperty(t,n){const r=Me(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Bt(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Lt(n)||!td.has(n))&&Je(t,"has",n),r}ownKeys(t){return Je(t,"iterate",_e(t)?"length":Sn),Reflect.ownKeys(t)}}class zp extends nd{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Kp=new rd,Jp=new zp,Xp=new rd(!0);const Mo=e=>e,bi=e=>Reflect.getPrototypeOf(e);function Yp(e,t,n){return function(...r){const i=this.__v_raw,s=ke(i),o=ir(s),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=i[e](...r),u=n?Mo:t?Lo:Xe;return!t&&Je(s,"iterate",c?No:Sn),{next(){const{value:d,done:g}=l.next();return g?{value:d,done:g}:{value:a?[u(d[0]),u(d[1])]:u(d),done:g}},[Symbol.iterator](){return this}}}}function yi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Qp(e,t){const n={get(i){const s=this.__v_raw,o=ke(s),a=ke(i);e||(rn(i,a)&&Je(o,"get",i),Je(o,"get",a));const{has:c}=bi(o),l=t?Mo:e?Lo:Xe;if(c.call(o,i))return l(s.get(i));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Je(ke(i),"iterate",Sn),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=ke(s),a=ke(i);return e||(rn(i,a)&&Je(o,"has",i),Je(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,c=ke(a),l=t?Mo:e?Lo:Xe;return!e&&Je(c,"iterate",Sn),a.forEach((u,d)=>i.call(s,l(u),l(d),o))}};return qe(n,e?{add:yi("add"),set:yi("set"),delete:yi("delete"),clear:yi("clear")}:{add(i){!t&&!bt(i)&&!In(i)&&(i=ke(i));const s=ke(this);return bi(s).has.call(s,i)||(s.add(i),Bt(s,"add",i,i)),this},set(i,s){!t&&!bt(s)&&!In(s)&&(s=ke(s));const o=ke(this),{has:a,get:c}=bi(o);let l=a.call(o,i);l||(i=ke(i),l=a.call(o,i));const u=c.call(o,i);return o.set(i,s),l?rn(s,u)&&Bt(o,"set",i,s):Bt(o,"add",i,s),this},delete(i){const s=ke(this),{has:o,get:a}=bi(s);let c=o.call(s,i);c||(i=ke(i),c=o.call(s,i)),a&&a.call(s,i);const l=s.delete(i);return c&&Bt(s,"delete",i,void 0),l},clear(){const i=ke(this),s=i.size!==0,o=i.clear();return s&&Bt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Yp(i,e,t)}),n}function la(e,t){const n=Qp(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Me(n,i)&&i in r?n:r,i,s)}const Zp={get:la(!1,!1)},eh={get:la(!1,!0)},th={get:la(!0,!1)};const id=new WeakMap,sd=new WeakMap,od=new WeakMap,nh=new WeakMap;function rh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ih(e){return e.__v_skip||!Object.isExtensible(e)?0:rh(Op(e))}function fi(e){return In(e)?e:ua(e,!1,Kp,Zp,id)}function ad(e){return ua(e,!1,Xp,eh,sd)}function cd(e){return ua(e,!0,Jp,th,od)}function ua(e,t,n,r,i){if(!$e(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=ih(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return i.set(e,a),a}function sn(e){return In(e)?sn(e.__v_raw):!!(e&&e.__v_isReactive)}function In(e){return!!(e&&e.__v_isReadonly)}function bt(e){return!!(e&&e.__v_isShallow)}function da(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function fa(e){return!Me(e,"__v_skip")&&Object.isExtensible(e)&&ju(e,"__v_skip",!0),e}const Xe=e=>$e(e)?fi(e):e,Lo=e=>$e(e)?cd(e):e;function He(e){return e?e.__v_isRef===!0:!1}function K(e){return ld(e,!1)}function sh(e){return ld(e,!0)}function ld(e,t){return He(e)?e:new oh(e,t)}class oh{constructor(t,n){this.dep=new ca,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ke(t),this._value=n?t:Xe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||bt(t)||In(t);t=r?t:ke(t),rn(t,n)&&(this._rawValue=t,this._value=r?t:Xe(t),this.dep.trigger())}}function Fe(e){return He(e)?e.value:e}const ah={get:(e,t,n)=>t==="__v_raw"?e:Fe(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return He(i)&&!He(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function ud(e){return sn(e)?e:new Proxy(e,ah)}function ch(e){const t=_e(e)?new Array(e.length):{};for(const n in e)t[n]=uh(e,n);return t}class lh{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Up(ke(this._object),this._key)}}function uh(e,t,n){const r=e[t];return He(r)?r:new lh(e,t,n)}class dh{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ca(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ni-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Ju(this,!0),!0}get value(){const t=this.dep.track();return Qu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fh(e,t,n=!1){let r,i;return Ie(e)?r=e:(r=e.get,i=e.set),new dh(r,i,n)}const Ei={},Gi=new WeakMap;let bn;function ph(e,t=!1,n=bn){if(n){let r=Gi.get(n);r||Gi.set(n,r=[]),r.push(e)}}function hh(e,t,n=De){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:c}=n,l=S=>i?S:bt(S)||i===!1||i===0?jt(S,1):jt(S);let u,d,g,f,_=!1,b=!1;if(He(e)?(d=()=>e.value,_=bt(e)):sn(e)?(d=()=>l(e),_=!0):_e(e)?(b=!0,_=e.some(S=>sn(S)||bt(S)),d=()=>e.map(S=>{if(He(S))return S.value;if(sn(S))return l(S);if(Ie(S))return c?c(S,2):S()})):Ie(e)?t?d=c?()=>c(e,2):e:d=()=>{if(g){cn();try{g()}finally{ln()}}const S=bn;bn=u;try{return c?c(e,3,[f]):e(f)}finally{bn=S}}:d=wt,t&&i){const S=d,p=i===!0?1/0:i;d=()=>jt(S(),p)}const v=Gu(),h=()=>{u.stop(),v&&v.active&&ra(v.effects,u)};if(s&&t){const S=t;t=(...p)=>{S(...p),h()}}let I=b?new Array(e.length).fill(Ei):Ei;const O=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(t){const p=u.run();if(i||_||(b?p.some((w,P)=>rn(w,I[P])):rn(p,I))){g&&g();const w=bn;bn=u;try{const P=[p,I===Ei?void 0:b&&I[0]===Ei?[]:I,f];c?c(t,3,P):t(...P),I=p}finally{bn=w}}}else u.run()};return a&&a(O),u=new zu(d),u.scheduler=o?()=>o(O,!1):O,f=S=>ph(S,!1,u),g=u.onStop=()=>{const S=Gi.get(u);if(S){if(c)c(S,4);else for(const p of S)p();Gi.delete(u)}},t?r?O(!0):I=u.run():o?o(O.bind(null,!0),!0):u.run(),h.pause=u.pause.bind(u),h.resume=u.resume.bind(u),h.stop=h,h}function jt(e,t=1/0,n){if(t<=0||!$e(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,He(e))jt(e.value,t,n);else if(_e(e))for(let r=0;r<e.length;r++)jt(e[r],t,n);else if(as(e)||ir(e))e.forEach(r=>{jt(r,t,n)});else if(Bu(e)){for(const r in e)jt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&jt(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pi(e,t,n,r){try{return r?e(...r):e()}catch(i){ps(i,t,n)}}function It(e,t,n,r){if(Ie(e)){const i=pi(e,t,n,r);return i&&$u(i)&&i.catch(s=>{ps(s,t,n)}),i}if(_e(e)){const i=[];for(let s=0;s<e.length;s++)i.push(It(e[s],t,n,r));return i}}function ps(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||De;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,c,l)===!1)return}a=a.parent}if(s){cn(),pi(s,null,10,[e,c,l]),ln();return}}mh(e,n,i,r,o)}function mh(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const it=[];let At=-1;const sr=[];let Qt=null,tr=0;const dd=Promise.resolve();let zi=null;function hs(e){const t=zi||dd;return e?t.then(this?e.bind(this):e):t}function vh(e){let t=At+1,n=it.length;for(;t<n;){const r=t+n>>>1,i=it[r],s=ii(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function pa(e){if(!(e.flags&1)){const t=ii(e),n=it[it.length-1];!n||!(e.flags&2)&&t>=ii(n)?it.push(e):it.splice(vh(t),0,e),e.flags|=1,fd()}}function fd(){zi||(zi=dd.then(md))}function pd(e){_e(e)?sr.push(...e):Qt&&e.id===-1?Qt.splice(tr+1,0,e):e.flags&1||(sr.push(e),e.flags|=1),fd()}function Ha(e,t,n=At+1){for(;n<it.length;n++){const r=it[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;it.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function hd(e){if(sr.length){const t=[...new Set(sr)].sort((n,r)=>ii(n)-ii(r));if(sr.length=0,Qt){Qt.push(...t);return}for(Qt=t,tr=0;tr<Qt.length;tr++){const n=Qt[tr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Qt=null,tr=0}}const ii=e=>e.id==null?e.flags&2?-1:1/0:e.id;function md(e){try{for(At=0;At<it.length;At++){const t=it[At];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;At<it.length;At++){const t=it[At];t&&(t.flags&=-2)}At=-1,it.length=0,hd(),zi=null,(it.length||sr.length)&&md()}}let ot=null,vd=null;function Ki(e){const t=ot;return ot=e,vd=e&&e.type.__scopeId||null,t}function St(e,t=ot,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ec(-1);const s=Ki(t);let o;try{o=e(...i)}finally{Ki(s),r._d&&ec(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ze(e,t){if(ot===null)return e;const n=ys(ot),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,c=De]=t[i];s&&(Ie(s)&&(s={mounted:s,updated:s}),s.deep&&jt(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function dn(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(cn(),It(c,n,8,[e.el,a,e,t]),ln())}}const gh=Symbol("_vte"),gd=e=>e.__isTeleport,Zt=Symbol("_leaveCb"),_i=Symbol("_enterCb");function bd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return We(()=>{e.isMounted=!0}),hi(()=>{e.isUnmounting=!0}),e}const mt=[Function,Array],yd={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mt,onEnter:mt,onAfterEnter:mt,onEnterCancelled:mt,onBeforeLeave:mt,onLeave:mt,onAfterLeave:mt,onLeaveCancelled:mt,onBeforeAppear:mt,onAppear:mt,onAfterAppear:mt,onAppearCancelled:mt},Ed=e=>{const t=e.subTree;return t.component?Ed(t.component):t},bh={name:"BaseTransition",props:yd,setup(e,{slots:t}){const n=ga(),r=bd();return()=>{const i=t.default&&ha(t.default(),!0);if(!i||!i.length)return;const s=_d(i),o=ke(e),{mode:a}=o;if(r.isLeaving)return js(s);const c=Wa(s);if(!c)return js(s);let l=si(c,o,r,n,d=>l=d);c.type!==lt&&Rn(c,l);let u=n.subTree&&Wa(n.subTree);if(u&&u.type!==lt&&!yn(c,u)&&Ed(n).type!==lt){let d=si(u,o,r,n);if(Rn(u,d),a==="out-in"&&c.type!==lt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},js(s);a==="in-out"&&c.type!==lt?d.delayLeave=(g,f,_)=>{const b=Sd(r,u);b[String(u.key)]=u,g[Zt]=()=>{f(),g[Zt]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{_(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function _d(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==lt){t=n;break}}return t}const yh=bh;function Sd(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function si(e,t,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:g,onLeave:f,onAfterLeave:_,onLeaveCancelled:b,onBeforeAppear:v,onAppear:h,onAfterAppear:I,onAppearCancelled:O}=t,S=String(e.key),p=Sd(n,e),w=(C,T)=>{C&&It(C,r,9,T)},P=(C,T)=>{const M=T[1];w(C,T),_e(C)?C.every(N=>N.length<=1)&&M():C.length<=1&&M()},y={mode:o,persisted:a,beforeEnter(C){let T=c;if(!n.isMounted)if(s)T=v||c;else return;C[Zt]&&C[Zt](!0);const M=p[S];M&&yn(e,M)&&M.el[Zt]&&M.el[Zt](),w(T,[C])},enter(C){let T=l,M=u,N=d;if(!n.isMounted)if(s)T=h||l,M=I||u,N=O||d;else return;let E=!1;const k=C[_i]=B=>{E||(E=!0,B?w(N,[C]):w(M,[C]),y.delayedLeave&&y.delayedLeave(),C[_i]=void 0)};T?P(T,[C,k]):k()},leave(C,T){const M=String(e.key);if(C[_i]&&C[_i](!0),n.isUnmounting)return T();w(g,[C]);let N=!1;const E=C[Zt]=k=>{N||(N=!0,T(),k?w(b,[C]):w(_,[C]),C[Zt]=void 0,p[M]===e&&delete p[M])};p[M]=e,f?P(f,[C,E]):E()},clone(C){const T=si(C,t,n,r,i);return i&&i(T),T}};return y}function js(e){if(ms(e))return e=on(e),e.children=null,e}function Wa(e){if(!ms(e))return gd(e.type)&&e.children?_d(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ie(n.default))return n.default()}}function Rn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ha(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===me?(o.patchFlag&128&&i++,r=r.concat(ha(o.children,t,a))):(t||o.type!==lt)&&r.push(a!=null?on(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Pe(e,t){return Ie(e)?qe({name:e.name},t,{setup:e}):e}function wd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ji(e,t,n,r,i=!1){if(_e(e)){e.forEach((_,b)=>Ji(_,t&&(_e(t)?t[b]:t),n,r,i));return}if(Jr(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ji(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?ys(r.component):r.el,o=i?null:s,{i:a,r:c}=e,l=t&&t.r,u=a.refs===De?a.refs={}:a.refs,d=a.setupState,g=ke(d),f=d===De?()=>!1:_=>Me(g,_);if(l!=null&&l!==c&&(Ue(l)?(u[l]=null,f(l)&&(d[l]=null)):He(l)&&(l.value=null)),Ie(c))pi(c,a,12,[o,u]);else{const _=Ue(c),b=He(c);if(_||b){const v=()=>{if(e.f){const h=_?f(c)?d[c]:u[c]:c.value;i?_e(h)&&ra(h,s):_e(h)?h.includes(s)||h.push(s):_?(u[c]=[s],f(c)&&(d[c]=u[c])):(c.value=[s],e.k&&(u[e.k]=c.value))}else _?(u[c]=o,f(c)&&(d[c]=o)):b&&(c.value=o,e.k&&(u[e.k]=o))};o?(v.id=-1,dt(v,n)):v()}}}us().requestIdleCallback;us().cancelIdleCallback;const Jr=e=>!!e.type.__asyncLoader,ms=e=>e.type.__isKeepAlive;function Eh(e,t){Cd(e,"a",t)}function _h(e,t){Cd(e,"da",t)}function Cd(e,t,n=Ge){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(vs(t,r,n),n){let i=n.parent;for(;i&&i.parent;)ms(i.parent.vnode)&&Sh(r,t,n,i),i=i.parent}}function Sh(e,t,n,r){const i=vs(t,e,r,!0);Ht(()=>{ra(r[t],i)},n)}function vs(e,t,n=Ge,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{cn();const a=mi(n),c=It(t,n,e,o);return a(),ln(),c});return r?i.unshift(s):i.push(s),s}}const Ut=e=>(t,n=Ge)=>{(!ai||e==="sp")&&vs(e,(...r)=>t(...r),n)},wh=Ut("bm"),We=Ut("m"),Id=Ut("bu"),Rd=Ut("u"),hi=Ut("bum"),Ht=Ut("um"),Ch=Ut("sp"),Ih=Ut("rtg"),Rh=Ut("rtc");function Oh(e,t=Ge){vs("ec",e,t)}const Od="components";function gt(e,t){return kd(Od,e,!0,t)||e}const Td=Symbol.for("v-ndc");function Th(e){return Ue(e)?kd(Od,e,!1)||e:e||Td}function kd(e,t,n=!0,r=!1){const i=ot||Ge;if(i){const s=i.type;{const a=mm(s,!1);if(a&&(a===t||a===Et(t)||a===ls(Et(t))))return s}const o=qa(i[e]||s[e],t)||qa(i.appContext[e],t);return!o&&r?s:o}}function qa(e,t){return e&&(e[t]||e[Et(t)]||e[ls(Et(t))])}function Ce(e,t,n,r){let i;const s=n,o=_e(e);if(o||Ue(e)){const a=o&&sn(e);let c=!1;a&&(c=!bt(e),e=fs(e)),i=new Array(e.length);for(let l=0,u=e.length;l<u;l++)i[l]=t(c?Xe(e[l]):e[l],l,void 0,s)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s)}else if($e(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=t(e[u],u,c,s)}}else i=[];return i}const Do=e=>e?Xd(e)?ys(e):Do(e.parent):null,Xr=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Do(e.parent),$root:e=>Do(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Pd(e),$forceUpdate:e=>e.f||(e.f=()=>{pa(e.update)}),$nextTick:e=>e.n||(e.n=hs.bind(e.proxy)),$watch:e=>Xh.bind(e)}),Fs=(e,t)=>e!==De&&!e.__isScriptSetup&&Me(e,t),kh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(Fs(r,t))return o[t]=1,r[t];if(i!==De&&Me(i,t))return o[t]=2,i[t];if((l=e.propsOptions[0])&&Me(l,t))return o[t]=3,s[t];if(n!==De&&Me(n,t))return o[t]=4,n[t];$o&&(o[t]=0)}}const u=Xr[t];let d,g;if(u)return t==="$attrs"&&Je(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==De&&Me(n,t))return o[t]=4,n[t];if(g=c.config.globalProperties,Me(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return Fs(i,t)?(i[t]=n,!0):r!==De&&Me(r,t)?(r[t]=n,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||e!==De&&Me(e,o)||Fs(t,o)||(a=s[0])&&Me(a,o)||Me(r,o)||Me(Xr,o)||Me(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ga(e){return _e(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let $o=!0;function xh(e){const t=Pd(e),n=e.proxy,r=e.ctx;$o=!1,t.beforeCreate&&za(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:g,beforeUpdate:f,updated:_,activated:b,deactivated:v,beforeDestroy:h,beforeUnmount:I,destroyed:O,unmounted:S,render:p,renderTracked:w,renderTriggered:P,errorCaptured:y,serverPrefetch:C,expose:T,inheritAttrs:M,components:N,directives:E,filters:k}=t;if(l&&Ph(l,r,null),o)for(const R in o){const x=o[R];Ie(x)&&(r[R]=x.bind(n))}if(i){const R=i.call(n,n);$e(R)&&(e.data=fi(R))}if($o=!0,s)for(const R in s){const x=s[R],F=Ie(x)?x.bind(n,n):Ie(x.get)?x.get.bind(n,n):wt,j=!Ie(x)&&Ie(x.set)?x.set.bind(n):wt,G=Se({get:F,set:j});Object.defineProperty(r,R,{enumerable:!0,configurable:!0,get:()=>G.value,set:Y=>G.value=Y})}if(a)for(const R in a)xd(a[R],r,n,R);if(c){const R=Ie(c)?c.call(n):c;Reflect.ownKeys(R).forEach(x=>{$i(x,R[x])})}u&&za(u,e,"c");function A(R,x){_e(x)?x.forEach(F=>R(F.bind(n))):x&&R(x.bind(n))}if(A(wh,d),A(We,g),A(Id,f),A(Rd,_),A(Eh,b),A(_h,v),A(Oh,y),A(Rh,w),A(Ih,P),A(hi,I),A(Ht,S),A(Ch,C),_e(T))if(T.length){const R=e.exposed||(e.exposed={});T.forEach(x=>{Object.defineProperty(R,x,{get:()=>n[x],set:F=>n[x]=F})})}else e.exposed||(e.exposed={});p&&e.render===wt&&(e.render=p),M!=null&&(e.inheritAttrs=M),N&&(e.components=N),E&&(e.directives=E),C&&wd(e)}function Ph(e,t,n=wt){_e(e)&&(e=Vo(e));for(const r in e){const i=e[r];let s;$e(i)?"default"in i?s=yt(i.from||r,i.default,!0):s=yt(i.from||r):s=yt(i),He(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[r]=s}}function za(e,t,n){It(_e(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function xd(e,t,n,r){let i=r.includes(".")?qd(n,r):()=>n[r];if(Ue(e)){const s=t[e];Ie(s)&&at(i,s)}else if(Ie(e))at(i,e.bind(n));else if($e(e))if(_e(e))e.forEach(s=>xd(s,t,n,r));else{const s=Ie(e.handler)?e.handler.bind(n):t[e.handler];Ie(s)&&at(i,s,e)}}function Pd(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(l=>Xi(c,l,o,!0)),Xi(c,t,o)),$e(t)&&s.set(t,c),c}function Xi(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Xi(e,s,n,!0),i&&i.forEach(o=>Xi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=Ah[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Ah={data:Ka,props:Ja,emits:Ja,methods:Ur,computed:Ur,beforeCreate:nt,created:nt,beforeMount:nt,mounted:nt,beforeUpdate:nt,updated:nt,beforeDestroy:nt,beforeUnmount:nt,destroyed:nt,unmounted:nt,activated:nt,deactivated:nt,errorCaptured:nt,serverPrefetch:nt,components:Ur,directives:Ur,watch:Mh,provide:Ka,inject:Nh};function Ka(e,t){return t?e?function(){return qe(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function Nh(e,t){return Ur(Vo(e),Vo(t))}function Vo(e){if(_e(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function nt(e,t){return e?[...new Set([].concat(e,t))]:t}function Ur(e,t){return e?qe(Object.create(null),e,t):t}function Ja(e,t){return e?_e(e)&&_e(t)?[...new Set([...e,...t])]:qe(Object.create(null),Ga(e),Ga(t??{})):t}function Mh(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const r in t)n[r]=nt(e[r],t[r]);return n}function Ad(){return{app:null,config:{isNativeTag:Ip,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lh=0;function Dh(e,t){return function(r,i=null){Ie(r)||(r=qe({},r)),i!=null&&!$e(i)&&(i=null);const s=Ad(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:Lh++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:gm,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Ie(u.install)?(o.add(u),u.install(l,...d)):Ie(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,g){if(!c){const f=l._ceVNode||be(r,i);return f.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),e(f,u,g),c=!0,l._container=u,u.__vue_app__=l,ys(f.component)}},onUnmount(u){a.push(u)},unmount(){c&&(It(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){const d=wn;wn=l;try{return u()}finally{wn=d}}};return l}}let wn=null;function $i(e,t){if(Ge){let n=Ge.provides;const r=Ge.parent&&Ge.parent.provides;r===n&&(n=Ge.provides=Object.create(r)),n[e]=t}}function yt(e,t,n=!1){const r=Ge||ot;if(r||wn){const i=wn?wn._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ie(t)?t.call(r&&r.proxy):t}}function $h(){return!!(Ge||ot||wn)}const Nd={},Md=()=>Object.create(Nd),Ld=e=>Object.getPrototypeOf(e)===Nd;function Vh(e,t,n,r=!1){const i={},s=Md();e.propsDefaults=Object.create(null),Dd(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:ad(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Bh(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=ke(i),[c]=e.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let g=u[d];if(gs(e.emitsOptions,g))continue;const f=t[g];if(c)if(Me(s,g))f!==s[g]&&(s[g]=f,l=!0);else{const _=Et(g);i[_]=Bo(c,a,_,f,e,!1)}else f!==s[g]&&(s[g]=f,l=!0)}}}else{Dd(e,t,i,s)&&(l=!0);let u;for(const d in a)(!t||!Me(t,d)&&((u=an(d))===d||!Me(t,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(i[d]=Bo(c,a,d,void 0,e,!0)):delete i[d]);if(s!==a)for(const d in s)(!t||!Me(t,d))&&(delete s[d],l=!0)}l&&Bt(e.attrs,"set","")}function Dd(e,t,n,r){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Gr(c))continue;const l=t[c];let u;i&&Me(i,u=Et(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:gs(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(s){const c=ke(n),l=a||De;for(let u=0;u<s.length;u++){const d=s[u];n[d]=Bo(i,c,d,l[d],e,!Me(l,d))}}return o}function Bo(e,t,n,r,i,s){const o=e[n];if(o!=null){const a=Me(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(c)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const u=mi(i);r=l[n]=c.call(null,t),u()}}else r=c;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===an(n))&&(r=!0))}return r}const jh=new WeakMap;function $d(e,t,n=!1){const r=n?jh:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},a=[];let c=!1;if(!Ie(e)){const u=d=>{c=!0;const[g,f]=$d(d,t,!0);qe(o,g),f&&a.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!c)return $e(e)&&r.set(e,rr),rr;if(_e(s))for(let u=0;u<s.length;u++){const d=Et(s[u]);Xa(d)&&(o[d]=De)}else if(s)for(const u in s){const d=Et(u);if(Xa(d)){const g=s[u],f=o[d]=_e(g)||Ie(g)?{type:g}:qe({},g),_=f.type;let b=!1,v=!0;if(_e(_))for(let h=0;h<_.length;++h){const I=_[h],O=Ie(I)&&I.name;if(O==="Boolean"){b=!0;break}else O==="String"&&(v=!1)}else b=Ie(_)&&_.name==="Boolean";f[0]=b,f[1]=v,(b||Me(f,"default"))&&a.push(d)}}const l=[o,a];return $e(e)&&r.set(e,l),l}function Xa(e){return e[0]!=="$"&&!Gr(e)}const Vd=e=>e[0]==="_"||e==="$stable",ma=e=>_e(e)?e.map(Nt):[Nt(e)],Fh=(e,t,n)=>{if(t._n)return t;const r=St((...i)=>ma(t(...i)),n);return r._c=!1,r},Bd=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Vd(i))continue;const s=e[i];if(Ie(s))t[i]=Fh(i,s,r);else if(s!=null){const o=ma(s);t[i]=()=>o}}},jd=(e,t)=>{const n=ma(t);e.slots.default=()=>n},Fd=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},Uh=(e,t,n)=>{const r=e.slots=Md();if(e.vnode.shapeFlag&32){const i=t._;i?(Fd(r,t,n),n&&ju(r,"_",i,!0)):Bd(t,r)}else t&&jd(e,t)},Hh=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,o=De;if(r.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:Fd(i,t,n):(s=!t.$stable,Bd(t,i)),o=t}else t&&(jd(e,t),o={default:1});if(s)for(const a in i)!Vd(a)&&o[a]==null&&delete i[a]},dt=rm;function Wh(e){return qh(e)}function qh(e,t){const n=us();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:g,setScopeId:f=wt,insertStaticContent:_}=e,b=(V,D,$,z=null,Q=null,H=null,fe=void 0,de=null,le=!!D.dynamicChildren)=>{if(V===D)return;V&&!yn(V,D)&&(z=U(V),Y(V,Q,H,!0),V=null),D.patchFlag===-2&&(le=!1,D.dynamicChildren=null);const{type:se,ref:ve,shapeFlag:pe}=D;switch(se){case bs:v(V,D,$,z);break;case lt:h(V,D,$,z);break;case Yr:V==null&&I(D,$,z,fe);break;case me:N(V,D,$,z,Q,H,fe,de,le);break;default:pe&1?p(V,D,$,z,Q,H,fe,de,le):pe&6?E(V,D,$,z,Q,H,fe,de,le):(pe&64||pe&128)&&se.process(V,D,$,z,Q,H,fe,de,le,ie)}ve!=null&&Q&&Ji(ve,V&&V.ref,H,D||V,!D)},v=(V,D,$,z)=>{if(V==null)r(D.el=a(D.children),$,z);else{const Q=D.el=V.el;D.children!==V.children&&l(Q,D.children)}},h=(V,D,$,z)=>{V==null?r(D.el=c(D.children||""),$,z):D.el=V.el},I=(V,D,$,z)=>{[V.el,V.anchor]=_(V.children,D,$,z,V.el,V.anchor)},O=({el:V,anchor:D},$,z)=>{let Q;for(;V&&V!==D;)Q=g(V),r(V,$,z),V=Q;r(D,$,z)},S=({el:V,anchor:D})=>{let $;for(;V&&V!==D;)$=g(V),i(V),V=$;i(D)},p=(V,D,$,z,Q,H,fe,de,le)=>{D.type==="svg"?fe="svg":D.type==="math"&&(fe="mathml"),V==null?w(D,$,z,Q,H,fe,de,le):C(V,D,Q,H,fe,de,le)},w=(V,D,$,z,Q,H,fe,de)=>{let le,se;const{props:ve,shapeFlag:pe,transition:ge,dirs:he}=V;if(le=V.el=o(V.type,H,ve&&ve.is,ve),pe&8?u(le,V.children):pe&16&&y(V.children,le,null,z,Q,Us(V,H),fe,de),he&&dn(V,null,z,"created"),P(le,V,V.scopeId,fe,z),ve){for(const Ee in ve)Ee!=="value"&&!Gr(Ee)&&s(le,Ee,null,ve[Ee],H,z);"value"in ve&&s(le,"value",null,ve.value,H),(se=ve.onVnodeBeforeMount)&&kt(se,z,V)}he&&dn(V,null,z,"beforeMount");const ye=Gh(Q,ge);ye&&ge.beforeEnter(le),r(le,D,$),((se=ve&&ve.onVnodeMounted)||ye||he)&&dt(()=>{se&&kt(se,z,V),ye&&ge.enter(le),he&&dn(V,null,z,"mounted")},Q)},P=(V,D,$,z,Q)=>{if($&&f(V,$),z)for(let H=0;H<z.length;H++)f(V,z[H]);if(Q){let H=Q.subTree;if(D===H||zd(H.type)&&(H.ssContent===D||H.ssFallback===D)){const fe=Q.vnode;P(V,fe,fe.scopeId,fe.slotScopeIds,Q.parent)}}},y=(V,D,$,z,Q,H,fe,de,le=0)=>{for(let se=le;se<V.length;se++){const ve=V[se]=de?en(V[se]):Nt(V[se]);b(null,ve,D,$,z,Q,H,fe,de)}},C=(V,D,$,z,Q,H,fe)=>{const de=D.el=V.el;let{patchFlag:le,dynamicChildren:se,dirs:ve}=D;le|=V.patchFlag&16;const pe=V.props||De,ge=D.props||De;let he;if($&&fn($,!1),(he=ge.onVnodeBeforeUpdate)&&kt(he,$,D,V),ve&&dn(D,V,$,"beforeUpdate"),$&&fn($,!0),(pe.innerHTML&&ge.innerHTML==null||pe.textContent&&ge.textContent==null)&&u(de,""),se?T(V.dynamicChildren,se,de,$,z,Us(D,Q),H):fe||x(V,D,de,null,$,z,Us(D,Q),H,!1),le>0){if(le&16)M(de,pe,ge,$,Q);else if(le&2&&pe.class!==ge.class&&s(de,"class",null,ge.class,Q),le&4&&s(de,"style",pe.style,ge.style,Q),le&8){const ye=D.dynamicProps;for(let Ee=0;Ee<ye.length;Ee++){const ee=ye[Ee],ue=pe[ee],ae=ge[ee];(ae!==ue||ee==="value")&&s(de,ee,ue,ae,Q,$)}}le&1&&V.children!==D.children&&u(de,D.children)}else!fe&&se==null&&M(de,pe,ge,$,Q);((he=ge.onVnodeUpdated)||ve)&&dt(()=>{he&&kt(he,$,D,V),ve&&dn(D,V,$,"updated")},z)},T=(V,D,$,z,Q,H,fe)=>{for(let de=0;de<D.length;de++){const le=V[de],se=D[de],ve=le.el&&(le.type===me||!yn(le,se)||le.shapeFlag&70)?d(le.el):$;b(le,se,ve,null,z,Q,H,fe,!0)}},M=(V,D,$,z,Q)=>{if(D!==$){if(D!==De)for(const H in D)!Gr(H)&&!(H in $)&&s(V,H,D[H],null,Q,z);for(const H in $){if(Gr(H))continue;const fe=$[H],de=D[H];fe!==de&&H!=="value"&&s(V,H,de,fe,Q,z)}"value"in $&&s(V,"value",D.value,$.value,Q)}},N=(V,D,$,z,Q,H,fe,de,le)=>{const se=D.el=V?V.el:a(""),ve=D.anchor=V?V.anchor:a("");let{patchFlag:pe,dynamicChildren:ge,slotScopeIds:he}=D;he&&(de=de?de.concat(he):he),V==null?(r(se,$,z),r(ve,$,z),y(D.children||[],$,ve,Q,H,fe,de,le)):pe>0&&pe&64&&ge&&V.dynamicChildren?(T(V.dynamicChildren,ge,$,Q,H,fe,de),(D.key!=null||Q&&D===Q.subTree)&&Ud(V,D,!0)):x(V,D,$,ve,Q,H,fe,de,le)},E=(V,D,$,z,Q,H,fe,de,le)=>{D.slotScopeIds=de,V==null?D.shapeFlag&512?Q.ctx.activate(D,$,z,fe,le):k(D,$,z,Q,H,fe,le):B(V,D,le)},k=(V,D,$,z,Q,H,fe)=>{const de=V.component=um(V,z,Q);if(ms(V)&&(de.ctx.renderer=ie),dm(de,!1,fe),de.asyncDep){if(Q&&Q.registerDep(de,A,fe),!V.el){const le=de.subTree=be(lt);h(null,le,D,$)}}else A(de,V,D,$,Q,H,fe)},B=(V,D,$)=>{const z=D.component=V.component;if(tm(V,D,$))if(z.asyncDep&&!z.asyncResolved){R(z,D,$);return}else z.next=D,z.update();else D.el=V.el,z.vnode=D},A=(V,D,$,z,Q,H,fe)=>{const de=()=>{if(V.isMounted){let{next:pe,bu:ge,u:he,parent:ye,vnode:Ee}=V;{const Ze=Hd(V);if(Ze){pe&&(pe.el=Ee.el,R(V,pe,fe)),Ze.asyncDep.then(()=>{V.isUnmounted||de()});return}}let ee=pe,ue;fn(V,!1),pe?(pe.el=Ee.el,R(V,pe,fe)):pe=Ee,ge&&Di(ge),(ue=pe.props&&pe.props.onVnodeBeforeUpdate)&&kt(ue,ye,pe,Ee),fn(V,!0);const ae=Qa(V),Oe=V.subTree;V.subTree=ae,b(Oe,ae,d(Oe.el),U(Oe),V,Q,H),pe.el=ae.el,ee===null&&nm(V,ae.el),he&&dt(he,Q),(ue=pe.props&&pe.props.onVnodeUpdated)&&dt(()=>kt(ue,ye,pe,Ee),Q)}else{let pe;const{el:ge,props:he}=D,{bm:ye,m:Ee,parent:ee,root:ue,type:ae}=V,Oe=Jr(D);fn(V,!1),ye&&Di(ye),!Oe&&(pe=he&&he.onVnodeBeforeMount)&&kt(pe,ee,D),fn(V,!0);{ue.ce&&ue.ce._injectChildStyle(ae);const Ze=V.subTree=Qa(V);b(null,Ze,$,z,V,Q,H),D.el=Ze.el}if(Ee&&dt(Ee,Q),!Oe&&(pe=he&&he.onVnodeMounted)){const Ze=D;dt(()=>kt(pe,ee,Ze),Q)}(D.shapeFlag&256||ee&&Jr(ee.vnode)&&ee.vnode.shapeFlag&256)&&V.a&&dt(V.a,Q),V.isMounted=!0,D=$=z=null}};V.scope.on();const le=V.effect=new zu(de);V.scope.off();const se=V.update=le.run.bind(le),ve=V.job=le.runIfDirty.bind(le);ve.i=V,ve.id=V.uid,le.scheduler=()=>pa(ve),fn(V,!0),se()},R=(V,D,$)=>{D.component=V;const z=V.vnode.props;V.vnode=D,V.next=null,Bh(V,D.props,z,$),Hh(V,D.children,$),cn(),Ha(V),ln()},x=(V,D,$,z,Q,H,fe,de,le=!1)=>{const se=V&&V.children,ve=V?V.shapeFlag:0,pe=D.children,{patchFlag:ge,shapeFlag:he}=D;if(ge>0){if(ge&128){j(se,pe,$,z,Q,H,fe,de,le);return}else if(ge&256){F(se,pe,$,z,Q,H,fe,de,le);return}}he&8?(ve&16&&L(se,Q,H),pe!==se&&u($,pe)):ve&16?he&16?j(se,pe,$,z,Q,H,fe,de,le):L(se,Q,H,!0):(ve&8&&u($,""),he&16&&y(pe,$,z,Q,H,fe,de,le))},F=(V,D,$,z,Q,H,fe,de,le)=>{V=V||rr,D=D||rr;const se=V.length,ve=D.length,pe=Math.min(se,ve);let ge;for(ge=0;ge<pe;ge++){const he=D[ge]=le?en(D[ge]):Nt(D[ge]);b(V[ge],he,$,null,Q,H,fe,de,le)}se>ve?L(V,Q,H,!0,!1,pe):y(D,$,z,Q,H,fe,de,le,pe)},j=(V,D,$,z,Q,H,fe,de,le)=>{let se=0;const ve=D.length;let pe=V.length-1,ge=ve-1;for(;se<=pe&&se<=ge;){const he=V[se],ye=D[se]=le?en(D[se]):Nt(D[se]);if(yn(he,ye))b(he,ye,$,null,Q,H,fe,de,le);else break;se++}for(;se<=pe&&se<=ge;){const he=V[pe],ye=D[ge]=le?en(D[ge]):Nt(D[ge]);if(yn(he,ye))b(he,ye,$,null,Q,H,fe,de,le);else break;pe--,ge--}if(se>pe){if(se<=ge){const he=ge+1,ye=he<ve?D[he].el:z;for(;se<=ge;)b(null,D[se]=le?en(D[se]):Nt(D[se]),$,ye,Q,H,fe,de,le),se++}}else if(se>ge)for(;se<=pe;)Y(V[se],Q,H,!0),se++;else{const he=se,ye=se,Ee=new Map;for(se=ye;se<=ge;se++){const et=D[se]=le?en(D[se]):Nt(D[se]);et.key!=null&&Ee.set(et.key,se)}let ee,ue=0;const ae=ge-ye+1;let Oe=!1,Ze=0;const Wt=new Array(ae);for(se=0;se<ae;se++)Wt[se]=0;for(se=he;se<=pe;se++){const et=V[se];if(ue>=ae){Y(et,Q,H,!0);continue}let Tt;if(et.key!=null)Tt=Ee.get(et.key);else for(ee=ye;ee<=ge;ee++)if(Wt[ee-ye]===0&&yn(et,D[ee])){Tt=ee;break}Tt===void 0?Y(et,Q,H,!0):(Wt[Tt-ye]=se+1,Tt>=Ze?Ze=Tt:Oe=!0,b(et,D[Tt],$,null,Q,H,fe,de,le),ue++)}const vr=Oe?zh(Wt):rr;for(ee=vr.length-1,se=ae-1;se>=0;se--){const et=ye+se,Tt=D[et],Va=et+1<ve?D[et+1].el:z;Wt[se]===0?b(null,Tt,$,Va,Q,H,fe,de,le):Oe&&(ee<0||se!==vr[ee]?G(Tt,$,Va,2):ee--)}}},G=(V,D,$,z,Q=null)=>{const{el:H,type:fe,transition:de,children:le,shapeFlag:se}=V;if(se&6){G(V.component.subTree,D,$,z);return}if(se&128){V.suspense.move(D,$,z);return}if(se&64){fe.move(V,D,$,ie);return}if(fe===me){r(H,D,$);for(let pe=0;pe<le.length;pe++)G(le[pe],D,$,z);r(V.anchor,D,$);return}if(fe===Yr){O(V,D,$);return}if(z!==2&&se&1&&de)if(z===0)de.beforeEnter(H),r(H,D,$),dt(()=>de.enter(H),Q);else{const{leave:pe,delayLeave:ge,afterLeave:he}=de,ye=()=>r(H,D,$),Ee=()=>{pe(H,()=>{ye(),he&&he()})};ge?ge(H,ye,Ee):Ee()}else r(H,D,$)},Y=(V,D,$,z=!1,Q=!1)=>{const{type:H,props:fe,ref:de,children:le,dynamicChildren:se,shapeFlag:ve,patchFlag:pe,dirs:ge,cacheIndex:he}=V;if(pe===-2&&(Q=!1),de!=null&&Ji(de,null,$,V,!0),he!=null&&(D.renderCache[he]=void 0),ve&256){D.ctx.deactivate(V);return}const ye=ve&1&&ge,Ee=!Jr(V);let ee;if(Ee&&(ee=fe&&fe.onVnodeBeforeUnmount)&&kt(ee,D,V),ve&6)oe(V.component,$,z);else{if(ve&128){V.suspense.unmount($,z);return}ye&&dn(V,null,D,"beforeUnmount"),ve&64?V.type.remove(V,D,$,ie,z):se&&!se.hasOnce&&(H!==me||pe>0&&pe&64)?L(se,D,$,!1,!0):(H===me&&pe&384||!Q&&ve&16)&&L(le,D,$),z&&ce(V)}(Ee&&(ee=fe&&fe.onVnodeUnmounted)||ye)&&dt(()=>{ee&&kt(ee,D,V),ye&&dn(V,null,D,"unmounted")},$)},ce=V=>{const{type:D,el:$,anchor:z,transition:Q}=V;if(D===me){re($,z);return}if(D===Yr){S(V);return}const H=()=>{i($),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(V.shapeFlag&1&&Q&&!Q.persisted){const{leave:fe,delayLeave:de}=Q,le=()=>fe($,H);de?de(V.el,H,le):le()}else H()},re=(V,D)=>{let $;for(;V!==D;)$=g(V),i(V),V=$;i(D)},oe=(V,D,$)=>{const{bum:z,scope:Q,job:H,subTree:fe,um:de,m:le,a:se}=V;Ya(le),Ya(se),z&&Di(z),Q.stop(),H&&(H.flags|=8,Y(fe,V,D,$)),de&&dt(de,D),dt(()=>{V.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},L=(V,D,$,z=!1,Q=!1,H=0)=>{for(let fe=H;fe<V.length;fe++)Y(V[fe],D,$,z,Q)},U=V=>{if(V.shapeFlag&6)return U(V.component.subTree);if(V.shapeFlag&128)return V.suspense.next();const D=g(V.anchor||V.el),$=D&&D[gh];return $?g($):D};let J=!1;const ne=(V,D,$)=>{V==null?D._vnode&&Y(D._vnode,null,null,!0):b(D._vnode||null,V,D,null,null,null,$),D._vnode=V,J||(J=!0,Ha(),hd(),J=!1)},ie={p:b,um:Y,m:G,r:ce,mt:k,mc:y,pc:x,pbc:T,n:U,o:e};return{render:ne,hydrate:void 0,createApp:Dh(ne)}}function Us({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Gh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ud(e,t,n=!1){const r=e.children,i=t.children;if(_e(r)&&_e(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=en(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Ud(o,a)),a.type===bs&&(a.el=o.el)}}function zh(e){const t=e.slice(),n=[0];let r,i,s,o,a;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<l?s=a+1:o=a;l<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function Hd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hd(t)}function Ya(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Kh=Symbol.for("v-scx"),Jh=()=>yt(Kh);function at(e,t,n){return Wd(e,t,n)}function Wd(e,t,n=De){const{immediate:r,deep:i,flush:s,once:o}=n,a=qe({},n),c=t&&r||!t&&s!=="post";let l;if(ai){if(s==="sync"){const f=Jh();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!c){const f=()=>{};return f.stop=wt,f.resume=wt,f.pause=wt,f}}const u=Ge;a.call=(f,_,b)=>It(f,u,_,b);let d=!1;s==="post"?a.scheduler=f=>{dt(f,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(f,_)=>{_?f():pa(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const g=hh(e,t,a);return ai&&(l?l.push(g):c&&g()),g}function Xh(e,t,n){const r=this.proxy,i=Ue(e)?e.includes(".")?qd(r,e):()=>r[e]:e.bind(r,r);let s;Ie(t)?s=t:(s=t.handler,n=t);const o=mi(this),a=Wd(i,s.bind(r),n);return o(),a}function qd(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Yh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Et(t)}Modifiers`]||e[`${an(t)}Modifiers`];function Qh(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||De;let i=n;const s=t.startsWith("update:"),o=s&&Yh(r,t.slice(7));o&&(o.trim&&(i=n.map(u=>Ue(u)?u.trim():u)),o.number&&(i=n.map(Wi)));let a,c=r[a=Ls(t)]||r[a=Ls(Et(t))];!c&&s&&(c=r[a=Ls(an(t))]),c&&It(c,e,6,i);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,It(l,e,6,i)}}function Gd(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!Ie(e)){const c=l=>{const u=Gd(l,t,!0);u&&(a=!0,qe(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!a?($e(e)&&r.set(e,null),null):(_e(s)?s.forEach(c=>o[c]=null):qe(o,s),$e(e)&&r.set(e,o),o)}function gs(e,t){return!e||!os(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,an(t))||Me(e,t))}function Qa(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:g,setupState:f,ctx:_,inheritAttrs:b}=e,v=Ki(e);let h,I;try{if(n.shapeFlag&4){const S=i||r,p=S;h=Nt(l.call(p,S,u,d,f,g,_)),I=a}else{const S=t;h=Nt(S.length>1?S(d,{attrs:a,slots:o,emit:c}):S(d,null)),I=t.props?a:Zh(a)}}catch(S){Qr.length=0,ps(S,e,1),h=be(lt)}let O=h;if(I&&b!==!1){const S=Object.keys(I),{shapeFlag:p}=O;S.length&&p&7&&(s&&S.some(na)&&(I=em(I,s)),O=on(O,I,!1,!0))}return n.dirs&&(O=on(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&Rn(O,n.transition),h=O,Ki(v),h}const Zh=e=>{let t;for(const n in e)(n==="class"||n==="style"||os(n))&&((t||(t={}))[n]=e[n]);return t},em=(e,t)=>{const n={};for(const r in e)(!na(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function tm(e,t,n){const{props:r,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,l=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Za(r,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const g=u[d];if(o[g]!==r[g]&&!gs(l,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Za(r,o,l):!0:!!o;return!1}function Za(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!gs(n,s))return!0}return!1}function nm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const zd=e=>e.__isSuspense;function rm(e,t){t&&t.pendingBranch?_e(e)?t.effects.push(...e):t.effects.push(e):pd(e)}const me=Symbol.for("v-fgt"),bs=Symbol.for("v-txt"),lt=Symbol.for("v-cmt"),Yr=Symbol.for("v-stc"),Qr=[];let ft=null;function W(e=!1){Qr.push(ft=e?null:[])}function im(){Qr.pop(),ft=Qr[Qr.length-1]||null}let oi=1;function ec(e,t=!1){oi+=e,e<0&&ft&&t&&(ft.hasOnce=!0)}function Kd(e){return e.dynamicChildren=oi>0?ft||rr:null,im(),oi>0&&ft&&ft.push(e),e}function q(e,t,n,r,i,s){return Kd(m(e,t,n,r,i,s,!0))}function pt(e,t,n,r,i){return Kd(be(e,t,n,r,i,!0))}function Yi(e){return e?e.__v_isVNode===!0:!1}function yn(e,t){return e.type===t.type&&e.key===t.key}const Jd=({key:e})=>e??null,Vi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ue(e)||He(e)||Ie(e)?{i:ot,r:e,k:t,f:!!n}:e:null);function m(e,t=null,n=null,r=0,i=null,s=e===me?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Jd(t),ref:t&&Vi(t),scopeId:vd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ot};return a?(va(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=Ue(n)?8:16),oi>0&&!o&&ft&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&ft.push(c),c}const be=sm;function sm(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===Td)&&(e=lt),Yi(e)){const a=on(e,t,!0);return n&&va(a,n),oi>0&&!s&&ft&&(a.shapeFlag&6?ft[ft.indexOf(e)]=a:ft.push(a)),a.patchFlag=-2,a}if(vm(e)&&(e=e.__vccOpts),t){t=om(t);let{class:a,style:c}=t;a&&!Ue(a)&&(t.class=we(a)),$e(c)&&(da(c)&&!_e(c)&&(c=qe({},c)),t.style=je(c))}const o=Ue(e)?1:zd(e)?128:gd(e)?64:$e(e)?4:Ie(e)?2:0;return m(e,t,n,r,i,o,s,!0)}function om(e){return e?da(e)||Ld(e)?qe({},e):e:null}function on(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:c}=e,l=t?am(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Jd(l),ref:t&&t.ref?n&&s?_e(s)?s.concat(Vi(t)):[s,Vi(t)]:Vi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==me?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&on(e.ssContent),ssFallback:e.ssFallback&&on(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Rn(u,c.clone(u)),u}function Le(e=" ",t=0){return be(bs,null,e,t)}function Mt(e,t){const n=be(Yr,null,e);return n.staticCount=t,n}function xe(e="",t=!1){return t?(W(),pt(lt,null,e)):be(lt,null,e)}function Nt(e){return e==null||typeof e=="boolean"?be(lt):_e(e)?be(me,null,e.slice()):Yi(e)?en(e):be(bs,null,String(e))}function en(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:on(e)}function va(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(_e(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),va(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Ld(t)?t._ctx=ot:i===3&&ot&&(ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:ot},n=32):(t=String(t),r&64?(n=16,t=[Le(t)]):n=8);e.children=t,e.shapeFlag|=n}function am(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=we([t.class,r.class]));else if(i==="style")t.style=je([t.style,r.style]);else if(os(i)){const s=t[i],o=r[i];o&&s!==o&&!(_e(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=r[i])}return t}function kt(e,t,n,r=null){It(e,t,7,[n,r])}const cm=Ad();let lm=0;function um(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||cm,s={uid:lm++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Wu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$d(r,i),emitsOptions:Gd(r,i),emit:null,emitted:null,propsDefaults:De,inheritAttrs:r.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Qh.bind(null,s),e.ce&&e.ce(s),s}let Ge=null;const ga=()=>Ge||ot;let Qi,jo;{const e=us(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Qi=t("__VUE_INSTANCE_SETTERS__",n=>Ge=n),jo=t("__VUE_SSR_SETTERS__",n=>ai=n)}const mi=e=>{const t=Ge;return Qi(e),e.scope.on(),()=>{e.scope.off(),Qi(t)}},tc=()=>{Ge&&Ge.scope.off(),Qi(null)};function Xd(e){return e.vnode.shapeFlag&4}let ai=!1;function dm(e,t=!1,n=!1){t&&jo(t);const{props:r,children:i}=e.vnode,s=Xd(e);Vh(e,r,s,t),Uh(e,i,n);const o=s?fm(e,t):void 0;return t&&jo(!1),o}function fm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,kh);const{setup:r}=n;if(r){cn();const i=e.setupContext=r.length>1?hm(e):null,s=mi(e),o=pi(r,e,0,[e.props,i]),a=$u(o);if(ln(),s(),(a||e.sp)&&!Jr(e)&&wd(e),a){if(o.then(tc,tc),t)return o.then(c=>{nc(e,c)}).catch(c=>{ps(c,e,0)});e.asyncDep=o}else nc(e,o)}else Yd(e)}function nc(e,t,n){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$e(t)&&(e.setupState=ud(t)),Yd(e)}function Yd(e,t,n){const r=e.type;e.render||(e.render=r.render||wt);{const i=mi(e);cn();try{xh(e)}finally{ln(),i()}}}const pm={get(e,t){return Je(e,"get",""),e[t]}};function hm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,pm),slots:e.slots,emit:e.emit,expose:t}}function ys(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ud(fa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xr)return Xr[n](e)},has(t,n){return n in t||n in Xr}})):e.proxy}function mm(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function vm(e){return Ie(e)&&"__vccOpts"in e}const Se=(e,t)=>fh(e,t,ai);function Ae(e,t,n){const r=arguments.length;return r===2?$e(t)&&!_e(t)?Yi(t)?be(e,null,[t]):be(e,t):be(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Yi(n)&&(n=[n]),be(e,t,n))}const gm="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fo;const rc=typeof window<"u"&&window.trustedTypes;if(rc)try{Fo=rc.createPolicy("vue",{createHTML:e=>e})}catch{}const Qd=Fo?e=>Fo.createHTML(e):e=>e,bm="http://www.w3.org/2000/svg",ym="http://www.w3.org/1998/Math/MathML",Vt=typeof document<"u"?document:null,ic=Vt&&Vt.createElement("template"),Em={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Vt.createElementNS(bm,e):t==="mathml"?Vt.createElementNS(ym,e):n?Vt.createElement(e,{is:n}):Vt.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Vt.createTextNode(e),createComment:e=>Vt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Vt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const o=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{ic.innerHTML=Qd(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=ic.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},qt="transition",br="animation",ar=Symbol("_vtc"),Zd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ef=qe({},yd,Zd),_m=e=>(e.displayName="Transition",e.props=ef,e),tf=_m((e,{slots:t})=>Ae(yh,nf(e),t)),pn=(e,t=[])=>{_e(e)?e.forEach(n=>n(...t)):e&&e(...t)},sc=e=>e?_e(e)?e.some(t=>t.length>1):e.length>1:!1;function nf(e){const t={};for(const N in e)N in Zd||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,_=Sm(i),b=_&&_[0],v=_&&_[1],{onBeforeEnter:h,onEnter:I,onEnterCancelled:O,onLeave:S,onLeaveCancelled:p,onBeforeAppear:w=h,onAppear:P=I,onAppearCancelled:y=O}=t,C=(N,E,k,B)=>{N._enterCancelled=B,Xt(N,E?u:a),Xt(N,E?l:o),k&&k()},T=(N,E)=>{N._isLeaving=!1,Xt(N,d),Xt(N,f),Xt(N,g),E&&E()},M=N=>(E,k)=>{const B=N?P:I,A=()=>C(E,N,k);pn(B,[E,A]),oc(()=>{Xt(E,N?c:s),Pt(E,N?u:a),sc(B)||ac(E,r,b,A)})};return qe(t,{onBeforeEnter(N){pn(h,[N]),Pt(N,s),Pt(N,o)},onBeforeAppear(N){pn(w,[N]),Pt(N,c),Pt(N,l)},onEnter:M(!1),onAppear:M(!0),onLeave(N,E){N._isLeaving=!0;const k=()=>T(N,E);Pt(N,d),N._enterCancelled?(Pt(N,g),Uo()):(Uo(),Pt(N,g)),oc(()=>{N._isLeaving&&(Xt(N,d),Pt(N,f),sc(S)||ac(N,r,v,k))}),pn(S,[N,k])},onEnterCancelled(N){C(N,!1,void 0,!0),pn(O,[N])},onAppearCancelled(N){C(N,!0,void 0,!0),pn(y,[N])},onLeaveCancelled(N){T(N),pn(p,[N])}})}function Sm(e){if(e==null)return null;if($e(e))return[Hs(e.enter),Hs(e.leave)];{const t=Hs(e);return[t,t]}}function Hs(e){return xp(e)}function Pt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ar]||(e[ar]=new Set)).add(t)}function Xt(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[ar];n&&(n.delete(t),n.size||(e[ar]=void 0))}function oc(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let wm=0;function ac(e,t,n,r){const i=e._endId=++wm,s=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=rf(e,t);if(!o)return r();const l=o+"end";let u=0;const d=()=>{e.removeEventListener(l,g),s()},g=f=>{f.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),e.addEventListener(l,g)}function rf(e,t){const n=window.getComputedStyle(e),r=_=>(n[_]||"").split(", "),i=r(`${qt}Delay`),s=r(`${qt}Duration`),o=cc(i,s),a=r(`${br}Delay`),c=r(`${br}Duration`),l=cc(a,c);let u=null,d=0,g=0;t===qt?o>0&&(u=qt,d=o,g=s.length):t===br?l>0&&(u=br,d=l,g=c.length):(d=Math.max(o,l),u=d>0?o>l?qt:br:null,g=u?u===qt?s.length:c.length:0);const f=u===qt&&/\b(transform|all)(,|$)/.test(r(`${qt}Property`).toString());return{type:u,timeout:d,propCount:g,hasTransform:f}}function cc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>lc(n)+lc(e[r])))}function lc(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Uo(){return document.body.offsetHeight}function Cm(e,t,n){const r=e[ar];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const uc=Symbol("_vod"),Im=Symbol("_vsh"),sf=Symbol("");function Rm(e){const t=ga();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>Zi(s,i))},r=()=>{const i=e(t.proxy);t.ce?Zi(t.ce,i):Ho(t.subTree,i),n(i)};Id(()=>{pd(r)}),We(()=>{at(r,wt,{flush:"post"});const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),Ht(()=>i.disconnect())})}function Ho(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Ho(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Zi(e.el,t);else if(e.type===me)e.children.forEach(n=>Ho(n,t));else if(e.type===Yr){let{el:n,anchor:r}=e;for(;n&&(Zi(n,t),n!==r);)n=n.nextSibling}}function Zi(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[sf]=r}}const Om=/(^|;)\s*display\s*:/;function Tm(e,t,n){const r=e.style,i=Ue(n);let s=!1;if(n&&!i){if(t)if(Ue(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Bi(r,a,"")}else for(const o in t)n[o]==null&&Bi(r,o,"");for(const o in n)o==="display"&&(s=!0),Bi(r,o,n[o])}else if(i){if(t!==n){const o=r[sf];o&&(n+=";"+o),r.cssText=n,s=Om.test(n)}}else t&&e.removeAttribute("style");uc in e&&(e[uc]=s?r.display:"",e[Im]&&(r.display="none"))}const dc=/\s*!important$/;function Bi(e,t,n){if(_e(n))n.forEach(r=>Bi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=km(e,t);dc.test(n)?e.setProperty(an(r),n.replace(dc,""),"important"):e[r]=n}}const fc=["Webkit","Moz","ms"],Ws={};function km(e,t){const n=Ws[t];if(n)return n;let r=Et(t);if(r!=="filter"&&r in e)return Ws[t]=r;r=ls(r);for(let i=0;i<fc.length;i++){const s=fc[i]+r;if(s in e)return Ws[t]=s}return t}const pc="http://www.w3.org/1999/xlink";function hc(e,t,n,r,i,s=Dp(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(pc,t.slice(6,t.length)):e.setAttributeNS(pc,t,n):n==null||s&&!Fu(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Lt(n)?String(n):n)}function mc(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Qd(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Fu(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function En(e,t,n,r){e.addEventListener(t,n,r)}function xm(e,t,n,r){e.removeEventListener(t,n,r)}const vc=Symbol("_vei");function Pm(e,t,n,r,i=null){const s=e[vc]||(e[vc]={}),o=s[t];if(r&&o)o.value=r;else{const[a,c]=Am(t);if(r){const l=s[t]=Lm(r,i);En(e,a,l,c)}else o&&(xm(e,a,o,c),s[t]=void 0)}}const gc=/(?:Once|Passive|Capture)$/;function Am(e){let t;if(gc.test(e)){t={};let r;for(;r=e.match(gc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):an(e.slice(2)),t]}let qs=0;const Nm=Promise.resolve(),Mm=()=>qs||(Nm.then(()=>qs=0),qs=Date.now());function Lm(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;It(Dm(r,n.value),t,5,[r])};return n.value=e,n.attached=Mm(),n}function Dm(e,t){if(_e(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const bc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$m=(e,t,n,r,i,s)=>{const o=i==="svg";t==="class"?Cm(e,r,o):t==="style"?Tm(e,n,r):os(t)?na(t)||Pm(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vm(e,t,r,o))?(mc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&hc(e,t,r,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ue(r))?mc(e,Et(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),hc(e,t,r,o))};function Vm(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&bc(t)&&Ie(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return bc(t)&&Ue(n)?!1:t in e}const of=new WeakMap,af=new WeakMap,es=Symbol("_moveCb"),yc=Symbol("_enterCb"),Bm=e=>(delete e.props.mode,e),jm=Bm({name:"TransitionGroup",props:qe({},ef,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ga(),r=bd();let i,s;return Rd(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!qm(i[0].el,n.vnode.el,o))return;i.forEach(Um),i.forEach(Hm);const a=i.filter(Wm);Uo(),a.forEach(c=>{const l=c.el,u=l.style;Pt(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=l[es]=g=>{g&&g.target!==l||(!g||/transform$/.test(g.propertyName))&&(l.removeEventListener("transitionend",d),l[es]=null,Xt(l,o))};l.addEventListener("transitionend",d)})}),()=>{const o=ke(e),a=nf(o);let c=o.tag||me;if(i=[],s)for(let l=0;l<s.length;l++){const u=s[l];u.el&&u.el instanceof Element&&(i.push(u),Rn(u,si(u,a,r,n)),of.set(u,u.el.getBoundingClientRect()))}s=t.default?ha(t.default()):[];for(let l=0;l<s.length;l++){const u=s[l];u.key!=null&&Rn(u,si(u,a,r,n))}return be(c,null,s)}}}),Fm=jm;function Um(e){const t=e.el;t[es]&&t[es](),t[yc]&&t[yc]()}function Hm(e){af.set(e,e.el.getBoundingClientRect())}function Wm(e){const t=of.get(e),n=af.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function qm(e,t,n){const r=e.cloneNode(),i=e[ar];i&&i.forEach(a=>{a.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:o}=rf(r);return s.removeChild(r),o}const ts=e=>{const t=e.props["onUpdate:modelValue"]||!1;return _e(t)?n=>Di(t,n):t};function Gm(e){e.target.composing=!0}function Ec(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const or=Symbol("_assign"),Ke={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[or]=ts(i);const s=r||i.props&&i.props.type==="number";En(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=Wi(a)),e[or](a)}),n&&En(e,"change",()=>{e.value=e.value.trim()}),t||(En(e,"compositionstart",Gm),En(e,"compositionend",Ec),En(e,"change",Ec))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(e[or]=ts(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?Wi(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},zm={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=as(t);En(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Wi(ns(o)):ns(o));e[or](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,hs(()=>{e._assigning=!1})}),e[or]=ts(r)},mounted(e,{value:t}){_c(e,t)},beforeUpdate(e,t,n){e[or]=ts(n)},updated(e,{value:t}){e._assigning||_c(e,t)}};function _c(e,t){const n=e.multiple,r=_e(t);if(!(n&&!r&&!as(t))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],a=ns(o);if(n)if(r){const c=typeof a;c==="string"||c==="number"?o.selected=t.some(l=>String(l)===String(a)):o.selected=Vp(t,a)>-1}else o.selected=t.has(a);else if(ds(ns(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ns(e){return"_value"in e?e._value:e.value}const Km=["ctrl","shift","alt","meta"],Jm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Km.some(n=>e[`${n}Key`]&&!t.includes(n))},Es=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<t.length;o++){const a=Jm[t[o]];if(a&&a(i,t))return}return e(i,...s)})},Xm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rs=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=an(i.key);if(t.some(o=>o===s||Xm[o]===s))return e(i)})},Ym=qe({patchProp:$m},Em);let Sc;function Qm(){return Sc||(Sc=Wh(Ym))}const Zm=(...e)=>{const t=Qm().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=tv(r);if(!i)return;const s=t._component;!Ie(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,ev(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ev(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function tv(e){return Ue(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let cf;const _s=e=>cf=e,lf=Symbol();function Wo(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zr||(Zr={}));function nv(){const e=qu(!0),t=e.run(()=>K({}));let n=[],r=[];const i=fa({install(s){_s(i),i._a=s,s.provide(lf,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const uf=()=>{};function wc(e,t,n,r=uf){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&Gu()&&Bp(i),i}function $n(e,...t){e.slice().forEach(n=>{n(...t)})}const rv=e=>e(),Cc=Symbol(),Gs=Symbol();function qo(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Wo(i)&&Wo(r)&&e.hasOwnProperty(n)&&!He(r)&&!sn(r)?e[n]=qo(i,r):e[n]=r}return e}const iv=Symbol();function sv(e){return!Wo(e)||!e.hasOwnProperty(iv)}const{assign:Yt}=Object;function ov(e){return!!(He(e)&&e.effect)}function av(e,t,n,r){const{state:i,actions:s,getters:o}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=i?i():{});const u=ch(n.state.value[e]);return Yt(u,s,Object.keys(o||{}).reduce((d,g)=>(d[g]=fa(Se(()=>{_s(n);const f=n._s.get(e);return o[g].call(f,f)})),d),{}))}return c=df(e,l,t,n,r,!0),c}function df(e,t,n={},r,i,s){let o;const a=Yt({actions:{}},n),c={deep:!0};let l,u,d=[],g=[],f;const _=r.state.value[e];!s&&!_&&(r.state.value[e]={}),K({});let b;function v(y){let C;l=u=!1,typeof y=="function"?(y(r.state.value[e]),C={type:Zr.patchFunction,storeId:e,events:f}):(qo(r.state.value[e],y),C={type:Zr.patchObject,payload:y,storeId:e,events:f});const T=b=Symbol();hs().then(()=>{b===T&&(l=!0)}),u=!0,$n(d,C,r.state.value[e])}const h=s?function(){const{state:C}=n,T=C?C():{};this.$patch(M=>{Yt(M,T)})}:uf;function I(){o.stop(),d=[],g=[],r._s.delete(e)}const O=(y,C="")=>{if(Cc in y)return y[Gs]=C,y;const T=function(){_s(r);const M=Array.from(arguments),N=[],E=[];function k(R){N.push(R)}function B(R){E.push(R)}$n(g,{args:M,name:T[Gs],store:p,after:k,onError:B});let A;try{A=y.apply(this&&this.$id===e?this:p,M)}catch(R){throw $n(E,R),R}return A instanceof Promise?A.then(R=>($n(N,R),R)).catch(R=>($n(E,R),Promise.reject(R))):($n(N,A),A)};return T[Cc]=!0,T[Gs]=C,T},S={_p:r,$id:e,$onAction:wc.bind(null,g),$patch:v,$reset:h,$subscribe(y,C={}){const T=wc(d,y,C.detached,()=>M()),M=o.run(()=>at(()=>r.state.value[e],N=>{(C.flush==="sync"?u:l)&&y({storeId:e,type:Zr.direct,events:f},N)},Yt({},c,C)));return T},$dispose:I},p=fi(S);r._s.set(e,p);const P=(r._a&&r._a.runWithContext||rv)(()=>r._e.run(()=>(o=qu()).run(()=>t({action:O}))));for(const y in P){const C=P[y];if(He(C)&&!ov(C)||sn(C))s||(_&&sv(C)&&(He(C)?C.value=_[y]:qo(C,_[y])),r.state.value[e][y]=C);else if(typeof C=="function"){const T=O(C,y);P[y]=T,a.actions[y]=C}}return Yt(p,P),Yt(ke(p),P),Object.defineProperty(p,"$state",{get:()=>r.state.value[e],set:y=>{v(C=>{Yt(C,y)})}}),r._p.forEach(y=>{Yt(p,o.run(()=>y({store:p,app:r._a,pinia:r,options:a})))}),_&&s&&n.hydrate&&n.hydrate(p.$state,_),l=!0,u=!0,p}/*! #__NO_SIDE_EFFECTS__ */function ff(e,t,n){let r,i;const s=typeof t=="function";typeof e=="string"?(r=e,i=s?n:t):(i=e,r=e.id);function o(a,c){const l=$h();return a=a||(l?yt(lf,null):null),a&&_s(a),a=cf,a._s.has(r)||(s?df(r,t,i,a):av(r,i,a)),a._s.get(r)}return o.$id=r,o}const cv=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,lv=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,uv=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function dv(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){fv(e);return}return t}function fv(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function pv(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const r=n.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!uv.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(cv.test(e)||lv.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,dv)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function hv(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n==null||n[t[r]]==null)return;n=n[t[r]]}return n}function ba(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=ba(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function pf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return ba(e,pf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function hf(e,t){return t.map(n=>n.split(".")).map(n=>[n,hv(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>ba(n,r[1],r[0]),{})}function mf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>pf(n,r),e)}function Ic(e,{storage:t,serializer:n,key:r,debug:i,pick:s,omit:o,beforeHydrate:a,afterHydrate:c},l,u=!0){try{u&&(a==null||a(l));const d=t.getItem(r);if(d){const g=n.deserialize(d),f=s?hf(g,s):g,_=o?mf(f,o):f;e.$patch(_)}u&&(c==null||c(l))}catch(d){i&&console.error("[pinia-plugin-persistedstate]",d)}}function Rc(e,{storage:t,serializer:n,key:r,debug:i,pick:s,omit:o}){try{const a=s?hf(e,s):e,c=o?mf(a,o):a,l=n.serialize(c);t.setItem(r,l)}catch(a){i&&console.error("[pinia-plugin-persistedstate]",a)}}function mv(e,t,n){const{pinia:r,store:i,options:{persist:s=n}}=e;if(!s)return;if(!(i.$id in r.state.value)){const c=r._s.get(i.$id.replace("__hot:",""));c&&Promise.resolve().then(()=>c.$persist());return}const a=(Array.isArray(s)?s:s===!0?[{}]:[s]).map(t);i.$hydrate=({runHooks:c=!0}={})=>{a.forEach(l=>{Ic(i,l,e,c)})},i.$persist=()=>{a.forEach(c=>{Rc(i.$state,c)})},a.forEach(c=>{Ic(i,c,e),i.$subscribe((l,u)=>Rc(u,c),{detached:!0})})}function vv(e={}){return function(t){mv(t,n=>({key:(e.key?e.key:r=>r)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:r=>JSON.stringify(r),deserialize:r=>pv(r)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var gv=vv();function vf(e,t){return function(){return e.apply(t,arguments)}}const{toString:bv}=Object.prototype,{getPrototypeOf:ya}=Object,Ss=(e=>t=>{const n=bv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ot=e=>(e=e.toLowerCase(),t=>Ss(t)===e),ws=e=>t=>typeof t===e,{isArray:ur}=Array,ci=ws("undefined");function yv(e){return e!==null&&!ci(e)&&e.constructor!==null&&!ci(e.constructor)&&ht(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gf=Ot("ArrayBuffer");function Ev(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gf(e.buffer),t}const _v=ws("string"),ht=ws("function"),bf=ws("number"),Cs=e=>e!==null&&typeof e=="object",Sv=e=>e===!0||e===!1,ji=e=>{if(Ss(e)!=="object")return!1;const t=ya(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},wv=Ot("Date"),Cv=Ot("File"),Iv=Ot("Blob"),Rv=Ot("FileList"),Ov=e=>Cs(e)&&ht(e.pipe),Tv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ht(e.append)&&((t=Ss(e))==="formdata"||t==="object"&&ht(e.toString)&&e.toString()==="[object FormData]"))},kv=Ot("URLSearchParams"),[xv,Pv,Av,Nv]=["ReadableStream","Request","Response","Headers"].map(Ot),Mv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),ur(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function yf(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const _n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ef=e=>!ci(e)&&e!==_n;function Go(){const{caseless:e}=Ef(this)&&this||{},t={},n=(r,i)=>{const s=e&&yf(t,i)||i;ji(t[s])&&ji(r)?t[s]=Go(t[s],r):ji(r)?t[s]=Go({},r):ur(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&vi(arguments[r],n);return t}const Lv=(e,t,n,{allOwnKeys:r}={})=>(vi(t,(i,s)=>{n&&ht(i)?e[s]=vf(i,n):e[s]=i},{allOwnKeys:r}),e),Dv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$v=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Vv=(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&ya(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Bv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},jv=e=>{if(!e)return null;if(ur(e))return e;let t=e.length;if(!bf(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Fv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ya(Uint8Array)),Uv=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},Hv=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Wv=Ot("HTMLFormElement"),qv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Oc=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Gv=Ot("RegExp"),_f=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};vi(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},zv=e=>{_f(e,(t,n)=>{if(ht(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ht(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Kv=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return ur(e)?r(e):r(String(e).split(t)),n},Jv=()=>{},Xv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,zs="abcdefghijklmnopqrstuvwxyz",Tc="0123456789",Sf={DIGIT:Tc,ALPHA:zs,ALPHA_DIGIT:zs+zs.toUpperCase()+Tc},Yv=(e=16,t=Sf.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Qv(e){return!!(e&&ht(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Zv=e=>{const t=new Array(10),n=(r,i)=>{if(Cs(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=ur(r)?[]:{};return vi(r,(o,a)=>{const c=n(o,i+1);!ci(c)&&(s[a]=c)}),t[i]=void 0,s}}return r};return n(e,0)},eg=Ot("AsyncFunction"),tg=e=>e&&(Cs(e)||ht(e))&&ht(e.then)&&ht(e.catch),wf=((e,t)=>e?setImmediate:t?((n,r)=>(_n.addEventListener("message",({source:i,data:s})=>{i===_n&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),_n.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ht(_n.postMessage)),ng=typeof queueMicrotask<"u"?queueMicrotask.bind(_n):typeof process<"u"&&process.nextTick||wf,Z={isArray:ur,isArrayBuffer:gf,isBuffer:yv,isFormData:Tv,isArrayBufferView:Ev,isString:_v,isNumber:bf,isBoolean:Sv,isObject:Cs,isPlainObject:ji,isReadableStream:xv,isRequest:Pv,isResponse:Av,isHeaders:Nv,isUndefined:ci,isDate:wv,isFile:Cv,isBlob:Iv,isRegExp:Gv,isFunction:ht,isStream:Ov,isURLSearchParams:kv,isTypedArray:Fv,isFileList:Rv,forEach:vi,merge:Go,extend:Lv,trim:Mv,stripBOM:Dv,inherits:$v,toFlatObject:Vv,kindOf:Ss,kindOfTest:Ot,endsWith:Bv,toArray:jv,forEachEntry:Uv,matchAll:Hv,isHTMLForm:Wv,hasOwnProperty:Oc,hasOwnProp:Oc,reduceDescriptors:_f,freezeMethods:zv,toObjectSet:Kv,toCamelCase:qv,noop:Jv,toFiniteNumber:Xv,findKey:yf,global:_n,isContextDefined:Ef,ALPHABET:Sf,generateString:Yv,isSpecCompliantForm:Qv,toJSONObject:Zv,isAsyncFn:eg,isThenable:tg,setImmediate:wf,asap:ng};function Re(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Z.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const Cf=Re.prototype,If={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{If[e]={value:e}});Object.defineProperties(Re,If);Object.defineProperty(Cf,"isAxiosError",{value:!0});Re.from=(e,t,n,r,i,s)=>{const o=Object.create(Cf);return Z.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),Re.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const rg=null;function zo(e){return Z.isPlainObject(e)||Z.isArray(e)}function Rf(e){return Z.endsWith(e,"[]")?e.slice(0,-2):e}function kc(e,t,n){return e?e.concat(t).map(function(i,s){return i=Rf(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function ig(e){return Z.isArray(e)&&!e.some(zo)}const sg=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function Is(e,t,n){if(!Z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,v){return!Z.isUndefined(v[b])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(i))throw new TypeError("visitor must be a function");function l(_){if(_===null)return"";if(Z.isDate(_))return _.toISOString();if(!c&&Z.isBlob(_))throw new Re("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(_)||Z.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function u(_,b,v){let h=_;if(_&&!v&&typeof _=="object"){if(Z.endsWith(b,"{}"))b=r?b:b.slice(0,-2),_=JSON.stringify(_);else if(Z.isArray(_)&&ig(_)||(Z.isFileList(_)||Z.endsWith(b,"[]"))&&(h=Z.toArray(_)))return b=Rf(b),h.forEach(function(O,S){!(Z.isUndefined(O)||O===null)&&t.append(o===!0?kc([b],S,s):o===null?b:b+"[]",l(O))}),!1}return zo(_)?!0:(t.append(kc(v,b,s),l(_)),!1)}const d=[],g=Object.assign(sg,{defaultVisitor:u,convertValue:l,isVisitable:zo});function f(_,b){if(!Z.isUndefined(_)){if(d.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(_),Z.forEach(_,function(h,I){(!(Z.isUndefined(h)||h===null)&&i.call(t,h,Z.isString(I)?I.trim():I,b,g))===!0&&f(h,b?b.concat(I):[I])}),d.pop()}}if(!Z.isObject(e))throw new TypeError("data must be an object");return f(e),t}function xc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ea(e,t){this._pairs=[],e&&Is(e,this,t)}const Of=Ea.prototype;Of.append=function(t,n){this._pairs.push([t,n])};Of.toString=function(t){const n=t?function(r){return t.call(this,r,xc)}:xc;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function og(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Tf(e,t,n){if(!t)return e;const r=n&&n.encode||og;Z.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=Z.isURLSearchParams(t)?t.toString():new Ea(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Pc{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(r){r!==null&&t(r)})}}const kf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ag=typeof URLSearchParams<"u"?URLSearchParams:Ea,cg=typeof FormData<"u"?FormData:null,lg=typeof Blob<"u"?Blob:null,ug={isBrowser:!0,classes:{URLSearchParams:ag,FormData:cg,Blob:lg},protocols:["http","https","file","blob","url","data"]},_a=typeof window<"u"&&typeof document<"u",Ko=typeof navigator=="object"&&navigator||void 0,dg=_a&&(!Ko||["ReactNative","NativeScript","NS"].indexOf(Ko.product)<0),fg=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pg=_a&&window.location.href||"http://localhost",hg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_a,hasStandardBrowserEnv:dg,hasStandardBrowserWebWorkerEnv:fg,navigator:Ko,origin:pg},Symbol.toStringTag,{value:"Module"})),Ye={...hg,...ug};function mg(e,t){return Is(e,new Ye.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ye.isNode&&Z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function vg(e){return Z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function gg(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function xf(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=s>=n.length;return o=!o&&Z.isArray(i)?i.length:o,c?(Z.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Z.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&Z.isArray(i[o])&&(i[o]=gg(i[o])),!a)}if(Z.isFormData(e)&&Z.isFunction(e.entries)){const n={};return Z.forEachEntry(e,(r,i)=>{t(vg(r),i,n,0)}),n}return null}function bg(e,t,n){if(Z.isString(e))try{return(t||JSON.parse)(e),Z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const gi={transitional:kf,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Z.isObject(t);if(s&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return i?JSON.stringify(xf(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)||Z.isReadableStream(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return mg(t,this.formSerializer).toString();if((a=Z.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Is(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),bg(t)):t}],transformResponse:[function(t){const n=this.transitional||gi.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Z.isResponse(t)||Z.isReadableStream(t))return t;if(t&&Z.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?Re.from(a,Re.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ye.classes.FormData,Blob:Ye.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],e=>{gi.headers[e]={}});const yg=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eg=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&yg[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ac=Symbol("internals");function yr(e){return e&&String(e).trim().toLowerCase()}function Fi(e){return e===!1||e==null?e:Z.isArray(e)?e.map(Fi):String(e)}function _g(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Sg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ks(e,t,n,r,i){if(Z.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!Z.isString(t)){if(Z.isString(r))return t.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(t)}}function wg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Cg(e,t){const n=Z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}class ut{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,c,l){const u=yr(c);if(!u)throw new Error("header name must be a non-empty string");const d=Z.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=Fi(a))}const o=(a,c)=>Z.forEach(a,(l,u)=>s(l,u,c));if(Z.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(Z.isString(t)&&(t=t.trim())&&!Sg(t))o(Eg(t),n);else if(Z.isHeaders(t))for(const[a,c]of t.entries())s(c,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=yr(t),t){const r=Z.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return _g(i);if(Z.isFunction(n))return n.call(this,i,r);if(Z.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=yr(t),t){const r=Z.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ks(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=yr(o),o){const a=Z.findKey(r,o);a&&(!n||Ks(r,r[a],a,n))&&(delete r[a],i=!0)}}return Z.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||Ks(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return Z.forEach(this,(i,s)=>{const o=Z.findKey(r,s);if(o){n[o]=Fi(i),delete n[s];return}const a=t?wg(s):String(s).trim();a!==s&&delete n[s],n[a]=Fi(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Z.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&Z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Ac]=this[Ac]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=yr(o);r[a]||(Cg(i,o),r[a]=!0)}return Z.isArray(t)?t.forEach(s):s(t),this}}ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(ut.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Z.freezeMethods(ut);function Js(e,t){const n=this||gi,r=t||n,i=ut.from(r.headers);let s=r.data;return Z.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Pf(e){return!!(e&&e.__CANCEL__)}function dr(e,t,n){Re.call(this,e??"canceled",Re.ERR_CANCELED,t,n),this.name="CanceledError"}Z.inherits(dr,Re,{__CANCEL__:!0});function Af(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Re("Request failed with status code "+n.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Ig(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Rg(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[s];o||(o=l),n[i]=c,r[i]=l;let d=s,g=0;for(;d!==i;)g+=n[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),l-o<t)return;const f=u&&l-u;return f?Math.round(g*1e3/f):void 0}}function Og(e,t){let n=0,r=1e3/t,i,s;const o=(l,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=r?o(l,u):(i=l,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const is=(e,t,n=3)=>{let r=0;const i=Rg(50,250);return Og(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,l=i(c),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:l||void 0,estimated:l&&a&&u?(a-o)/l:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},Nc=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Mc=e=>(...t)=>Z.asap(()=>e(...t)),Tg=Ye.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ye.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ye.origin),Ye.navigator&&/(msie|trident)/i.test(Ye.navigator.userAgent)):()=>!0,kg=Ye.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Z.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Z.isString(r)&&o.push("path="+r),Z.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xg(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Pg(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Nf(e,t){return e&&!xg(t)?Pg(e,t):t}const Lc=e=>e instanceof ut?{...e}:e;function On(e,t){t=t||{};const n={};function r(l,u,d,g){return Z.isPlainObject(l)&&Z.isPlainObject(u)?Z.merge.call({caseless:g},l,u):Z.isPlainObject(u)?Z.merge({},u):Z.isArray(u)?u.slice():u}function i(l,u,d,g){if(Z.isUndefined(u)){if(!Z.isUndefined(l))return r(void 0,l,d,g)}else return r(l,u,d,g)}function s(l,u){if(!Z.isUndefined(u))return r(void 0,u)}function o(l,u){if(Z.isUndefined(u)){if(!Z.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function a(l,u,d){if(d in t)return r(l,u);if(d in e)return r(void 0,l)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,u,d)=>i(Lc(l),Lc(u),d,!0)};return Z.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=c[u]||i,g=d(e[u],t[u],u);Z.isUndefined(g)&&d!==a||(n[u]=g)}),n}const Mf=e=>{const t=On({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=ut.from(o),t.url=Tf(Nf(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(Z.isFormData(n)){if(Ye.hasStandardBrowserEnv||Ye.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...u].join("; "))}}if(Ye.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(t)),r||r!==!1&&Tg(t.url))){const l=i&&s&&kg.read(s);l&&o.set(i,l)}return t},Ag=typeof XMLHttpRequest<"u",Ng=Ag&&function(e){return new Promise(function(n,r){const i=Mf(e);let s=i.data;const o=ut.from(i.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:l}=i,u,d,g,f,_;function b(){f&&f(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function h(){if(!v)return;const O=ut.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),p={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:O,config:e,request:v};Af(function(P){n(P),b()},function(P){r(P),b()},p),v=null}"onloadend"in v?v.onloadend=h:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(h)},v.onabort=function(){v&&(r(new Re("Request aborted",Re.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new Re("Network Error",Re.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const p=i.transitional||kf;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new Re(S,p.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&Z.forEach(o.toJSON(),function(S,p){v.setRequestHeader(p,S)}),Z.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),l&&([g,_]=is(l,!0),v.addEventListener("progress",g)),c&&v.upload&&([d,f]=is(c),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=O=>{v&&(r(!O||O.type?new dr(null,e,v):O),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const I=Ig(i.url);if(I&&Ye.protocols.indexOf(I)===-1){r(new Re("Unsupported protocol "+I+":",Re.ERR_BAD_REQUEST,e));return}v.send(s||null)})},Mg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(l){if(!i){i=!0,a();const u=l instanceof Error?l:this.reason;r.abort(u instanceof Re?u:new dr(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,s(new Re(`timeout ${t} of ms exceeded`,Re.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(s):l.removeEventListener("abort",s)}),e=null)};e.forEach(l=>l.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Z.asap(a),c}},Lg=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Dg=async function*(e,t){for await(const n of $g(e))yield*Lg(n,t)},$g=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Dc=(e,t,n,r)=>{const i=Dg(e,t);let s=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){a(),c.close();return}let d=u.byteLength;if(n){let g=s+=d;n(g)}c.enqueue(new Uint8Array(u))}catch(l){throw a(l),l}},cancel(c){return a(c),i.return()}},{highWaterMark:2})},Rs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Lf=Rs&&typeof ReadableStream=="function",Vg=Rs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Df=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Bg=Lf&&Df(()=>{let e=!1;const t=new Request(Ye.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$c=64*1024,Jo=Lf&&Df(()=>Z.isReadableStream(new Response("").body)),ss={stream:Jo&&(e=>e.body)};Rs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ss[t]&&(ss[t]=Z.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Re(`Response type '${t}' is not supported`,Re.ERR_NOT_SUPPORT,r)})})})(new Response);const jg=async e=>{if(e==null)return 0;if(Z.isBlob(e))return e.size;if(Z.isSpecCompliantForm(e))return(await new Request(Ye.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(e)||Z.isArrayBuffer(e))return e.byteLength;if(Z.isURLSearchParams(e)&&(e=e+""),Z.isString(e))return(await Vg(e)).byteLength},Fg=async(e,t)=>{const n=Z.toFiniteNumber(e.getContentLength());return n??jg(t)},Ug=Rs&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:g}=Mf(e);l=l?(l+"").toLowerCase():"text";let f=Mg([i,s&&s.toAbortSignal()],o),_;const b=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(c&&Bg&&n!=="get"&&n!=="head"&&(v=await Fg(u,r))!==0){let p=new Request(t,{method:"POST",body:r,duplex:"half"}),w;if(Z.isFormData(r)&&(w=p.headers.get("content-type"))&&u.setContentType(w),p.body){const[P,y]=Nc(v,is(Mc(c)));r=Dc(p.body,$c,P,y)}}Z.isString(d)||(d=d?"include":"omit");const h="credentials"in Request.prototype;_=new Request(t,{...g,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:h?d:void 0});let I=await fetch(_);const O=Jo&&(l==="stream"||l==="response");if(Jo&&(a||O&&b)){const p={};["status","statusText","headers"].forEach(C=>{p[C]=I[C]});const w=Z.toFiniteNumber(I.headers.get("content-length")),[P,y]=a&&Nc(w,is(Mc(a),!0))||[];I=new Response(Dc(I.body,$c,P,()=>{y&&y(),b&&b()}),p)}l=l||"text";let S=await ss[Z.findKey(ss,l)||"text"](I,e);return!O&&b&&b(),await new Promise((p,w)=>{Af(p,w,{data:S,headers:ut.from(I.headers),status:I.status,statusText:I.statusText,config:e,request:_})})}catch(h){throw b&&b(),h&&h.name==="TypeError"&&/fetch/i.test(h.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,e,_),{cause:h.cause||h}):Re.from(h,h&&h.code,e,_)}}),Xo={http:rg,xhr:Ng,fetch:Ug};Z.forEach(Xo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vc=e=>`- ${e}`,Hg=e=>Z.isFunction(e)||e===null||e===!1,$f={getAdapter:e=>{e=Z.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!Hg(n)&&(r=Xo[(o=String(n)).toLowerCase()],r===void 0))throw new Re(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Vc).join(`
`):" "+Vc(s[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Xo};function Xs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dr(null,e)}function Bc(e){return Xs(e),e.headers=ut.from(e.headers),e.data=Js.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$f.getAdapter(e.adapter||gi.adapter)(e).then(function(r){return Xs(e),r.data=Js.call(e,e.transformResponse,r),r.headers=ut.from(r.headers),r},function(r){return Pf(r)||(Xs(e),r&&r.response&&(r.response.data=Js.call(e,e.transformResponse,r.response),r.response.headers=ut.from(r.response.headers))),Promise.reject(r)})}const Vf="1.7.9",Os={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Os[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const jc={};Os.transitional=function(t,n,r){function i(s,o){return"[Axios v"+Vf+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new Re(i(o," has been removed"+(n?" in "+n:"")),Re.ERR_DEPRECATED);return n&&!jc[o]&&(jc[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};Os.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Wg(e,t,n){if(typeof e!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const a=e[s],c=a===void 0||o(a,s,e);if(c!==!0)throw new Re("option "+s+" must be "+c,Re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Re("Unknown option "+s,Re.ERR_BAD_OPTION)}}const Ui={assertOptions:Wg,validators:Os},xt=Ui.validators;class Cn{constructor(t){this.defaults=t,this.interceptors={request:new Pc,response:new Pc}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=On(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Ui.assertOptions(r,{silentJSONParsing:xt.transitional(xt.boolean),forcedJSONParsing:xt.transitional(xt.boolean),clarifyTimeoutError:xt.transitional(xt.boolean)},!1),i!=null&&(Z.isFunction(i)?n.paramsSerializer={serialize:i}:Ui.assertOptions(i,{encode:xt.function,serialize:xt.function},!0)),Ui.assertOptions(n,{baseUrl:xt.spelling("baseURL"),withXsrfToken:xt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Z.merge(s.common,s[n.method]);s&&Z.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ut.concat(o,s);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const l=[];this.interceptors.response.forEach(function(b){l.push(b.fulfilled,b.rejected)});let u,d=0,g;if(!c){const _=[Bc.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,l),g=_.length,u=Promise.resolve(n);d<g;)u=u.then(_[d++],_[d++]);return u}g=a.length;let f=n;for(d=0;d<g;){const _=a[d++],b=a[d++];try{f=_(f)}catch(v){b.call(this,v);break}}try{u=Bc.call(this,f)}catch(_){return Promise.reject(_)}for(d=0,g=l.length;d<g;)u=u.then(l[d++],l[d++]);return u}getUri(t){t=On(this.defaults,t);const n=Nf(t.baseURL,t.url);return Tf(n,t.params,t.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(t){Cn.prototype[t]=function(n,r){return this.request(On(r||{},{method:t,url:n,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(On(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Cn.prototype[t]=n(),Cn.prototype[t+"Form"]=n(!0)});class Sa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new dr(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Sa(function(i){t=i}),cancel:t}}}function qg(e){return function(n){return e.apply(null,n)}}function Gg(e){return Z.isObject(e)&&e.isAxiosError===!0}const Yo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yo).forEach(([e,t])=>{Yo[t]=e});function Bf(e){const t=new Cn(e),n=vf(Cn.prototype.request,t);return Z.extend(n,Cn.prototype,t,{allOwnKeys:!0}),Z.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Bf(On(e,i))},n}const Ve=Bf(gi);Ve.Axios=Cn;Ve.CanceledError=dr;Ve.CancelToken=Sa;Ve.isCancel=Pf;Ve.VERSION=Vf;Ve.toFormData=Is;Ve.AxiosError=Re;Ve.Cancel=Ve.CanceledError;Ve.all=function(t){return Promise.all(t)};Ve.spread=qg;Ve.isAxiosError=Gg;Ve.mergeConfig=On;Ve.AxiosHeaders=ut;Ve.formToJSON=e=>xf(Z.isHTMLForm(e)?new FormData(e):e);Ve.getAdapter=$f.getAdapter;Ve.HttpStatusCode=Yo;Ve.default=Ve;/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const nr=typeof document<"u";function jf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function zg(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&jf(e.default)}const Ne=Object.assign;function Ys(e,t){const n={};for(const r in t){const i=t[r];n[r]=Rt(i)?i.map(e):e(i)}return n}const ei=()=>{},Rt=Array.isArray,Ff=/#/g,Kg=/&/g,Jg=/\//g,Xg=/=/g,Yg=/\?/g,Uf=/\+/g,Qg=/%5B/g,Zg=/%5D/g,Hf=/%5E/g,eb=/%60/g,Wf=/%7B/g,tb=/%7C/g,qf=/%7D/g,nb=/%20/g;function wa(e){return encodeURI(""+e).replace(tb,"|").replace(Qg,"[").replace(Zg,"]")}function rb(e){return wa(e).replace(Wf,"{").replace(qf,"}").replace(Hf,"^")}function Qo(e){return wa(e).replace(Uf,"%2B").replace(nb,"+").replace(Ff,"%23").replace(Kg,"%26").replace(eb,"`").replace(Wf,"{").replace(qf,"}").replace(Hf,"^")}function ib(e){return Qo(e).replace(Xg,"%3D")}function sb(e){return wa(e).replace(Ff,"%23").replace(Yg,"%3F")}function ob(e){return e==null?"":sb(e).replace(Jg,"%2F")}function li(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ab=/\/$/,cb=e=>e.replace(ab,"");function Qs(e,t,n="/"){let r,i={},s="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),s=t.slice(c+1,a>-1?a:t.length),i=e(s)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=fb(r??t,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:li(o)}}function lb(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Fc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ub(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&cr(t.matched[r],n.matched[i])&&Gf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function cr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Gf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!db(e[n],t[n]))return!1;return!0}function db(e,t){return Rt(e)?Uc(e,t):Rt(t)?Uc(t,e):e===t}function Uc(e,t){return Rt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function fb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Gt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ui;(function(e){e.pop="pop",e.push="push"})(ui||(ui={}));var ti;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ti||(ti={}));function pb(e){if(!e)if(nr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cb(e)}const hb=/^[^#]+#/;function mb(e,t){return e.replace(hb,"#")+t}function vb(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Ts=()=>({left:window.scrollX,top:window.scrollY});function gb(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=vb(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Hc(e,t){return(history.state?history.state.position-t:-1)+e}const Zo=new Map;function bb(e,t){Zo.set(e,t)}function yb(e){const t=Zo.get(e);return Zo.delete(e),t}let Eb=()=>location.protocol+"//"+location.host;function zf(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let a=i.includes(e.slice(s))?e.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),Fc(c,"")}return Fc(n,e)+r+i}function _b(e,t,n,r){let i=[],s=[],o=null;const a=({state:g})=>{const f=zf(e,location),_=n.value,b=t.value;let v=0;if(g){if(n.value=f,t.value=g,o&&o===_){o=null;return}v=b?g.position-b.position:0}else r(f);i.forEach(h=>{h(n.value,_,{delta:v,type:ui.pop,direction:v?v>0?ti.forward:ti.back:ti.unknown})})};function c(){o=n.value}function l(g){i.push(g);const f=()=>{const _=i.indexOf(g);_>-1&&i.splice(_,1)};return s.push(f),f}function u(){const{history:g}=window;g.state&&g.replaceState(Ne({},g.state,{scroll:Ts()}),"")}function d(){for(const g of s)g();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function Wc(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Ts():null}}function Sb(e){const{history:t,location:n}=window,r={value:zf(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(c,l,u){const d=e.indexOf("#"),g=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+c:Eb()+e+c;try{t[u?"replaceState":"pushState"](l,"",g),i.value=l}catch(f){console.error(f),n[u?"replace":"assign"](g)}}function o(c,l){const u=Ne({},t.state,Wc(i.value.back,c,i.value.forward,!0),l,{position:i.value.position});s(c,u,!0),r.value=c}function a(c,l){const u=Ne({},i.value,t.state,{forward:c,scroll:Ts()});s(u.current,u,!0);const d=Ne({},Wc(r.value,c,null),{position:u.position+1},l);s(c,d,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function wb(e){e=pb(e);const t=Sb(e),n=_b(e,t.state,t.location,t.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ne({location:"",base:e,go:r,createHref:mb.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Cb(e){return typeof e=="string"||e&&typeof e=="object"}function Kf(e){return typeof e=="string"||typeof e=="symbol"}const Jf=Symbol("");var qc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(qc||(qc={}));function lr(e,t){return Ne(new Error,{type:e,[Jf]:!0},t)}function $t(e,t){return e instanceof Error&&Jf in e&&(t==null||!!(e.type&t))}const Gc="[^/]+?",Ib={sensitive:!1,strict:!1,start:!0,end:!0},Rb=/[.+*?^${}()[\]/\\]/g;function Ob(e,t){const n=Ne({},Ib,t),r=[];let i=n.start?"^":"";const s=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let d=0;d<l.length;d++){const g=l[d];let f=40+(n.sensitive?.25:0);if(g.type===0)d||(i+="/"),i+=g.value.replace(Rb,"\\$&"),f+=40;else if(g.type===1){const{value:_,repeatable:b,optional:v,regexp:h}=g;s.push({name:_,repeatable:b,optional:v});const I=h||Gc;if(I!==Gc){f+=10;try{new RegExp(`(${I})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${_}" (${I}): `+S.message)}}let O=b?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;d||(O=v&&l.length<2?`(?:/${O})`:"/"+O),v&&(O+="?"),i+=O,f+=20,v&&(f+=-8),b&&(f+=-20),I===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let g=1;g<u.length;g++){const f=u[g]||"",_=s[g-1];d[_.name]=f&&_.repeatable?f.split("/"):f}return d}function c(l){let u="",d=!1;for(const g of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of g)if(f.type===0)u+=f.value;else if(f.type===1){const{value:_,repeatable:b,optional:v}=f,h=_ in l?l[_]:"";if(Rt(h)&&!b)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const I=Rt(h)?h.join("/"):h;if(!I)if(v)g.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);u+=I}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function Tb(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Xf(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=Tb(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(zc(r))return 1;if(zc(i))return-1}return i.length-r.length}function zc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const kb={type:0,value:""},xb=/[a-zA-Z0-9_]/;function Pb(e){if(!e)return[[]];if(e==="/")return[[kb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${l}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,l="",u="";function d(){l&&(n===0?s.push({type:0,value:l}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function g(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:xb.test(c)?g():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),d(),o(),i}function Ab(e,t,n){const r=Ob(Pb(e.path),n),i=Ne(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Nb(e,t){const n=[],r=new Map;t=Yc({strict:!1,end:!0,sensitive:!1},t);function i(d){return r.get(d)}function s(d,g,f){const _=!f,b=Jc(d);b.aliasOf=f&&f.record;const v=Yc(t,d),h=[b];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const p of S)h.push(Jc(Ne({},b,{components:f?f.record.components:b.components,path:p,aliasOf:f?f.record:b})))}let I,O;for(const S of h){const{path:p}=S;if(g&&p[0]!=="/"){const w=g.record.path,P=w[w.length-1]==="/"?"":"/";S.path=g.record.path+(p&&P+p)}if(I=Ab(S,g,v),f?f.alias.push(I):(O=O||I,O!==I&&O.alias.push(I),_&&d.name&&!Xc(I)&&o(d.name)),Yf(I)&&c(I),b.children){const w=b.children;for(let P=0;P<w.length;P++)s(w[P],I,f&&f.children[P])}f=f||I}return O?()=>{o(O)}:ei}function o(d){if(Kf(d)){const g=r.get(d);g&&(r.delete(d),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(d);g>-1&&(n.splice(g,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const g=Db(d,n);n.splice(g,0,d),d.record.name&&!Xc(d)&&r.set(d.record.name,d)}function l(d,g){let f,_={},b,v;if("name"in d&&d.name){if(f=r.get(d.name),!f)throw lr(1,{location:d});v=f.record.name,_=Ne(Kc(g.params,f.keys.filter(O=>!O.optional).concat(f.parent?f.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),d.params&&Kc(d.params,f.keys.map(O=>O.name))),b=f.stringify(_)}else if(d.path!=null)b=d.path,f=n.find(O=>O.re.test(b)),f&&(_=f.parse(b),v=f.record.name);else{if(f=g.name?r.get(g.name):n.find(O=>O.re.test(g.path)),!f)throw lr(1,{location:d,currentLocation:g});v=f.record.name,_=Ne({},g.params,d.params),b=f.stringify(_)}const h=[];let I=f;for(;I;)h.unshift(I.record),I=I.parent;return{name:v,path:b,params:_,matched:h,meta:Lb(h)}}e.forEach(d=>s(d));function u(){n.length=0,r.clear()}return{addRoute:s,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Kc(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Jc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Mb(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Mb(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Xc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Lb(e){return e.reduce((t,n)=>Ne(t,n.meta),{})}function Yc(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Db(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;Xf(e,t[s])<0?r=s:n=s+1}const i=$b(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function $b(e){let t=e;for(;t=t.parent;)if(Yf(t)&&Xf(e,t)===0)return t}function Yf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Vb(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Uf," "),o=s.indexOf("="),a=li(o<0?s:s.slice(0,o)),c=o<0?null:li(s.slice(o+1));if(a in t){let l=t[a];Rt(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Qc(e){let t="";for(let n in e){const r=e[n];if(n=ib(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Rt(r)?r.map(s=>s&&Qo(s)):[r&&Qo(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function Bb(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Rt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const jb=Symbol(""),Zc=Symbol(""),ks=Symbol(""),Ca=Symbol(""),ea=Symbol("");function Er(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function tn(e,t,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=g=>{g===!1?c(lr(4,{from:n,to:t})):g instanceof Error?c(g):Cb(g)?c(lr(2,{from:t,to:g})):(o&&r.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},u=s(()=>e.call(r&&r.instances[i],t,n,l));let d=Promise.resolve(u);e.length<3&&(d=d.then(l)),d.catch(g=>c(g))})}function Zs(e,t,n,r,i=s=>s()){const s=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(jf(c)){const u=(c.__vccOpts||c)[t];u&&s.push(tn(u,n,r,o,a,i))}else{let l=c();s.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=zg(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[t];return f&&tn(f,n,r,o,a,i)()}))}}return s}function el(e){const t=yt(ks),n=yt(Ca),r=Se(()=>{const c=Fe(e.to);return t.resolve(c)}),i=Se(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const g=d.findIndex(cr.bind(null,u));if(g>-1)return g;const f=tl(c[l-2]);return l>1&&tl(u)===f&&d[d.length-1].path!==f?d.findIndex(cr.bind(null,c[l-2])):g}),s=Se(()=>i.value>-1&&qb(n.params,r.value.params)),o=Se(()=>i.value>-1&&i.value===n.matched.length-1&&Gf(n.params,r.value.params));function a(c={}){if(Wb(c)){const l=t[Fe(e.replace)?"replace":"push"](Fe(e.to)).catch(ei);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Se(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function Fb(e){return e.length===1?e[0]:e}const Ub=Pe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:el,setup(e,{slots:t}){const n=fi(el(e)),{options:r}=yt(ks),i=Se(()=>({[nl(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[nl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&Fb(t.default(n));return e.custom?s:Ae("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Hb=Ub;function Wb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function qb(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Rt(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function tl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const nl=(e,t,n)=>e??t??n,Gb=Pe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=yt(ea),i=Se(()=>e.route||r.value),s=yt(Zc,0),o=Se(()=>{let l=Fe(s);const{matched:u}=i.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=Se(()=>i.value.matched[o.value]);$i(Zc,Se(()=>o.value+1)),$i(jb,a),$i(ea,i);const c=K();return at(()=>[c.value,a.value,e.name],([l,u,d],[g,f,_])=>{u&&(u.instances[d]=l,f&&f!==u&&l&&l===g&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!cr(u,f)||!g)&&(u.enterCallbacks[d]||[]).forEach(b=>b(l))},{flush:"post"}),()=>{const l=i.value,u=e.name,d=a.value,g=d&&d.components[u];if(!g)return rl(n.default,{Component:g,route:l});const f=d.props[u],_=f?f===!0?l.params:typeof f=="function"?f(l):f:null,v=Ae(g,Ne({},_,t,{onVnodeUnmounted:h=>{h.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return rl(n.default,{Component:v,route:l})||v}}});function rl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const zb=Gb;function Kb(e){const t=Nb(e.routes,e),n=e.parseQuery||Vb,r=e.stringifyQuery||Qc,i=e.history,s=Er(),o=Er(),a=Er(),c=sh(Gt);let l=Gt;nr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ys.bind(null,U=>""+U),d=Ys.bind(null,ob),g=Ys.bind(null,li);function f(U,J){let ne,ie;return Kf(U)?(ne=t.getRecordMatcher(U),ie=J):ie=U,t.addRoute(ie,ne)}function _(U){const J=t.getRecordMatcher(U);J&&t.removeRoute(J)}function b(){return t.getRoutes().map(U=>U.record)}function v(U){return!!t.getRecordMatcher(U)}function h(U,J){if(J=Ne({},J||c.value),typeof U=="string"){const $=Qs(n,U,J.path),z=t.resolve({path:$.path},J),Q=i.createHref($.fullPath);return Ne($,z,{params:g(z.params),hash:li($.hash),redirectedFrom:void 0,href:Q})}let ne;if(U.path!=null)ne=Ne({},U,{path:Qs(n,U.path,J.path).path});else{const $=Ne({},U.params);for(const z in $)$[z]==null&&delete $[z];ne=Ne({},U,{params:d($)}),J.params=d(J.params)}const ie=t.resolve(ne,J),te=U.hash||"";ie.params=u(g(ie.params));const V=lb(r,Ne({},U,{hash:rb(te),path:ie.path})),D=i.createHref(V);return Ne({fullPath:V,hash:te,query:r===Qc?Bb(U.query):U.query||{}},ie,{redirectedFrom:void 0,href:D})}function I(U){return typeof U=="string"?Qs(n,U,c.value.path):Ne({},U)}function O(U,J){if(l!==U)return lr(8,{from:J,to:U})}function S(U){return P(U)}function p(U){return S(Ne(I(U),{replace:!0}))}function w(U){const J=U.matched[U.matched.length-1];if(J&&J.redirect){const{redirect:ne}=J;let ie=typeof ne=="function"?ne(U):ne;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=I(ie):{path:ie},ie.params={}),Ne({query:U.query,hash:U.hash,params:ie.path!=null?{}:U.params},ie)}}function P(U,J){const ne=l=h(U),ie=c.value,te=U.state,V=U.force,D=U.replace===!0,$=w(ne);if($)return P(Ne(I($),{state:typeof $=="object"?Ne({},te,$.state):te,force:V,replace:D}),J||ne);const z=ne;z.redirectedFrom=J;let Q;return!V&&ub(r,ie,ne)&&(Q=lr(16,{to:z,from:ie}),G(ie,ie,!0,!1)),(Q?Promise.resolve(Q):T(z,ie)).catch(H=>$t(H)?$t(H,2)?H:j(H):x(H,z,ie)).then(H=>{if(H){if($t(H,2))return P(Ne({replace:D},I(H.to),{state:typeof H.to=="object"?Ne({},te,H.to.state):te,force:V}),J||z)}else H=N(z,ie,!0,D,te);return M(z,ie,H),H})}function y(U,J){const ne=O(U,J);return ne?Promise.reject(ne):Promise.resolve()}function C(U){const J=re.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(U):U()}function T(U,J){let ne;const[ie,te,V]=Jb(U,J);ne=Zs(ie.reverse(),"beforeRouteLeave",U,J);for(const $ of ie)$.leaveGuards.forEach(z=>{ne.push(tn(z,U,J))});const D=y.bind(null,U,J);return ne.push(D),L(ne).then(()=>{ne=[];for(const $ of s.list())ne.push(tn($,U,J));return ne.push(D),L(ne)}).then(()=>{ne=Zs(te,"beforeRouteUpdate",U,J);for(const $ of te)$.updateGuards.forEach(z=>{ne.push(tn(z,U,J))});return ne.push(D),L(ne)}).then(()=>{ne=[];for(const $ of V)if($.beforeEnter)if(Rt($.beforeEnter))for(const z of $.beforeEnter)ne.push(tn(z,U,J));else ne.push(tn($.beforeEnter,U,J));return ne.push(D),L(ne)}).then(()=>(U.matched.forEach($=>$.enterCallbacks={}),ne=Zs(V,"beforeRouteEnter",U,J,C),ne.push(D),L(ne))).then(()=>{ne=[];for(const $ of o.list())ne.push(tn($,U,J));return ne.push(D),L(ne)}).catch($=>$t($,8)?$:Promise.reject($))}function M(U,J,ne){a.list().forEach(ie=>C(()=>ie(U,J,ne)))}function N(U,J,ne,ie,te){const V=O(U,J);if(V)return V;const D=J===Gt,$=nr?history.state:{};ne&&(ie||D?i.replace(U.fullPath,Ne({scroll:D&&$&&$.scroll},te)):i.push(U.fullPath,te)),c.value=U,G(U,J,ne,D),j()}let E;function k(){E||(E=i.listen((U,J,ne)=>{if(!oe.listening)return;const ie=h(U),te=w(ie);if(te){P(Ne(te,{replace:!0,force:!0}),ie).catch(ei);return}l=ie;const V=c.value;nr&&bb(Hc(V.fullPath,ne.delta),Ts()),T(ie,V).catch(D=>$t(D,12)?D:$t(D,2)?(P(Ne(I(D.to),{force:!0}),ie).then($=>{$t($,20)&&!ne.delta&&ne.type===ui.pop&&i.go(-1,!1)}).catch(ei),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),x(D,ie,V))).then(D=>{D=D||N(ie,V,!1),D&&(ne.delta&&!$t(D,8)?i.go(-ne.delta,!1):ne.type===ui.pop&&$t(D,20)&&i.go(-1,!1)),M(ie,V,D)}).catch(ei)}))}let B=Er(),A=Er(),R;function x(U,J,ne){j(U);const ie=A.list();return ie.length?ie.forEach(te=>te(U,J,ne)):console.error(U),Promise.reject(U)}function F(){return R&&c.value!==Gt?Promise.resolve():new Promise((U,J)=>{B.add([U,J])})}function j(U){return R||(R=!U,k(),B.list().forEach(([J,ne])=>U?ne(U):J()),B.reset()),U}function G(U,J,ne,ie){const{scrollBehavior:te}=e;if(!nr||!te)return Promise.resolve();const V=!ne&&yb(Hc(U.fullPath,0))||(ie||!ne)&&history.state&&history.state.scroll||null;return hs().then(()=>te(U,J,V)).then(D=>D&&gb(D)).catch(D=>x(D,U,J))}const Y=U=>i.go(U);let ce;const re=new Set,oe={currentRoute:c,listening:!0,addRoute:f,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:b,resolve:h,options:e,push:S,replace:p,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:A.add,isReady:F,install(U){const J=this;U.component("RouterLink",Hb),U.component("RouterView",zb),U.config.globalProperties.$router=J,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Fe(c)}),nr&&!ce&&c.value===Gt&&(ce=!0,S(i.location).catch(te=>{}));const ne={};for(const te in Gt)Object.defineProperty(ne,te,{get:()=>c.value[te],enumerable:!0});U.provide(ks,J),U.provide(Ca,ad(ne)),U.provide(ea,c);const ie=U.unmount;re.add(U),U.unmount=function(){re.delete(U),re.size<1&&(l=Gt,E&&E(),E=null,c.value=Gt,ce=!1,R=!1),ie()}}};function L(U){return U.reduce((J,ne)=>J.then(()=>C(ne)),Promise.resolve())}return oe}function Jb(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(l=>cr(l,a))?r.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(l=>cr(l,c))||i.push(c))}return[n,r,i]}function _t(){return yt(ks)}function Xb(e){return yt(Ca)}const Si="https://i12a802.p.ssafy.io",Hr=K(localStorage.getItem("token")),eo=K(localStorage.getItem("id")),Yb=Se(()=>!!Hr.value);let wi=!1;function xs(){const e=_t(),t=async()=>{var o;try{const a=await Ve.get(Si+"/api/auth/login/kakao/url");(o=a.data)!=null&&o.loginUrl?window.location.href=a.data.loginUrl:console.error("카카오 로그인 URL을 가져오지 못했습니다.")}catch(a){console.error("카카오 로그인 요청 중 오류 발생:",a)}},n=()=>new URLSearchParams(window.location.search).get("code"),r=async o=>{if(!wi)try{wi=!0;const a=await Ve.post(Si+"/api/auth/login/kakao?code="+o);await i(a.data.accessToken);const c=window.location.href.split("?")[0];window.history.replaceState({},document.title,c),await e.push("/")}catch(a){console.error("로그인 요청 중 오류 발생:",a)}finally{wi=!1}},i=async o=>{if(localStorage.setItem("token",o),Hr.value=o,!localStorage.getItem("id"))try{const a=await fetch(Si+"/api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const c=await a.json();eo.value=c.userId,localStorage.setItem("id",c.userId),localStorage.setItem("username",c.nickname)}catch(a){console.error("Profile loading failed:",a)}},s=async()=>{try{const o=await fetch(Si+"/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);localStorage.removeItem("token"),localStorage.removeItem("id"),Hr.value=null,eo.value=null}catch(o){console.error("Profile loading failed:",o)}await e.push("/"),window.location.reload()};return We(async()=>{if(!wi){Hr.value=localStorage.getItem("token"),eo.value=localStorage.getItem("id");const o=n();o&&await r(o)}}),{token:Hr,isLoggedIn:Yb,handleKakaoLogin:t,handleLogout:s,getAuthCode:n,sendKakaoLoginRequest:r}}const Tn="/assets/Harvard-QXnsY4wZ.jpg",kn="/assets/Ib-edu-r77b4Uhw.jpg",xn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20400%20400'%3e%3c!--%20그라데이션%20정의%20--%3e%3cdefs%3e%3c!--%20토마토%20본체%20그라데이션%20--%3e%3cradialGradient%20id='tomatoGradient'%20cx='40%25'%20cy='40%25'%20r='60%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%23ff8787'/%3e%3cstop%20offset='70%25'%20style='stop-color:%23ff6b6b'/%3e%3cstop%20offset='100%25'%20style='stop-color:%23fa5252'/%3e%3c/radialGradient%3e%3c!--%20잎사귀%20그라데이션%20--%3e%3clinearGradient%20id='leafGradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20style='stop-color:%2369db7c'/%3e%3cstop%20offset='100%25'%20style='stop-color:%2337b24d'/%3e%3c/linearGradient%3e%3c!--%20잎사귀%20그림자%20--%3e%3cfilter%20id='leafShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='2'/%3e%3cfeOffset%20dx='2'%20dy='2'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.3'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c!--%203D%20효과를%20위한%20필터%20--%3e%3cfilter%20id='shadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeGaussianBlur%20in='SourceAlpha'%20stdDeviation='5'/%3e%3cfeOffset%20dx='3'%20dy='3'%20result='offsetblur'/%3e%3cfeComponentTransfer%3e%3cfeFuncA%20type='linear'%20slope='0.2'/%3e%3c/feComponentTransfer%3e%3cfeMerge%3e%3cfeMergeNode/%3e%3cfeMergeNode%20in='SourceGraphic'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c!--%20그림자%20효과가%20있는%20본체%20--%3e%3cg%20filter='url(%23shadow)'%3e%3ccircle%20cx='200'%20cy='220'%20r='120'%20fill='url(%23tomatoGradient)'/%3e%3c/g%3e%3c!--%20토마토%20줄기와%20잎사귀%20--%3e%3cg%20filter='url(%23leafShadow)'%3e%3cpath%20d='M190%2085%20C170%2070,%20150%2085,%20170%20105%20C190%20125,%20210%2090,%20190%2085'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M210%2080%20C230%2065,%20250%2080,%20230%20100%20C210%20120,%20190%2085,%20210%2080'%20fill='url(%23leafGradient)'/%3e%3cpath%20d='M200%2075%20C220%2060,%20240%2075,%20220%2095%20C200%20115,%20180%2080,%20200%2075'%20fill='url(%23leafGradient)'/%3e%3c/g%3e%3c!--%203D%20효과를%20위한%20하이라이트%20--%3e%3cellipse%20cx='160'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3cellipse%20cx='240'%20cy='160'%20rx='40'%20ry='30'%20fill='%23ffa8a8'%20opacity='0.4'/%3e%3c!--%20눈%20(입체적인%20버전)%20--%3e%3cg%3e%3c!--%20왼쪽%20눈%20--%3e%3cellipse%20cx='155'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='155'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='160'%20cy='185'%20r='6'%20fill='white'/%3e%3c!--%20오른쪽%20눈%20--%3e%3cellipse%20cx='245'%20cy='190'%20rx='30'%20ry='30'%20fill='white'/%3e%3ccircle%20cx='245'%20cy='190'%20r='15'%20fill='%232b2b2b'/%3e%3ccircle%20cx='250'%20cy='185'%20r='6'%20fill='white'/%3e%3c/g%3e%3c!--%20볼%20--%3e%3ccircle%20cx='140'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3ccircle%20cx='260'%20cy='235'%20r='22'%20fill='%23ff8787'%20opacity='0.5'/%3e%3c!--%20입%20(부드러운%20버전)%20--%3e%3cpath%20d='M160%20235%20C180%20265,%20220%20265,%20240%20235'%20fill='%232b2b2b'%20opacity='0.7'/%3e%3cpath%20d='M165%20238%20C185%20268,%20215%20268,%20235%20238'%20fill='%23ff6b6b'/%3e%3cpath%20d='M170%20245%20C190%20265,%20210%20265,%20230%20245'%20fill='white'%20opacity='0.3'/%3e%3c!--%20추가적인%20하이라이트%20--%3e%3ccircle%20cx='180'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='220'%20cy='150'%20r='5'%20fill='white'%20opacity='0.4'/%3e%3ccircle%20cx='200'%20cy='160'%20r='3'%20fill='white'%20opacity='0.4'/%3e%3c/svg%3e",Pn="/assets/base-BSXWYRaa.css",An="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNjAgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImhvdEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRjQxNkMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY0QjJCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICAKICA8IS0tIEJhZGdlIGJhY2tncm91bmQgLS0+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9InVybCgjaG90R3JhZGllbnQpIi8+CiAgCiAgPCEtLSBGbGFtZSBpY29uIC0tPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsNCkiPgogICAgPHBhdGggZD0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMCIgCiAgICAgICAgICBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC45Ij4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgCiAgICAgICAgICAgICAgIGR1cj0iMXMiIAogICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgCiAgICAgICAgICAgICAgIHZhbHVlcz0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMDsKICAgICAgICAgICAgICAgICAgICAgICBNNywxIEM3LDEgMTIsNSAxMiw5IEMxMiwxMyA3LDE1IDUsMTUgQzMsMTUgLTEsMTMgLTEsOSBDLTEsNSA0LDEgNCwxIEM0LDEgNS41LDMgNywxOwogICAgICAgICAgICAgICAgICAgICAgIE03LDAgQzcsMCAxMSw0IDExLDggQzExLDEyIDcsMTQgNSwxNCBDMywxNCAwLDEyIDAsOCBDMCw0IDQsMCA0LDAgQzQsMCA1LjUsMiA3LDAiLz4KICAgIDwvcGF0aD4KICA8L2c+CiAgCiAgPCEtLSBIT1QgdGV4dCAtLT4KICA8dGV4dCB4PSIzMiIgeT0iMTYuNSIgCiAgICAgICAgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiAKICAgICAgICBmb250LXdlaWdodD0iYm9sZCIgCiAgICAgICAgZm9udC1zaXplPSIxMiIgCiAgICAgICAgZmlsbD0id2hpdGUiIAogICAgICAgIHRleHQtYW5jaG9yPSJtaWRkbGUiPgogICAgSE9UCiAgPC90ZXh0Pgo8L3N2Zz4=",Nn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='2500'%20height='2500'%20viewBox='0%200%20256%20256'%3e%3cpath%20d='M128%2036C70.562%2036%2024%2072.713%2024%20118c0%2029.279%2019.466%2054.97%2048.748%2069.477-1.593%205.494-10.237%2035.344-10.581%2037.689%200%200-.207%201.762.934%202.434s2.483.15%202.483.15c3.272-.457%2037.943-24.811%2043.944-29.04%205.995.849%2012.168%201.29%2018.472%201.29%2057.438%200%20104-36.712%20104-82%200-45.287-46.562-82-104-82z'/%3e%3cpath%20fill='%23FFE812'%20d='M70.5%20146.625c-3.309%200-6-2.57-6-5.73V105.25h-9.362c-3.247%200-5.888-2.636-5.888-5.875s2.642-5.875%205.888-5.875h30.724c3.247%200%205.888%202.636%205.888%205.875s-2.642%205.875-5.888%205.875H76.5v35.645c0%203.16-2.691%205.73-6%205.73zM123.112%20146.547c-2.502%200-4.416-1.016-4.993-2.65l-2.971-7.778-18.296-.001-2.973%207.783c-.575%201.631-2.488%202.646-4.99%202.646a9.155%209.155%200%200%201-3.814-.828c-1.654-.763-3.244-2.861-1.422-8.52l14.352-37.776c1.011-2.873%204.082-5.833%207.99-5.922%203.919.088%206.99%203.049%208.003%205.928l14.346%2037.759c1.826%205.672.236%207.771-1.418%208.532a9.176%209.176%200%200%201-3.814.827c-.001%200%200%200%200%200zm-11.119-21.056L106%20108.466l-5.993%2017.025h11.986zM138%20145.75c-3.171%200-5.75-2.468-5.75-5.5V99.5c0-3.309%202.748-6%206.125-6s6.125%202.691%206.125%206v35.25h12.75c3.171%200%205.75%202.468%205.75%205.5s-2.579%205.5-5.75%205.5H138zM171.334%20146.547c-3.309%200-6-2.691-6-6V99.5c0-3.309%202.691-6%206-6s6%202.691%206%206v12.896l16.74-16.74c.861-.861%202.044-1.335%203.328-1.335%201.498%200%203.002.646%204.129%201.772%201.051%201.05%201.678%202.401%201.764%203.804.087%201.415-.384%202.712-1.324%203.653l-13.673%2013.671%2014.769%2019.566a5.951%205.951%200%200%201%201.152%204.445%205.956%205.956%200%200%201-2.328%203.957%205.94%205.94%200%200%201-3.609%201.211%205.953%205.953%200%200%201-4.793-2.385l-14.071-18.644-2.082%202.082v13.091a6.01%206.01%200%200%201-6.002%206.003z'/%3e%3c/svg%3e",Mn="/assets/%EC%86%8C%EA%B0%9C%ED%8E%98%EC%9D%B4%EC%A7%80-CeKMKY3r.svg",Qb=["src"],Zb=Pe({__name:"KakaoLoginButton",props:{buttonColor:{},buttonRadius:{},buttonPadding:{},buttonFontSize:{},buttonTextColor:{},hasBorder:{type:Boolean},buttonBorder:{},buttonBorderColor:{},hoverColor:{}},emits:["click"],setup(e,{emit:t}){const{handleKakaoLogin:n}=xs(),r=t,i=async()=>{r("click"),await n()},s=e,o=K(null),a=()=>{o.value&&s.hoverColor&&(o.value.style.backgroundColor=s.hoverColor)},c=()=>{o.value&&(o.value.style.backgroundColor=s.buttonColor||"",o.value.style.color=s.buttonTextColor||"")},l=u=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${u}`],import.meta.url).href;return(u,d)=>(W(),q("button",{class:"start-button",style:je({backgroundColor:u.buttonColor,borderRadius:u.buttonRadius+"px",padding:u.buttonPadding,fontSize:u.buttonFontSize,color:u.buttonTextColor,border:u.hasBorder?u.buttonBorder:"none",borderColor:u.hasBorder?u.buttonBorderColor:"transparent"}),onClick:i,onMouseover:a,onMouseleave:c,ref_key:"buttonRef",ref:o},[m("img",{src:l("kakao.svg"),alt:"카카오 로그인",class:"kakao-icon"},null,8,Qb),d[0]||(d[0]=Le(" 시작하기 "))],36))}}),Te=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Ia=Te(Zb,[["__scopeId","data-v-f494851d"]]),Wr={LF:`
`,NULL:"\0"};class nn{constructor(t){const{command:n,headers:r,body:i,binaryBody:s,escapeHeaderValues:o,skipContentLengthHeader:a}=t;this.command=n,this.headers=Object.assign({},r||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=i||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=a||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}static fromRawFrame(t,n){const r={},i=s=>s.replace(/^\s+|\s+$/g,"");for(const s of t.headers.reverse()){s.indexOf(":");const o=i(s[0]);let a=i(s[1]);n&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(a=nn.hdrValueUnEscape(a)),r[o]=a}return new nn({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:n})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?nn.toUnit8Array(t,this._binaryBody).buffer:t+this._body+Wr.NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const n of Object.keys(this.headers||{})){const r=this.headers[n];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${n}:${nn.hdrValueEscape(`${r}`)}`):t.push(`${n}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(Wr.LF)+Wr.LF+Wr.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,n){const r=new TextEncoder().encode(t),i=new Uint8Array([0]),s=new Uint8Array(r.length+n.length+i.length);return s.set(r),s.set(n,r.length),s.set(i,r.length+n.length),s}static marshall(t){return new nn(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const il=0,Ci=10,Ii=13,ey=58;class ty{constructor(t,n){this.onFrame=t,this.onIncomingPing=n,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,n=!1){let r;if(typeof t=="string"?r=this._encoder.encode(t):r=new Uint8Array(t),n&&r[r.length-1]!==0){const i=new Uint8Array(r.length+1);i.set(r,0),i[r.length]=0,r=i}for(let i=0;i<r.length;i++){const s=r[i];this._onByte(s)}}_collectFrame(t){if(t!==il&&t!==Ii){if(t===Ci){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==Ii){if(t===Ci){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==Ii){if(t===Ci){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===ey){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==Ii){if(t===Ci){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(n=>n[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===il){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Ft;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"})(Ft=Ft||(Ft={}));var vt;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"})(vt=vt||(vt={}));class st{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}st.V1_0="1.0";st.V1_1="1.1";st.V1_2="1.2";st.default=new st([st.V1_2,st.V1_1,st.V1_0]);function ny(e,t){e.terminate=function(){const n=()=>{};this.onerror=n,this.onmessage=n,this.onopen=n;const r=new Date,i=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=o=>{const a=new Date().getTime()-r.getTime();t(`Discarded socket (#${i})  closed after ${a}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),s==null||s.call(e,{code:4001,reason:`Quick discarding socket (#${i}) without waiting for the shutdown sequence.`,wasClean:!1})}}class ry{constructor(t,n,r){this._client=t,this._webSocket=n,this._connected=!1,this._serverFrameHandlers={CONNECTED:i=>{this.debug(`connected to server ${i.headers.server}`),this._connected=!0,this._connectedVersion=i.headers.version,this._connectedVersion===st.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(i.headers),this.onConnect(i)},MESSAGE:i=>{const s=i.headers.subscription,o=this._subscriptions[s]||this.onUnhandledMessage,a=i,c=this,l=this._connectedVersion===st.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(u={})=>c.ack(l,s,u),a.nack=(u={})=>c.nack(l,s,u),o(a)},RECEIPT:i=>{const s=this._receiptWatchers[i.headers["receipt-id"]];s?(s(i),delete this._receiptWatchers[i.headers["receipt-id"]]):this.onUnhandledReceipt(i)},ERROR:i=>{this.onStompError(i)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const t=new ty(n=>{const r=nn.fromRawFrame(n,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=n=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data;this.debug(`<<< ${r}`)}t.parseChunk(n.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=n=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(n)},this._webSocket.onerror=n=>{this.onWebSocketError(n)},this._webSocket.onopen=()=>{const n=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),n["accept-version"]=this.stompVersions.supportedVersions(),n["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:n})}}_setupHeartbeat(t){if(t.version!==st.V1_1&&t.version!==st.V1_2||!t["heart-beat"])return;const[n,r]=t["heart-beat"].split(",").map(i=>parseInt(i,10));if(this.heartbeatOutgoing!==0&&r!==0){const i=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${i}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===Ft.OPEN&&(this._webSocket.send(Wr.LF),this.debug(">>> PING"))},i)}if(this.heartbeatIncoming!==0&&n!==0){const i=Math.max(this.heartbeatIncoming,n);this.debug(`check PONG every ${i}ms`),this._ponger=setInterval(()=>{const s=Date.now()-this._lastServerActivityTS;s>i*2&&(this.debug(`did not receive server activity for the last ${s}ms`),this._closeOrDiscardWebsocket())},i)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Ft.CONNECTING||this._webSocket.readyState===Ft.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&ny(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:n,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=t,a=new nn({command:n,headers:r,body:i,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o});let c=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof c=="string"&&(c=new TextEncoder().encode(c)),typeof c!="string"||!this.splitLargeFrames)this._webSocket.send(c);else{let l=c;for(;l.length>0;){const u=l.substring(0,this.maxWebSocketChunkSize);l=l.substring(this.maxWebSocketChunkSize),this._webSocket.send(u),this.debug(`chunk sent = ${u.length}, remaining = ${l.length}`)}}}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,n=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(n)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Ft.CONNECTING||this._webSocket.readyState===Ft.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:n,headers:r,body:i,binaryBody:s,skipContentLengthHeader:o}=t,a=Object.assign({destination:n},r);this._transmit({command:"SEND",headers:a,body:i,binaryBody:s,skipContentLengthHeader:o})}watchForReceipt(t,n){this._receiptWatchers[t]=n}subscribe(t,n,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=t,this._subscriptions[r.id]=n,this._transmit({command:"SUBSCRIBE",headers:r});const i=this;return{id:r.id,unsubscribe(s){return i.unsubscribe(r.id,s)}}}unsubscribe(t,n={}){n=Object.assign({},n),delete this._subscriptions[t],n.id=t,this._transmit({command:"UNSUBSCRIBE",headers:n})}begin(t){const n=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:n}});const r=this;return{id:n,commit(){r.commit(n)},abort(){r.abort(n)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,n,r={}){r=Object.assign({},r),this._connectedVersion===st.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"ACK",headers:r})}nack(t,n,r={}){return r=Object.assign({},r),this._connectedVersion===st.V1_2?r.id=t:r["message-id"]=t,r.subscription=n,this._transmit({command:"NACK",headers:r})}}class Qf{constructor(t={}){this.stompVersions=st.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=vt.INACTIVE;const n=()=>{};this.debug=n,this.beforeConnect=n,this.onConnect=n,this.onDisconnect=n,this.onUnhandledMessage=n,this.onUnhandledReceipt=n,this.onUnhandledFrame=n,this.onStompError=n,this.onWebSocketClose=n,this.onWebSocketError=n,this.logRawCommunication=!1,this.onChangeState=n,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}get webSocket(){var t;return(t=this._stompHandler)==null?void 0:t._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===vt.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}configure(t){Object.assign(this,t)}activate(){const t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(vt.ACTIVE),this._connect()};this.state===vt.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}async _connect(){if(await this.beforeConnect(),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const t=this._createWebSocket();this._stompHandler=new ry(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:n=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(n)},onDisconnect:n=>{this.onDisconnect(n)},onStompError:n=>{this.onStompError(n)},onWebSocketClose:n=>{this._stompHandler=void 0,this.state===vt.DEACTIVATING&&this._changeState(vt.INACTIVE),this.onWebSocketClose(n),this.active&&this._schedule_reconnect()},onWebSocketError:n=>{this.onWebSocketError(n)},onUnhandledMessage:n=>{this.onUnhandledMessage(n)},onUnhandledReceipt:n=>{this.onUnhandledReceipt(n)},onUnhandledFrame:n=>{this.onUnhandledFrame(n)}}),this._stompHandler.start()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}async deactivate(t={}){var s;const n=t.force||!1,r=this.active;let i;if(this.state===vt.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(vt.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Ft.CLOSED){const o=this._stompHandler.onWebSocketClose;i=new Promise((a,c)=>{this._stompHandler.onWebSocketClose=l=>{o(l),a()}})}else return this._changeState(vt.INACTIVE),Promise.resolve();return n?(s=this._stompHandler)==null||s.discardWebsocket():r&&this._disposeStompHandler(),i}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,n){this._checkConnection(),this._stompHandler.watchForReceipt(t,n)}subscribe(t,n,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,n,r)}unsubscribe(t,n={}){this._checkConnection(),this._stompHandler.unsubscribe(t,n)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,n,r={}){this._checkConnection(),this._stompHandler.ack(t,n,r)}nack(t,n,r={}){this._checkConnection(),this._stompHandler.nack(t,n,r)}}const Ln=ff("matching",{state:()=>({isMatching:!1,isMatched:!1,matchingDetails:{format:"",category:"",subject:"",matchedCount:0,participants:[],debateId:null,openviduToken:null},matchedCount:0,isExpanded:!0}),actions:{setFormat(e){this.matchingDetails={...this.matchingDetails,format:e}},setCategory(e){this.matchingDetails={...this.matchingDetails,category:e}},startMatching(){this.isMatching=!0,this.isMatched=!1,this.matchedCount=0},setMatchedCount(e){this.matchedCount=e,this.matchingDetails.matchedCount=e},cancelMatching(){this.isMatching=!1,this.isMatched=!1,this.clearMatching()},completeMatching(e,t){this.isMatching=!1,this.isMatched=!0,this.matchingDetails.subject=e,this.matchingDetails.participants=t},setDebateId(e){this.matchingDetails.debateId=e},setOpenviduToken(e){this.matchingDetails.openviduToken=e},clearMatching(){this.matchedCount=0,this.matchingDetails={format:"",category:"",subject:"",matchedCount:0,participants:[],debateId:null,openviduToken:null},this.isMatching=!1,this.isMatched=!1},toggleMatchingExpanded(){this.isExpanded=!this.isExpanded}}}),iy={class:"matching-status-container"},sy={class:"matching-card"},oy={class:"expanded-content"},ay={class:"header-section"},cy={class:"header-main"},ly={class:"category-info"},uy={class:"category-title"},dy={class:"status-info"},fy={class:"status-subtitle"},py={class:"participants-section"},hy={class:"participants-header"},my={class:"count"},vy={class:"participants-list"},gy={class:"progress-section"},by={class:"progress-container"},yy={__name:"MatchingStatus",setup(e){const t="https://i12a802.p.ssafy.io",n="wss://i12a802.p.ssafy.io",r=Ln(),i=K(localStorage.getItem("token")),s=_t(),o=K(0),a=K(!1),c=K(5);K(null);const l=K("POLITICS"),u=Se(()=>r.matchingDetails||null),d=Se(()=>r.matchedCount||0);console.log("matchingStore:",r),console.log("matchingStore.isMatching:",r.isMatching);const g=new Qf({brokerURL:n+"/ws",connectHeaders:{Authorization:`Bearer ${i.value}`},debug:v=>console.log(v),reconnectDelay:5e3,onConnect:()=>{console.log("WebSocket Connected");const v=localStorage.getItem("id");g.subscribe(`/user/${v}/matching`,async h=>{const I=JSON.parse(h.body);switch(console.log("Received Message from matching topic:",I),console.log(I.messageType),I.messageType){case"MATCHING_UPDATE":I.payload&&I.payload.waitingUserCount!==void 0&&(console.log("Updated waiting user count:",I.payload.waitingUserCount),r.setMatchedCount(I.payload.waitingUserCount));break;case"MATCHING_SUCCESS":if(I.payload){r.setDebateId(I.payload.debateId),localStorage.setItem("openviduToken",I.payload.openviduToken),console.log("Authorization Token:",i.value);try{const O=await Ve.get(`${t}/api/debates/${I.payload.debateId}/room`,{headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"}}),S=O.data.subject,p=O.data.users.map(w=>({name:w.nickname,image:w.profileImageUrl}));console.log("response_p:",O.data.users),console.log(p),r.completeMatching(S,p),_(),g.deactivate()}catch(O){O.response&&O.response.status===401?console.error("Unauthorized. Please check your token."):console.error("Failed to fetch debate room information:",O)}}break;case"CANCEL_SUCCESS":I.payload&&(r.cancelMatching(),o.value=0,g.deactivate(),console.log("Matching cancelled successfully"));break;default:console.log("Unhandled message type:",I.messageType);break}}),g.publish({destination:`/pub/matching.join/${l.value}`,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"JOIN",payload:{userId:v}})})},onDisconnect:()=>console.log("WebSocket Disconnected")}),f=v=>{l.value=v,console.log("소켓 연결 시도"),g.activate()},_=()=>{a.value=!0,c.value=5;const v=setInterval(()=>{c.value>0?c.value--:(clearInterval(v),a.value=!1,s.push(`/debate/${r.matchingDetails.debateId}`))},1e3)},b=()=>{const v=localStorage.getItem("id");if(!v){console.error("User ID not found");return}g.publish({destination:`/pub/matching.cancel/${l.value}`,headers:{Authorization:`Bearer ${i.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"CANCEL",payload:{userId:v}})})};return We(()=>{r.isMatching&&f(r.matchingDetails.category)}),(v,h)=>(W(),q("div",iy,[m("div",sy,[m("div",oy,[m("section",ay,[m("div",cy,[m("div",ly,[h[1]||(h[1]=m("span",{class:"label"},"주제 카테고리",-1)),m("h2",uy,[Le(X(u.value.category||"기본 카테고리")+" ",1),h[0]||(h[0]=m("span",{class:"emoji"},"🔬",-1))])]),m("div",dy,[h[2]||(h[2]=m("h3",{class:"status-title"},"함께 토론할 친구를 찾고 있어요!",-1)),m("p",fy,X(u.value.format||"기본 형식")+" 토론을 위해 4명의 참가자가 필요해요 ",1)])])]),m("section",py,[m("div",hy,[h[3]||(h[3]=m("span",{class:"label"},"현재 매칭된 인원",-1)),m("span",my,X(d.value)+"/4명",1)]),m("div",vy,[be(Fm,{name:"participant"},{default:St(()=>[(W(!0),q(me,null,Ce(o.value,(I,O)=>(W(),q("div",{key:O,class:we(["participant",{active:I}])},X(I||"?"),3))),128))]),_:1})])]),m("div",gy,[m("div",by,[m("div",{class:"progress-bar",style:je({width:`${d.value/4*100}%`})},null,4)])]),m("div",{class:"action-section"},[m("button",{onClick:b,class:"cancel-button"}," 매칭 취소하기 ")])])])]))}},Ey=Te(yy,[["__scopeId","data-v-95bbcd48"]]),_y={class:"nav"},Sy={class:"logo"},wy={class:"menu"},Cy={class:"sidebar-footer"},Iy={key:1,class:"login-container"},Ry={__name:"Navigation",setup(e){const t=Ln(),{isLoggedIn:n,handleLogout:r}=xs(),i=()=>{t.toggleMatchingExpanded()};return(s,o)=>{const a=gt("router-link");return W(),q(me,null,[m("nav",_y,[m("div",Sy,[be(a,{to:"/",class:"home-link"},{default:St(()=>o[1]||(o[1]=[m("div",{class:"logo-circle"},[m("div",{class:"logo-inner-circle"}),m("div",{class:"logo-core"})],-1),m("span",{class:"logo-text"},"토마톡",-1)])),_:1})]),m("div",wy,[be(a,{to:"/practice-main",class:"menu-item"},{default:St(()=>o[2]||(o[2]=[Le("토론 연습하기")])),_:1}),Fe(t).isMatching?(W(),q("div",{key:0,onClick:i,class:"menu-item matching-active"},o[3]||(o[3]=[m("span",null,"매칭 진행중",-1),m("div",{class:"matching-indicator"},null,-1)]))):(W(),pt(a,{key:1,to:"/debate-select",class:"menu-item"},{default:St(()=>o[4]||(o[4]=[Le("실전 토론")])),_:1})),be(a,{to:"/debate-list",class:"menu-item"},{default:St(()=>o[5]||(o[5]=[Le("토론 방청하기")])),_:1})]),m("div",Cy,[Fe(n)?(W(),q("button",{key:0,class:"sidebar-auth-item",onClick:o[0]||(o[0]=(...c)=>Fe(r)&&Fe(r)(...c))},o[6]||(o[6]=[m("span",{class:"sidebar-text"}," 로그아웃 ",-1)]))):(W(),q("div",Iy,[be(Ia,{buttonColor:"#ff6b6b",buttonRadius:"20",buttonPadding:"10px 22px",buttonFontSize:"14px",buttonTextColor:"white"})]))])]),Fe(t).isMatching&&Fe(t).isExpanded?(W(),pt(Ey,{key:0})):xe("",!0)],64)}}},Oy=Te(Ry,[["__scopeId","data-v-e77c7561"]]),Ty=["src"],ky=Pe({__name:"ProfileImage",props:{imageSrc:{},size:{}},setup(e){const t=Se(()=>new URL("@/assets/defaultImage.svg",import.meta.url).href);return(n,r)=>(W(),q("div",{class:"profile-avatar",style:je({width:n.size+"px",height:n.size+"px"})},[m("img",{src:n.imageSrc||t.value,alt:"프로필 이미지",class:"profile-image",style:je({width:n.size+"px",height:n.size+"px"})},null,12,Ty)],4))}}),xy=Te(ky,[["__scopeId","data-v-7aa842ce"]]),Py={class:"profile-container"},Ay={class:"profile-name"},Ny={key:0,class:"connector"},My={class:"discussion-info"},Ly={class:"info-content"},Dy={class:"timer-section"},$y={class:"timer-container"},Vy={class:"countdown"},By={class:"timer-circle",viewBox:"0 0 50 50"},jy={class:"timer-number"},Fy={class:"auto-enter-text"},Uy=Pe({__name:"MatchingCompleteModal",props:{initialCountdown:{},debateId:{}},emits:["close","startDiscussion","resetMatching"],setup(e,{emit:t}){const n=Ln(),r=e,i=t,s=K(r.initialCountdown),o=_t(),a=K([]),c=K("");return We(async()=>{c.value=n.matchingDetails.subject;const l=setInterval(()=>{s.value>0?s.value--:(clearInterval(l),i("startDiscussion"),i("resetMatching"),o.push(`/debate/${r.debateId}`))},1e3)}),(l,u)=>(W(),pt(tf,{name:"modal"},{default:St(()=>[m("div",{class:"modal-overlay",onClick:u[1]||(u[1]=d=>l.$emit("close"))},[m("div",{class:"modal-content",onClick:u[0]||(u[0]=Es(()=>{},["stop"]))},[u[5]||(u[5]=m("h3",{class:"modal-title"},"모든 참가자가 준비되었습니다",-1)),m("div",Py,[(W(!0),q(me,null,Ce(a.value,(d,g)=>(W(),q(me,{key:d.name},[m("div",{class:we(["profile-item",{"current-user":d.name==="YOU"}])},[be(xy,{src:d.image,size:50},null,8,["src"]),m("span",Ay,X(d.name),1)],2),g<a.value.length-1?(W(),q("div",Ny)):xe("",!0)],64))),128))]),m("div",My,[u[2]||(u[2]=m("span",{class:"info-label"},"토론 주제",-1)),m("p",Ly,X(c.value),1)]),m("div",Dy,[u[4]||(u[4]=m("p",{class:"timer-text"},"잠시 후 토론이 시작됩니다",-1)),m("div",$y,[m("div",Vy,[(W(),q("svg",By,[u[3]||(u[3]=m("circle",{class:"timer-circle-bg",r:"20",cx:"25",cy:"25"},null,-1)),m("circle",{class:"timer-circle-progress",r:"20",cx:"25",cy:"25",style:je({strokeDashoffset:`${(1-s.value/5)*125.6}px`})},null,4)])),m("span",jy,X(s.value),1)])]),m("p",Fy,X(s.value)+"초 후 자동 입장",1)])])])]),_:1}))}}),Hy=Te(Uy,[["__scopeId","data-v-2889694c"]]),Wy=Pe({name:"Footer"}),qy={class:"footer"};function Gy(e,t,n,r,i,s){return W(),q("footer",qy,t[0]||(t[0]=[m("div",{class:"footer-bottom"},[m("div",{class:"footer-links"},[m("a",{href:"#",class:"footer-link"},"이용약관"),m("a",{href:"#",class:"footer-link"},"개인정보처리방침")])],-1)]))}const zy=Te(Wy,[["render",Gy],["__scopeId","data-v-e68224b8"]]),Ky={class:"app-container"},Jy={class:"app"},Xy={key:0,class:"matching-modal"},Yy=Pe({__name:"App",setup(e){const t=Ln(),n=_t(),r=()=>{t.matchingDetails.participants=[],t.isMatching=!1,t.isMatched=!1,console.log("매칭 상태가 초기화되었습니다.")},i=K("김토론"),s=()=>{const u=t.matchingDetails.debateId;r(),n.push(`/debate/${u}`)},o=()=>{t.isMatched=!1},a=Xb(),c=["/debate/","/debate-prepare/"],l=Se(()=>c.some(u=>a.path.startsWith(u)));return(u,d)=>{const g=gt("router-view");return W(),q("div",Ky,[m("div",Jy,[l.value?xe("",!0):(W(),pt(Oy,{key:0})),m("div",{class:we(["app-content",{"no-navbar":l.value}])},[m("main",null,[be(g,{userName:i.value},null,8,["userName"])])],2),l.value?xe("",!0):(W(),pt(zy,{key:1}))]),Fe(t).isMatched?(W(),q("div",Xy,[be(Hy,{initialCountdown:5,debateId:Fe(t).matchingDetails.debateId,participantsData:Fe(t).matchingDetails.participants,onClose:o,onStartDiscussion:s,onResetMatching:r},null,8,["debateId","participantsData"])])):xe("",!0)])}}}),Qy={class:"hero"},Zy={class:"hero-content"},e0={class:"hero-buttons"},t0=["src"],n0=Pe({__name:"Hero",setup(e){const t=K(!1);xs();const n=s=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${s}`],import.meta.url).href,r=()=>{t.value=!0},i=()=>{t.value=!1};return(s,o)=>{const a=gt("router-link");return W(),q("section",Qy,[m("div",Zy,[o[1]||(o[1]=m("h1",{class:"hero-title"},[Le(" 토론 실력을 키우는 "),m("span",{class:"highlight"},"가장 스마트한 방법")],-1)),o[2]||(o[2]=m("h2",{class:"hero-description"},[Le(" 단계별 토론 연습부터 실전 토론까지,"),m("br"),Le(" 성장의 달콤함을 지금 경험해보세요. ")],-1)),m("div",e0,[be(Ia,{class:"action-button",buttonColor:"white",buttonRadius:28,buttonPadding:"16px 40px",buttonFontSize:"16px",buttonTextColor:"black",hasBorder:!0,buttonBorder:"2px solid #ff6b6b",buttonBorderColor:"#ff6b6b",hoverColor:"#ff6b6b"}),be(a,{to:"/info",class:"action-button secondary-button"},{default:St(()=>o[0]||(o[0]=[Le(" 더 알아보기 ")])),_:1})])]),m("div",{class:"character-section",onMouseenter:r,onMouseleave:i},[be(a,{to:"/info",class:"tori-character"},{default:St(()=>[m("img",{src:n("Tori.svg"),alt:"토리 이미지",class:"Tori"},null,8,t0)]),_:1}),m("div",{class:we(["hover-text",{"is-visible":t.value}])},o[3]||(o[3]=[Mt('<h3 data-v-f04930bc>안녕하세요!🙌</h3><p data-v-f04930bc><span class="no-wrap" data-v-f04930bc>토론 마스터 클래스 <strong data-v-f04930bc>토마톡</strong>의 리더 <span class="highlight" data-v-f04930bc><strong data-v-f04930bc>토리</strong></span>에요🍅 </span></p><p class="no-wrap" data-v-f04930bc> 체계적인 토론 학습부터 실전 매칭까지, <br data-v-f04930bc>당신의 성장을 <span class="highlight" data-v-f04930bc><strong data-v-f04930bc>토리</strong></span>가 함께할게요! </p>',3)]),2)],32)])}}}),r0=Te(n0,[["__scopeId","data-v-f04930bc"]]),i0={class:"features"},s0={class:"feature-cards"},o0={class:"feature-card"},a0={class:"feature-header"},c0={class:"feature-emoji"},l0={class:"feature-title"},u0={class:"feature-description"},d0=Pe({__name:"Features",setup(e){const t=[{emoji:"🤖",title:"AI 토론 연습",description:"AI 토론 연습으로 부담 없이 실력을 키워보세요"},{emoji:"🗣️",title:"실전 토론",description:"다양한 주제로 실제 토론을 경험해보세요"},{emoji:"📈",title:"성장 기록",description:"내 토론 스타일을 분석받고 발전시켜보세요"}];return(n,r)=>(W(),q("section",i0,[r[0]||(r[0]=m("h2",{class:"section-title"},[Le(" 여러분의 토론 실력 성장을 위한 "),m("br"),Le("모든 과정을 지원해드려요 ")],-1)),m("div",s0,[(W(),q(me,null,Ce(t,i=>m("div",{class:"feature-card",key:i.title},[m("div",o0,[m("div",a0,[m("span",c0,X(i.emoji),1),m("h3",l0,X(i.title),1)]),m("p",u0,X(i.description),1)])])),64))])]))}}),f0=Te(d0,[["__scopeId","data-v-535eea51"]]),p0=Pe({name:"Curriculum",setup(){return{steps:[{step:1,emoji:"🎯",title:"토론 기초 다지기",features:["토론의 기본 규칙","논리적 사고 훈련","주장과 근거 구성"]},{step:2,emoji:"💡",title:"AI 토론 연습",features:["AI 토론봇과 1:1 토론","실시간 피드백"]},{step:3,emoji:"🎓",title:"실전 토론 도전",features:["실시간 매칭 토론","관중 피드백 시스템","토론 기록 분석"]},{step:4,emoji:"🏆",title:"토론 마스터 인증",features:["단계별 인증서 발급","토론 마스터 등급","전문 토론가 인증"]}]}}}),h0={class:"curriculum"},m0={class:"steps"},v0={class:"step-emoji"},g0={class:"step-number"},b0={class:"step-title"},y0={class:"step-features"};function E0(e,t,n,r,i,s){return W(),q("section",h0,[t[0]||(t[0]=m("h2",{class:"section-title"},"토론 마스터를 향한 체계적인 커리큘럼",-1)),m("div",m0,[(W(!0),q(me,null,Ce(e.steps,o=>(W(),q("div",{class:"step-card",key:o.step},[m("span",v0,X(o.emoji),1),m("div",g0,"STEP "+X(o.step),1),m("h3",b0,X(o.title),1),m("ul",y0,[(W(!0),q(me,null,Ce(o.features,a=>(W(),q("li",{key:a},X(a),1))),128))])]))),128))])])}const _0=Te(p0,[["render",E0],["__scopeId","data-v-ec0e8089"]]),S0={class:"cta"},w0={class:"cta-content"},C0={class:"button-wrapper"},I0=Pe({__name:"CallToAction",setup(e){return xs(),(t,n)=>(W(),q("section",S0,[m("div",w0,[n[0]||(n[0]=m("h2",{class:"cta-title"},"지금 바로 시작하세요",-1)),n[1]||(n[1]=m("p",{class:"cta-description"},"토리와 함께 토론의 즐거움을 경험해보세요",-1)),m("div",C0,[be(Ia,{class:"action-button",buttonColor:"white",buttonRadius:28,buttonPadding:"16px 40px",buttonFontSize:"16px",buttonTextColor:"black",hasBorder:!0,buttonBorder:"2px solid #ff6b6b",buttonBorderColor:"#ff6b6b",hoverColor:"#ff6b6b"})])])]))}}),Zf=Te(I0,[["__scopeId","data-v-b71e8808"]]),R0=Pe({name:"Home",components:{Hero:r0,Features:f0,Curriculum:_0,CallToAction:Zf}});function O0(e,t,n,r,i,s){const o=gt("Hero"),a=gt("Features"),c=gt("Curriculum"),l=gt("CallToAction");return W(),q("div",null,[be(o),be(a),be(c),be(l)])}const T0=Te(R0,[["render",O0]]),k0="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNjAgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImhvdEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRjQxNkMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY0QjJCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICAKICA8IS0tIEJhZGdlIGJhY2tncm91bmQgLS0+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjI0IiByeD0iMTIiIGZpbGw9InVybCgjaG90R3JhZGllbnQpIi8+CiAgCiAgPCEtLSBGbGFtZSBpY29uIC0tPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsNCkiPgogICAgPHBhdGggZD0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMCIgCiAgICAgICAgICBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC45Ij4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZCIgCiAgICAgICAgICAgICAgIGR1cj0iMXMiIAogICAgICAgICAgICAgICByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgCiAgICAgICAgICAgICAgIHZhbHVlcz0iTTcsMCBDNywwIDExLDQgMTEsOCBDMTEsMTIgNywxNCA1LDE0IEMzLDE0IDAsMTIgMCw4IEMwLDQgNCwwIDQsMCBDNCwwIDUuNSwyIDcsMDsKICAgICAgICAgICAgICAgICAgICAgICBNNywxIEM3LDEgMTIsNSAxMiw5IEMxMiwxMyA3LDE1IDUsMTUgQzMsMTUgLTEsMTMgLTEsOSBDLTEsNSA0LDEgNCwxIEM0LDEgNS41LDMgNywxOwogICAgICAgICAgICAgICAgICAgICAgIE03LDAgQzcsMCAxMSw0IDExLDggQzExLDEyIDcsMTQgNSwxNCBDMywxNCAwLDEyIDAsOCBDMCw0IDQsMCA0LDAgQzQsMCA1LjUsMiA3LDAiLz4KICAgIDwvcGF0aD4KICA8L2c+CiAgCiAgPCEtLSBIT1QgdGV4dCAtLT4KICA8dGV4dCB4PSIzMiIgeT0iMTYuNSIgCiAgICAgICAgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiAKICAgICAgICBmb250LXdlaWdodD0iYm9sZCIgCiAgICAgICAgZm9udC1zaXplPSIxMiIgCiAgICAgICAgZmlsbD0id2hpdGUiIAogICAgICAgIHRleHQtYW5jaG9yPSJtaWRkbGUiPgogICAgSE9UCiAgPC90ZXh0Pgo8L3N2Zz4=";/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ri={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=({size:e,strokeWidth:t=2,absoluteStrokeWidth:n,color:r,iconNode:i,name:s,class:o,...a},{slots:c})=>Ae("svg",{...Ri,width:e||Ri.width,height:e||Ri.height,stroke:r||Ri.stroke,"stroke-width":n?Number(t)*24/Number(e):t,class:["lucide",`lucide-${x0(s??"icon")}`],...a},[...i.map(l=>Ae(...l)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=(e,t)=>(n,{slots:r})=>Ae(P0,{...n,iconNode:t,name:e},r);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=fr("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=fr("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=fr("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=fr("GraduationCapIcon",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=fr("SwordIcon",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=fr("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),V0={class:"debate-container"},B0={class:"cards-container"},j0={class:"cards-wrapper"},F0=["onMouseenter"],U0={class:"card-header"},H0={class:"badges-container"},W0={key:0,src:k0,alt:"HOT",class:"hot-badge"},q0={class:"viewers-count"},G0={class:"category"},z0={class:"debate-title"},K0=["onClick"],J0=Pe({__name:"HotDebate",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(null),i=_t(),s=Se(()=>[...n.value].sort((u,d)=>d.spectatorsCount-u.spectatorsCount)),o=(u,d)=>{const g=[{x:0,z:40,scale:1.1},{x:-360,z:20,scale:.95},{x:360,z:20,scale:.9}],f=r.value===u.debateId,_=r.value!==null,b=g[d];return f?{transform:`
        translate3d(${b.x}px, -2rem, 100px)
        scale(${b.scale*1.05})
        rotate3d(0, 1, 0, 0deg)
      `,zIndex:30}:_?{transform:`
        translate3d(${b.x}px, 0, ${b.z-20}px)
        scale(${b.scale*.95})
        rotate3d(0, 1, 0, ${d===1?10:d===2?-10:0}deg)
      `,zIndex:d===0?20:10}:{transform:`
      translate3d(${b.x}px, 0, ${b.z}px)
      scale(${b.scale})
      rotate3d(0, 1, 0, ${d===0?0:d===1?10:-10}deg)
    `,zIndex:d===0?20:10,opacity:1}},a=async()=>{try{const u=await Ve.get(t+"/api/debates",{params:{cursor:9007199254740991,size:3,status:"IN_PROGRESS",sortBy:"POPULARITY"}});n.value=u.data.content}catch(u){console.error("인기 토론을 불러오지 못했습니다:",u)}},c=u=>({POLITICS:"정치/국제",ECONOMY:"경제/노동",ETHICS:"윤리/법",SCIENCE:"과학/기술",EDUCATION:"교육/사회"})[u]||u,l=u=>{i.push("/debate")};return We(()=>{a()}),(u,d)=>(W(),q("div",V0,[d[2]||(d[2]=m("h2",{class:"title"},"🔥많은 사람들이 방청 중인 토론이에요!",-1)),m("div",B0,[m("div",j0,[(W(!0),q(me,null,Ce(s.value,(g,f)=>(W(),q("div",{key:g.debateId,class:"card-position",style:je(o(g,f)),onMouseenter:_=>r.value=g.debateId,onMouseleave:d[0]||(d[0]=_=>r.value=null)},[m("div",{class:we(["debate-card",r.value===g.debateId?"hovered":""])},[m("div",{class:we(["rank-badge",f===0?"rank-first":""])},X(f+1),3),m("div",U0,[m("div",H0,[f===0?(W(),q("img",W0)):xe("",!0)]),m("div",q0,[be(Fe($0),{size:16}),m("span",null,X(g.spectatorsCount)+"명",1)])]),m("div",G0,X(c(g.category)),1),m("h3",z0,X(g.subject),1),m("button",{class:we(["join-button",r.value===g.debateId?"hovered":""]),onClick:_=>l(g.debateId)},[d[1]||(d[1]=Le(" 방청하기 ")),be(Fe(A0),{size:18,class:we(["arrow-icon",r.value===g.debateId?"shifted":""])},null,8,["class"])],10,K0)],2)],44,F0))),128))])])]))}}),X0=Te(J0,[["__scopeId","data-v-b8615773"]]),Y0={class:"debate-container"},Q0={class:"content-wrapper"},Z0={class:"bubbles-container"},eE=["onClick"],tE={class:"bubble-content"},nE={class:"category-name"},rE={class:"debate-count"},iE={class:"debates-container"},sE={class:"debate-list"},oE={key:0,class:"loading"},aE={key:1,class:"error-message"},cE={class:"debate-label"},lE={class:"debate-title"},uE={class:"participants"},dE=["onClick"],fE={key:0,class:"loading"},pE={key:1,class:"empty-state"},hE=Pe({__name:"DebateCategories",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(!0),i=K(!1),s=K(null),o=K(9007199254740991),a=K(5),c=K("POLITICS"),l=K(null),u=[{value:"POLITICS",label:"정치",color:"#ff6b6b"},{value:"ECONOMY",label:"경제",color:"#ffd43b"},{value:"ETHICS",label:"윤리",color:"#69db7c"},{value:"SCIENCE",label:"과학",color:"#4dabf7"},{value:"EDUCATION",label:"사회",color:"#748ffc"}],d=async O=>{try{console.log(`Connecting to debate: ${O}`),window.location.href="/debate"}catch(S){console.error("Failed to connect to debate:",S)}},g=async(O=!1)=>{try{if(!c.value)return;O?i.value=!0:(r.value=!0,o.value=9007199254740991);const p=(await Ve.get(t+"/api/debates",{params:{cursor:o.value,size:a.value,status:"IN_PROGRESS",categories:c.value}})).data.content;p&&p.length>0&&(o.value=Number(p[p.length-1].debateId),n.value=O?[...n.value,...p]:p)}catch{s.value="토론 목록을 불러오지 못했습니다."}finally{r.value=!1,i.value=!1}},f=Se(()=>{const O={};return u.forEach(S=>{O[S.value]={debateCount:0}}),n.value.forEach(S=>{O[S.category]&&O[S.category].debateCount++}),O}),_=O=>O.toLocaleString("ko-KR"),b=()=>{const O=u.find(S=>S.value===c.value);return O?O.label:"전체"},v=O=>{c.value=O,g()};let h=null;const I=()=>{l.value&&(h=new IntersectionObserver(O=>{O.forEach(S=>{S.isIntersecting&&n.value.length>=a.value&&g(!0)})},{threshold:1}),h.observe(l.value))};return We(()=>{I()}),hi(()=>{h&&l.value&&h.unobserve(l.value)}),(O,S)=>(W(),q("div",Y0,[S[0]||(S[0]=m("h2",{class:"title"},"🎯 진행 중인 토론을 주제별로 모아놨어요",-1)),m("div",Q0,[m("div",Z0,[(W(),q(me,null,Ce(u,p=>{var w;return m("div",{key:p.value,class:we(["category-bubble",{selected:c.value===p.value}]),onClick:P=>v(p.value)},[m("div",tE,[m("span",nE,X(p.label),1),m("span",rE,X(((w=f.value[p.value])==null?void 0:w.debateCount)||0)+"개 진행중",1)])],10,eE)}),64))]),m("div",iE,[c.value?(W(),q(me,{key:0},[m("div",sE,[r.value?(W(),q("div",oE," 토론 목록을 불러오는 중... ")):s.value?(W(),q("div",aE,X(s.value),1)):(W(!0),q(me,{key:2},Ce(n.value,p=>(W(),q("div",{key:p.debateId,class:"debate-item"},[m("span",cE,X(b()),1),m("span",lE,X(p.subject),1),m("span",uE,X(_(p.spectatorsCount))+"명 참여",1),m("button",{onClick:w=>d(p.debateId),class:"enter-button"}," 방청하기 ",8,dE)]))),128))]),m("div",{ref_key:"sentinel",ref:l},null,512),i.value?(W(),q("div",fE," 추가 토론 목록을 불러오는 중... ")):xe("",!0)],64)):(W(),q("div",pE,"카테고리를 선택해주세요"))])])]))}}),mE=Te(hE,[["__scopeId","data-v-69c89011"]]),vE={class:"container mx-auto px-4 py-8"},gE=Pe({__name:"DebateExplorer",setup(e){const t=K(null),n=K(0),r=K([{id:"politics",name:"정치",activeDebateCount:5,color:"#4A90E2"},{id:"economics",name:"경제",activeDebateCount:3,color:"#50E3C2"},{id:"society",name:"사회",activeDebateCount:4,color:"#F5A623"},{id:"science",name:"과학",activeDebateCount:2,color:"#7ED321"}]);We(async()=>{t.value={id:"1",title:"AI 기술 발전이 일자리에 미치는 영향",category:"technology",duration:0,spectatorCount:38,participants:0,startTime:"2024-02-15T15:00:00",endTime:""},n.value=152});const i=o=>{console.log(`Spectating debate: ${o}`)},s=o=>{console.log(`Selected category: ${o}`)};return(o,a)=>(W(),q("main",vE,[be(X0,{"hot-debate":t.value,"total-spectators":n.value,onSpectate:i},null,8,["hot-debate","total-spectators"]),be(mE,{categories:r.value,onSelectCategory:s},null,8,["categories"])]))}}),bE={class:"progress-container"},yE={class:"progress-wrapper"},EE={class:"stage-inner-circle"},_E={key:1,class:"check-mark"},SE={class:"stage-controls"},wE=Pe({__name:"StudyProgress",emits:["continue"],setup(e,{emit:t}){Rm(f=>({fcf75ebc:o.value}));const n={background:"#ffffff",primary:"#ff6b6b",pathBg:"#f6f6f6",textPrimary:"#111827",textSecondary:"#6b7280"},r=K([{title:"기본기",progress:"3/3 완료",status:"completed",completedTasks:3,totalTasks:3},{title:"실전 연습",progress:"2/5 진행중",status:"current",completedTasks:2,totalTasks:5},{title:"토론 대회",progress:"0/3 준비중",status:"locked",completedTasks:0,totalTasks:3}]),i=K(!1);let s;We(()=>{s=setInterval(()=>{i.value=!i.value},1e3)}),Ht(()=>{s&&clearInterval(s)});const o=Se(()=>{const f=r.value.findIndex(_=>_.status==="current");return f===-1?"0%":`${f/(r.value.length-1)*100}%`}),a=Se(()=>r.value.findIndex(f=>f.status==="current")),c=f=>{const _=r.value.length;return f*100/(_-1)},l=f=>{switch(f){case"current":case"completed":return n.primary;default:return n.pathBg}},u=f=>{switch(f){case"current":case"completed":return n.primary;default:return n.textSecondary}};Se(()=>{const f=r.value.reduce((b,v)=>b+v.completedTasks,0),_=r.value.reduce((b,v)=>b+v.totalTasks,0);return Math.round(f/_*100)});const d=t,g=f=>{d("continue",f)};return(f,_)=>{const b=gt("router-link");return W(),q("div",bE,[m("div",yE,[_[2]||(_[2]=m("div",{class:"progress-line-bg"},null,-1)),m("div",{class:"progress-line",style:je({width:`${o.value}%`})},null,4),(W(!0),q(me,null,Ce(r.value,(v,h)=>(W(),q(me,{key:h},[m("div",{class:"stage-info",style:je({left:`${c(h)}%`})},[m("div",{class:"stage-title",style:je({color:n.textPrimary})},X(v.title),5),m("div",{class:"stage-progress",style:je({color:n.textSecondary})},X(v.progress),5)],4),m("div",{class:"stage-circle-wrapper",style:je({left:`${c(h)}%`})},[v.status==="current"?(W(),q("div",{key:0,class:we(["pulse-animation",{"pulse-active":i.value}])},null,2)):xe("",!0),m("div",{class:"stage-circle",style:je({backgroundColor:l(v.status)})},[m("div",EE,[m("span",{class:"stage-number",style:je({color:u(v.status)})},X(h+1),5)])],4),v.status==="completed"?(W(),q("div",_E,_[1]||(_[1]=[m("div",{class:"check-mark-inner"},null,-1)]))):xe("",!0)],4)],64))),128))]),m("div",SE,[a.value!==-1?(W(),pt(b,{key:0,to:"/practice-main",class:"continue-button",onClick:_[0]||(_[0]=v=>g(a.value))},{default:St(()=>_[3]||(_[3]=[Le("이어서 학습하기 "),m("span",{class:"continue-arrow"},null,-1)])),_:1})):xe("",!0)])])}}}),CE=Te(wE,[["__scopeId","data-v-fd11a80d"]]),IE={class:"dashboard"},RE={class:"welcome-section"},OE={class:"welcome-content"},TE={class:"tori-character"},kE=["src"],xE={class:"welcome-text"},PE={class:"stats-section"},AE={class:"stat-value"},NE={class:"stat-subtext"},ME=Pe({__name:"MainView",setup(e){const t=s=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${s}`],import.meta.url).href,n=K(localStorage.getItem("username")||"김토론"),r=K({debateCount:24,winRate:67,feedbackCount:42,weeklyDebateIncrease:3,percentileRank:30,newFeedbacks:2}),i=K([{title:"참여한 토론",value:`${r.value.debateCount}회`,subtext:`지난 주 대비 +${r.value.weeklyDebateIncrease}회`},{title:"승률",value:`${r.value.winRate}%`,subtext:`상위 ${r.value.percentileRank}%`},{title:"받은 피드백",value:`${r.value.feedbackCount}개`,subtext:`새 피드백 +${r.value.newFeedbacks}개`}]);return K([{title:"AI 토론 연습 시작하기",subtitle:"현재 진행중인 연습: 28명"},{title:"실전 토론 참여하기",subtitle:"대기 중인 토론: 5개"},{title:"토론 구경하기",subtitle:"현재 진행중: 12개"}]),K([{title:"AI 기술 발전이 일자리에 미치는 영향",level:"중급 토론",spectators:38},{title:"환경보호를 위한 개인의 실천방안",level:"고급 토론",spectators:27}]),(s,o)=>(W(),q("main",IE,[m("section",RE,[m("div",OE,[m("div",TE,[m("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"Tori"},null,8,kE)]),m("div",xE,[m("h2",null,X(n.value)+"님, 중급 토론가까지 앞으로 2단계!",1),o[0]||(o[0]=m("p",null," 오늘도 열심히 해봐요 💪 토론 실력이 날이 갈수록 좋아지고 있어요! ",-1))])])]),be(CE),m("section",PE,[(W(!0),q(me,null,Ce(i.value,(a,c)=>(W(),q("div",{key:c,class:"stat-card"},[m("h3",null,X(a.title),1),m("p",AE,X(a.value),1),o[1]||(o[1]=m("div",{class:"stat-divider"},null,-1)),m("p",NE,X(a.subtext),1)]))),128))]),be(gE)]))}}),LE=Te(ME,[["__scopeId","data-v-c303a80c"]]),DE="/assets/Harvard-QXnsY4wZ.jpg",$E="/assets/Ib-edu-r77b4Uhw.jpg",VE={class:"future-education-container"},BE={class:"cases-section"},jE={class:"case-card"},FE={class:"case-image"},UE={class:"image-container harvard-image"},HE=["src"],WE={class:"case-card"},qE={class:"case-image"},GE={class:"image-container ib-image"},zE=["src"],KE={__name:"Introduce",setup(e){return(t,n)=>(W(),q("div",VE,[n[5]||(n[5]=m("div",{class:"hero-section"},[m("h1",{class:"main-heading"},[Le(" 미래 교육의 핵심, "),m("span",{class:"highlight"},"토론으로 시작하세요")]),m("p",{class:"sub-heading"}," 세계는 이미 토론 중심 교육으로 변화하고 있습니다 ")],-1)),m("div",BE,[m("div",jE,[m("div",FE,[m("div",UE,[n[0]||(n[0]=Le(" <")),m("img",{src:Fe(DE),alt:"Harvard",style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,HE)]),n[1]||(n[1]=m("div",{class:"overlay-gradient"},null,-1))]),n[2]||(n[2]=Mt('<div class="case-content"><div class="case-badge">World Leading University</div><h2>하버드 대학교</h2><div class="stats-container"><div class="stat-item"><span class="stat-number">80</span><span class="stat-label">%</span></div><div class="stat-description"><p>수업이 토론으로 진행됩니다</p><p class="detail-text"> 비판적 사고와 문제해결 능력 개발에 초점을 맞춥니다 </p></div></div></div>',1))]),m("div",WE,[m("div",qE,[m("div",GE,[m("img",{src:Fe($E),alt:"Harvard",style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,zE)]),n[3]||(n[3]=m("div",{class:"overlay-gradient"},null,-1))]),n[4]||(n[4]=Mt('<div class="case-content"><div class="case-badge">Global Education Programme</div><h2>IB 교육과정</h2><div class="stats-container"><div class="stat-icon"><div class="icon-circle">ToK</div></div><div class="stat-description"><p>Theory of Knowledge</p><p class="detail-text"> 체계적인 토론과 비판적 사고 학습을 통해 미래 인재를 양성합니다 </p></div></div></div>',1))])]),n[6]||(n[6]=Mt('<div class="korea-section"><h2 class="section-title"> 2025년, 한국 교육의 새로운 전환이 시작됩니다 </h2><div class="news-cards"><div class="news-card"><div class="news-content"><div class="news-marker"></div><div class="news-text"><h3>교육부, 2025년까지 전국 100개교<br>IB 도입 추진</h3><p class="news-date">연합뉴스 2024.01</p></div><span class="arrow-icon">→</span></div></div><div class="news-card"><div class="news-content"><div class="news-marker"></div><div class="news-text"><h3>경기도교육청, IB 교육과정<br>확대 시행</h3><p class="news-date">한국경제 2024.02</p></div><span class="arrow-icon">→</span></div></div></div></div><div class="cta-section"><h2>토론 중심 교육으로의 전환, 함께 시작하세요</h2></div>',2))]))}},JE={class:"tomatalk-container"},XE={class:"features-grid"},YE=["onMouseenter","onClick"],QE={class:"preview-area"},ZE={class:"content-area"},e_={class:"card-title"},t_={class:"card-description"},n_={class:"card-description"},r_={class:"action-button"},i_=Pe({__name:"ServiceDescription",setup(e){const t=Pe({name:"DebatePreview",setup(){return()=>Ae("div",{class:"debate-preview"},[Ae("div",{class:"message-box ai-message"},[Ae("div",{class:"message-content"},'안녕하세요! 오늘의 토론 주제는 "AI 윤리"입니다.')]),Ae("div",{class:"message-box user-message"},[Ae("div",{class:"message-content"},"AI 발전이 인류에게 미치는 영향에 대해 논의해볼까요?")])])}}),n=Pe({name:"LiveDebatePreview",setup(){return()=>Ae("div",{class:"live-debate-preview"},[Ae("div",{class:"video-grid"},[...Array(4).fill(null).map((l,u)=>Ae("div",{key:u,class:"video-box"}))])])}}),r=Pe({name:"WatchingPreview",setup(){return()=>Ae("div",{class:"watching-preview"},[Ae("div",{class:"debate-item"},[Ae("div",{class:"debate-title"},"기후변화와 경제발전"),Ae("div",{class:"debate-status"},"LIVE"),Ae("div",{class:"debate-participants"},"참여자 12명")]),Ae("div",{class:"debate-item"},[Ae("div",{class:"debate-title"},"교육 평가 방식의 변화"),Ae("div",{class:"debate-status"},"LIVE"),Ae("div",{class:"debate-participants"},"참여자 8명")])])}}),i=Pe({name:"MyPagePreview",setup(){return()=>Ae("div",{class:"mypage-preview"},[Ae("div",{class:"stats-section"},[Ae("h4",null,"토론 참여 현황"),Ae("div",{class:"stats-graph"})]),Ae("div",{class:"certificate-section"},[Ae("div",{class:"certificate-icon"}),Ae("div",{class:"certificate-info"},[Ae("div",{class:"certificate-title"},"토론왕 인증서"),Ae("div",{class:"certificate-date"},"2024.02.16 획득")])])])}}),s=K(null);K(!1);const o=K(!0),a=K([{title:"토론 연습",description1:"AI 토리와 함께하는",description2:"1:1 맞춤형 토론 연습",buttonText:"연습 시작하기",preview:t},{title:"실전 토론",description1:"다른 사용자들과 함께하는",description2:"실시간 화상 토론",buttonText:"토론 참여하기",preview:n},{title:"진행 중인 토론",description1:"실시간으로 진행되는",description2:"토론 구경하기",buttonText:"구경하기",preview:r},{title:"마이페이지",description1:"나의 토론 기록과",description2:"실력 인증서 확인",buttonText:"기록 보기",preview:i}]),c=l=>{console.log(`Clicked feature: ${l.title}`)};return We(()=>{o.value=!0}),(l,u)=>(W(),q("div",JE,[u[2]||(u[2]=m("div",{class:"header-section"},[m("h1",{class:"title-text"},"토마톡에서 경험하는 토론 학습")],-1)),m("div",XE,[(W(!0),q(me,null,Ce(a.value,(d,g)=>(W(),q("div",{key:d.title,class:we(["feature-card",{hovered:s.value===g}]),onMouseenter:f=>s.value=g,onMouseleave:u[0]||(u[0]=f=>s.value=null),onClick:f=>c(d)},[m("div",QE,[(W(),pt(Th(d.preview)))]),m("div",ZE,[m("h3",e_,X(d.title),1),m("p",t_,X(d.description1),1),m("p",n_,X(d.description2),1),m("button",r_,[m("span",null,X(d.buttonText),1),u[1]||(u[1]=m("span",{class:"arrow-icon"},"→",-1))])])],42,YE))),128))])]))}}),s_=Te(i_,[["__scopeId","data-v-b442dc21"]]),o_={class:"journey-container"},a_={class:"step-circle"},c_={class:"step-number"},l_={class:"step-icon"},u_={class:"step-card"},d_={class:"card-header"},f_={class:"subtitle"},p_={class:"content-box"},h_=Pe({__name:"CurriculumnInfo",setup(e){const t=[{number:1,title:"기초 다지기",subtitle:"토리와 첫 토론 시작",points:["토론의 기본 구조 이해하기","주장과 근거 구성 연습하기"],icon:"📚",color:"#4F46E5"},{number:2,title:"실전 연습",subtitle:"AI와 함께하는 토론",points:["반론 전략 학습하기","논리적 사고력 훈련하기"],icon:"🤖",color:"#7C3AED"},{number:3,title:"실전 토론",subtitle:"다른 유저와 토론",points:["실시간 토론에 참여하기","발언 분석 레포트로 피드백 받기"],icon:"👥",color:"#EC4899"}],n=K(!1);return We(()=>{const r=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(n.value=!0,r.disconnect())})},{threshold:.2}),i=document.querySelector(".journey-container");i&&r.observe(i)}),(r,i)=>(W(),q("div",o_,[i[1]||(i[1]=m("div",{class:"title-section"},[m("h1",null,"토론 마스터가 되는 여정"),m("p",null,"4단계 학습을 통해 토론 실력을 체계적으로 키워보세요")],-1)),m("div",{class:we(["timeline",{"timeline-visible":n.value}])},[i[0]||(i[0]=m("div",{class:"progress-line"},null,-1)),(W(),q(me,null,Ce(t,(s,o)=>m("div",{key:o,class:"journey-step",style:je({"--step-delay":`${.2*(o+1)}s`,"--step-color":s.color})},[m("div",a_,[m("span",c_,X(s.number),1),m("span",l_,X(s.icon),1)]),m("div",u_,[m("div",d_,[m("h2",null,X(s.title),1),m("p",f_,X(s.subtitle),1)]),m("div",p_,[m("ul",null,[(W(!0),q(me,null,Ce(s.points,(a,c)=>(W(),q("li",{key:c},X(a),1))),128))])])])],4)),64))],2)]))}}),m_=Te(h_,[["__scopeId","data-v-5de338c7"]]),v_=Pe({name:"Info",components:{Introduce:KE,ServiceDescription:s_,CurriculumnInfo:m_,CallToAction:Zf}});function g_(e,t,n,r,i,s){const o=gt("Introduce"),a=gt("ServiceDescription"),c=gt("CurriculumnInfo"),l=gt("CallToAction");return W(),q("div",null,[be(o),be(a),be(c),be(l)])}const b_=Te(v_,[["render",g_]]),y_={class:"module-item"},E_={class:"module-content"},__={class:"icon-container"},S_={class:"info-container"},w_={class:"title-row"},C_={key:0,class:"status completed"},I_={key:1,class:"status locked"},R_={class:"description"},O_={key:0,class:"progress-container"},T_={class:"progress-bar"},k_={class:"progress-footer"},x_={class:"progress-text"},P_={class:"button-container"},A_=Pe({__name:"ModuleItem",props:{title:{},description:{},progress:{},completed:{type:Boolean,default:!1},locked:{type:Boolean,default:!1},targetUrl:{default:"/prep/explain"}},setup(e){const t=_t(),n=e,r=Se(()=>n.completed?"다시 학습하기":n.progress>0?"이어서 학습하기":"학습 시작하기");function i(){if(n.locked){alert("아직 준비중 입니다.");return}t.push(n.targetUrl)}return(s,o)=>(W(),q("div",y_,[m("div",E_,[m("div",__,[be(Fe(N0),{size:20,class:"icon"})]),m("div",S_,[m("div",w_,[m("h4",null,X(s.title),1),s.completed?(W(),q("div",C_,"완료")):xe("",!0),s.locked?(W(),q("div",I_,"잠김")):xe("",!0)]),m("p",R_,X(s.description),1),s.locked?xe("",!0):(W(),q("div",O_,[m("div",T_,[m("div",{class:"progress-fill",style:je({width:`${s.progress}%`})},null,4)]),m("div",k_,[m("div",x_,X(s.progress)+"% 완료",1)])])),m("div",P_,[m("button",{class:we(["action-button",{completed:s.completed,"in-progress":!s.completed&&s.progress>0,"not-started":!s.completed&&s.progress===0,disabled:s.locked}]),onClick:i},[Le(X(r.value)+" ",1),be(Fe(M0),{size:16})],2)])])])]))}}),Vn=Te(A_,[["__scopeId","data-v-636abdb3"]]),N_={class:"preview-section"},M_={class:"chat-container"},L_={class:"chat-message tori"},D_=["src"],$_={class:"chat-message tori"},V_=["src"],B_={class:"modal-footer"},j_={__name:"PreviewModal",emits:["close"],setup(e){const t=n=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${n}`],import.meta.url).href;return(n,r)=>(W(),q("div",{class:"modal-overlay",onClick:r[2]||(r[2]=i=>n.$emit("close"))},[m("div",{class:"modal-content",onClick:r[1]||(r[1]=Es(()=>{},["stop"]))},[r[6]||(r[6]=m("h2",null,"토리와 함께하는 토론 미리보기",-1)),m("div",N_,[m("div",M_,[m("div",L_,[m("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,D_),r[3]||(r[3]=m("div",{class:"message"}," 안녕하세요! 저는 토론 코치 토리입니다. 교복 자율화에 대해 어떻게 생각하시나요? 그 이유도 함께 말씀해주세요. ",-1))]),r[5]||(r[5]=m("div",{class:"chat-message user"},[m("div",{class:"avatar"},"나"),m("div",{class:"message"}," 저는 교복 자율화에 찬성합니다. 학생들이 자유롭게 옷을 선택하면서 개성을 표현하고 자율성을 기를 수 있다고 생각해요. ")],-1)),m("div",$_,[m("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,V_),r[4]||(r[4]=m("div",{class:"message"}," 말씀하신 의견을 뒷받침할 수 있는 구체적인 사례나 경험을 들어 설명해주실 수 있나요? ",-1))])])]),r[7]||(r[7]=Mt('<div class="explanation-section" data-v-7adcdfdf><h3 data-v-7adcdfdf>토론은 4단계로 진행됩니다</h3><ul data-v-7adcdfdf><li data-v-7adcdfdf><span class="step" data-v-7adcdfdf>1</span><div class="step-content" data-v-7adcdfdf><strong data-v-7adcdfdf>주장 세우기</strong><p data-v-7adcdfdf>주제에 대한 자신의 입장과 이유를 설명합니다</p></div></li><li data-v-7adcdfdf><span class="step" data-v-7adcdfdf>2</span><div class="step-content" data-v-7adcdfdf><strong data-v-7adcdfdf>근거 찾기</strong><p data-v-7adcdfdf>구체적인 사례나 경험을 통해 주장을 뒷받침합니다</p></div></li><li data-v-7adcdfdf><span class="step" data-v-7adcdfdf>3</span><div class="step-content" data-v-7adcdfdf><strong data-v-7adcdfdf>다른 관점 고려하기</strong><p data-v-7adcdfdf>반대 입장의 우려사항과 해결방안을 생각합니다</p></div></li><li data-v-7adcdfdf><span class="step" data-v-7adcdfdf>4</span><div class="step-content" data-v-7adcdfdf><strong data-v-7adcdfdf>주장 강화하기</strong><p data-v-7adcdfdf>지금까지의 대화를 바탕으로 자신의 입장을 다시 정리합니다</p></div></li></ul></div>',1)),m("div",B_,[m("button",{class:"close-button",onClick:r[0]||(r[0]=i=>n.$emit("close"))},"알겠습니다")])])]))}},F_=Te(j_,[["__scopeId","data-v-7adcdfdf"]]),U_={class:"modal-header"},H_={class:"stance-section"},W_={class:"stance-options"},q_={class:"overview-section"},G_={class:"overview-content"},z_={class:"main-points"},K_={class:"references"},J_={class:"modal-footer"},X_=["disabled"],Y_={__name:"PrepareModal",props:{topic:{type:Object,required:!0}},emits:["close","start"],setup(e,{emit:t}){const n=e,r=t,i=K(""),s=()=>{i.value&&(r("start",n.topic.id,i.value),r("close"))};return(o,a)=>(W(),q("div",{class:"modal-overlay",onClick:a[4]||(a[4]=c=>o.$emit("close"))},[m("div",{class:"modal-content",onClick:a[3]||(a[3]=Es(()=>{},["stop"]))},[m("div",U_,[a[5]||(a[5]=m("h2",null,"토론 준비하기",-1)),m("p",null,X(e.topic.title),1),m("button",{class:"close-button",onClick:a[0]||(a[0]=c=>o.$emit("close"))},"✕")]),m("section",H_,[a[8]||(a[8]=m("h3",null,"1. 나의 입장 선택하기",-1)),m("div",W_,[m("div",{class:we(["stance-card",{active:i.value==="agree"}]),onClick:a[1]||(a[1]=c=>i.value="agree")},a[6]||(a[6]=[m("h4",null,"찬성",-1),m("p",null,"필요하다고 생각합니다",-1)]),2),m("div",{class:we(["stance-card",{active:i.value==="disagree"}]),onClick:a[2]||(a[2]=c=>i.value="disagree")},a[7]||(a[7]=[m("h4",null,"반대",-1),m("p",null,"필요하지 않다고 생각합니다",-1)]),2)])]),m("section",q_,[a[11]||(a[11]=m("h3",null,"2. 토론 개요 확인하기",-1)),m("div",G_,[m("div",z_,[a[9]||(a[9]=m("h4",null,"주요 논점",-1)),m("ul",null,[(W(!0),q(me,null,Ce(e.topic.mainPoints,(c,l)=>(W(),q("li",{key:l},X(c),1))),128))])]),m("div",K_,[a[10]||(a[10]=m("h4",null,"참고자료",-1)),m("ul",null,[(W(!0),q(me,null,Ce(e.topic.references,(c,l)=>(W(),q("li",{key:l},X(c),1))),128))])])])]),m("div",J_,[m("button",{class:"start-button",disabled:!i.value,onClick:s}," 토론 시작하기 ",8,X_)])])]))}},Q_=Te(Y_,[["__scopeId","data-v-cc3046a1"]]),Z_={class:"debate-container"},eS={class:"header"},tS={class:"content-wrapper"},nS={class:"header-content"},rS={class:"topic-info"},iS={class:"topic-title-container"},sS={class:"topic-title"},oS={class:"stage-progress"},aS={class:"progress-bar"},cS={class:"marker-circle"},lS={class:"marker-label"},uS={class:"header-timer-container"},dS={viewBox:"0 0 36 36",class:"circular-timer"},fS=["stroke-dashoffset"],pS={class:"timer-content"},hS={class:"timer-text"},mS={class:"timer-count"},vS={class:"content-wrapper"},gS={class:"main-content"},bS={class:"tori-section"},yS={class:"tori-avatar"},ES=["src"],_S={class:"question-box"},SS={class:"controls"},wS={class:"content-wrapper"},CS={class:"controls-content"},IS=["disabled"],RS={class:"mic-icon"},OS={key:0,class:"mic-waves"},TS={class:"mic-status"},to=15,kS=Pe({__name:"AiDebateRoom",props:{topic:{type:Object,required:!0,default:()=>({title:"",mainPoints:[]})},stance:{type:String,required:!0,default:"agree"}},emits:["debate-complete"],setup(e,{emit:t}){const n=e,r=t,i=K(0),s=K(to),o=K(!0),a=K(!1),c=K(45),l=K([]),u=Se(()=>g.value[i.value]),d=Se(()=>{const C=o.value?to:45;return 100-(o.value?s.value:c.value)/C*100}),g=Se(()=>{var C,T,M;return[{title:"1단계: 주장 세우기",description:"자신의 입장을 명확하게 밝히고 핵심 주장을 제시하세요",question:((C=n.topic)==null?void 0:C.title)??"주제에 대한 당신의 입장은 무엇인가요?",hint:`${n.stance==="agree"?"찬성":"반대"} 입장에서 주장을 명확히 설명해주세요.`},{title:"2단계: 근거 찾기",description:"주장을 뒷받침하는 구체적인 근거를 제시하세요",question:"당신의 주장을 뒷받침하는 구체적인 사례나 근거는 무엇인가요?",hint:`${((M=(T=n.topic)==null?void 0:T.mainPoints)==null?void 0:M[0])??"주요 논점"}와 관련된 구체적인 사례나 근거를 들어 설명해주세요.`},{title:"3단계: 다른 관점 고려하기",description:"반대 입장의 주장과 근거를 고려하고 대응하세요",question:"반대 입장에서 제기할 수 있는 주장은 무엇이며, 이에 대해 어떻게 생각하시나요?",hint:`${n.stance==="agree"?"반대":"찬성"} 입장에서 제기할 수 있는 의견을 고려하고 답변해주세요.`},{title:"4단계: 주장 강화하기",description:"앞선 논의를 종합하여 최종 주장을 강화하세요",question:"지금까지의 논의를 종합하여, 최종 입장을 말씀해주세요.",hint:"근거와 반론을 고려한 균형 잡힌 시각으로 최종 주장을 정리해주세요."}]});let f,_;const b=()=>{f=setInterval(()=>{s.value>0?s.value--:(clearInterval(f),o.value=!1,v())},1e3)},v=()=>{a.value=!0,_=setInterval(()=>{c.value>0?c.value--:h()},1e3)},h=()=>{clearInterval(_),a.value=!1,i.value<g.value.length-1?S():r("debate-complete",{strengths:"학생은 주장을 명확하게 제시하고 관련 사례를 통해 논리적으로 뒷받침했습니다.",improvements:"구체적인 사례와 통계를 더 활용하면 주장의 설득력이 높아질 것 같습니다.",strategy:"반대 의견에 대한 대응이 체계적이었으며, 해결방안을 제시한 점이 효과적이었습니다.",recordedAnswers:l.value})},I=()=>{l.value[i.value]||(l.value[i.value]="사용자가 스킵함"),clearInterval(f),clearInterval(_),i.value===g.value.length-1?o.value?(o.value=!1,v()):r("debate-complete",{strengths:"학생은 주장을 명확하게 제시하고 관련 사례를 통해 논리적으로 뒷받침했습니다.",improvements:"구체적인 사례와 통계를 더 활용하면 주장의 설득력이 높아질 것 같습니다.",strategy:"반대 의견에 대한 대응이 체계적이었으며, 해결방안을 제시한 점이 효과적이었습니다.",recordedAnswers:l.value}):o.value?(o.value=!1,v()):S()},O=()=>{clearInterval(f),clearInterval(_),s.value=to,c.value=45,o.value=!0,a.value=!1,b()},S=()=>{i.value<g.value.length-1&&(i.value++,O())},p=C=>{const T=Math.floor(C/60),M=C%60;return`${T.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`},w=()=>{o.value||(a.value=!a.value)},P=C=>{try{return new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${C}`],import.meta.url).href}catch(T){return console.error("Error loading image:",T),""}},y=C=>{const T=C.target;T.style.display="none",T.parentElement&&(T.parentElement.innerHTML="<span>토리</span>")};return We(()=>{b()}),Ht(()=>{clearInterval(f),clearInterval(_)}),(C,T)=>(W(),q("div",Z_,[m("header",eS,[m("div",tS,[m("div",nS,[m("div",rS,[m("div",iS,[m("h1",sS,X(e.topic.title),1),m("div",{class:we(["stance-badge",{"stance-agree":e.stance==="agree","stance-disagree":e.stance==="disagree"}])},X(e.stance==="agree"?"찬성":"반대"),3)])]),m("div",oS,[m("div",aS,[T[0]||(T[0]=m("div",{class:"progress-background"},null,-1)),m("div",{class:"progress-fill",style:je({width:`${(i.value+1)*25}%`})},null,4),(W(!0),q(me,null,Ce(g.value,(M,N)=>(W(),q("div",{key:N,class:we(["stage-marker",{completed:i.value>=N,active:i.value===N}]),style:je({left:`${N/(g.value.length-1)*100}%`})},[m("div",cS,X(N+1),1),m("div",lS,X(M.title.split(": ")[1]),1)],6))),128))])]),m("div",uS,[m("div",{class:we(["timer-circle",{"preparation-time":o.value}])},[(W(),q("svg",dS,[T[1]||(T[1]=m("path",{d:`M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"#eee","stroke-width":"3"},null,-1)),m("path",{d:`M18 2.0845
                    a 15.9155 15.9155 0 0 1 0 31.831
                    a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"#ff6b6b","stroke-width":"3","stroke-dasharray":"100, 100","stroke-dashoffset":d.value},null,8,fS)])),m("div",pS,[T[2]||(T[2]=m("div",{class:"timer-icon"},"⏱️",-1)),m("div",hS,X(o.value?"준비 시간":"발표 시간"),1),m("div",mS,X(p(o.value?s.value:c.value)),1)])],2)])])])]),m("div",vS,[m("div",gS,[m("section",bS,[m("div",yS,[m("img",{src:P("Tori.svg"),alt:"토리",class:"tori-image",onError:y},null,40,ES)]),m("div",_S,[m("h2",null,X(u.value.question),1),m("p",null,X(u.value.hint),1)])])])]),m("footer",SS,[m("div",wS,[m("div",CS,[m("button",{class:we(["mic-button",{active:a.value}]),onClick:w,disabled:o.value},[m("div",RS,[a.value?(W(),q("div",OS,T[3]||(T[3]=[m("span",null,null,-1),m("span",null,null,-1),m("span",null,null,-1)]))):xe("",!0),T[4]||(T[4]=m("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M12 2C11.175 2 10.5 2.675 10.5 3.5V11.5C10.5 12.325 11.175 13 12 13C12.825 13 13.5 12.325 13.5 11.5V3.5C13.5 2.675 12.825 2 12 2Z",fill:"currentColor"}),m("path",{d:"M17 8V11.5C17 14.535 14.535 17 11.5 17C8.465 17 6 14.535 6 11.5V8H4V11.5C4 15.35 6.94 18.505 10.5 19.07V22H13.5V19.07C17.06 18.505 20 15.35 20 11.5V8H17Z",fill:"currentColor"})],-1))]),m("span",TS,X(a.value?"마이크 켜짐":"마이크 꺼짐"),1)],10,IS),m("button",{class:"skip-button",onClick:I},T[5]||(T[5]=[m("span",{class:"skip-text"},"다음 단계",-1),m("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"skip-icon"},[m("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])])]))}}),xS=Te(kS,[["__scopeId","data-v-289b178e"]]),PS={class:"debate-result"},AS={class:"result-header"},NS={class:"header-content"},MS={class:"tori-character"},LS=["src"],DS=Pe({__name:"AiDebateResult",setup(e){const t=n=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${n}`],import.meta.url).href;return(n,r)=>(W(),q("div",PS,[m("section",AS,[m("div",NS,[m("div",MS,[m("img",{src:t("Tori.svg"),alt:"토리 이미지",class:"tori"},null,8,LS)]),r[0]||(r[0]=m("div",{class:"header-text"},[m("h2",null,"토론 연습 결과"),m("p",null,"탁월한 분석력과 논리적인 전개가 돋보였어요!")],-1))])]),r[1]||(r[1]=Mt('<section class="analysis-cards" data-v-72b0ff99><div class="analysis-card" data-v-72b0ff99><div class="card-icon" data-v-72b0ff99>💪</div><div class="card-content" data-v-72b0ff99><h3 data-v-72b0ff99>강점 분석</h3><p data-v-72b0ff99> 학생은 교복 자율화가 학생들의 개성을 존중하고 자기표현의 자유를 보장하는 긍정적인 변화라는 주장을 명확하게 제시했습니다. 또한, 유럽 일부 국가의 사례를 통해 주장을 뒷받침하고 있습니다. </p></div></div><div class="analysis-card" data-v-72b0ff99><div class="card-icon" data-v-72b0ff99>🔍</div><div class="card-content" data-v-72b0ff99><h3 data-v-72b0ff99>보완할 점</h3><p data-v-72b0ff99> 유럽 일부 국가의 사례를 언급했지만, 구체적인 국가나 학교 이름을 제시하면 더 설득력이 있을 것입니다. 또한, 학업 분위기가 유지된다는 점을 구체적으로 설명하면 좋겠습니다. </p></div></div><div class="analysis-card" data-v-72b0ff99><div class="card-icon" data-v-72b0ff99>🚀</div><div class="card-content" data-v-72b0ff99><h3 data-v-72b0ff99>효과적인 토론 전략</h3><p data-v-72b0ff99> 반대 입장에서 제기될 수 있는 경제적 차이에 대한 우려를 해결하기 위해 기본적인 복장 가이드라인을 설정하는 방안을 제시한 점은 좋습니다. 이와 더불어, 이러한 가이드라인이 실제로 어떻게 운영될 수 있는지 구체적인 예시를 추가하면 주장을 더욱 강화할 수 있습니다. </p></div></div></section>',1))]))}}),$S=Te(DS,[["__scopeId","data-v-72b0ff99"]]),VS={class:"modal-content"},BS={__name:"DebateModal",props:{topic:{type:Object,required:!0},stance:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const n=K(!1),r=K({strengths:"",improvements:"",strategy:"",recordedAnswers:[]}),i=o=>{r.value=o,n.value=!0},s=()=>{n.value=!1,r.value={strengths:"",improvements:"",strategy:"",recordedAnswers:[]}};return(o,a)=>(W(),q("div",{class:"modal-overlay",onClick:a[2]||(a[2]=Es(c=>o.$emit("close"),["self"]))},[m("div",VS,[m("button",{class:"close-button",onClick:a[0]||(a[0]=c=>o.$emit("close"))},"✕"),n.value?(W(),pt($S,{key:1,topic:e.topic,stance:e.stance,analysis:r.value,onRetry:s,onClose:a[1]||(a[1]=c=>o.$emit("close"))},null,8,["topic","stance","analysis"])):(W(),pt(xS,{key:0,topic:e.topic,stance:e.stance,onDebateComplete:i},null,8,["topic","stance"]))])]))}},jS=Te(BS,[["__scopeId","data-v-56ac8b2b"]]),FS={class:"debate-dashboard"},US={key:0,class:"first-visit-banner"},HS={class:"banner-content"},WS=["src"],qS={class:"level-tabs"},GS={key:1,class:"level-description"},zS={key:2,class:"level-description"},KS={class:"topics-section"},JS={class:"topic-list"},XS={class:"topic-content"},YS=["onClick"],QS={__name:"AIDebate",setup(e){const t=K(!1),n=K(!1),r=K(!1),i=K(null),s=K(""),o=K(1),a=K(!1),c=_=>new URL(Object.assign({"../assets/Harvard.jpg":Tn,"../assets/Ib-edu.jpg":kn,"../assets/Tori.svg":xn,"../assets/base.css":Pn,"../assets/hot-badge.svg":An,"../assets/kakao.svg":Nn,"../assets/소개페이지.svg":Mn})[`../assets/${_}`],import.meta.url).href,l=(_,b)=>{i.value=u.value.find(v=>v.id===_),s.value=b,r.value=!0},u=K([{id:1,level:1,title:"교복 자율화, 찬성? 반대?",participants:12,mainPoints:["학생 개성 표현의 자유","학교 소속감과 정체성","경제적 영향과 비용"],references:["2023년 학생 복지 만족도 조사","교복 자율화 시행 학교 사례"]},{id:2,level:1,title:"급식 메뉴 선택제 도입, 어떻게 생각하시나요?",participants:8,mainPoints:["학생 선호도 반영","영양 균형 고려","급식 운영의 효율성"],references:["학교 급식 만족도 조사","선택식 급식 운영 사례"]},{id:3,level:2,title:"학원 자율 등원제, 도입해야 할까요?",participants:15,mainPoints:["학습 효율성","학생 자기주도성","사교육 영향"],references:["자율 등원제 시행 효과 연구","학생 스트레스 관련 조사"]},{id:4,level:2,title:"디지털 교과서 전면 도입, 찬성하시나요?",participants:10,mainPoints:["학습 효과성","환경적 영향","디지털 격차"],references:["디지털 교과서 시범 학교 결과","학생 건강 영향 연구"]},{id:5,level:2,title:"방과후 학교 의무화, 어떻게 보시나요?",participants:13,mainPoints:["교육 기회 평등","학생 자유시간","학교 운영 부담"],references:["방과후 학교 효과성 분석","학부모 만족도 조사"]}]),d=Se(()=>u.value.filter(_=>_.level===o.value)),g=_=>{i.value=_,n.value=!0},f=_=>{o.value===1?g(_):alert("아직 준비중 입니다.")};return(_,b)=>(W(),q("main",FS,[a.value?xe("",!0):(W(),q("div",US,[m("div",HS,[m("img",{src:c("Tori.svg"),alt:"토리 이미지",class:"tori-avatar-small"},null,8,WS),b[6]||(b[6]=m("p",null,"토리와 함께하는 AI 토론이 처음이신가요?",-1)),m("button",{class:"preview-button-small",onClick:b[0]||(b[0]=v=>t.value=!0)}," 사용 방법 보기 ")])])),m("div",qS,[m("button",{class:we(["level-tab",{active:o.value===1}]),onClick:b[1]||(b[1]=v=>o.value=1)},b[7]||(b[7]=[m("div",{class:"tab-badge level-1"},"1",-1),Le(" 기초 다지기 ")]),2),m("button",{class:we(["level-tab",{active:o.value===2}]),onClick:b[2]||(b[2]=v=>o.value=2)},b[8]||(b[8]=[m("div",{class:"tab-badge level-2"},"2",-1),Le(" 실전 토론하기 ")]),2)]),o.value===1?(W(),q("div",GS,b[9]||(b[9]=[m("h3",null,"기초 다지기",-1),m("p",null,"토리의 질문에 답하며 논리적 사고력을 키워요",-1),m("p",{class:"time"},"소요 시간: 5분",-1)]))):xe("",!0),o.value===2?(W(),q("div",zS,b[10]||(b[10]=[m("h3",null,"실전 토론하기",-1),m("p",null,"토리와 서로 다른 입장에서 토론을 진행해요",-1),m("p",{class:"time"},"소요 시간: 5분",-1)]))):xe("",!0),m("section",KS,[m("div",JS,[(W(!0),q(me,null,Ce(d.value,v=>(W(),q("div",{key:v.id,class:"topic-card"},[m("div",XS,[m("h3",null,X(v.title),1)]),m("button",{class:we(["prepare-button",{locked:o.value===2}]),onClick:h=>f(v)}," 준비하기 ",10,YS)]))),128))])]),t.value?(W(),pt(F_,{key:3,onClose:b[3]||(b[3]=v=>t.value=!1)})):xe("",!0),n.value?(W(),pt(Q_,{key:4,topic:i.value,onClose:b[4]||(b[4]=v=>n.value=!1),onStart:l},null,8,["topic"])):xe("",!0),r.value?(W(),pt(jS,{key:5,topic:i.value,stance:s.value,onClose:b[5]||(b[5]=v=>r.value=!1)},null,8,["topic","stance"])):xe("",!0)]))}},ep=Te(QS,[["__scopeId","data-v-23488ddf"]]),ZS={class:"debate-practice"},e1={class:"learning-container"},t1={class:"learning-content"},n1={class:"tab-navigation"},r1={key:0,class:"theory-content"},i1={class:"stage"},s1={class:"modules"},o1={class:"stage"},a1={class:"modules"},c1={class:"stage"},l1={class:"modules"},u1={key:1},d1=Pe({__name:"PracticeMain",setup(e){const t=K("theory");return(n,r)=>(W(),q("div",ZS,[r[7]||(r[7]=m("div",{class:"header-container"},[m("div",{class:"header-content"},[m("div",{class:"header-top"},[m("div",{class:"header-title"},[m("h1",null,"토론 연습하기"),m("p",null,"기초부터 심화까지, 체계적인 토론 학습")])])])],-1)),m("div",e1,[m("div",t1,[m("div",n1,[m("button",{onClick:r[0]||(r[0]=i=>t.value="theory"),class:we(["tab-button",{active:t.value==="theory"}])},[be(Fe(L0),{size:20}),r[2]||(r[2]=Le(" 기초 이론 "))],2),m("button",{onClick:r[1]||(r[1]=i=>t.value="ai"),class:we(["tab-button",{active:t.value==="ai"}])},[be(Fe(D0),{size:20}),r[3]||(r[3]=Le(" 실전 연습 "))],2)]),t.value==="theory"?(W(),q("div",r1,[m("div",i1,[r[4]||(r[4]=m("div",{class:"stage-header"},[m("h3",null,"1단계: 토론의 이해"),m("p",null,"토론의 기본 개념과 요소 학습")],-1)),m("div",s1,[be(Vn,{title:"토론의 기본 이해",description:"토론의 정의, 목적, 유형, 규칙 학습",progress:0,completed:!1,locked:!0}),be(Vn,{title:"논리적 사고의 기초",description:"연역법, 귀납법, 논리적 오류 이해하기",progress:0,completed:!1,locked:!0})])]),m("div",o1,[r[5]||(r[5]=m("div",{class:"stage-header"},[m("h3",null,"2단계: 토론 표현력"),m("p",null,"효과적인 주장과 설득 기술 습득")],-1)),m("div",a1,[be(Vn,{title:"주장과 근거",description:"PREP/CEDA 기법을 활용한 논리 구성",progress:0,completed:!1}),be(Vn,{title:"설득력 있는 말하기",description:"톤, 속도, 제스처 등 비언어적 표현",progress:0,completed:!1,locked:!0})])]),m("div",c1,[r[6]||(r[6]=m("div",{class:"stage-header"},[m("h3",null,"3단계: 분석과 대응"),m("p",null,"상대방 주장 분석과 효과적인 반론")],-1)),m("div",l1,[be(Vn,{title:"주장 분석하기",description:"상대방 논리구조 파악과 약점 찾기",progress:0,completed:!1,locked:!0}),be(Vn,{title:"반론과 재반론",description:"효과적인 반론 구성과 즉각 대응",progress:0,completed:!1,locked:!0})])])])):t.value==="ai"?(W(),q("div",u1,[be(ep)])):xe("",!0)])])]))}}),f1=Te(d1,[["__scopeId","data-v-aae05fdc"]]),p1={class:"category-selection"},h1={class:"category-grid"},m1=["onClick"],v1={class:"icon-circle"},g1={class:"icon"},b1={class:"category-title"},y1={class:"category-description"},E1=["disabled"],_1=Pe({__name:"CategorySelection",emits:["select"],setup(e,{emit:t}){const n=_t(),r=Ln(),i=[{id:"SCIENCE",icon:"💡",title:"과학/기술",description:"AI, 우주, 환경, 생명과학"},{id:"POLITICS",icon:"⚖️",title:"사회/정치",description:"정책, 제도, 법률, 인권"},{id:"ECONOMY",icon:"💰",title:"경제",description:"금융, 산업, 노동, 복지"},{id:"EDUCATION",icon:"📚",title:"교육/문화",description:"교육제도, 예술, 미디어"},{id:"ETHICS",icon:"🤔",title:"윤리/철학",description:"도덕, 가치관, 철학적 담론"}],s=K(""),o=d=>{s.value=d},a=t,c=d=>{o(d),a("select",d),r.setCategory(d)},l=()=>{n.push("/debate-select")},u=()=>{s.value&&(r.startMatching(),n.push("/"))};return(d,g)=>(W(),q("div",p1,[g[2]||(g[2]=Mt('<header class="header" data-v-334ee41a><div class="header-content" data-v-334ee41a><h1 class="title" data-v-334ee41a>주제 카테고리 선택</h1><div class="steps" data-v-334ee41a><div class="step" data-v-334ee41a><div class="step-circle" data-v-334ee41a>1</div><span class="step-text" data-v-334ee41a>토론 방식</span></div><div class="step-line" data-v-334ee41a></div><div class="step active" data-v-334ee41a><div class="step-circle" data-v-334ee41a>2</div><span class="step-text" data-v-334ee41a>주제 카테고리</span></div><div class="step-line" data-v-334ee41a></div><div class="step" data-v-334ee41a><div class="step-circle" data-v-334ee41a>3</div><span class="step-text" data-v-334ee41a>상대 매칭하기</span></div></div></div></header><div class="info-box" data-v-334ee41a><p data-v-334ee41a> 💡 토론 주제는 매칭이 완료된 후 공개됩니다. 준비 시간이 주어지니 걱정하지 마세요! </p></div>',2)),m("div",h1,[(W(),q(me,null,Ce(i,f=>m("div",{key:f.id,class:we(["category-card",{selected:s.value===f.id}]),onClick:_=>c(f.id)},[m("div",v1,[m("span",g1,X(f.icon),1)]),m("h2",b1,X(f.title),1),m("p",y1,X(f.description),1)],10,m1)),64))]),m("button",{class:"before-button",onClick:l},g[0]||(g[0]=[m("span",{class:"arrow"},"←",-1)])),m("button",{class:"next-button",disabled:!s.value,onClick:u},g[1]||(g[1]=[m("span",{class:"arrow"},"→",-1)]),8,E1)]))}}),S1=Te(_1,[["__scopeId","data-v-334ee41a"]]),w1={class:"debate-container"},C1={class:"content"},I1={class:"format-cards"},R1=["onClick"],O1={class:"format-icon"},T1={class:"format-info"},k1={class:"format-details"},x1={key:0,class:"format-detail-panel"},P1={class:"detail-section"},A1={class:"detail-section"},N1={class:"process-box"},M1={class:"detail-section"},L1={class:"tips-box"},D1=["disabled"],$1=Pe({__name:"DebateFormatSelection",setup(e){const t=_t(),n=[{id:"casual",title:"캐쥬얼 토론",emoji:"🗣️",description:"토마톡의 캐쥬얼 토론은 기존 토론의 장점을 결합하여 누구나 쉽게 참여할 수 있도록 설계되었습니다. 찬성과 반대 양측이 각각의 주장을 펼치고 서로의 의견을 교환하며, 관중들의 실시간 피드백을 받을 수 있습니다.",duration:"30분",difficulty:2,shortDescription:"쉽고 재미있게 시작하는 토론",process:["준비 시간 (5분): 주제 확인 및 논리 구성","입론 (각 3분): 찬성/반대 측의 주장 발표","반론 (각 2분): 상대방 주장에 대한 반론","최종 발언 (각 2분): 마지막 주장 정리"],tips:["입론에서는 핵심 주장을 먼저 말하고, 그 근거를 차례대로 제시하세요.","반론할 때는 상대방의 주장 중 가장 약한 부분을 공략하세요.","감정적인 표현보다는 논리적인 근거를 제시하세요."]},{id:"bp",title:"BP 토론",emoji:"🏛️",description:"영국 의회식 토론 방식으로 진행되는 전문적인 토론입니다.",duration:"45분",difficulty:4,shortDescription:"영국 의회식 토론",process:["준비 시간 (15분)","찬성 측 제1 발언 (7분)","반대 측 제1 발언 (7분)","찬성 측 제2 발언 (7분)","반대 측 제2 발언 (7분)"],tips:["각 발언은 POI(Point of Information)를 포함할 수 있습니다.","첫 1분과 마지막 1분은 POI가 금지됩니다.","심사 기준: 내용, 방법, 태도를 종합적으로 평가합니다."]}],r=K("casual"),i=Se(()=>n.find(c=>c.id===r.value)),s=Ln(),o=c=>{r.value=c,s.setFormat(c)},a=()=>{t.push("/category-selection")};return We(()=>{s.setFormat("casual")}),(c,l)=>(W(),q("div",w1,[l[4]||(l[4]=Mt('<header class="header" data-v-5c3cc4a7><h1 class="title" data-v-5c3cc4a7>실전 토론 시작하기</h1><div class="steps" data-v-5c3cc4a7><div class="step active" data-v-5c3cc4a7><div class="step-circle" data-v-5c3cc4a7>1</div><span class="step-text" data-v-5c3cc4a7>토론 방식 선택</span></div><div class="step-line" data-v-5c3cc4a7></div><div class="step" data-v-5c3cc4a7><div class="step-circle" data-v-5c3cc4a7>2</div><span class="step-text" data-v-5c3cc4a7>주제 선택</span></div><div class="step-line" data-v-5c3cc4a7></div><div class="step" data-v-5c3cc4a7><div class="step-circle" data-v-5c3cc4a7>3</div><span class="step-text" data-v-5c3cc4a7>상대 매칭하기</span></div></div></header>',1)),m("div",C1,[m("div",I1,[(W(),q(me,null,Ce(n,u=>m("div",{key:u.id,class:we(["format-card",{selected:r.value===u.id}]),onClick:d=>o(u.id)},[m("div",O1,X(u.emoji),1),m("div",T1,[m("h3",null,X(u.title),1),m("p",null,X(u.shortDescription),1)]),m("div",k1,[m("span",null,"• 진행 시간: "+X(u.duration),1),m("span",null,"• 난이도: "+X("⭐".repeat(u.difficulty)),1)])],10,R1)),64))]),i.value?(W(),q("div",x1,[m("h2",null,X(i.value.title),1),m("section",P1,[l[0]||(l[0]=m("h3",null,"토론 설명",-1)),m("p",null,X(i.value.description),1)]),m("section",A1,[l[1]||(l[1]=m("h3",null,"진행 방식",-1)),m("div",N1,[(W(!0),q(me,null,Ce(i.value.process,(u,d)=>(W(),q("div",{key:d,class:"process-step"},X(d+1)+". "+X(u),1))),128))])]),m("section",M1,[l[2]||(l[2]=m("h3",null,"토리의 Tip",-1)),m("div",L1,[(W(!0),q(me,null,Ce(i.value.tips,(u,d)=>(W(),q("div",{key:d,class:"tip"}," 💡 "+X(u),1))),128))])])])):xe("",!0)]),m("button",{class:"next-button",disabled:!r.value,onClick:a},l[3]||(l[3]=[m("span",{class:"arrow"},"→",-1)]),8,D1)]))}}),V1=Te($1,[["__scopeId","data-v-5c3cc4a7"]]),B1={class:"debate-dashboard"},j1={class:"debate-content"},F1={class:"debate-bubbles"},U1=["onClick"],H1={class:"bubble-content"},W1={class:"category-title"},q1={class:"debate-count"},G1={class:"viewer-count"},z1={class:"debate-list"},K1={class:"category-header"},J1={class:"sort-options"},X1={class:"debate-cards"},Y1={key:0,class:"loading"},Q1={key:1,class:"error-message"},Z1={key:0,class:"popular-badge"},ew=["onClick"],tw={key:3,class:"loading"},nw=Pe({__name:"OngoingDebate",setup(e){const t="https://i12a802.p.ssafy.io",n=K([]),r=K(!0),i=K(!1),s=K(null),o=K("latest"),a=K(9007199254740991),c=K(5),l=K(["POLITICS"]),u=K(null),d=K(null),g=[{value:"POLITICS",label:"정치/국제",color:"#ff6b6b",size:80},{value:"ECONOMY",label:"경제/노동",color:"#ffd43b",size:80},{value:"ETHICS",label:"윤리/법",color:"#69db7c",size:80},{value:"SCIENCE",label:"과학/기술",color:"#4dabf7",size:80},{value:"EDUCATION",label:"교육/사회",color:"#748ffc",size:80}],f=T=>{window.location.href="/"},_={latest:"LATEST",popular:"POPULARITY"},b=async(T=!1)=>{try{T?i.value=!0:(r.value=!0,a.value=9007199254740991);const M=l.value.join(","),E=(await Ve.get(t+"/api/debates",{params:{cursor:a.value,size:c.value,status:"IN_PROGRESS",sortBy:_[o.value],categories:M}})).data.content;E&&E.length>0&&(a.value=Number(E[E.length-1].debateId),n.value=T?[...n.value,...E]:E)}catch{s.value="토론 목록을 불러오지 못했습니다."}finally{r.value=!1,i.value=!1}},v=Se(()=>{const T={};return g.forEach(M=>{T[M.value]={...M,debateCount:0,totalViewers:0}}),n.value.forEach(M=>{T[M.category]&&(T[M.category].debateCount++,T[M.category].totalViewers+=M.spectatorsCount)}),T}),h=Se(()=>{const T=Object.values(v.value);T.sort((k,B)=>B.totalViewers-k.totalViewers);const M=Math.max(...T.map(k=>k.totalViewers||0)),N=160,E=80;return T.map((k,B)=>({...k,size:k.totalViewers?Math.max(E,k.totalViewers/M*N):E}))}),I=T=>T.toLocaleString("ko-KR"),O=(T,M)=>`${T}:${String(M).padStart(2,"0")}`,S=T=>{const M=Math.floor(T/2);return{x:100+T%2*200,y:100+M*180}},p=()=>{const T=g.find(M=>M.value===l.value[0]);return T?T.label:"전체"},w=T=>T.spectatorsCount>=50,P=T=>{l.value=T};let y=null;const C=()=>{u.value&&(y=new IntersectionObserver(T=>{T.forEach(M=>{M.isIntersecting&&n.value.length>=c.value&&b(!0)})},{root:d.value,threshold:1}),y.observe(u.value))};return We(()=>{b(),C()}),hi(()=>{y&&u.value&&y.unobserve(u.value)}),at([o,l],()=>{b(!1)},{deep:!0}),(T,M)=>(W(),q("div",B1,[M[2]||(M[2]=m("header",{class:"debate-header"},[m("h1",{class:"title"},"진행중인 토론"),m("p",{class:"subtitle"},"다양한 주제의 토론에 참여하고 의견을 나눠보세요")],-1)),m("main",j1,[m("section",F1,[(W(!0),q(me,null,Ce(h.value,(N,E)=>(W(),q("div",{key:N.value,class:"bubble",style:je({backgroundColor:N.color,width:`${N.size}px`,height:`${N.size}px`,left:S(E).x+"px",top:S(E).y+"px"}),onClick:k=>P([N.value])},[m("div",H1,[m("div",W1,X(N.label),1),m("div",q1,X(N.debateCount)+"개 토론",1),m("div",G1,X(I(N.totalViewers))+"명 관전 ",1)])],12,U1))),128))]),m("section",z1,[m("div",K1,[m("h2",null,X(p())+" 토론",1),m("div",J1,[ze(m("select",{"onUpdate:modelValue":M[0]||(M[0]=N=>o.value=N),class:"sort-select"},M[1]||(M[1]=[m("option",{value:"latest"},"최신순",-1),m("option",{value:"popular"},"인기순",-1)]),512),[[zm,o.value]])])]),m("div",X1,[r.value?(W(),q("div",Y1,"토론 목록을 불러오는 중...")):s.value?(W(),q("div",Q1,X(s.value),1)):(W(!0),q(me,{key:2},Ce(n.value,N=>(W(),q("div",{key:N.debateId,class:"debate-card"},[m("h3",null,X(N.subject),1),m("p",null,X(I(N.spectatorsCount))+"명 관전중",1),m("p",null," 시작: "+X(O(N.startedAtHour,N.startedAtMinute)),1),m("p",null,"예상 소요 시간: "+X(N.estimatedTimeMinute)+"분",1),w(N)?(W(),q("span",Z1,"실시간 인기")):xe("",!0),m("button",{onClick:E=>f(N.debateId),class:"enter-button"}," 방청하기 ",8,ew)]))),128)),m("div",{ref_key:"sentinel",ref:u},null,512),i.value?(W(),q("div",tw," 추가 토론 목록을 불러오는 중... ")):xe("",!0)])])])]))}}),rw=Te(nw,[["__scopeId","data-v-b73682f8"]]);function tp(e,t=5e3){const n=K(null),r=K([]),i=K(!1),s=K(localStorage.getItem("token")),a=Ln().matchingDetails.debateId,c=K(null),l=K(null);return We(()=>{console.log("🔄 Connecting to WebSocket via STOMP:",e),l.value=new Qf({brokerURL:e,connectHeaders:{Authorization:`Bearer ${s.value}`},debug:d=>console.log(d),reconnectDelay:t,onConnect:()=>{var g,f;console.log("✅ STOMP WebSocket Connected"),i.value=!0;const d=localStorage.getItem("id");(g=l.value)==null||g.subscribe(`/sub/debate/${a}`,async _=>{const b=JSON.parse(_.body);console.log("Received Message from debate topic:",b),c.value=b.payload,r.value.push(b),console.log(b.messageType)}),(f=l.value)==null||f.publish({destination:`/pub/debate.join/${a}`,headers:{Authorization:`Bearer ${s.value}`,"Content-Type":"application/json"},body:JSON.stringify({messageType:"JOIN",payload:{userId:d}})})},onDisconnect:()=>{console.log("❌ STOMP WebSocket Disconnected"),i.value=!1},onStompError:d=>{console.error("⚠️ STOMP Error:",d),i.value=!1}}),l.value.activate()}),Ht(()=>{l.value&&l.value.active&&(console.log("Deactivating STOMP client..."),l.value.deactivate())}),{socket:n,messages:r,isConnected:i,debateState:c}}const iw={class:"debate-preparation-container"},sw={class:"welcome-section"},ow={class:"welcome-content"},aw={class:"welcome-info"},cw={class:"topic-section"},lw={class:"stance-section"},uw={class:"timer-section"},dw={class:"timer"},fw={class:"main-content py-2"},pw={class:"left-panel"},hw={class:"tabs"},mw={class:"content-area"},vw={key:0,class:"memo-input"},gw={class:"tag-input"},bw={class:"tags"},yw=["onClick"],Ew={key:1,class:"resource-input"},_w={class:"resource-type-selection"},Sw=["onClick"],ww={class:"tag-input"},Cw={class:"tags"},Iw=["onClick"],Rw={class:"right-panel"},Ow={class:"search-area"},Tw={class:"result"},kw={class:"saved-items"},xw={class:"item-header"},Pw={class:"item-title"},Aw={class:"item-type"},Nw={class:"item-tags"},Mw={class:"item-content"},Lw={class:"item-footer"},Dw=Pe({__name:"DebateWaiting",props:{debateId:{}},setup(e){const t=_t(),n=e,r=`wss://i12a802.p.ssafy.io/ws/sub/debate/${n.debateId}`,{debateState:i}=tp(r),s=Se(()=>{var oe;return((oe=i.value)==null?void 0:oe.status)||"PREPARING"});at(s,oe=>{oe==="WAITING"&&(console.log(`🚀 토론 시작! debate 페이지로 이동합니다. (debateId: ${n.debateId})`),t.push({name:"debate",params:{debateId:n.debateId}}))});const o=K(""),a=K(!0),c=K([]),l=async()=>{var oe;try{const L=localStorage.getItem("token");if(console.log("토큰 확인:",L),!L)throw new Error("로그인이 필요합니다.");const U=await Ve.get(`/api/debates/${n.debateId}/roominfo`,{headers:{Authorization:`Bearer ${L}`,"Content-Type":"application/json"}});U.status===200&&(o.value=U.data.subject,a.value=U.data.participant,c.value=U.data.users)}catch(L){console.error("토론방 정보를 불러오는 데 실패했습니다:",((oe=L.response)==null?void 0:oe.data)||L.message)}},u=localStorage.getItem("userId")||"",d=Se(()=>{var U;const L=(((U=i.value)==null?void 0:U.participants)||[]).find(J=>J.userId===u);return L?L.position:"알 수 없음"}),g=K(0),f=K(null),_=Se(()=>{const oe=Math.floor(g.value/60),L=g.value%60;return`${oe}:${L.toString().padStart(2,"0")}`}),b=()=>{if(!i.value||!i.value.currentSpeakEndTime){g.value=0;return}const oe=new Date(i.value.currentSpeakEndTime).getTime(),L=new Date().getTime();g.value=Math.max(0,Math.floor((oe-L)/1e3))},v=()=>{b(),f.value&&clearInterval(f.value),f.value=setInterval(()=>{b(),g.value<=0&&(f.value!==null&&clearInterval(f.value),f.value=null,console.log("⏳ 준비 시간이 종료되었습니다!"))},1e3)};at(()=>{var oe;return(oe=i.value)==null?void 0:oe.currentSpeakEndTime},oe=>{oe&&(console.log("⏳ 새로운 발언 시간이 설정됨:",oe),v())}),We(()=>{v(),l()}),Ht(()=>{f.value&&clearInterval(f.value)});const h=K("memo"),I=K(""),O=K(""),S=K([]),p=K(""),w=[{value:"url",label:"🔗 URL"},{value:"document",label:"📄 문서"},{value:"image",label:"🖼️ 이미지"}],P=K("url"),y=K(""),C=K(""),T=K([]),M=K(""),N=K(null),E=K(""),k=K([]),B=K([{id:"1",title:"AI 기술의 노동시장 영향 분석",content:"AI 기술의 발전이 노동시장에 미치는 복합적인 영향에 대한 초기 메모입니다. 기술 발전에 따른 일자리 변화와 새로운 직업 창출 가능성을 중점적으로 탐구합니다.",type:"memo",tags:["AI","노동시장","기술"],createdAt:"2024.02.17"},{id:"2",title:"AI 일자리 대체 통계 보고서",content:"다양한 산업 분야에서 AI 기술로 인한 일자리 대체 현황에 대한 최신 통계 자료",type:"resource",resourceType:"url",tags:["통계","일자리","AI"],createdAt:"2024.02.16"},{id:"3",title:"AI 윤리와 고용 정책 연구",content:"AI 기술 발전에 따른 윤리적 고려사항과 고용 정책의 방향성에 대한 심층 분석",type:"memo",tags:["윤리","정책","AI"],createdAt:"2024.02.15"}]),A=()=>{p.value.trim()&&(S.value.push(p.value.trim()),p.value="")},R=oe=>{S.value=S.value.filter(L=>L!==oe)},x=()=>{M.value.trim()&&(T.value.push(M.value.trim()),M.value="")},F=oe=>{T.value=T.value.filter(L=>L!==oe)},j=oe=>{const L=oe.target;L.files&&L.files.length>0&&(N.value=L.files[0])},G=()=>{if(!O.value.trim()){alert("메모 제목을 입력해주세요");return}const oe={id:Date.now().toString(),title:O.value,content:I.value,tags:S.value,type:"memo",createdAt:new Date().toLocaleDateString("ko-KR")};k.value.unshift(oe),I.value="",O.value="",S.value=[]},Y=()=>{var L;if(!C.value.trim()){alert("자료 제목을 입력해주세요");return}const oe={id:Date.now().toString(),title:C.value,content:P.value==="url"?y.value:((L=N.value)==null?void 0:L.name)||"",tags:T.value,type:"resource",resourceType:P.value,createdAt:new Date().toLocaleDateString("ko-KR")};k.value.unshift(oe),y.value="",C.value="",T.value=[],N.value=null,P.value="url"},ce=()=>{const oe=E.value.toLowerCase();return k.value.filter(L=>L.title.toLowerCase().includes(oe)||L.tags.some(U=>U.toLowerCase().includes(oe))||L.content.toLowerCase().includes(oe))},re=oe=>{switch(oe){case"url":return"🔗";case"document":return"📄";case"image":return"🖼️";default:return"📁"}};return(oe,L)=>(W(),q("main",iw,[m("section",sw,[m("div",ow,[m("div",aw,[m("div",cw,[L[9]||(L[9]=m("h2",null,"토론 주제",-1)),m("p",null,"인공지능 기술이 일자리를 대체하는 것은 불가피한가?"+X(o.value),1)]),m("div",lw,[m("h2",null,"내 입장 : "+X(d.value),1)])]),m("div",uw,[L[10]||(L[10]=m("h2",null,"남은 시간",-1)),m("div",dw,X(_.value),1)])])]),m("div",fw,[m("div",pw,[m("div",hw,[m("button",{onClick:L[0]||(L[0]=U=>h.value="memo"),class:we({active:h.value==="memo"})}," 메모 ",2),m("button",{onClick:L[1]||(L[1]=U=>h.value="resource"),class:we({active:h.value==="resource"})}," 자료 ",2)]),m("div",mw,[h.value==="memo"?(W(),q("div",vw,[ze(m("textarea",{"onUpdate:modelValue":L[2]||(L[2]=U=>I.value=U),placeholder:"토론을 위한 메모를 자유롭게 작성하세요"},null,512),[[Ke,I.value]]),ze(m("input",{"onUpdate:modelValue":L[3]||(L[3]=U=>O.value=U),placeholder:"메모 제목을 입력하세요"},null,512),[[Ke,O.value]]),m("div",gw,[ze(m("input",{"onUpdate:modelValue":L[4]||(L[4]=U=>p.value=U),onKeyup:rs(A,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[Ke,p.value]]),m("button",{onClick:A,class:"tagbutton"},"태그 추가")]),m("div",bw,[(W(!0),q(me,null,Ce(S.value,U=>(W(),q("span",{key:U,class:"tag"},[Le(" # "+X(U)+" ",1),m("button",{onClick:J=>R(U)},"×",8,yw)]))),128))]),m("button",{onClick:G,class:"save-button"},"메모 저장")])):(W(),q("div",Ew,[m("div",_w,[(W(),q(me,null,Ce(w,U=>m("button",{key:U.value,onClick:J=>P.value=U.value,class:we({active:P.value===U.value})},X(U.label),11,Sw)),64))]),P.value==="url"?ze((W(),q("input",{key:0,"onUpdate:modelValue":L[5]||(L[5]=U=>y.value=U),placeholder:"URL을 입력하세요"},null,512)),[[Ke,y.value]]):xe("",!0),P.value==="document"?(W(),q("input",{key:1,type:"file",onChange:j,accept:".pdf,.doc,.docx"},null,32)):xe("",!0),P.value==="image"?(W(),q("input",{key:2,type:"file",onChange:j,accept:"image/*"},null,32)):xe("",!0),ze(m("input",{"onUpdate:modelValue":L[6]||(L[6]=U=>C.value=U),placeholder:"자료 제목을 입력하세요"},null,512),[[Ke,C.value]]),m("div",ww,[ze(m("input",{"onUpdate:modelValue":L[7]||(L[7]=U=>M.value=U),onKeyup:rs(x,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[Ke,M.value]]),m("button",{onClick:x,class:"tagbutton"},"태그 추가")]),m("div",Cw,[(W(!0),q(me,null,Ce(T.value,U=>(W(),q("span",{key:U,class:"tag"},[Le(" # "+X(U)+" ",1),m("button",{onClick:J=>F(U)},"×",8,Iw)]))),128))]),m("button",{onClick:Y,class:"save-button"},"자료 저장")]))])]),m("div",Rw,[m("div",Ow,[ze(m("input",{"onUpdate:modelValue":L[8]||(L[8]=U=>E.value=U),placeholder:"메모나 자료 검색"},null,512),[[Ke,E.value]]),m("button",{onClick:ce,class:"search-button"},"🔍")]),m("h3",Tw,X(E.value?"검색 결과":"최근 저장됨"),1),m("div",kw,[(W(!0),q(me,null,Ce(B.value,U=>(W(),q("div",{key:U.id,class:"saved-item"},[m("div",xw,[m("span",Pw,X(U.title),1),m("span",Aw,X(U.type==="memo"?"메모":re(U.resourceType||"")),1)]),m("div",Nw,[(W(!0),q(me,null,Ce(U.tags,J=>(W(),q("span",{key:J,class:"tag"}," # "+X(J),1))),128))]),m("div",Mw,X(U.content.length>100?U.content.slice(0,100)+"...":U.content),1),m("div",Lw,X(U.createdAt),1)]))),128))])])])]))}}),$w=Te(Dw,[["__scopeId","data-v-7c059ab0"]]);var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_r={},Oi={},ol;function np(){return ol||(ol=1,function(e){var t=Oi.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();function n(r){if(!r)return n.__;Array.prototype.reduce||(Array.prototype.reduce=function(o,a){for(var c=a,l=0;l<this.length;l++)c=o(c,this[l],l,this);return c});var i="",s=("."+r).split(".").reduce(function(o,a,c,l){i?i+="."+a:i=a;var u=o["__"+i];return u===void 0&&(n.Logger.prototype=o,u=new n.Logger(i),o["__"+i]=u),u},n.__);return s}(function(r){r.requestId="",r.entryId=0,r._createXMLHttpRequest=function(){return new XMLHttpRequest},r._getTime=function(){return new Date().getTime()},r._console=console,r._appenderNames=[];function i(A,R,x){if(R[A]!==void 0){if(R[A]===null){delete x[A];return}x[A]=R[A]}}function s(A){if(r.enabled!=null&&!r.enabled)return!1;try{if(A.userAgentRegex&&!new RegExp(A.userAgentRegex).test(navigator.userAgent))return!1}catch{}try{if(A.ipRegex&&r.clientIP&&!new RegExp(A.ipRegex).test(r.clientIP))return!1}catch{}return!0}function o(A,R){try{if(A.disallow&&new RegExp(A.disallow).test(R))return!1}catch{}return!0}function a(A){return typeof A=="function"?A instanceof RegExp?A.toString():A():A}var c=function(){function A(R,x,F){this.msg=R,this.meta=x,this.finalString=F}return A}();function l(A){var R=a(A),x;switch(typeof R){case"string":return new c(R,null,R);case"number":return x=R.toString(),new c(x,null,x);case"boolean":return x=R.toString(),new c(x,null,x);case"undefined":return new c("undefined",null,"undefined");case"object":return R instanceof RegExp||R instanceof String||R instanceof Number||R instanceof Boolean?(x=R.toString(),new c(x,null,x)):(typeof r.serialize=="function"?x=r.serialize.call(this,R):x=JSON.stringify(R),new c("",R,x));default:return new c("unknown",null,"unknown")}}function u(A){return i("enabled",A,this),i("maxMessages",A,this),i("defaultAjaxUrl",A,this),i("clientIP",A,this),i("requestId",A,this),i("defaultBeforeSend",A,this),i("serialize",A,this),this}r.setOptions=u;function d(){return-2147483648}r.getAllLevel=d;function g(){return 1e3}r.getTraceLevel=g;function f(){return 2e3}r.getDebugLevel=f;function _(){return 3e3}r.getInfoLevel=_;function b(){return 4e3}r.getWarnLevel=b;function v(){return 5e3}r.getErrorLevel=v;function h(){return 6e3}r.getFatalLevel=h;function I(){return 2147483647}r.getOffLevel=I;function O(A){return A<=1e3?"trace":A<=2e3?"debug":A<=3e3?"info":A<=4e3?"warn":A<=5e3?"error":"fatal"}var S=function(){function A(R,x){this.inner=x,this.name="JL.Exception",this.message=l(R).finalString}return A}();r.Exception=S,S.prototype=new Error;var p=function(){function A(R,x,F,j,G){this.l=R,this.m=x,this.n=F,this.t=j,this.u=G}return A}();r.LogItem=p;function w(A,R,x){return r.entryId++,new p(A,R,x,r._getTime(),r.entryId)}function P(A){A.id&&(clearTimeout(A.id),A.id=null)}function y(A,R,x){var F=this;A.id||(A.id=setTimeout(function(){x.call(F)},R))}var C=function(){function A(R,x){this.appenderName=R,this.sendLogItems=x,this.level=r.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var F="Trying to create an appender without a name or with an empty name";if(R==null)throw F;if(r._appenderNames.indexOf(R)!=-1)throw R?"Multiple appenders use the same name "+R:F;r._appenderNames.push(R)}return A.prototype.addLogItemsToBuffer=function(R){if(this.batchBuffer.length>=this.maxBatchSize){this.nbrLogItemsSkipped+=R.length;return}if(r.maxMessages!=null){if(r.maxMessages<1)return;r.maxMessages-=R.length}this.batchBuffer=this.batchBuffer.concat(R);var x=this;y(this.batchTimeoutTimer,this.batchTimeout,function(){x.sendBatch.call(x)})},A.prototype.batchBufferHasOverdueMessages=function(){for(var R=0;R<this.batchBuffer.length;R++){var x=r._getTime()-this.batchBuffer[R].t;if(x>this.batchTimeout)return!0}return!1},A.prototype.batchBufferHasStrandedMessage=function(){return r.maxMessages!=null&&r.maxMessages<1&&this.batchBuffer.length>0},A.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},A.prototype.onSendingEnded=function(){P(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},A.prototype.setOptions=function(R){if(i("level",R,this),i("ipRegex",R,this),i("userAgentRegex",R,this),i("disallow",R,this),i("sendWithBufferLevel",R,this),i("storeInBufferLevel",R,this),i("bufferSize",R,this),i("batchSize",R,this),i("maxBatchSize",R,this),i("batchTimeout",R,this),i("sendTimeout",R,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new r.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},A.prototype.log=function(R,x,F,j,G,Y,ce){var re;if(s(this)&&o(this,Y)&&!(G<this.storeInBufferLevel)){if(re=w(G,Y,ce),G<this.level){this.bufferSize>0&&(this.buffer.push(re),this.buffer.length>this.bufferSize&&this.buffer.shift());return}this.addLogItemsToBuffer([re]),G>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete()}},A.prototype.sendBatch=function(){if(!(this.nbrLogItemsBeingSent>0)&&(P(this.batchTimeoutTimer),this.batchBuffer.length!=0)){this.nbrLogItemsBeingSent=this.batchBuffer.length;var R=this;y(this.sendTimeoutTimer,this.sendTimeout,function(){R.onSendingEnded.call(R)}),this.sendLogItems(this.batchBuffer,function(){R.batchBuffer.splice(0,R.nbrLogItemsBeingSent),R.nbrLogItemsSkipped>0&&(R.batchBuffer.push(w(b(),"Lost "+R.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",R.appenderName)),R.nbrLogItemsSkipped=0),R.onSendingEnded.call(R)})}},A}();r.Appender=C;var T=function(A){t(R,A);function R(x){return A.call(this,x,R.prototype.sendLogItemsAjax)||this}return R.prototype.setOptions=function(x){return i("url",x,this),i("beforeSend",x,this),A.prototype.setOptions.call(this,x),this},R.prototype.sendLogItemsAjax=function(x,F){try{if(!s(this))return;this.xhr&&this.xhr.readyState!=0&&this.xhr.readyState!=4&&this.xhr.abort(),this.xhr=r._createXMLHttpRequest();var j="/jsnlog.logger";r.defaultAjaxUrl!=null&&(j=r.defaultAjaxUrl),this.url&&(j=this.url),this.xhr.open("POST",j),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",r.requestId);var G=this;this.xhr.onreadystatechange=function(){G.xhr.readyState==4&&G.xhr.status>=200&&G.xhr.status<300&&F()};var Y={r:r.requestId,lg:x};typeof this.beforeSend=="function"?this.beforeSend.call(this,this.xhr,Y):typeof r.defaultBeforeSend=="function"&&r.defaultBeforeSend.call(this,this.xhr,Y);var ce=JSON.stringify(Y);this.xhr.send(ce)}catch{}},R}(C);r.AjaxAppender=T;var M=function(A){t(R,A);function R(x){return A.call(this,x,R.prototype.sendLogItemsConsole)||this}return R.prototype.clog=function(x){r._console.log(x)},R.prototype.cerror=function(x){r._console.error?r._console.error(x):this.clog(x)},R.prototype.cwarn=function(x){r._console.warn?r._console.warn(x):this.clog(x)},R.prototype.cinfo=function(x){r._console.info?r._console.info(x):this.clog(x)},R.prototype.cdebug=function(x){r._console.debug?r._console.debug(x):this.cinfo(x)},R.prototype.sendLogItemsConsole=function(x,F){try{if(!s(this)||!r._console)return;var j;for(j=0;j<x.length;++j){var G=x[j],Y=G.n+": "+G.m;typeof window>"u"&&(Y=new Date(G.t)+" | "+Y),G.l<=r.getDebugLevel()?this.cdebug(Y):G.l<=r.getInfoLevel()?this.cinfo(Y):G.l<=r.getWarnLevel()?this.cwarn(Y):this.cerror(Y)}}catch{}F()},R}(C);r.ConsoleAppender=M;var N=function(){function A(R){this.loggerName=R,this.seenRegexes=[]}return A.prototype.setOptions=function(R){return i("level",R,this),i("userAgentRegex",R,this),i("disallow",R,this),i("ipRegex",R,this),i("appenders",R,this),i("onceOnly",R,this),this.seenRegexes=[],this},A.prototype.buildExceptionObject=function(R){var x={};return R.stack?x.stack=R.stack:x.e=R,R.message&&(x.message=R.message),R.name&&(x.name=R.name),R.data&&(x.data=R.data),R.inner&&(x.inner=this.buildExceptionObject(R.inner)),x},A.prototype.log=function(R,x,F){var j=0,G,Y;if(!this.appenders)return this;if(R>=this.level&&s(this)&&(F?(Y=this.buildExceptionObject(F),Y.logData=a(x)):Y=x,G=l(Y),o(this,G.finalString))){if(this.onceOnly)for(j=this.onceOnly.length-1;j>=0;){if(new RegExp(this.onceOnly[j]).test(G.finalString)){if(this.seenRegexes[j])return this;this.seenRegexes[j]=!0}j--}for(G.meta=G.meta||{},j=this.appenders.length-1;j>=0;)this.appenders[j].log(O(R),G.msg,G.meta,function(){},R,G.finalString,this.loggerName),j--}return this},A.prototype.trace=function(R){return this.log(g(),R)},A.prototype.debug=function(R){return this.log(f(),R)},A.prototype.info=function(R){return this.log(_(),R)},A.prototype.warn=function(R){return this.log(b(),R)},A.prototype.error=function(R){return this.log(v(),R)},A.prototype.fatal=function(R){return this.log(h(),R)},A.prototype.fatalException=function(R,x){return this.log(h(),R,x)},A}();r.Logger=N;function E(A){return new T(A)}r.createAjaxAppender=E;function k(A){return new M(A)}r.createConsoleAppender=k;var B;typeof window<"u"?B=new T(""):B=new M(""),r.__=new r.Logger(""),r.__.setOptions({level:r.getDebugLevel(),appenders:[B]})})(n),e.__esModule=!0,e.JL=n,typeof __jsnlog_configure=="function"&&__jsnlog_configure(n),typeof window<"u"&&!window.onerror&&(window.onerror=function(r,i,s,o,a){return n("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:r?r.message||r:"",url:i,"line number":s,column:o},a),!1}),typeof window<"u"&&!window.onunhandledrejection&&(window.onunhandledrejection=function(r){n("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:r.reason?r.reason.message:r.message||null},r.reason)})}(Oi)),Oi}var hn={},Sr={},no={},al;function rp(){return al||(al=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalRecorderState=void 0,function(t){t.READY="READY",t.RECORDING="RECORDING",t.PAUSED="PAUSED",t.FINISHED="FINISHED"}(e.LocalRecorderState||(e.LocalRecorderState={}))}(no)),no}var wr={},Cr={},cl;function Vw(){if(cl)return Cr;cl=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.ConsoleLogger=void 0;var e=function(){function t(n){this.logger=n,this.log=n.log,this.info=n.info,this.debug=n.debug,this.warn=n.warn,this.error=n.error}return t}();return Cr.ConsoleLogger=e,Cr}var ro={},ll;function ip(){return ll||(ll=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OpenViduLoggerConfiguration=void 0,function(t){t.disabled="disabled",t.debug="debug",t.debug_app="debug_app"}(e.OpenViduLoggerConfiguration||(e.OpenViduLoggerConfiguration={}))}(ro)),ro}var ul;function Qe(){if(ul)return wr;ul=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.OpenViduLogger=void 0;var e=np(),t=Vw(),n=ip(),r=function(){function i(){this.JSNLOG_URL="/openvidu/elk/openvidu-browser-logs",this.MAX_JSNLOG_BATCH_LOG_MESSAGES=100,this.MAX_MSECONDS_BATCH_MESSAGES=5e3,this.MAX_LENGTH_STRING_JSON=1e3,this.defaultConsoleLogger=new t.ConsoleLogger(globalThis.console),this.isProdMode=!1,this.isJSNLogSetup=!1}return i.configureJSNLog=function(s,o){var a=this;try{if(globalThis.LOG_JSNLOG_RESULTS||this.instance&&s.isAtLeastPro&&this.instance.isOpenViduBrowserLogsDebugActive(s)&&this.instance.canConfigureJSNLog(s,this.instance)){s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug_app&&this.instance.replaceWindowConsole(),this.instance.isJSNLogSetup=!1,this.instance.info("Configuring JSNLogs.");var c=s.finalUserId,l=s.session.sessionId,u=function(g){var f=g.onreadystatechange;g.onreadystatechange=function(){a.isInvalidResponse(g)&&(Object.defineProperty(g,"readyState",{value:4}),Object.defineProperty(g,"status",{value:200}),a.instance.disableLogger()),f()},g.setRequestHeader("Authorization","Basic "+btoa("".concat(c,"%/%").concat(l)+":"+o)),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),g.setRequestHeader("OV-Final-User-Id",c),g.setRequestHeader("OV-Session-Id",l),g.setRequestHeader("OV-Token",o)};this.instance.currentAppender=e.JL.createAjaxAppender("appender-".concat(c,"-").concat(l)),this.instance.currentAppender.setOptions({beforeSend:u,maxBatchSize:1e3,batchSize:this.instance.MAX_JSNLOG_BATCH_LOG_MESSAGES,batchTimeout:this.instance.MAX_MSECONDS_BATCH_MESSAGES});var d=function(g){var f=function(){var b=new WeakSet;return function(v,h){if(typeof h=="object"&&h!=null){if(b.has(h)||globalThis.HTMLElement&&h instanceof HTMLElement)return;b.add(h)}return h}},_=JSON.stringify(g,f());return _.length>a.instance.MAX_LENGTH_STRING_JSON&&(_="".concat(_.substring(0,a.instance.MAX_LENGTH_STRING_JSON),"...")),globalThis.LOG_JSNLOG_RESULTS&&console.log(_),_};e.JL.setOptions({defaultAjaxUrl:s.httpUri+this.instance.JSNLOG_URL,serialize:d,enabled:!0}),(0,e.JL)().setOptions({appenders:[this.instance.currentAppender]}),this.instance.isJSNLogSetup=!0,this.instance.loggingSessionId=l,this.instance.info("JSNLog configured.")}}catch(g){console.error("Error configuring JSNLog: "),console.error(g),this.instance.disableLogger()}},i.getInstance=function(){return i.instance||(i.instance=new i),i.instance},i.isInvalidResponse=function(s){return s.status==401||s.status==403||s.status==404||s.status==0},i.prototype.canConfigureJSNLog=function(s,o){return s.session.sessionId!=o.loggingSessionId},i.prototype.isOpenViduBrowserLogsDebugActive=function(s){return s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug||s.sendBrowserLogs===n.OpenViduLoggerConfiguration.debug_app},i.prototype.getConsoleWithJSNLog=function(){return function(s){return{log:function(){s.defaultConsoleLogger.log.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().info(arguments)},info:function(){s.defaultConsoleLogger.info.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().info(arguments)},debug:function(){s.defaultConsoleLogger.debug.apply(s.defaultConsoleLogger.logger,arguments)},warn:function(){s.defaultConsoleLogger.warn.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().warn(arguments)},error:function(){s.defaultConsoleLogger.error.apply(s.defaultConsoleLogger.logger,arguments),s.isJSNLogSetup&&(0,e.JL)().error(arguments)}}}(this)},i.prototype.replaceWindowConsole=function(){globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.getConsoleWithJSNLog().log,globalThis.console.info=this.getConsoleWithJSNLog().info,globalThis.console.debug=this.getConsoleWithJSNLog().debug,globalThis.console.warn=this.getConsoleWithJSNLog().warn,globalThis.console.error=this.getConsoleWithJSNLog().error},i.prototype.disableLogger=function(){e.JL.setOptions({enabled:!1}),this.isJSNLogSetup=!1,this.loggingSessionId=void 0,this.currentAppender=void 0,globalThis.console=this.defaultConsoleLogger.logger,globalThis.console.log=this.defaultConsoleLogger.log,globalThis.console.info=this.defaultConsoleLogger.info,globalThis.console.debug=this.defaultConsoleLogger.debug,globalThis.console.warn=this.defaultConsoleLogger.warn,globalThis.console.error=this.defaultConsoleLogger.error},i.prototype.log=function(){this.isProdMode||this.defaultConsoleLogger.log.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().info(arguments)},i.prototype.debug=function(){this.isProdMode||this.defaultConsoleLogger.debug.apply(this.defaultConsoleLogger.logger,arguments)},i.prototype.info=function(){this.isProdMode||this.defaultConsoleLogger.info.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().info(arguments)},i.prototype.warn=function(){this.defaultConsoleLogger.warn.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().warn(arguments)},i.prototype.error=function(){this.defaultConsoleLogger.error.apply(this.defaultConsoleLogger.logger,arguments),this.isJSNLogSetup&&(0,e.JL)().error(arguments)},i.prototype.flush=function(){this.isJSNLogSetup&&this.currentAppender!=null&&this.currentAppender.sendBatch()},i.prototype.enableProdMode=function(){this.isProdMode=!0},i}();return wr.OpenViduLogger=r,wr}var Ir={},qr={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */var Bw=qr.exports,dl;function jw(){return dl||(dl=1,function(e,t){(function(){var n={function:!0,object:!0},r=n[typeof window]&&window||this,i=t,s=!e.nodeType&&e,o=i&&s&&typeof sl=="object"&&sl;o&&(o.global===o||o.window===o||o.self===o)&&(r=o);var a=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,u=l.hasOwnProperty,d=l.toString;function g(y){return y=String(y),y.charAt(0).toUpperCase()+y.slice(1)}function f(y,C,T){var M={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return C&&T&&/^Win/i.test(y)&&!/^Windows Phone /i.test(y)&&(M=M[/[\d.]+$/.exec(y)])&&(y="Windows "+M),y=String(y),C&&T&&(y=y.replace(RegExp(C,"i"),T)),y=b(y.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),y}function _(y,C){var T=-1,M=y?y.length:0;if(typeof M=="number"&&M>-1&&M<=a)for(;++T<M;)C(y[T],T,y);else v(y,C)}function b(y){return y=p(y),/^(?:webOS|i(?:OS|P))/.test(y)?y:g(y)}function v(y,C){for(var T in y)u.call(y,T)&&C(y[T],T,y)}function h(y){return y==null?g(y):d.call(y).slice(8,-1)}function I(y,C){var T=y!=null?typeof y[C]:"number";return!/^(?:boolean|number|string|undefined)$/.test(T)&&(T=="object"?!!y[C]:!0)}function O(y){return String(y).replace(/([ -])(?!$)/g,"$1?")}function S(y,C){var T=null;return _(y,function(M,N){T=C(T,M,N,y)}),T}function p(y){return String(y).replace(/^ +| +$/g,"")}function w(y){var C=r,T=y&&typeof y=="object"&&h(y)!="String";T&&(C=y,y=null);var M=C.navigator||{},N=M.userAgent||"";y||(y=N);var E=T?!!M.likeChrome:/\bChrome\b/.test(y)&&!/internal|\n/i.test(d.toString()),k="Object",B=T?k:"ScriptBridgingProxyObject",A=T?k:"Environment",R=T&&C.java?"JavaPackage":h(C.java),x=T?k:"RuntimeObject",F=/\bJava/.test(R)&&C.java,j=F&&h(C.environment)==A,G=F?"a":"α",Y=F?"b":"β",ce=C.document||{},re=C.operamini||C.opera,oe=c.test(oe=T&&re?re["[[Class]]"]:h(re))?oe:re=null,L,U=y,J=[],ne=null,ie=y==N,te=ie&&re&&typeof re.version=="function"&&re.version(),V,D=fe([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),$=le(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),z=ve([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Q=de({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),H=se(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function fe(ye){return S(ye,function(Ee,ee){return Ee||RegExp("\\b"+(ee.pattern||O(ee))+"\\b","i").exec(y)&&(ee.label||ee)})}function de(ye){return S(ye,function(Ee,ee,ue){return Ee||(ee[z]||ee[/^[a-z]+(?: +[a-z]+\b)*/i.exec(z)]||RegExp("\\b"+O(ue)+"(?:\\b|\\w*\\d)","i").exec(y))&&ue})}function le(ye){return S(ye,function(Ee,ee){return Ee||RegExp("\\b"+(ee.pattern||O(ee))+"\\b","i").exec(y)&&(ee.label||ee)})}function se(ye){return S(ye,function(Ee,ee){var ue=ee.pattern||O(ee);return!Ee&&(Ee=RegExp("\\b"+ue+"(?:/[\\d.]+|[ \\w.]*)","i").exec(y))&&(Ee=f(Ee,ue,ee.label||ee)),Ee})}function ve(ye){return S(ye,function(Ee,ee){var ue=ee.pattern||O(ee);return!Ee&&(Ee=RegExp("\\b"+ue+" *\\d+[.\\w_]*","i").exec(y)||RegExp("\\b"+ue+" *\\w+-[\\w]*","i").exec(y)||RegExp("\\b"+ue+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(y))&&((Ee=String(ee.label&&!RegExp(ue,"i").test(ee.label)?ee.label:Ee).split("/"))[1]&&!/[\d.]+/.test(Ee[0])&&(Ee[0]+=" "+Ee[1]),ee=ee.label||ee,Ee=b(Ee[0].replace(RegExp(ue,"i"),ee).replace(RegExp("; *(?:"+ee+"[_-])?","i")," ").replace(RegExp("("+ee+")[-_.]?(\\w)","i"),"$1 $2"))),Ee})}function pe(ye){return S(ye,function(Ee,ee){return Ee||(RegExp(ee+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(y)||0)[1]||null})}function ge(){return this.description||""}if(D&&(D=[D]),/\bAndroid\b/.test(H)&&!z&&(L=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(y))&&(z=p(L[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Q&&!z?z=ve([Q]):Q&&z&&(z=z.replace(RegExp("^("+O(Q)+")[-_.\\s]","i"),Q+" ").replace(RegExp("^("+O(Q)+")[-_.]?(\\w)","i"),Q+" $2")),(L=/\bGoogle TV\b/.exec(z))&&(z=L[0]),/\bSimulator\b/i.test(y)&&(z=(z?z+" ":"")+"Simulator"),$=="Opera Mini"&&/\bOPiOS\b/.test(y)&&J.push("running in Turbo/Uncompressed mode"),$=="IE"&&/\blike iPhone OS\b/.test(y)?(L=w(y.replace(/like iPhone OS/,"")),Q=L.manufacturer,z=L.product):/^iP/.test(z)?($||($="Safari"),H="iOS"+((L=/ OS ([\d_]+)/i.exec(y))?" "+L[1].replace(/_/g,"."):"")):$=="Konqueror"&&/^Linux\b/i.test(H)?H="Kubuntu":Q&&Q!="Google"&&(/Chrome/.test($)&&!/\bMobile Safari\b/i.test(y)||/\bVita\b/.test(z))||/\bAndroid\b/.test(H)&&/^Chrome/.test($)&&/\bVersion\//i.test(y)?($="Android Browser",H=/\bAndroid\b/.test(H)?H:"Android"):$=="Silk"?(/\bMobi/i.test(y)||(H="Android",J.unshift("desktop mode")),/Accelerated *= *true/i.test(y)&&J.unshift("accelerated")):$=="UC Browser"&&/\bUCWEB\b/.test(y)?J.push("speed mode"):$=="PaleMoon"&&(L=/\bFirefox\/([\d.]+)\b/.exec(y))?J.push("identifying as Firefox "+L[1]):$=="Firefox"&&(L=/\b(Mobile|Tablet|TV)\b/i.exec(y))?(H||(H="Firefox OS"),z||(z=L[1])):!$||(L=!/\bMinefield\b/i.test(y)&&/\b(?:Firefox|Safari)\b/.exec($))?($&&!z&&/[\/,]|^[^(]+?\)/.test(y.slice(y.indexOf(L+"/")+8))&&($=null),(L=z||Q||H)&&(z||Q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(H))&&($=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(H)?H:L)+" Browser")):$=="Electron"&&(L=(/\bChrome\/([\d.]+)\b/.exec(y)||0)[1])&&J.push("Chromium "+L),te||(te=pe(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",O($),"(?:Firefox|Minefield|NetFront)"])),(L=D=="iCab"&&parseFloat(te)>3&&"WebKit"||/\bOpera\b/.test($)&&(/\bOPR\b/.test(y)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(y)&&!/^(?:Trident|EdgeHTML)$/.test(D)&&"WebKit"||!D&&/\bMSIE\b/i.test(y)&&(H=="Mac OS"?"Tasman":"Trident")||D=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test($)&&"NetFront")&&(D=[L]),$=="IE"&&(L=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(y)||0)[1])?($+=" Mobile",H="Windows Phone "+(/\+$/.test(L)?L:L+".x"),J.unshift("desktop mode")):/\bWPDesktop\b/i.test(y)?($="IE Mobile",H="Windows Phone 8.x",J.unshift("desktop mode"),te||(te=(/\brv:([\d.]+)/.exec(y)||0)[1])):$!="IE"&&D=="Trident"&&(L=/\brv:([\d.]+)/.exec(y))&&($&&J.push("identifying as "+$+(te?" "+te:"")),$="IE",te=L[1]),ie){if(I(C,"global"))if(F&&(L=F.lang.System,U=L.getProperty("os.arch"),H=H||L.getProperty("os.name")+" "+L.getProperty("os.version")),j){try{te=C.require("ringo/engine").version.join("."),$="RingoJS"}catch{(L=C.system)&&L.global.system==C.system&&($="Narwhal",H||(H=L[0].os||null))}$||($="Rhino")}else typeof C.process=="object"&&!C.process.browser&&(L=C.process)&&(typeof L.versions=="object"&&(typeof L.versions.electron=="string"?(J.push("Node "+L.versions.node),$="Electron",te=L.versions.electron):typeof L.versions.nw=="string"&&(J.push("Chromium "+te,"Node "+L.versions.node),$="NW.js",te=L.versions.nw)),$||($="Node.js",U=L.arch,H=L.platform,te=/[\d.]+/.exec(L.version),te=te?te[0]:null));else h(L=C.runtime)==B?($="Adobe AIR",H=L.flash.system.Capabilities.os):h(L=C.phantom)==x?($="PhantomJS",te=(L=L.version||null)&&L.major+"."+L.minor+"."+L.patch):typeof ce.documentMode=="number"&&(L=/\bTrident\/(\d+)/i.exec(y))?(te=[te,ce.documentMode],(L=+L[1]+4)!=te[1]&&(J.push("IE "+te[1]+" mode"),D&&(D[1]=""),te[1]=L),te=$=="IE"?String(te[1].toFixed(1)):te[0]):typeof ce.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test($)&&(J.push("masking as "+$+" "+te),$="IE",te="11.0",D=["Trident"],H="Windows");H=H&&b(H)}if(te&&(L=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(te)||/(?:alpha|beta)(?: ?\d)?/i.exec(y+";"+(ie&&M.appMinorVersion))||/\bMinefield\b/i.test(y)&&"a")&&(ne=/b/i.test(L)?"beta":"alpha",te=te.replace(RegExp(L+"\\+?$"),"")+(ne=="beta"?Y:G)+(/\d+\+?/.exec(L)||"")),$=="Fennec"||$=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(H))$="Firefox Mobile";else if($=="Maxthon"&&te)te=te.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(z))z=="Xbox 360"&&(H=null),z=="Xbox 360"&&/\bIEMobile\b/.test(y)&&J.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test($)||$&&!z&&!/Browser|Mobi/.test($))&&(H=="Windows CE"||/Mobi/i.test(y)))$+=" Mobile";else if($=="IE"&&ie)try{C.external===null&&J.unshift("platform preview")}catch{J.unshift("embedded")}else(/\bBlackBerry\b/.test(z)||/\bBB10\b/.test(y))&&(L=(RegExp(z.replace(/ +/g," *")+"/([.\\d]+)","i").exec(y)||0)[1]||te)?(L=[L,/BB10/.test(y)],H=(L[1]?(z=null,Q="BlackBerry"):"Device Software")+" "+L[0],te=null):this!=v&&z!="Wii"&&(ie&&re||/Opera/.test($)&&/\b(?:MSIE|Firefox)\b/i.test(y)||$=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(H)||$=="IE"&&(H&&!/^Win/.test(H)&&te>5.5||/\bWindows XP\b/.test(H)&&te>8||te==8&&!/\bTrident\b/.test(y)))&&!c.test(L=w.call(v,y.replace(c,"")+";"))&&L.name&&(L="ing as "+L.name+((L=L.version)?" "+L:""),c.test($)?(/\bIE\b/.test(L)&&H=="Mac OS"&&(H=null),L="identify"+L):(L="mask"+L,oe?$=b(oe.replace(/([a-z])([A-Z])/g,"$1 $2")):$="Opera",/\bIE\b/.test(L)&&(H=null),ie||(te=null)),D=["Presto"],J.push(L));(L=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(y)||0)[1])&&(L=[parseFloat(L.replace(/\.(\d)$/,".0$1")),L],$=="Safari"&&L[1].slice(-1)=="+"?($="WebKit Nightly",ne="alpha",te=L[1].slice(0,-1)):(te==L[1]||te==(L[2]=(/\bSafari\/([\d.]+\+?)/i.exec(y)||0)[1]))&&(te=null),L[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(y)||0)[1],L[0]==537.36&&L[2]==537.36&&parseFloat(L[1])>=28&&D=="WebKit"&&(D=["Blink"]),!ie||!E&&!L[1]?(D&&(D[1]="like Safari"),L=(L=L[0],L<400?1:L<500?2:L<526?3:L<533?4:L<534?"4+":L<535?5:L<537?6:L<538?7:L<601?8:L<602?9:L<604?10:L<606?11:L<608?12:"12")):(D&&(D[1]="like Chrome"),L=L[1]||(L=L[0],L<530?1:L<532?2:L<532.05?3:L<533?4:L<534.03?5:L<534.07?6:L<534.1?7:L<534.13?8:L<534.16?9:L<534.24?10:L<534.3?11:L<535.01?12:L<535.02?"13+":L<535.07?15:L<535.11?16:L<535.19?17:L<536.05?18:L<536.1?19:L<537.01?20:L<537.11?"21+":L<537.13?23:L<537.18?24:L<537.24?25:L<537.36?26:D!="Blink"?"27":"28")),D&&(D[1]+=" "+(L+=typeof L=="number"?".x":/[.+]/.test(L)?"":"+")),$=="Safari"&&(!te||parseInt(te)>45)?te=L:$=="Chrome"&&/\bHeadlessChrome/i.test(y)&&J.unshift("headless")),$=="Opera"&&(L=/\bzbov|zvav$/.exec(H))?($+=" ",J.unshift("desktop mode"),L=="zvav"?($+="Mini",te=null):$+="Mobile",H=H.replace(RegExp(" *"+L+"$"),"")):$=="Safari"&&/\bChrome\b/.exec(D&&D[1])?(J.unshift("desktop mode"),$="Chrome Mobile",te=null,/\bOS X\b/.test(H)?(Q="Apple",H="iOS 4.3+"):H=null):/\bSRWare Iron\b/.test($)&&!te&&(te=pe("Chrome")),te&&te.indexOf(L=/[\d.]+$/.exec(H))==0&&y.indexOf("/"+L+"-")>-1&&(H=p(H.replace(L,""))),H&&H.indexOf($)!=-1&&!RegExp($+" OS").test(H)&&(H=H.replace(RegExp(" *"+O($)+" *"),"")),D&&!/\b(?:Avant|Nook)\b/.test($)&&(/Browser|Lunascape|Maxthon/.test($)||$!="Safari"&&/^iOS/.test(H)&&/\bSafari\b/.test(D[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test($)&&D[1])&&(L=D[D.length-1])&&J.push(L),J.length&&(J=["("+J.join("; ")+")"]),Q&&z&&z.indexOf(Q)<0&&J.push("on "+Q),z&&J.push((/^on /.test(J[J.length-1])?"":"on ")+z),H&&(L=/ ([\d.+]+)$/.exec(H),V=L&&H.charAt(H.length-L[0].length-1)=="/",H={architecture:32,family:L&&!V?H.replace(L[0],""):H,version:L?L[1]:null,toString:function(){var ye=this.version;return this.family+(ye&&!V?" "+ye:"")+(this.architecture==64?" 64-bit":"")}}),(L=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)?(H&&(H.architecture=64,H.family=H.family.replace(RegExp(" *"+L),"")),$&&(/\bWOW64\b/i.test(y)||ie&&/\w(?:86|32)$/.test(M.cpuClass||M.platform)&&!/\bWin64; x64\b/i.test(y))&&J.unshift("32-bit")):H&&/^OS X/.test(H.family)&&$=="Chrome"&&parseFloat(te)>=39&&(H.architecture=64),y||(y=null);var he={};return he.description=y,he.layout=D&&D[0],he.manufacturer=Q,he.name=$,he.prerelease=ne,he.product=z,he.ua=y,he.version=$&&te,he.os=H||{architecture:null,family:null,version:null,toString:function(){return"null"}},he.parse=w,he.toString=ge,he.version&&J.unshift(te),he.name&&J.unshift($),H&&$&&!(H==String(H).split(" ")[0]&&(H==$.split(" ")[0]||z))&&J.push(z?"("+H+")":"on "+H),J.length&&(he.description=J.join(" ")),he}var P=w();i&&s?v(P,function(y,C){i[C]=y}):r.platform=P}).call(Bw)}(qr,qr.exports)),qr.exports}var fl;function un(){if(fl)return Ir;fl=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.PlatformUtils=void 0;var e=jw(),t=function(){function n(){}return n.getInstance=function(){return this.instance||(this.instance=new n),n.instance},n.prototype.isChromeBrowser=function(){return e.name==="Chrome"},n.prototype.isSafariBrowser=function(){return e.name==="Safari"},n.prototype.isChromeMobileBrowser=function(){return e.name==="Chrome Mobile"},n.prototype.isFirefoxBrowser=function(){return e.name==="Firefox"},n.prototype.isFirefoxMobileBrowser=function(){return e.name==="Firefox Mobile"||e.name==="Firefox for iOS"},n.prototype.isOperaBrowser=function(){return e.name==="Opera"},n.prototype.isOperaMobileBrowser=function(){return e.name==="Opera Mobile"},n.prototype.isEdgeBrowser=function(){var r=e!=null&&e.version?parseFloat(e.version):-1;return e.name==="Microsoft Edge"&&r>=80},n.prototype.isEdgeMobileBrowser=function(){var r,i,s=e!=null&&e.version?parseFloat(e.version):-1;return e.name==="Microsoft Edge"&&(((r=e.os)===null||r===void 0?void 0:r.family)==="Android"||((i=e.os)===null||i===void 0?void 0:i.family)==="iOS")&&s>45},n.prototype.isAndroidBrowser=function(){return e.name==="Android Browser"},n.prototype.isElectron=function(){return e.name==="Electron"},n.prototype.isNodeJs=function(){return e.name==="Node.js"},n.prototype.isSamsungBrowser=function(){return e.name==="Samsung Internet Mobile"||e.name==="Samsung Internet"},n.prototype.isMotorolaEdgeDevice=function(){var r;return((r=e.product)===null||r===void 0?void 0:r.toLowerCase().includes("motorola edge"))||!1},n.prototype.isIPhoneOrIPad=function(){var r=e.ua?e.ua:navigator.userAgent,i="ontouchend"in document,s=/\b(\w*Macintosh\w*)\b/.test(r)&&i,o=/\b(\w*iPhone\w*)\b/.test(r)&&/\b(\w*Mobile\w*)\b/.test(r)&&i;return s||o},n.prototype.isIOSWithSafari=function(){var r=e.ua?e.ua:navigator.userAgent;return this.isIPhoneOrIPad()&&/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(r)&&!/\b(\w*CriOS\w*)\b/.test(r)&&!/\b(\w*FxiOS\w*)\b/.test(r)},n.prototype.isIonicIos=function(){return this.isIPhoneOrIPad()&&e.ua.indexOf("Safari")===-1},n.prototype.isIonicAndroid=function(){return e.os.family==="Android"&&e.name=="Android Browser"},n.prototype.isMobileDevice=function(){return e.os.family==="iOS"||e.os.family==="Android"},n.prototype.isReactNative=function(){return!1},n.prototype.isChromium=function(){return this.isChromeBrowser()||this.isChromeMobileBrowser()||this.isOperaBrowser()||this.isOperaMobileBrowser()||this.isEdgeBrowser()||this.isEdgeMobileBrowser()||this.isSamsungBrowser()||this.isIonicAndroid()||this.isIonicIos()||this.isElectron()||this.isMotorolaEdgeDevice()},n.prototype.canScreenShare=function(){var r=e!=null&&e.version?parseFloat(e.version):-1;return this.isMobileDevice()?!1:this.isChromeBrowser()||this.isFirefoxBrowser()||this.isOperaBrowser()||this.isElectron()||this.isEdgeBrowser()||this.isSafariBrowser()&&r>=13},n.prototype.getName=function(){return e.name||""},n.prototype.getVersion=function(){return e.version||""},n.prototype.getFamily=function(){return e.os.family||""},n.prototype.getDescription=function(){return e.description||""},n}();return Ir.PlatformUtils=t,Ir}var io,pl;function Fw(){if(pl)return io;pl=1;function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}return e.prototype.define=function(t,n){for(let r in t){let i=t[r].map(function(s){return s.toLowerCase()});r=r.toLowerCase();for(let s=0;s<i.length;s++){const o=i[s];if(o[0]!=="*"){if(!n&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(n||!this._extensions[r]){const s=i[0];this._extensions[r]=s[0]!=="*"?s:s.substr(1)}}},e.prototype.getType=function(t){t=String(t);let n=t.replace(/^.*[/\\]/,"").toLowerCase(),r=n.replace(/^.*\./,"").toLowerCase(),i=n.length<t.length;return(r.length<n.length-1||!i)&&this._types[r]||null},e.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null},io=e,io}var so,hl;function Uw(){return hl||(hl=1,so={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}),so}var oo,ml;function Hw(){if(ml)return oo;ml=1;let e=Fw();return oo=new e(Uw()),oo}var vl;function sp(){if(vl)return Sr;vl=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.LocalRecorder=void 0;var e=rp(),t=Qe(),n=un(),r=Hw(),i=t.OpenViduLogger.getInstance(),s,o=function(){function a(c){this.stream=c,this.chunks=[],s=n.PlatformUtils.getInstance(),this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=e.LocalRecorderState.READY}return a.prototype.record=function(c){var l=this;return new Promise(function(u,d){try{if(typeof c=="string"||c instanceof String)return d(`When calling LocalRecorder.record(options) parameter 'options' cannot be a string. Must be an object like { mimeType: "`.concat(c,'" }'));if(typeof MediaRecorder>"u")throw i.error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your device. See compatibility in https://caniuse.com/#search=MediaRecorder");if(l.state!==e.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+l.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");i.log("Starting local recording of stream '"+l.stream.streamId+"' of connection '"+l.connectionId+"'"),c?c.mimeType||(c.mimeType="video/webm"):c={mimeType:"video/webm"},l.mediaRecorder=new MediaRecorder(l.stream.getMediaStream(),c),l.mediaRecorder.start()}catch(g){return d(g)}return l.mediaRecorder.ondataavailable=function(g){g.data.size>0&&l.chunks.push(g.data)},l.mediaRecorder.onerror=function(g){i.error("MediaRecorder error: ",g)},l.mediaRecorder.onstart=function(){i.log("MediaRecorder started (state="+l.mediaRecorder.state+")")},l.mediaRecorder.onstop=function(){l.onStopDefault()},l.mediaRecorder.onpause=function(){i.log("MediaRecorder paused (state="+l.mediaRecorder.state+")")},l.mediaRecorder.onresume=function(){i.log("MediaRecorder resumed (state="+l.mediaRecorder.state+")")},l.state=e.LocalRecorderState.RECORDING,u()})},a.prototype.stop=function(){var c=this;return new Promise(function(l,u){try{if(c.state===e.LocalRecorderState.READY||c.state===e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+c.state+"'). Call 'LocalRecorder.start()' before");c.mediaRecorder.onstop=function(){return c.onStopDefault(),l()},c.mediaRecorder.stop()}catch(d){return u(d)}})},a.prototype.pause=function(){var c=this;return new Promise(function(l,u){try{return c.state!==e.LocalRecorderState.RECORDING?u(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+c.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")):(c.mediaRecorder.pause(),c.state=e.LocalRecorderState.PAUSED,l())}catch(d){return u(d)}})},a.prototype.resume=function(){var c=this;return new Promise(function(l,u){try{if(c.state!==e.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+c.state+"'). Call 'LocalRecorder.pause()' before");return c.mediaRecorder.resume(),c.state=e.LocalRecorderState.RECORDING,l()}catch(d){return u(d)}})},a.prototype.preview=function(c){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,s.isSafariBrowser()&&(this.videoPreview.playsInline=!0),typeof c=="string"){var l=document.getElementById(c);l&&(this.videoPreview=l.appendChild(this.videoPreview))}else this.videoPreview=c.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},a.prototype.clean=function(){var c=this,l=function(){delete c.blob,c.chunks=[],c.state=e.LocalRecorderState.READY};this.state===e.LocalRecorderState.RECORDING||this.state===e.LocalRecorderState.PAUSED?this.stop().then(function(){return l()}).catch(function(){return l()}):l()},a.prototype.download=function(){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var c=document.createElement("a");c.style.display="none",document.body.appendChild(c);var l=globalThis.URL.createObjectURL(this.blob);c.href=l,c.download=this.id+"."+r.getExtension(this.blob.type),c.click(),globalThis.URL.revokeObjectURL(l),document.body.removeChild(c)},a.prototype.getBlob=function(){if(this.state!==e.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},a.prototype.uploadAsBinary=function(c,l){var u=this;return new Promise(function(d,g){if(u.state!==e.LocalRecorderState.FINISHED)return g(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+u.state+"'). Call 'LocalRecorder.stop()' before"));var f=new XMLHttpRequest;if(f.open("POST",c,!0),typeof l=="object")for(var _=0,b=Object.keys(l);_<b.length;_++){var v=b[_];f.setRequestHeader(v,l[v])}f.onreadystatechange=function(){if(f.readyState===4)return f.status.toString().charAt(0)==="2"?d(f.responseText):g(f.status)},f.send(u.blob)})},a.prototype.uploadAsMultipartfile=function(c,l){var u=this;return new Promise(function(d,g){if(u.state!==e.LocalRecorderState.FINISHED)return g(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+u.state+"'). Call 'LocalRecorder.stop()' before"));var f=new XMLHttpRequest;if(f.open("POST",c,!0),typeof l=="object")for(var _=0,b=Object.keys(l);_<b.length;_++){var v=b[_];f.setRequestHeader(v,l[v])}var h=new FormData;h.append("file",u.blob,u.id+"."+r.getExtension(u.blob.type)),f.onreadystatechange=function(){if(f.readyState===4)return f.status.toString().charAt(0)==="2"?d(f.responseText):g(f.status)},f.send(h)})},a.prototype.onStopDefault=function(){i.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),this.chunks=[],this.videoPreviewSrc=globalThis.URL.createObjectURL(this.blob),this.state=e.LocalRecorderState.FINISHED},a}();return Sr.LocalRecorder=o,Sr}var zt={},Kt={},Rr={},mn={},Or={},Bn={},Tr={},gl;function ct(){if(gl)return Tr;gl=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.Event=void 0;var e=function(){function t(n,r,i){this.hasBeenPrevented=!1,this.cancelable=n,this.target=r,this.type=i}return t.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},t.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},t}();return Tr.Event=e,Tr}var bl;function pr(){if(bl)return Bn;bl=1;var e=Bn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.StreamPropertyChangedEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c,l,u){var d=r.call(this,!1,s,"streamPropertyChanged")||this;return d.stream=o,d.changedProperty=a,d.newValue=c,d.oldValue=l,d.reason=u,d}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Bn.StreamPropertyChangedEvent=n,Bn}var ao={},yl;function hr(){return yl||(yl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OpenViduError=e.OpenViduErrorName=void 0,function(n){n.BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",n.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",n.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",n.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",n.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",n.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",n.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",n.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",n.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",n.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",n.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",n.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",n.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",n.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",n.VIRTUAL_BACKGROUND_ERROR="VIRTUAL_BACKGROUND_ERROR",n.GENERIC_ERROR="GENERIC_ERROR"}(e.OpenViduErrorName||(e.OpenViduErrorName={}));var t=function(){function n(r,i){this.name=r,this.message=i}return n}();e.OpenViduError=t}(ao)),ao}var El;function Ra(){if(El)return Or;El=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Filter=void 0;var e=pr(),t=hr(),n=Qe(),r=n.OpenViduLogger.getInstance(),i=function(){function s(o,a){this.handlers=new Map,this.type=o,this.options=a}return s.prototype.execMethod=function(o,a){var c=this;return new Promise(function(l,u){var d;r.info("Executing filter method to stream "+c.stream.streamId);var g,f=function(v){r.info("Filter method successfully executed on Stream "+c.stream.streamId);var h=Object.assign({},c.stream.filter);return c.stream.filter.lastExecMethod={method:o,params:g},v&&(c.stream.session.emitEvent("streamPropertyChanged",[new e.StreamPropertyChangedEvent(c.stream.session,c.stream,"filter",c.stream.filter,h,"execFilterMethod")]),c.stream.streamManager.emitEvent("streamPropertyChanged",[new e.StreamPropertyChangedEvent(c.stream.streamManager,c.stream,"filter",c.stream.filter,h,"execFilterMethod")])),l()};if(c.type.startsWith("VB:")){if(typeof a=="string")try{a=JSON.parse(a)}catch(v){return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Wrong params syntax: "+v))}if(g=a,o==="update")if(!((d=c.stream.virtualBackgroundSinkElements)===null||d===void 0)&&d.VB)c.stream.virtualBackgroundSinkElements.VB.updateValues(a).then(function(){return f(!1)}).catch(function(v){return v.name===t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?u(new t.OpenViduError(v.name,v.message)):u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"Error updating values on Virtual Background filter: "+v))});else return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"There is no Virtual Background filter applied"));else return u(new t.OpenViduError(t.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Unknown Virtual Background method "'.concat(o,'"')))}else{var _=void 0;if(typeof a!="string")try{_=JSON.stringify(a)}catch{var b="'params' property must be a JSON formatted object";return r.error(b),u(b)}else _=a;g=_,c.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:c.stream.streamId,method:o,params:_},function(v,h){return v?(r.error("Error executing filter method for Stream "+c.stream.streamId,v),v.code===401?u(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method")):u(v)):f(!0)})}})},s.prototype.addEventListener=function(o,a){var c=this;return new Promise(function(l,u){r.info("Adding filter event listener to event "+o+" to stream "+c.stream.streamId),c.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:c.stream.streamId,eventType:o},function(d,g){return d?(r.error("Error adding filter event listener to event "+o+"for Stream "+c.stream.streamId,d),d.code===401?u(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):u(d)):(c.handlers.set(o,a),r.info("Filter event listener to event "+o+" successfully applied on Stream "+c.stream.streamId),l())})})},s.prototype.removeEventListener=function(o){var a=this;return new Promise(function(c,l){r.info("Removing filter event listener to event "+o+" to stream "+a.stream.streamId),a.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:a.stream.streamId,eventType:o},function(u,d){return u?(r.error("Error removing filter event listener to event "+o+"for Stream "+a.stream.streamId,u),u.code===401?l(new t.OpenViduError(t.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener")):l(u)):(a.handlers.delete(o),r.info("Filter event listener to event "+o+" successfully removed on Stream "+a.stream.streamId),c())})})},s}();return Or.Filter=i,Or}var jn={},Fn={},kr={},Hi={exports:{}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */var Ww=Hi.exports,_l;function Oa(){return _l||(_l=1,function(e){(function(t){function n(){}var r=n.prototype,i=t.EventEmitter;function s(c,l){for(var u=c.length;u--;)if(c[u].listener===l)return u;return-1}function o(c){return function(){return this[c].apply(this,arguments)}}r.getListeners=function(l){var u=this._getEvents(),d,g;if(l instanceof RegExp){d={};for(g in u)u.hasOwnProperty(g)&&l.test(g)&&(d[g]=u[g])}else d=u[l]||(u[l]=[]);return d},r.flattenListeners=function(l){var u=[],d;for(d=0;d<l.length;d+=1)u.push(l[d].listener);return u},r.getListenersAsObject=function(l){var u=this.getListeners(l),d;return u instanceof Array&&(d={},d[l]=u),d||u};function a(c){return typeof c=="function"||c instanceof RegExp?!0:c&&typeof c=="object"?a(c.listener):!1}r.addListener=function(l,u){if(!a(u))throw new TypeError("listener must be a function");var d=this.getListenersAsObject(l),g=typeof u=="object",f;for(f in d)d.hasOwnProperty(f)&&s(d[f],u)===-1&&d[f].push(g?u:{listener:u,once:!1});return this},r.on=o("addListener"),r.addOnceListener=function(l,u){return this.addListener(l,{listener:u,once:!0})},r.once=o("addOnceListener"),r.defineEvent=function(l){return this.getListeners(l),this},r.defineEvents=function(l){for(var u=0;u<l.length;u+=1)this.defineEvent(l[u]);return this},r.removeListener=function(l,u){var d=this.getListenersAsObject(l),g,f;for(f in d)d.hasOwnProperty(f)&&(g=s(d[f],u),g!==-1&&d[f].splice(g,1));return this},r.off=o("removeListener"),r.addListeners=function(l,u){return this.manipulateListeners(!1,l,u)},r.removeListeners=function(l,u){return this.manipulateListeners(!0,l,u)},r.manipulateListeners=function(l,u,d){var g,f,_=l?this.removeListener:this.addListener,b=l?this.removeListeners:this.addListeners;if(typeof u=="object"&&!(u instanceof RegExp))for(g in u)u.hasOwnProperty(g)&&(f=u[g])&&(typeof f=="function"?_.call(this,g,f):b.call(this,g,f));else for(g=d.length;g--;)_.call(this,u,d[g]);return this},r.removeEvent=function(l){var u=typeof l,d=this._getEvents(),g;if(u==="string")delete d[l];else if(l instanceof RegExp)for(g in d)d.hasOwnProperty(g)&&l.test(g)&&delete d[g];else delete this._events;return this},r.removeAllListeners=o("removeEvent"),r.emitEvent=function(l,u){var d=this.getListenersAsObject(l),g,f,_,b,v;for(b in d)if(d.hasOwnProperty(b))for(g=d[b].slice(0),_=0;_<g.length;_++)f=g[_],f.once===!0&&this.removeListener(l,f.listener),v=f.listener.apply(this,u||[]),v===this._getOnceReturnValue()&&this.removeListener(l,f.listener);return this},r.trigger=o("emitEvent"),r.emit=function(l){var u=Array.prototype.slice.call(arguments,1);return this.emitEvent(l,u)},r.setOnceReturnValue=function(l){return this._onceReturnValue=l,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=i,n},e.exports?e.exports=n:t.EventEmitter=n})(typeof window<"u"?window:Ww||{})}(Hi)),Hi.exports}var Sl;function Ta(){if(Sl)return kr;Sl=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.EventDispatcher=void 0;var e=Qe(),t=Oa(),n=e.OpenViduLogger.getInstance(),r=function(){function i(){this.userHandlerArrowHandler=new WeakMap,this.ee=new t}return i.prototype.onAux=function(s,o,a){var c=function(l){l?n.debug(o,l):n.debug(o),a(l)};return this.userHandlerArrowHandler.set(a,c),this.ee.on(s,c),this},i.prototype.onceAux=function(s,o,a){var c=this,l=function(u){u?n.debug(o,u):n.debug(o),a(u),c.userHandlerArrowHandler.delete(a)};return this.userHandlerArrowHandler.set(a,l),this.ee.once(s,l),this},i.prototype.offAux=function(s,o){if(!o)this.ee.removeAllListeners(s);else{var a=this.userHandlerArrowHandler.get(o);a&&this.ee.off(s,a),this.userHandlerArrowHandler.delete(o)}return this},i}();return kr.EventDispatcher=r,kr}var Un={},wl;function ka(){if(wl)return Un;wl=1;var e=Un.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Un,"__esModule",{value:!0}),Un.StreamManagerEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,s,o)||this;return c.value=a,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Un.StreamManagerEvent=n,Un}var Hn={},Cl;function op(){if(Cl)return Hn;Cl=1;var e=Hn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.VideoElementEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,o,a)||this;return c.element=s,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Hn.VideoElementEvent=n,Hn}var Ti={},Il;function mr(){return Il||(Il=1,function(e){var t=Ti.__extends||function(){var i=function(s,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(a[l]=c[l])},i(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");i(s,o);function a(){this.constructor=s}s.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEvent=e.ExceptionEventName=void 0;var n=ct();(function(i){i.ICE_CANDIDATE_ERROR="ICE_CANDIDATE_ERROR",i.ICE_CONNECTION_FAILED="ICE_CONNECTION_FAILED",i.ICE_CONNECTION_DISCONNECTED="ICE_CONNECTION_DISCONNECTED",i.NO_STREAM_PLAYING_EVENT="NO_STREAM_PLAYING_EVENT",i.SPEECH_TO_TEXT_DISCONNECTED="SPEECH_TO_TEXT_DISCONNECTED"})(e.ExceptionEventName||(e.ExceptionEventName={}));var r=function(i){t(s,i);function s(o,a,c,l,u){var d=i.call(this,!1,o,"exception")||this;return d.name=a,d.origin=c,d.message=l,d.data=u,d}return s.prototype.callDefaultBehavior=function(){},s}(n.Event);e.ExceptionEvent=r}(Ti)),Ti}var co={},Rl;function Ps(){return Rl||(Rl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VideoInsertMode=void 0,function(t){t.AFTER="AFTER",t.APPEND="APPEND",t.BEFORE="BEFORE",t.PREPEND="PREPEND",t.REPLACE="REPLACE"}(e.VideoInsertMode||(e.VideoInsertMode={}))}(co)),co}var Ol;function xa(){if(Ol)return Fn;Ol=1;var e=Fn.__extends||function(){var d=function(g,f){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(_[v]=b[v])},d(g,f)};return function(g,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");d(g,f);function _(){this.constructor=g}g.prototype=f===null?Object.create(f):(_.prototype=f.prototype,new _)}}();Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.StreamManager=void 0;var t=Ta(),n=ka(),r=op(),i=mr(),s=Ps(),o=Qe(),a=un(),c=o.OpenViduLogger.getInstance(),l,u=function(d){e(g,d);function g(f,_){var b=d.call(this)||this;if(b.videos=[],b.lazyLaunchVideoElementCreatedEvent=!1,l=a.PlatformUtils.getInstance(),b.stream=f,b.stream.streamManager=b,b.remote=!b.stream.isLocal(),_){var v=void 0;typeof _=="string"?v=document.getElementById(_):_ instanceof HTMLElement&&(v=_),v&&(b.firstVideoElement={targetElement:v,video:document.createElement("video"),id:"",canplayListenerAdded:!1},(l.isSafariBrowser()||l.isIPhoneOrIPad()&&(l.isChromeMobileBrowser()||l.isEdgeMobileBrowser()||l.isOperaMobileBrowser()||l.isFirefoxMobileBrowser()))&&(b.firstVideoElement.video.playsInline=!0),b.targetElement=v,b.element=v)}return b.canPlayListener=function(){b.deactivateStreamPlayingEventExceptionTimeout(),b.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(b,"streamPlaying",void 0)])},b}return g.prototype.on=function(f,_){return d.prototype.onAux.call(this,f,"Event '"+f+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",_),f==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),f==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(f==="publisherStartSpeaking"&&this.stream.enableHarkSpeakingEvent(),f==="publisherStopSpeaking"&&this.stream.enableHarkStoppedSpeakingEvent(),f==="streamAudioVolumeChange"&&this.stream.enableHarkVolumeChangeEvent(!1)),this},g.prototype.once=function(f,_){return d.prototype.onceAux.call(this,f,"Event '"+f+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",_),f==="videoElementCreated"&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),f==="streamPlaying"&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&this.videos[0].video.paused===!1&&this.videos[0].video.ended===!1&&this.videos[0].video.readyState===4&&this.ee.emitEvent("streamPlaying",[new n.StreamManagerEvent(this,"streamPlaying",void 0)]),this.stream.hasAudio&&(f==="publisherStartSpeaking"&&this.stream.enableOnceHarkSpeakingEvent(),f==="publisherStopSpeaking"&&this.stream.enableOnceHarkStoppedSpeakingEvent(),f==="streamAudioVolumeChange"&&this.stream.enableOnceHarkVolumeChangeEvent(!1)),this},g.prototype.off=function(f,_){if(d.prototype.offAux.call(this,f,_),f==="publisherStartSpeaking"){var b=this.ee.getListeners(f).length+this.stream.session.ee.getListeners(f).length;b===0&&this.stream.disableHarkSpeakingEvent(!1)}if(f==="publisherStopSpeaking"){var v=this.ee.getListeners(f).length+this.stream.session.ee.getListeners(f).length;v===0&&this.stream.disableHarkStoppedSpeakingEvent(!1)}if(f==="streamAudioVolumeChange"){var h=this.ee.getListeners(f).length;h===0&&this.stream.disableHarkVolumeChangeEvent(!1)}return this},g.prototype.addVideoElement=function(f){this.initializeVideoProperties(f),!this.remote&&this.stream.displayMyRemote()&&f.srcObject!==this.stream.getMediaStream()&&(f.srcObject=this.stream.getMediaStream());for(var _=0,b=this.videos;_<b.length;_++){var v=b[_];if(v.video===f)return 0}for(var h=1,I=0,O=this.stream.session.streamManagers;I<O.length;I++){var S=O[I];if(S.disassociateVideo(f)){h=-1;break}}return this.stream.session.streamManagers.forEach(function(p){p.disassociateVideo(f)}),this.pushNewStreamManagerVideo({video:f,id:f.id,canplayListenerAdded:!1}),c.info("New video element associated to ",this),h},g.prototype.createVideoElement=function(f,_){var b;if(typeof f=="string"){if(b=document.getElementById(f),!b)throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+f)}else if(f instanceof HTMLElement)b=f;else throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+f);var v=this.createVideo();this.initializeVideoProperties(v);var h=_||s.VideoInsertMode.APPEND;switch(h){case s.VideoInsertMode.AFTER:b.parentNode.insertBefore(v,b.nextSibling);break;case s.VideoInsertMode.APPEND:b.appendChild(v);break;case s.VideoInsertMode.BEFORE:b.parentNode.insertBefore(v,b);break;case s.VideoInsertMode.PREPEND:b.insertBefore(v,b.childNodes[0]);break;case s.VideoInsertMode.REPLACE:b.parentNode.replaceChild(v,b);break;default:h=s.VideoInsertMode.APPEND,b.appendChild(v);break}var I={targetElement:b,video:v,insertMode:h,id:v.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(I),this.ee.emitEvent("videoElementCreated",[new r.VideoElementEvent(I.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,v},g.prototype.updatePublisherSpeakingEventsOptions=function(f){var _=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},b=typeof f.interval=="number"?f.interval:typeof _.interval=="number"?_.interval:100,v=typeof f.threshold=="number"?f.threshold:typeof _.threshold=="number"?_.threshold:-50;this.stream.harkOptions={interval:b,threshold:v},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(b),this.stream.speechEvent.setThreshold(v))},g.prototype.initializeVideoProperties=function(f){!this.remote&&this.stream.displayMyRemote()||f.srcObject!==this.stream.getMediaStream()&&(f.srcObject=this.stream.getMediaStream()),f.autoplay=!0,f.controls=!1,(l.isSafariBrowser()||l.isIPhoneOrIPad()&&(l.isChromeMobileBrowser()||l.isEdgeMobileBrowser()||l.isOperaMobileBrowser()||l.isFirefoxMobileBrowser()))&&(f.playsInline=!0),f.id||(f.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=f.id)),this.remote&&this.isMirroredVideo(f)?this.removeMirrorVideo(f):!this.remote&&!this.stream.displayMyRemote()&&(f.muted=!0,this.isMirroredVideo(f)&&!this.stream.outboundStreamOpts.publisherProperties.mirror?this.removeMirrorVideo(f):this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(f))},g.prototype.removeAllVideos=function(){for(var f=this,_=this.stream.session.streamManagers.length-1;_>=0;--_)this.stream.session.streamManagers[_]===this&&this.stream.session.streamManagers.splice(_,1);this.videos.forEach(function(b){b.video&&b.video.removeEventListener&&b.video.removeEventListener("canplay",f.canPlayListener),b.canplayListenerAdded=!1,b.targetElement&&(b.video.parentNode.removeChild(b.video),f.ee.emitEvent("videoElementDestroyed",[new r.VideoElementEvent(b.video,f,"videoElementDestroyed")])),f.removeSrcObject(b),f.videos=f.videos.filter(function(v){return!v.targetElement})})},g.prototype.disassociateVideo=function(f){for(var _=!1,b=0;b<this.videos.length;b++)if(this.videos[b].video===f){this.videos[b].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(b,1),_=!0,c.info("Video element disassociated from ",this);break}return _},g.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.activateStreamPlayingEventExceptionTimeout(),this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},g.prototype.updateMediaStream=function(f){this.videos.forEach(function(_){if(_.video.srcObject=f,l.isIonicIos()){var b=_.video.parentElement,v=_.video;b.replaceChild(v,_.video),_.video=v}})},g.prototype.emitEvent=function(f,_){this.ee.emitEvent(f,_)},g.prototype.createVideo=function(){return document.createElement("video")},g.prototype.removeSrcObject=function(f){f.video.srcObject=null,this.deactivateStreamPlayingEventExceptionTimeout()},g.prototype.pushNewStreamManagerVideo=function(f){this.videos.push(f),this.addPlayEventToFirstVideo(),this.stream.session.streamManagers.indexOf(this)===-1&&this.stream.session.streamManagers.push(this)},g.prototype.mirrorVideo=function(f){l.isIonicIos()||(f.style.transform="rotateY(180deg)",f.style.webkitTransform="rotateY(180deg)")},g.prototype.removeMirrorVideo=function(f){f.style.transform="unset",f.style.webkitTransform="unset"},g.prototype.isMirroredVideo=function(f){return f.style.transform==="rotateY(180deg)"||f.style.webkitTransform==="rotateY(180deg)"},g.prototype.activateStreamPlayingEventExceptionTimeout=function(){var f=this;if(this.remote&&this.streamPlayingEventExceptionTimeout==null){var _=this.stream.session.openvidu.advancedConfiguration.noStreamPlayingEventExceptionTimeout||4e3;this.streamPlayingEventExceptionTimeout=setTimeout(function(){var b="StreamManager of Stream "+f.stream.streamId+" ("+(f.remote?"Subscriber":"Publisher")+') did not trigger "streamPlaying" event in '+_+" ms";c.warn(b),f.stream.session.emitEvent("exception",[new i.ExceptionEvent(f.stream.session,i.ExceptionEventName.NO_STREAM_PLAYING_EVENT,f,b)]),delete f.streamPlayingEventExceptionTimeout},_)}},g.prototype.deactivateStreamPlayingEventExceptionTimeout=function(){clearTimeout(this.streamPlayingEventExceptionTimeout),delete this.streamPlayingEventExceptionTimeout},g}(t.EventDispatcher);return Fn.StreamManager=u,Fn}var Tl;function Pa(){if(Tl)return jn;Tl=1;var e=jn.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(jn,"__esModule",{value:!0}),jn.Subscriber=void 0;var t=xa(),n=Qe(),r=n.OpenViduLogger.getInstance(),i=function(s){e(o,s);function o(a,c,l){var u=s.call(this,a,c)||this;return u.element=u.targetElement,u.stream=a,u.properties=l,u}return o.prototype.subscribeToAudio=function(a){return this.stream.getMediaStream().getAudioTracks().forEach(function(c){c.enabled=a}),this.stream.audioActive=a,r.info("'Subscriber' has "+(a?"subscribed to":"unsubscribed from")+" its audio stream"),this},o.prototype.subscribeToVideo=function(a){return this.stream.getMediaStream().getVideoTracks().forEach(function(c){c.enabled=a}),this.stream.videoActive=a,r.info("'Subscriber' has "+(a?"subscribed to":"unsubscribed from")+" its video stream"),this},o.prototype.replaceTrackInMediaStream=function(a,c){var l=this.stream.getMediaStream(),u;a.kind==="video"?(u=l.getVideoTracks()[0],c&&(this.stream.lastVideoTrackConstraints=a.getConstraints())):u=l.getAudioTracks()[0],l.removeTrack(u),u.stop(),l.addTrack(a)},o}(t.StreamManager);return jn.Subscriber=i,jn}var tt={},lo,kl;function qw(){if(kl)return lo;kl=1;var e=["stun:","turn:"];return lo=function(t){var n=(t||{}).url||t,r,i,s={};return typeof n!="string"&&!(n instanceof String)||(n=n.trim(),r=e[e.indexOf(n.slice(0,5))],!r)?t:(n=n.slice(5),i=n.split("@"),s.username=t.username,s.credential=t.credential,i.length>1&&(n=i[1],i=i[0].split(":"),s.username=i[0],s.credential=(t||{}).credential||i[1]||""),s.url=r+n,s.urls=[s.url],s)},lo}const Gw=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"],zw=[];var uo,xl;function Kw(){if(xl)return uo;xl=1;var e=qw(),t=function(n){var r={stun:(n||{}).stun||Gw,turn:(n||{}).turn||zw},i=(n||{}).stunCount||2,s=(n||{}).turnCount||0,o;function a(c,l){for(var u=[],d=[].concat(r[c]),g;d.length&&u.length<l;)g=Math.random()*d.length|0,u=u.concat(d.splice(g,1));return u.map(function(f){return typeof f!="string"&&!(f instanceof String)?f:e(c+":"+f)})}return o=[].concat(a("stun",i)),s&&(o=o.concat(a("turn",s))),o};return uo=t,uo}var fo={},xr={},ki={},Pl;function ap(){if(Pl)return ki;Pl=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.default=n;let e;const t=new Uint8Array(16);function n(){if(!e&&(e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)}return ki}var Wn={},Pr={},Ar={},Al;function Jw(){if(Al)return Ar;Al=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.default=void 0;var e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return Ar.default=e,Ar}var Nl;function As(){if(Nl)return Pr;Nl=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.default=void 0;var e=t(Jw());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){return typeof i=="string"&&e.default.test(i)}var r=n;return Pr.default=r,Pr}var Ml;function Ns(){if(Ml)return Wn;Ml=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.default=void 0,Wn.unsafeStringify=r;var e=t(As());function t(o){return o&&o.__esModule?o:{default:o}}const n=[];for(let o=0;o<256;++o)n.push((o+256).toString(16).slice(1));function r(o,a=0){return n[o[a+0]]+n[o[a+1]]+n[o[a+2]]+n[o[a+3]]+"-"+n[o[a+4]]+n[o[a+5]]+"-"+n[o[a+6]]+n[o[a+7]]+"-"+n[o[a+8]]+n[o[a+9]]+"-"+n[o[a+10]]+n[o[a+11]]+n[o[a+12]]+n[o[a+13]]+n[o[a+14]]+n[o[a+15]]}function i(o,a=0){const c=r(o,a);if(!(0,e.default)(c))throw TypeError("Stringified UUID is invalid");return c}var s=i;return Wn.default=s,Wn}var Ll;function Xw(){if(Ll)return xr;Ll=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var e=n(ap()),t=Ns();function n(l){return l&&l.__esModule?l:{default:l}}let r,i,s=0,o=0;function a(l,u,d){let g=u&&d||0;const f=u||new Array(16);l=l||{};let _=l.node||r,b=l.clockseq!==void 0?l.clockseq:i;if(_==null||b==null){const p=l.random||(l.rng||e.default)();_==null&&(_=r=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),b==null&&(b=i=(p[6]<<8|p[7])&16383)}let v=l.msecs!==void 0?l.msecs:Date.now(),h=l.nsecs!==void 0?l.nsecs:o+1;const I=v-s+(h-o)/1e4;if(I<0&&l.clockseq===void 0&&(b=b+1&16383),(I<0||v>s)&&l.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=v,o=h,i=b,v+=122192928e5;const O=((v&268435455)*1e4+h)%4294967296;f[g++]=O>>>24&255,f[g++]=O>>>16&255,f[g++]=O>>>8&255,f[g++]=O&255;const S=v/4294967296*1e4&268435455;f[g++]=S>>>8&255,f[g++]=S&255,f[g++]=S>>>24&15|16,f[g++]=S>>>16&255,f[g++]=b>>>8|128,f[g++]=b&255;for(let p=0;p<6;++p)f[g+p]=_[p];return u||(0,t.unsafeStringify)(f)}var c=a;return xr.default=c,xr}var Nr={},Jt={},Mr={},Dl;function cp(){if(Dl)return Mr;Dl=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.default=void 0;var e=t(As());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");let s;const o=new Uint8Array(16);return o[0]=(s=parseInt(i.slice(0,8),16))>>>24,o[1]=s>>>16&255,o[2]=s>>>8&255,o[3]=s&255,o[4]=(s=parseInt(i.slice(9,13),16))>>>8,o[5]=s&255,o[6]=(s=parseInt(i.slice(14,18),16))>>>8,o[7]=s&255,o[8]=(s=parseInt(i.slice(19,23),16))>>>8,o[9]=s&255,o[10]=(s=parseInt(i.slice(24,36),16))/1099511627776&255,o[11]=s/4294967296&255,o[12]=s>>>24&255,o[13]=s>>>16&255,o[14]=s>>>8&255,o[15]=s&255,o}var r=n;return Mr.default=r,Mr}var $l;function lp(){if($l)return Jt;$l=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.URL=Jt.DNS=void 0,Jt.default=o;var e=Ns(),t=n(cp());function n(a){return a&&a.__esModule?a:{default:a}}function r(a){a=unescape(encodeURIComponent(a));const c=[];for(let l=0;l<a.length;++l)c.push(a.charCodeAt(l));return c}const i="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Jt.DNS=i;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Jt.URL=s;function o(a,c,l){function u(d,g,f,_){var b;if(typeof d=="string"&&(d=r(d)),typeof g=="string"&&(g=(0,t.default)(g)),((b=g)===null||b===void 0?void 0:b.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+d.length);if(v.set(g),v.set(d,g.length),v=l(v),v[6]=v[6]&15|c,v[8]=v[8]&63|128,f){_=_||0;for(let h=0;h<16;++h)f[_+h]=v[h];return f}return(0,e.unsafeStringify)(v)}try{u.name=a}catch{}return u.DNS=i,u.URL=s,u}return Jt}var Lr={},Vl;function Yw(){if(Vl)return Lr;Vl=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.default=void 0;function e(f){if(typeof f=="string"){const _=unescape(encodeURIComponent(f));f=new Uint8Array(_.length);for(let b=0;b<_.length;++b)f[b]=_.charCodeAt(b)}return t(r(i(f),f.length*8))}function t(f){const _=[],b=f.length*32,v="0123456789abcdef";for(let h=0;h<b;h+=8){const I=f[h>>5]>>>h%32&255,O=parseInt(v.charAt(I>>>4&15)+v.charAt(I&15),16);_.push(O)}return _}function n(f){return(f+64>>>9<<4)+14+1}function r(f,_){f[_>>5]|=128<<_%32,f[n(_)-1]=_;let b=1732584193,v=-271733879,h=-1732584194,I=271733878;for(let O=0;O<f.length;O+=16){const S=b,p=v,w=h,P=I;b=c(b,v,h,I,f[O],7,-680876936),I=c(I,b,v,h,f[O+1],12,-389564586),h=c(h,I,b,v,f[O+2],17,606105819),v=c(v,h,I,b,f[O+3],22,-1044525330),b=c(b,v,h,I,f[O+4],7,-176418897),I=c(I,b,v,h,f[O+5],12,1200080426),h=c(h,I,b,v,f[O+6],17,-1473231341),v=c(v,h,I,b,f[O+7],22,-45705983),b=c(b,v,h,I,f[O+8],7,1770035416),I=c(I,b,v,h,f[O+9],12,-1958414417),h=c(h,I,b,v,f[O+10],17,-42063),v=c(v,h,I,b,f[O+11],22,-1990404162),b=c(b,v,h,I,f[O+12],7,1804603682),I=c(I,b,v,h,f[O+13],12,-40341101),h=c(h,I,b,v,f[O+14],17,-1502002290),v=c(v,h,I,b,f[O+15],22,1236535329),b=l(b,v,h,I,f[O+1],5,-165796510),I=l(I,b,v,h,f[O+6],9,-1069501632),h=l(h,I,b,v,f[O+11],14,643717713),v=l(v,h,I,b,f[O],20,-373897302),b=l(b,v,h,I,f[O+5],5,-701558691),I=l(I,b,v,h,f[O+10],9,38016083),h=l(h,I,b,v,f[O+15],14,-660478335),v=l(v,h,I,b,f[O+4],20,-405537848),b=l(b,v,h,I,f[O+9],5,568446438),I=l(I,b,v,h,f[O+14],9,-1019803690),h=l(h,I,b,v,f[O+3],14,-187363961),v=l(v,h,I,b,f[O+8],20,1163531501),b=l(b,v,h,I,f[O+13],5,-1444681467),I=l(I,b,v,h,f[O+2],9,-51403784),h=l(h,I,b,v,f[O+7],14,1735328473),v=l(v,h,I,b,f[O+12],20,-1926607734),b=u(b,v,h,I,f[O+5],4,-378558),I=u(I,b,v,h,f[O+8],11,-2022574463),h=u(h,I,b,v,f[O+11],16,1839030562),v=u(v,h,I,b,f[O+14],23,-35309556),b=u(b,v,h,I,f[O+1],4,-1530992060),I=u(I,b,v,h,f[O+4],11,1272893353),h=u(h,I,b,v,f[O+7],16,-155497632),v=u(v,h,I,b,f[O+10],23,-1094730640),b=u(b,v,h,I,f[O+13],4,681279174),I=u(I,b,v,h,f[O],11,-358537222),h=u(h,I,b,v,f[O+3],16,-722521979),v=u(v,h,I,b,f[O+6],23,76029189),b=u(b,v,h,I,f[O+9],4,-640364487),I=u(I,b,v,h,f[O+12],11,-421815835),h=u(h,I,b,v,f[O+15],16,530742520),v=u(v,h,I,b,f[O+2],23,-995338651),b=d(b,v,h,I,f[O],6,-198630844),I=d(I,b,v,h,f[O+7],10,1126891415),h=d(h,I,b,v,f[O+14],15,-1416354905),v=d(v,h,I,b,f[O+5],21,-57434055),b=d(b,v,h,I,f[O+12],6,1700485571),I=d(I,b,v,h,f[O+3],10,-1894986606),h=d(h,I,b,v,f[O+10],15,-1051523),v=d(v,h,I,b,f[O+1],21,-2054922799),b=d(b,v,h,I,f[O+8],6,1873313359),I=d(I,b,v,h,f[O+15],10,-30611744),h=d(h,I,b,v,f[O+6],15,-1560198380),v=d(v,h,I,b,f[O+13],21,1309151649),b=d(b,v,h,I,f[O+4],6,-145523070),I=d(I,b,v,h,f[O+11],10,-1120210379),h=d(h,I,b,v,f[O+2],15,718787259),v=d(v,h,I,b,f[O+9],21,-343485551),b=s(b,S),v=s(v,p),h=s(h,w),I=s(I,P)}return[b,v,h,I]}function i(f){if(f.length===0)return[];const _=f.length*8,b=new Uint32Array(n(_));for(let v=0;v<_;v+=8)b[v>>5]|=(f[v/8]&255)<<v%32;return b}function s(f,_){const b=(f&65535)+(_&65535);return(f>>16)+(_>>16)+(b>>16)<<16|b&65535}function o(f,_){return f<<_|f>>>32-_}function a(f,_,b,v,h,I){return s(o(s(s(_,f),s(v,I)),h),b)}function c(f,_,b,v,h,I,O){return a(_&b|~_&v,f,_,h,I,O)}function l(f,_,b,v,h,I,O){return a(_&v|b&~v,f,_,h,I,O)}function u(f,_,b,v,h,I,O){return a(_^b^v,f,_,h,I,O)}function d(f,_,b,v,h,I,O){return a(b^(_|~v),f,_,h,I,O)}var g=e;return Lr.default=g,Lr}var Bl;function Qw(){if(Bl)return Nr;Bl=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.default=void 0;var e=n(lp()),t=n(Yw());function n(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v3",48,t.default);return Nr.default=i,Nr}var Dr={},$r={},jl;function Zw(){if(jl)return $r;jl=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.default=void 0;var t={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return $r.default=t,$r}var Fl;function eC(){if(Fl)return Dr;Fl=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.default=void 0;var e=r(Zw()),t=r(ap()),n=Ns();function r(o){return o&&o.__esModule?o:{default:o}}function i(o,a,c){if(e.default.randomUUID&&!a&&!o)return e.default.randomUUID();o=o||{};const l=o.random||(o.rng||t.default)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,a){c=c||0;for(let u=0;u<16;++u)a[c+u]=l[u];return a}return(0,n.unsafeStringify)(l)}var s=i;return Dr.default=s,Dr}var Vr={},Br={},Ul;function tC(){if(Ul)return Br;Ul=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.default=void 0;function e(i,s,o,a){switch(i){case 0:return s&o^~s&a;case 1:return s^o^a;case 2:return s&o^s&a^o&a;case 3:return s^o^a}}function t(i,s){return i<<s|i>>>32-s}function n(i){const s=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){const u=unescape(encodeURIComponent(i));i=[];for(let d=0;d<u.length;++d)i.push(u.charCodeAt(d))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);const a=i.length/4+2,c=Math.ceil(a/16),l=new Array(c);for(let u=0;u<c;++u){const d=new Uint32Array(16);for(let g=0;g<16;++g)d[g]=i[u*64+g*4]<<24|i[u*64+g*4+1]<<16|i[u*64+g*4+2]<<8|i[u*64+g*4+3];l[u]=d}l[c-1][14]=(i.length-1)*8/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=(i.length-1)*8&4294967295;for(let u=0;u<c;++u){const d=new Uint32Array(80);for(let h=0;h<16;++h)d[h]=l[u][h];for(let h=16;h<80;++h)d[h]=t(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);let g=o[0],f=o[1],_=o[2],b=o[3],v=o[4];for(let h=0;h<80;++h){const I=Math.floor(h/20),O=t(g,5)+e(I,f,_,b)+v+s[I]+d[h]>>>0;v=b,b=_,_=t(f,30)>>>0,f=g,g=O}o[0]=o[0]+g>>>0,o[1]=o[1]+f>>>0,o[2]=o[2]+_>>>0,o[3]=o[3]+b>>>0,o[4]=o[4]+v>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,o[0]&255,o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,o[1]&255,o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,o[2]&255,o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,o[3]&255,o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,o[4]&255]}var r=n;return Br.default=r,Br}var Hl;function nC(){if(Hl)return Vr;Hl=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=void 0;var e=n(lp()),t=n(tC());function n(s){return s&&s.__esModule?s:{default:s}}var i=(0,e.default)("v5",80,t.default);return Vr.default=i,Vr}var jr={},Wl;function rC(){if(Wl)return jr;Wl=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.default=void 0;var e="00000000-0000-0000-0000-000000000000";return jr.default=e,jr}var Fr={},ql;function iC(){if(ql)return Fr;ql=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.default=void 0;var e=t(As());function t(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,e.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}var r=n;return Fr.default=r,Fr}var Gl;function up(){return Gl||(Gl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=u(Xw()),n=u(Qw()),r=u(eC()),i=u(nC()),s=u(rC()),o=u(iC()),a=u(As()),c=u(Ns()),l=u(cp());function u(d){return d&&d.__esModule?d:{default:d}}}(fo)),fo}var zl;function sC(){if(zl)return tt;zl=1;var e=tt.__extends||function(){var _=function(b,v){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,I){h.__proto__=I}||function(h,I){for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(h[O]=I[O])},_(b,v)};return function(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");_(b,v);function h(){this.constructor=b}b.prototype=v===null?Object.create(v):(h.prototype=v.prototype,new h)}}(),t=tt.__assign||function(){return t=Object.assign||function(_){for(var b,v=1,h=arguments.length;v<h;v++){b=arguments[v];for(var I in b)Object.prototype.hasOwnProperty.call(b,I)&&(_[I]=b[I])}return _},t.apply(this,arguments)},n=tt.__awaiter||function(_,b,v,h){function I(O){return O instanceof v?O:new v(function(S){S(O)})}return new(v||(v=Promise))(function(O,S){function p(y){try{P(h.next(y))}catch(C){S(C)}}function w(y){try{P(h.throw(y))}catch(C){S(C)}}function P(y){y.done?O(y.value):I(y.value).then(p,w)}P((h=h.apply(_,b||[])).next())})},r=tt.__generator||function(_,b){var v={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},h,I,O,S;return S={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function p(P){return function(y){return w([P,y])}}function w(P){if(h)throw new TypeError("Generator is already executing.");for(;S&&(S=0,P[0]&&(v=0)),v;)try{if(h=1,I&&(O=P[0]&2?I.return:P[0]?I.throw||((O=I.return)&&O.call(I),0):I.next)&&!(O=O.call(I,P[1])).done)return O;switch(I=0,O&&(P=[P[0]&2,O.value]),P[0]){case 0:case 1:O=P;break;case 4:return v.label++,{value:P[1],done:!1};case 5:v.label++,I=P[1],P=[0];continue;case 7:P=v.ops.pop(),v.trys.pop();continue;default:if(O=v.trys,!(O=O.length>0&&O[O.length-1])&&(P[0]===6||P[0]===2)){v=0;continue}if(P[0]===3&&(!O||P[1]>O[0]&&P[1]<O[3])){v.label=P[1];break}if(P[0]===6&&v.label<O[1]){v.label=O[1],O=P;break}if(O&&v.label<O[2]){v.label=O[2],v.ops.push(P);break}O[2]&&v.ops.pop(),v.trys.pop();continue}P=b.call(_,v)}catch(y){P=[6,y],I=0}finally{h=O=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}};Object.defineProperty(tt,"__esModule",{value:!0}),tt.WebRtcPeerSendrecv=tt.WebRtcPeerSendonly=tt.WebRtcPeerRecvonly=tt.WebRtcPeer=void 0;var i=Kw(),s=up(),o=mr(),a=Qe(),c=un(),l=a.OpenViduLogger.getInstance(),u=function(){function _(b){var v=this;this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],c.PlatformUtils.getInstance(),this.configuration=t(t({},b),{iceServers:b.iceServers&&b.iceServers.length>0?b.iceServers:i(),rtcConfiguration:b.rtcConfiguration!==void 0?b.rtcConfiguration:{},mediaStream:b.mediaStream!==void 0?b.mediaStream:null,mode:b.mode?b.mode:"sendrecv",id:b.id?b.id:this.generateUniqueId()}),l.debug(`[WebRtcPeer] configuration:
`.concat(JSON.stringify(this.configuration,null,2)));var h=this.configuration.rtcConfiguration?this.configuration.rtcConfiguration:{iceServers:this.configuration.iceServers};!h.iceServers&&this.configuration.iceServers&&(h.iceServers=this.configuration.iceServers),this.pc=new RTCPeerConnection(h),this.pc.addEventListener("icecandidate",function(I){if(I.candidate!==null){var O=I.candidate,S=new RTCIceCandidate(O);v.configuration.onIceCandidate(S),S.candidate!==""&&v.localCandidatesQueue.push(S)}}),this.pc.addEventListener("signalingstatechange",function(){return n(v,void 0,void 0,function(){var I,O;return r(this,function(S){switch(S.label){case 0:if(this.pc.signalingState!=="stable")return[3,6];S.label=1;case 1:if(!(this.iceCandidateList.length>0))return[3,6];I=this.iceCandidateList.shift(),S.label=2;case 2:return S.trys.push([2,4,,5]),[4,this.pc.addIceCandidate(I)];case 3:return S.sent(),[3,5];case 4:return O=S.sent(),l.error("Error when calling RTCPeerConnection#addIceCandidate for RTCPeerConnection "+this.getId(),O),[3,5];case 5:return[3,1];case 6:return[2]}})})})}return _.prototype.getId=function(){return this.configuration.id},_.prototype.dispose=function(){if(l.debug("Disposing WebRtcPeer"),this.pc){if(this.pc.signalingState==="closed")return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},_.prototype.createOfferLegacy=function(){this.configuration.mediaStream&&this.deprecatedPeerConnectionTrackApi();var b=this.configuration.mediaConstraints.audio,v=this.configuration.mediaConstraints.video,h={offerToReceiveAudio:this.configuration.mode!=="sendonly"&&b,offerToReceiveVideo:this.configuration.mode!=="sendonly"&&v};return l.debug("[createOfferLegacy] RTCPeerConnection.createOffer() options:",JSON.stringify(h)),this.pc.createOffer(h)},_.prototype.createOffer=function(){var b,v,h,I,O,S,p,w;return n(this,void 0,void 0,function(){var P,y,C,T,M,N,E,k,B,A,R,x,F,j,G,Y,ce,ne,re,oe,L,U,J,ne;return r(this,function(ie){switch(ie.label){case 0:if("addTransceiver"in this.pc)l.debug("[createOffer] Method RTCPeerConnection.addTransceiver() is available; using it");else return l.warn("[createOffer] Method RTCPeerConnection.addTransceiver() is NOT available; using LEGACY offerToReceive{Audio,Video}"),[2,this.createOfferLegacy()];if(this.configuration.mode==="recvonly")return[3,7];if(!this.configuration.mediaStream)throw new Error("[WebRtcPeer.createOffer] Direction is '".concat(this.configuration.mode,"', but no stream was configured to be sent"));P=0,y=this.configuration.mediaStream.getTracks(),ie.label=1;case 1:if(!(P<y.length))return[3,6];if(C=y[P],T={direction:this.configuration.mode,streams:[this.configuration.mediaStream]},C.kind==="video"&&this.configuration.simulcast)for(M=C.getSettings(),N=C.getConstraints(),E=(h=(v=(b=M.width)!==null&&b!==void 0?b:N.width.ideal)!==null&&v!==void 0?v:N.width)!==null&&h!==void 0?h:0,k=(S=(O=(I=M.height)!==null&&I!==void 0?I:N.height.ideal)!==null&&O!==void 0?O:N.height)!==null&&S!==void 0?S:0,l.info("[createOffer] Video track dimensions: ".concat(E,"x").concat(k)),B=E*k,A=0,B>=960*540?A=3:B>=480*270?A=2:A=1,T.sendEncodings=[],R=0;R<A;R++)x=Math.pow(2,A-R-1),F={rid:"rdiv"+x.toString(),scalabilityMode:"L1T1"},["detail","text"].includes(C.contentHint)?(F.scaleResolutionDownBy=1,F.maxFramerate=Math.floor(30/x)):F.scaleResolutionDownBy=x,T.sendEncodings.push(F);if(j=this.pc.addTransceiver(C,T),C.kind!=="video")return[3,5];if(G=j.sender.getParameters(),Y=!1,!((p=G.degradationPreference)===null||p===void 0)&&p.length||(["detail","text"].includes(C.contentHint)?G.degradationPreference="maintain-resolution":G.degradationPreference="balanced",l.info("[createOffer] Video sender Degradation Preference set: ".concat(G.degradationPreference)),Y=!0),this.configuration.simulcast&&((w=G.encodings)===null||w===void 0?void 0:w.length)!==T.sendEncodings.length&&(G.encodings=T.sendEncodings,Y=!0),!Y)return[3,5];l.debug("[createOffer] Setting new RTCRtpSendParameters to video sender"),ie.label=2;case 2:return ie.trys.push([2,4,,5]),[4,j.sender.setParameters(G)];case 3:return ie.sent(),[3,5];case 4:throw ce=ie.sent(),ne="[WebRtcPeer.createOffer] Cannot set RTCRtpSendParameters to video sender",ce instanceof Error&&(ne+=": ".concat(ce.message)),new Error(ne);case 5:return P++,[3,1];case 6:return[3,8];case 7:for(re=0,oe=["audio","video"];re<oe.length;re++)L=oe[re],this.configuration.mediaConstraints[L]&&(this.configuration.mediaStream=new MediaStream,this.pc.addTransceiver(L,{direction:this.configuration.mode,streams:[this.configuration.mediaStream]}));ie.label=8;case 8:return ie.trys.push([8,10,,11]),[4,this.pc.createOffer()];case 9:return U=ie.sent(),[3,11];case 10:throw J=ie.sent(),ne="[WebRtcPeer.createOffer] Browser failed creating an SDP Offer",J instanceof Error&&(ne+=": ".concat(J.message)),new Error(ne);case 11:return[2,U]}})})},_.prototype.deprecatedPeerConnectionTrackApi=function(){for(var b=0,v=this.configuration.mediaStream.getTracks();b<v.length;b++){var h=v[b];this.pc.addTrack(h,this.configuration.mediaStream)}},_.prototype.createAnswer=function(){var b=this;return new Promise(function(v,h){if("getTransceivers"in b.pc){l.debug("[createAnswer] Method RTCPeerConnection.getTransceivers() is available; using it");for(var I=function(T){if(!b.configuration.mediaConstraints[T])return"continue";var M=b.pc.getTransceivers().find(function(N){return N.receiver.track.kind===T});if(M)M.direction=b.configuration.mode;else return{value:h(new Error("".concat(T," requested, but no transceiver was created from remote description")))}},O=0,S=["audio","video"];O<S.length;O++){var p=S[O],w=I(p);if(typeof w=="object")return w.value}b.pc.createAnswer().then(function(T){return v(T)}).catch(function(T){return h(T)})}else{var P=void 0,y=!0;if(b.configuration.mediaConstraints){P=typeof b.configuration.mediaConstraints.audio=="boolean"?b.configuration.mediaConstraints.audio:!0,y=typeof b.configuration.mediaConstraints.video=="boolean"?b.configuration.mediaConstraints.video:!0;var C={offerToReceiveAudio:P,offerToReceiveVideo:y};b.pc.createAnswer(C).then(function(T){return v(T)}).catch(function(T){return h(T)})}}})},_.prototype.processLocalOffer=function(b){var v=this;return new Promise(function(h,I){v.pc.setLocalDescription(b).then(function(){var O=v.pc.localDescription;return O?(l.debug("Local description set",O.sdp),h()):I("Local description is not defined")}).catch(function(O){return I(O)})})},_.prototype.processRemoteOffer=function(b){var v=this;return new Promise(function(h,I){var O={type:"offer",sdp:b};if(l.debug("SDP offer received, setting remote description",O),v.pc.signalingState==="closed")return I("RTCPeerConnection is closed when trying to set remote description");v.setRemoteDescription(O).then(function(){return h()}).catch(function(S){return I(S)})})},_.prototype.processLocalAnswer=function(b){var v=this;return new Promise(function(h,I){if(l.debug("SDP answer created, setting local description"),v.pc.signalingState==="closed")return I("RTCPeerConnection is closed when trying to set local description");v.pc.setLocalDescription(b).then(function(){return h()}).catch(function(O){return I(O)})})},_.prototype.processRemoteAnswer=function(b){var v=this;return new Promise(function(h,I){var O={type:"answer",sdp:b};if(l.debug("SDP answer received, setting remote description"),v.pc.signalingState==="closed")return I("RTCPeerConnection is closed when trying to set remote description");v.setRemoteDescription(O).then(function(){h()}).catch(function(S){return I(S)})})},_.prototype.setRemoteDescription=function(b){return n(this,void 0,void 0,function(){return r(this,function(v){return[2,this.pc.setRemoteDescription(b)]})})},_.prototype.addIceCandidate=function(b){var v=this;return new Promise(function(h,I){switch(l.debug("Remote ICE candidate received",b),v.remoteCandidatesQueue.push(b),v.pc.signalingState){case"closed":I(new Error("PeerConnection object is closed"));break;case"stable":v.pc.remoteDescription?v.pc.addIceCandidate(b).then(function(){return h()}).catch(function(O){return I(O)}):(v.iceCandidateList.push(b),h());break;default:v.iceCandidateList.push(b),h()}})},_.prototype.addIceConnectionStateChangeListener=function(b){var v=this;this.pc.addEventListener("iceconnectionstatechange",function(){var h=v.pc.iceConnectionState;switch(h){case"disconnected":var I="IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "disconnected". Possible network disconnection';l.warn(I),v.configuration.onIceConnectionStateException(o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED,I);break;case"failed":var O="IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') to "failed"';l.error(O),v.configuration.onIceConnectionStateException(o.ExceptionEventName.ICE_CONNECTION_FAILED,O);break;case"closed":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "closed"');break;case"new":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "new"');break;case"checking":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "checking"');break;case"connected":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "connected"');break;case"completed":l.log("IceConnectionState of RTCPeerConnection "+v.configuration.id+" ("+b+') change to "completed"');break}})},_.prototype.generateUniqueId=function(){return(0,s.v4)()},_}();tt.WebRtcPeer=u;var d=function(_){e(b,_);function b(v){return v.mode="recvonly",_.call(this,v)||this}return b}(u);tt.WebRtcPeerRecvonly=d;var g=function(_){e(b,_);function b(v){return v.mode="sendonly",_.call(this,v)||this}return b}(u);tt.WebRtcPeerSendonly=g;var f=function(_){e(b,_);function b(v){return v.mode="sendrecv",_.call(this,v)||this}return b}(u);return tt.WebRtcPeerSendrecv=f,tt}var vn={},Kl;function oC(){if(Kl)return vn;Kl=1;var e=vn.__awaiter||function(a,c,l,u){function d(g){return g instanceof l?g:new l(function(f){f(g)})}return new(l||(l=Promise))(function(g,f){function _(h){try{v(u.next(h))}catch(I){f(I)}}function b(h){try{v(u.throw(h))}catch(I){f(I)}}function v(h){h.done?g(h.value):d(h.value).then(_,b)}v((u=u.apply(a,c||[])).next())})},t=vn.__generator||function(a,c){var l={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},u,d,g,f;return f={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function _(v){return function(h){return b([v,h])}}function b(v){if(u)throw new TypeError("Generator is already executing.");for(;f&&(f=0,v[0]&&(l=0)),l;)try{if(u=1,d&&(g=v[0]&2?d.return:v[0]?d.throw||((g=d.return)&&g.call(d),0):d.next)&&!(g=g.call(d,v[1])).done)return g;switch(d=0,g&&(v=[v[0]&2,g.value]),v[0]){case 0:case 1:g=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,d=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(g=l.trys,!(g=g.length>0&&g[g.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!g||v[1]>g[0]&&v[1]<g[3])){l.label=v[1];break}if(v[0]===6&&l.label<g[1]){l.label=g[1],g=v;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(v);break}g[2]&&l.ops.pop(),l.trys.pop();continue}v=c.call(a,l)}catch(h){v=[6,h],d=0}finally{u=g=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(vn,"__esModule",{value:!0}),vn.WebRtcStats=void 0;var n=Qe(),r=un(),i=n.OpenViduLogger.getInstance(),s,o=function(){function a(c){this.stream=c,this.STATS_ITEM_NAME="webrtc-stats-config",this.webRtcStatsEnabled=!1,this.statsInterval=1,s=r.PlatformUtils.getInstance()}return a.prototype.isEnabled=function(){return this.webRtcStatsEnabled},a.prototype.initWebRtcStats=function(){var c=this,l;try{l=localStorage.getItem(this.STATS_ITEM_NAME)}catch{}if(l){this.webRtcStatsEnabled=!0;var u=JSON.parse(l);i.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),i.warn("localStorage item: "+JSON.stringify(u)),this.POST_URL=u.httpEndpoint,this.statsInterval=u.interval,this.webRtcStatsIntervalId=setInterval(function(){return e(c,void 0,void 0,function(){return t(this,function(d){switch(d.label){case 0:return[4,this.sendStatsToHttpEndpoint()];case 1:return d.sent(),[2]}})})},this.statsInterval*1e3)}else i.debug("WebRtc stats not enabled")},a.prototype.getSelectedIceCandidateInfo=function(){var c=this;return new Promise(function(l,u){return e(c,void 0,void 0,function(){var d,g,f,_,b,v,h,I,O,S,p,w,P,y,N,E,C,T,A,M,N,E,k,B,A;return t(this,function(R){switch(R.label){case 0:return[4,this.stream.getRTCPeerConnection().getStats()];case 1:if(d=R.sent(),f=new Map,_=new Map,b=new Map,d.forEach(function(x){switch(x.type==="transport"&&(s.isChromium()||s.isSafariBrowser()||s.isReactNative())&&(g=x),x.type){case"candidate-pair":f.set(x.id,x);break;case"local-candidate":_.set(x.id,x);break;case"remote-candidate":b.set(x.id,x);break}}),g!=null)h=g.selectedCandidatePairId,v=f.get(h);else for(I=f.size,O=f.values(),S=0;S<I;S++)if(p=O.next().value,p.selected){v=p;break}if(w=v.localCandidateId,P=v.remoteCandidateId,y=_.get(w),y)for(N=this.stream.getLocalIceCandidateList(),E=N.filter(function(x){return!!x.candidate&&(x.candidate.indexOf(y.ip)>=0||x.candidate.indexOf(y.address)>=0)&&x.candidate.indexOf(y.port)>=0}),y.raw=[],C=0,T=E;C<T.length;C++)A=T[C],y.raw.push(A.candidate);else y="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";if(M=b.get(P),M)for(N=this.stream.getRemoteIceCandidateList(),E=N.filter(function(x){return!!x.candidate&&(x.candidate.indexOf(M.ip)>=0||x.candidate.indexOf(M.address)>=0)&&x.candidate.indexOf(M.port)>=0}),M.raw=[],k=0,B=E;k<B.length;k++)A=B[k],M.raw.push(A.candidate);else M="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used";return[2,l({localCandidate:y,remoteCandidate:M})]}})})})},a.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),i.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},a.prototype.sendStats=function(c,l){return e(this,void 0,void 0,function(){var u,d;return t(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),u={headers:{"Content-type":"application/json"},body:JSON.stringify(l),method:"POST"},[4,fetch(c,u)];case 1:return g.sent(),[3,3];case 2:return d=g.sent(),i.error("sendStats error: ".concat(JSON.stringify(d))),[3,3];case 3:return[2]}})})},a.prototype.sendStatsToHttpEndpoint=function(){return e(this,void 0,void 0,function(){var c,l,u;return t(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,this.getCommonStats()];case 1:return c=d.sent(),l=this.generateJSONStatsResponse(c),[4,this.sendStats(this.POST_URL,l)];case 2:return d.sent(),[3,4];case 3:return u=d.sent(),i.log(u),[3,4];case 4:return[2]}})})},a.prototype.getCommonStats=function(){return e(this,void 0,void 0,function(){var c=this;return t(this,function(l){return[2,new Promise(function(u,d){return e(c,void 0,void 0,function(){var g,f,_,b,v,h=this;return t(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,this.stream.getRTCPeerConnection().getStats()];case 1:return g=I.sent(),f=this.getWebRtcStatsResponseOutline(),_=["framesReceived","framesDropped","framesSent","frameHeight","frameWidth"],b=["availableOutgoingBitrate","currentRoundTripTime"],g.forEach(function(O){var S=O.mediaType!=null?O.mediaType:O.kind,p=function(w,P){O[P]!=null&&f[w]!=null&&(!S&&_.indexOf(P)>-1&&(S="video"),w!=null&&S!=null&&P!=null&&f[w][S]!=null?f[w][S][P]=Number(O[P]):w!=null&&P!=null&&b.includes(P)&&(f[w][P]=Number(O[P])))};switch(O.type){case"outbound-rtp":p("outbound","bytesSent"),p("outbound","packetsSent"),p("outbound","framesEncoded"),p("outbound","nackCount"),p("outbound","firCount"),p("outbound","pliCount"),p("outbound","qpSum");break;case"inbound-rtp":p("inbound","bytesReceived"),p("inbound","packetsReceived"),p("inbound","packetsLost"),p("inbound","jitter"),p("inbound","framesDecoded"),p("inbound","nackCount"),p("inbound","firCount"),p("inbound","pliCount");break;case"track":p("inbound","jitterBufferDelay"),p("inbound","framesReceived"),p("outbound","framesDropped"),p("outbound","framesSent"),p(h.stream.isLocal()?"outbound":"inbound","frameHeight"),p(h.stream.isLocal()?"outbound":"inbound","frameWidth");break;case"candidate-pair":p("candidatepair","currentRoundTripTime"),p("candidatepair","availableOutgoingBitrate");break}}),(!(f!=null&&f.candidatepair)||Object.keys(f.candidatepair).length===0)&&delete f.candidatepair,[2,u(f)];case 2:return v=I.sent(),i.error("Error getting common stats: ",v),[2,d(v)];case 3:return[2]}})})})]})})},a.prototype.generateJSONStatsResponse=function(c){return{"@timestamp":new Date().toISOString(),participant_id:this.stream.connection.data,session_id:this.stream.session.sessionId,platform:s.getName(),platform_description:s.getDescription(),stream:"webRTC",webrtc_stats:c}},a.prototype.getWebRtcStatsResponseOutline=function(){return this.stream.isLocal()?{outbound:{audio:{},video:{}},candidatepair:{}}:{inbound:{audio:{},video:{}}}},a}();return vn.WebRtcStats=o,vn}var qn={},Jl;function dp(){if(Jl)return qn;Jl=1;var e=qn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(qn,"__esModule",{value:!0}),qn.PublisherSpeakingEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,o)||this;return l.type=o,l.connection=a,l.streamId=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return qn.PublisherSpeakingEvent=n,qn}var po={},Xl;function Aa(){return Xl||(Xl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeOfVideo=void 0,function(t){t.CAMERA="CAMERA",t.SCREEN="SCREEN",t.CUSTOM="CUSTOM",t.IPCAM="IPCAM"}(e.TypeOfVideo||(e.TypeOfVideo={}))}(po)),po}var ho,Yl;function aC(){if(Yl)return ho;Yl=1,ho=e;function e(){}return e.mixin=function(t){var n=t.prototype||t;n.isWildEmitter=!0,n.on=function(r,i,s){this.callbacks=this.callbacks||{};var o=arguments.length===3,a=o?arguments[1]:void 0,c=o?arguments[2]:arguments[1];return c._groupName=a,(this.callbacks[r]=this.callbacks[r]||[]).push(c),this},n.once=function(r,i,s){var o=this,a=arguments.length===3,c=a?arguments[1]:void 0,l=a?arguments[2]:arguments[1];function u(){o.off(r,u),l.apply(this,arguments)}return this.on(r,c,u),this},n.releaseGroup=function(r){this.callbacks=this.callbacks||{};var i,s,o,a;for(i in this.callbacks)for(a=this.callbacks[i],s=0,o=a.length;s<o;s++)a[s]._groupName===r&&(a.splice(s,1),s--,o--);return this},n.off=function(r,i){this.callbacks=this.callbacks||{};var s=this.callbacks[r],o;return s?arguments.length===1?(delete this.callbacks[r],this):(o=s.indexOf(i),o!==-1&&(s.splice(o,1),s.length===0&&delete this.callbacks[r]),this):this},n.emit=function(r){this.callbacks=this.callbacks||{};var i=[].slice.call(arguments,1),s=this.callbacks[r],o=this.getWildcardCallbacks(r),a,c,l;if(s)for(l=s.slice(),a=0,c=l.length;a<c&&l[a];++a)l[a].apply(this,i);if(o)for(c=o.length,l=o.slice(),a=0,c=l.length;a<c&&l[a];++a)l[a].apply(this,[r].concat(i));return this},n.getWildcardCallbacks=function(r){this.callbacks=this.callbacks||{};var i,s,o=[];for(i in this.callbacks)s=i.split("*"),(i==="*"||s.length===2&&r.slice(0,s[0].length)===s[0])&&(o=o.concat(this.callbacks[i]));return o}},e.mixin(e),ho}var mo,Ql;function cC(){if(Ql)return mo;Ql=1;var e=aC();function t(i,s){var o=-1/0;i.getFloatFrequencyData(s);for(var a=4,c=s.length;a<c;a++)s[a]>o&&s[a]<0&&(o=s[a]);return o}var n;typeof window<"u"&&(n=window.AudioContext||window.webkitAudioContext);var r=null;return mo=function(i,a){var o=new e;if(!n)return o;var a=a||{},c=a.smoothing||.1,l=a.interval||50,u=a.threshold,d=a.play,g=a.history||10,f=!0;r=a.audioContext||r||new n;var _,b,v;v=r.createAnalyser(),v.fftSize=512,v.smoothingTimeConstant=c,b=new Float32Array(v.frequencyBinCount),i.jquery&&(i=i[0]),i instanceof HTMLAudioElement||i instanceof HTMLVideoElement?(_=r.createMediaElementSource(i),typeof d>"u"&&(d=!0),u=u||-50):(_=r.createMediaStreamSource(i),u=u||-50),_.connect(v),d&&v.connect(r.destination),o.speaking=!1,o.suspend=function(){return r.suspend()},o.resume=function(){return r.resume()},Object.defineProperty(o,"state",{get:function(){return r.state}}),r.onstatechange=function(){o.emit("state_change",r.state)},o.setThreshold=function(O){u=O},o.setInterval=function(O){l=O},o.stop=function(){f=!1,o.emit("volume_change",-100,u),o.speaking&&(o.speaking=!1,o.emit("stopped_speaking")),v.disconnect(),_.disconnect()},o.speakingHistory=[];for(var h=0;h<g;h++)o.speakingHistory.push(0);var I=function(){setTimeout(function(){if(f){var O=t(v,b);o.emit("volume_change",O,u);var S=0;if(O>u&&!o.speaking){for(var p=o.speakingHistory.length-3;p<o.speakingHistory.length;p++)S+=o.speakingHistory[p];S>=2&&(o.speaking=!0,o.emit("speaking"))}else if(O<u&&o.speaking){for(var p=0;p<o.speakingHistory.length;p++)S+=o.speakingHistory[p];S==0&&(o.speaking=!1,o.emit("stopped_speaking"))}o.speakingHistory.shift(),o.speakingHistory.push(0+(O>u)),I()}},l)};return I(),o},mo}var Zl;function Na(){if(Zl)return mn;Zl=1;var e=mn.__awaiter||function(S,p,w,P){function y(C){return C instanceof w?C:new w(function(T){T(C)})}return new(w||(w=Promise))(function(C,T){function M(k){try{E(P.next(k))}catch(B){T(B)}}function N(k){try{E(P.throw(k))}catch(B){T(B)}}function E(k){k.done?C(k.value):y(k.value).then(M,N)}E((P=P.apply(S,p||[])).next())})},t=mn.__generator||function(S,p){var w={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},P,y,C,T;return T={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function M(E){return function(k){return N([E,k])}}function N(E){if(P)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(w=0)),w;)try{if(P=1,y&&(C=E[0]&2?y.return:E[0]?y.throw||((C=y.return)&&C.call(y),0):y.next)&&!(C=C.call(y,E[1])).done)return C;switch(y=0,C&&(E=[E[0]&2,C.value]),E[0]){case 0:case 1:C=E;break;case 4:return w.label++,{value:E[1],done:!1};case 5:w.label++,y=E[1],E=[0];continue;case 7:E=w.ops.pop(),w.trys.pop();continue;default:if(C=w.trys,!(C=C.length>0&&C[C.length-1])&&(E[0]===6||E[0]===2)){w=0;continue}if(E[0]===3&&(!C||E[1]>C[0]&&E[1]<C[3])){w.label=E[1];break}if(E[0]===6&&w.label<C[1]){w.label=C[1],C=E;break}if(C&&w.label<C[2]){w.label=C[2],w.ops.push(E);break}C[2]&&w.ops.pop(),w.trys.pop();continue}E=p.call(S,w)}catch(k){E=[6,k],y=0}finally{P=C=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(mn,"__esModule",{value:!0}),mn.Stream=void 0;var n=Ra(),r=Pa(),i=sC(),s=oC(),o=mr(),a=dp(),c=ka(),l=pr(),u=hr(),d=Aa(),g=Qe(),f=un(),_=up(),b=cC(),v=Oa(),h=g.OpenViduLogger.getInstance(),I,O=function(){function S(p,w){var P=this;this.isSubscribeToRemote=!1,this.isLocalStreamReadyToPublish=!1,this.isLocalStreamPublished=!1,this.publishedOnce=!1,this.harkSpeakingEnabled=!1,this.harkSpeakingEnabledOnce=!1,this.harkStoppedSpeakingEnabled=!1,this.harkStoppedSpeakingEnabledOnce=!1,this.harkVolumeChangeEnabled=!1,this.harkVolumeChangeEnabledOnce=!1,this.ee=new v,I=f.PlatformUtils.getInstance(),this.session=p,w.hasOwnProperty("id")?(this.inboundStreamOpts=w,this.streamId=this.inboundStreamOpts.id,this.creationTime=this.inboundStreamOpts.createdAt,this.hasAudio=this.inboundStreamOpts.hasAudio,this.hasVideo=this.inboundStreamOpts.hasVideo,this.hasAudio&&(this.audioActive=this.inboundStreamOpts.audioActive),this.hasVideo&&(this.videoActive=this.inboundStreamOpts.videoActive,this.typeOfVideo=this.inboundStreamOpts.typeOfVideo?this.inboundStreamOpts.typeOfVideo:void 0,this.frameRate=this.inboundStreamOpts.frameRate===-1?void 0:this.inboundStreamOpts.frameRate,this.videoDimensions=this.inboundStreamOpts.videoDimensions),this.inboundStreamOpts.filter&&Object.keys(this.inboundStreamOpts.filter).length>0&&(this.inboundStreamOpts.filter.lastExecMethod&&Object.keys(this.inboundStreamOpts.filter.lastExecMethod).length===0&&delete this.inboundStreamOpts.filter.lastExecMethod,this.filter=this.inboundStreamOpts.filter)):(this.outboundStreamOpts=w,this.hasAudio=this.isSendAudio(),this.hasVideo=this.isSendVideo(),this.hasAudio&&(this.audioActive=!!this.outboundStreamOpts.publisherProperties.publishAudio),this.hasVideo&&(this.videoActive=!!this.outboundStreamOpts.publisherProperties.publishVideo,this.frameRate=this.outboundStreamOpts.publisherProperties.frameRate,typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?this.typeOfVideo=d.TypeOfVideo.CUSTOM:this.typeOfVideo=this.isSendScreen()?d.TypeOfVideo.SCREEN:d.TypeOfVideo.CAMERA),this.outboundStreamOpts.publisherProperties.filter&&(this.filter=this.outboundStreamOpts.publisherProperties.filter)),this.ee.on("mediastream-updated",function(){var y;P.streamManager.updateMediaStream(P.mediaStream),h.debug("Video srcObject ["+((y=P.mediaStream)===null||y===void 0?void 0:y.id)+"] updated in stream ["+P.streamId+"]")})}return S.prototype.reconnect=function(){return this.reconnectStream("API")},S.prototype.applyFilter=function(p,w){var P=this;return new Promise(function(y,C){return e(P,void 0,void 0,function(){var T,M,N,E,k,B,A=this;return t(this,function(R){if(this.filter)return[2,C(new u.OpenViduError(u.OpenViduErrorName.GENERIC_ERROR,"There is already a filter applied to Stream "+this.streamId))];if(T=function(x,F){if(x)return h.error("Error applying filter for Stream "+A.streamId,x),x.code===401?C(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter")):C(x);h.info("Filter successfully applied on Stream "+A.streamId);var j=A.filter;return A.filter=new n.Filter(p,w),A.filter.stream=A,F&&(A.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(A.session,A,"filter",A.filter,j,"applyFilter")]),A.streamManager.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(A.streamManager,A,"filter",A.filter,j,"applyFilter")])),y(A.filter)},p.startsWith("VB:")){if(!this.hasVideo)return[2,C(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The Virtual Background filter requires a video track to be applied"))];if(!this.mediaStream||this.streamManager.videos.length===0)return[2,C(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"The StreamManager requires some video element to be attached to it in order to apply a Virtual Background filter"))];if(this.session.token?M=this.session.token:M=w.token,!M)return[2,C(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,'Virtual Background requires the client to be connected to a Session or to have a "token" property available in "options" parameter with a valid OpenVidu token'))];if(N=this.session.getTokenParams(M),N.edition!=="pro"&&N.edition!=="enterprise")return[2,C(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,"OpenVidu Virtual Background API is available from OpenVidu Pro edition onwards"))];M=encodeURIComponent(btoa(M)),h.info("Applying Virtual Background to stream "+this.streamId),E=function(){return e(A,void 0,void 0,function(){var x,F,j,G,Y,ce,re;return t(this,function(oe){switch(oe.label){case 0:return oe.trys.push([0,8,,9]),x=this.streamId+"_"+(0,_.v4)(),F=this.mediaStream.clone(),j=this.streamManager.videos[0].video.cloneNode(!1),j.id=VirtualBackground.VirtualBackground.SOURCE_VIDEO_PREFIX+x,j.srcObject=F,j.muted=!0,this.virtualBackgroundSourceElements={videoClone:j,mediaStreamClone:F},VirtualBackground.VirtualBackground.hideHtmlElement(j,!1),VirtualBackground.VirtualBackground.appendHtmlElementToHiddenContainer(j,x),[4,j.play()];case 1:switch(oe.sent(),G=new VirtualBackground.VirtualBackground({id:x,openviduServerUrl:new URL(N.httpUri),openviduToken:M,inputVideo:j,inputResolution:"160x96",outputFramerate:24}),Y=void 0,ce=p,ce){case"VB:blur":return[3,2];case"VB:image":return[3,4]}return[3,6];case 2:return[4,G.backgroundBlur(w)];case 3:return Y=oe.sent(),[3,7];case 4:return[4,G.backgroundImage(w)];case 5:return Y=oe.sent(),[3,7];case 6:throw new Error("Unknown Virtual Background filter: "+p);case 7:return this.virtualBackgroundSinkElements={VB:G,video:Y},j.style.display="none",this.streamManager.remote?this.streamManager.replaceTrackInMediaStream(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1):this.streamManager.replaceTrackAux(this.virtualBackgroundSinkElements.video.srcObject.getVideoTracks()[0],!1),T(void 0,!1),[3,9];case 8:return re=oe.sent(),re.name===u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR?T(new u.OpenViduError(u.OpenViduErrorName.VIRTUAL_BACKGROUND_ERROR,re.message),!1):T(re,!1),[3,9];case 9:return[2]}})})},typeof VirtualBackground>"u"?(k=document.createElement("script"),k.type="text/javascript",k.src=N.httpUri+"/openvidu/virtual-background/openvidu-virtual-background.js?token="+M,k.onload=function(){return e(A,void 0,void 0,function(){var x;return t(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,E()];case 1:return F.sent(),y(new n.Filter(p,w)),[3,3];case 2:return x=F.sent(),C(x),[3,3];case 3:return[2]}})})},document.body.appendChild(k)):E().then(function(){return y(new n.Filter(p,w))}).catch(function(x){return C(x)})}else{if(!this.session.sessionConnected())return[2,C(this.session.notConnectedError())];h.info("Applying server filter to stream "+this.streamId),w=w??{},B=w,typeof B!="string"&&(B=JSON.stringify(B)),this.session.openvidu.sendRequest("applyFilter",{streamId:this.streamId,type:p,options:B},function(x,F){T(x,!0)})}return[2]})})})},S.prototype.removeFilter=function(){return e(this,void 0,void 0,function(){return t(this,function(p){switch(p.label){case 0:return[4,this.removeFilterAux(!1)];case 1:return[2,p.sent()]}})})},S.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},S.prototype.getMediaStream=function(){return this.mediaStream},S.prototype.removeFilterAux=function(p){var w=this;return new Promise(function(P,y){return e(w,void 0,void 0,function(){var C,T,M,N=this,E;return t(this,function(k){switch(k.label){case 0:if(C=function(B,A){if(B)return delete N.filter,h.error("Error removing filter for Stream "+N.streamId,B),B.code===401?y(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter")):y(B);h.info("Filter successfully removed from Stream "+N.streamId);var R=N.filter;return delete N.filter,A&&(N.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(N.session,N,"filter",N.filter,R,"applyFilter")]),N.streamManager.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(N.streamManager,N,"filter",N.filter,R,"applyFilter")])),P()},!this.filter)return[3,11];if(!(!((E=this.filter)===null||E===void 0)&&E.type.startsWith("VB:")))return[3,9];k.label=1;case 1:return k.trys.push([1,7,,8]),T=this.virtualBackgroundSourceElements.mediaStreamClone,p?[3,5]:this.streamManager.remote?(this.streamManager.replaceTrackInMediaStream(T.getVideoTracks()[0],!1),[3,4]):[3,2];case 2:return[4,this.streamManager.replaceTrackAux(T.getVideoTracks()[0],!1)];case 3:k.sent(),k.label=4;case 4:return[3,6];case 5:T.getTracks().forEach(function(B){return B.stop()}),k.label=6;case 6:return this.virtualBackgroundSinkElements.VB.cleanUp(),delete this.virtualBackgroundSinkElements,delete this.virtualBackgroundSourceElements,[2,C(void 0,!1)];case 7:return M=k.sent(),[2,C(M,!1)];case 8:return[3,10];case 9:if(!this.session.sessionConnected())return[2,y(this.session.notConnectedError())];h.info("Removing filter of stream "+this.streamId),this.session.openvidu.sendRequest("removeFilter",{streamId:this.streamId},function(B,A){return C(B,!0)}),k.label=10;case 10:return[3,12];case 11:return[2,y(new u.OpenViduError(u.OpenViduErrorName.GENERIC_ERROR,"Stream "+this.streamId+" has no filter applied"))];case 12:return[2]}})})})},S.prototype.setMediaStream=function(p){this.mediaStream=p},S.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},S.prototype.getWebRtcPeer=function(){return this.webRtcPeer},S.prototype.subscribeToMyRemote=function(p){this.isSubscribeToRemote=p},S.prototype.setOutboundStreamOptions=function(p){this.outboundStreamOpts=p},S.prototype.subscribe=function(){var p=this;return new Promise(function(w,P){p.initWebRtcPeerReceive(!1).then(function(){return w()}).catch(function(y){return P(y)})})},S.prototype.publish=function(){var p=this;return new Promise(function(w,P){p.isLocalStreamReadyToPublish?p.initWebRtcPeerSend(!1).then(function(){return w()}).catch(function(y){return P(y)}):p.ee.once("stream-ready-to-publish",function(){p.publish().then(function(){return w()}).catch(function(y){return P(y)})})})},S.prototype.disposeWebRtcPeer=function(){var p;this.webRtcPeer&&(this.webRtcPeer.dispose(),p=this.webRtcPeer.getId()),this.stopWebRtcStats(),h.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"RTCPeerConnection with id ["+p+"] from 'Stream' with id ["+this.streamId+"] is now closed")},S.prototype.disposeMediaStream=function(){return e(this,void 0,void 0,function(){var p;return t(this,function(w){switch(w.label){case 0:if(!(this.filter&&this.filter.type.startsWith("VB:")))return[3,4];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,this.removeFilterAux(!0)];case 2:return w.sent(),console.debug("Success removing Virtual Background filter for stream ".concat(this.streamId)),[3,4];case 3:return p=w.sent(),console.error("Error removing Virtual Background filter for stream ".concat(this.streamId),p),[3,4];case 4:return this.mediaStream&&(this.mediaStream.getAudioTracks().forEach(function(P){P.stop()}),this.mediaStream.getVideoTracks().forEach(function(P){P.stop()}),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach(function(P){P.stop()}),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach(function(P){P.stop()}),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),h.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed"),[2]}})})},S.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},S.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.audioSource!==null&&this.outboundStreamOpts.publisherProperties.audioSource!==!1},S.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&this.outboundStreamOpts.publisherProperties.videoSource!==null&&this.outboundStreamOpts.publisherProperties.videoSource!==!1},S.prototype.isSendScreen=function(){var p=!1;if(typeof MediaStreamTrack<"u"&&this.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack){var w=this.outboundStreamOpts.publisherProperties.videoSource.getSettings();w.displaySurface&&(p=["monitor","window","browser"].includes(w.displaySurface))}return!p&&I.isElectron()&&(p=typeof this.outboundStreamOpts.publisherProperties.videoSource=="string"&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),p||(p=this.outboundStreamOpts.publisherProperties.videoSource==="screen"),!!this.outboundStreamOpts&&p},S.prototype.enableHarkSpeakingEvent=function(){var p=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabled&&this.speechEvent&&(this.harkSpeakingEnabled=!0,this.speechEvent.on("speaking",function(){p.session.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(p.session,"publisherStartSpeaking",p.connection,p.streamId)]),p.streamManager.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(p.streamManager,"publisherStartSpeaking",p.connection,p.streamId)]),p.harkSpeakingEnabledOnce=!1}))},S.prototype.enableOnceHarkSpeakingEvent=function(){var p=this;this.setHarkListenerIfNotExists(),!this.harkSpeakingEnabledOnce&&this.speechEvent&&(this.harkSpeakingEnabledOnce=!0,this.speechEvent.once("speaking",function(){p.harkSpeakingEnabledOnce&&(p.session.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(p.session,"publisherStartSpeaking",p.connection,p.streamId)]),p.streamManager.emitEvent("publisherStartSpeaking",[new a.PublisherSpeakingEvent(p.streamManager,"publisherStartSpeaking",p.connection,p.streamId)])),p.disableHarkSpeakingEvent(!0)}))},S.prototype.disableHarkSpeakingEvent=function(p){if(this.speechEvent){if(this.harkSpeakingEnabledOnce=!1,p){if(this.harkSpeakingEnabled)return}else this.harkSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},S.prototype.enableHarkStoppedSpeakingEvent=function(){var p=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabled&&this.speechEvent&&(this.harkStoppedSpeakingEnabled=!0,this.speechEvent.on("stopped_speaking",function(){p.session.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(p.session,"publisherStopSpeaking",p.connection,p.streamId)]),p.streamManager.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(p.streamManager,"publisherStopSpeaking",p.connection,p.streamId)]),p.harkStoppedSpeakingEnabledOnce=!1}))},S.prototype.enableOnceHarkStoppedSpeakingEvent=function(){var p=this;this.setHarkListenerIfNotExists(),!this.harkStoppedSpeakingEnabledOnce&&this.speechEvent&&(this.harkStoppedSpeakingEnabledOnce=!0,this.speechEvent.once("stopped_speaking",function(){p.harkStoppedSpeakingEnabledOnce&&(p.session.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(p.session,"publisherStopSpeaking",p.connection,p.streamId)]),p.streamManager.emitEvent("publisherStopSpeaking",[new a.PublisherSpeakingEvent(p.streamManager,"publisherStopSpeaking",p.connection,p.streamId)])),p.disableHarkStoppedSpeakingEvent(!0)}))},S.prototype.disableHarkStoppedSpeakingEvent=function(p){if(this.speechEvent){if(this.harkStoppedSpeakingEnabledOnce=!1,p){if(this.harkStoppedSpeakingEnabled)return}else this.harkStoppedSpeakingEnabled=!1;this.harkVolumeChangeEnabled||this.harkVolumeChangeEnabledOnce||this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},S.prototype.enableHarkVolumeChangeEvent=function(p){var w=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabled||p)&&(this.harkVolumeChangeEnabled=!0,this.speechEvent.on("volume_change",function(P){var y=w.speechEvent.oldVolumeValue,C={newValue:P,oldValue:y};w.speechEvent.oldVolumeValue=P,w.streamManager.emitEvent("streamAudioVolumeChange",[new c.StreamManagerEvent(w.streamManager,"streamAudioVolumeChange",C)])})):this.harkVolumeChangeEnabled=!0},S.prototype.enableOnceHarkVolumeChangeEvent=function(p){var w=this;this.setHarkListenerIfNotExists()?(!this.harkVolumeChangeEnabledOnce||p)&&(this.harkVolumeChangeEnabledOnce=!0,this.speechEvent.once("volume_change",function(P){var y=w.speechEvent.oldVolumeValue,C={newValue:P,oldValue:y};w.speechEvent.oldVolumeValue=P,w.disableHarkVolumeChangeEvent(!0),w.streamManager.emitEvent("streamAudioVolumeChange",[new c.StreamManagerEvent(w.streamManager,"streamAudioVolumeChange",C)])})):this.harkVolumeChangeEnabledOnce=!0},S.prototype.disableHarkVolumeChangeEvent=function(p){if(this.speechEvent){if(this.harkVolumeChangeEnabledOnce=!1,p){if(this.harkVolumeChangeEnabled)return}else this.harkVolumeChangeEnabled=!1;this.harkSpeakingEnabled||this.harkSpeakingEnabledOnce||this.harkStoppedSpeakingEnabled||this.harkStoppedSpeakingEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},S.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},S.prototype.getSelectedIceCandidate=function(){var p=this;return new Promise(function(w,P){p.webRtcStats.getSelectedIceCandidateInfo().then(function(y){return w(y)}).catch(function(y){return P(y)})})},S.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},S.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},S.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return h.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Stream '.concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") will force a reconnection")),!0;var p=this.getRTCPeerConnection().iceConnectionState;return p!=="connected"&&p!=="completed"},S.prototype.setHarkListenerIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var p=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};p.interval=typeof p.interval=="number"?p.interval:100,p.threshold=typeof p.threshold=="number"?p.threshold:-50,this.speechEvent=b(this.mediaStream,p)}return!0}return!1},S.prototype.setupReconnectionEventEmitter=function(p,w){return this.reconnectionEventEmitter==null?(this.reconnectionEventEmitter=new v,!1):(console.warn("Trying to reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but an ongoing reconnection process is active. Waiting for response...")),this.reconnectionEventEmitter.once("success",function(){return p()}),this.reconnectionEventEmitter.once("error",function(P){return w(P)}),!0)},S.prototype.initWebRtcPeerSend=function(p){var w=this;return new Promise(function(P,y){var C;if(p){if(w.setupReconnectionEventEmitter(P,y))return}else w.initHarkEvents();var T=function(){var k;return p&&((k=w.reconnectionEventEmitter)===null||k===void 0||k.emitEvent("success"),delete w.reconnectionEventEmitter),P()},M=function(k){var B;return p&&((B=w.reconnectionEventEmitter)===null||B===void 0||B.emitEvent("error",[k]),delete w.reconnectionEventEmitter),y(k)},N=function(k){h.debug("Sending SDP offer to publish as "+w.streamId,k);var B=p?"reconnectStream":"publishVideo",A;if(p)A={stream:w.streamId,sdpString:k};else{var R=void 0;w.isSendVideo()&&(R=typeof MediaStreamTrack<"u"&&w.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?d.TypeOfVideo.CUSTOM:w.isSendScreen()?d.TypeOfVideo.SCREEN:d.TypeOfVideo.CAMERA),A={doLoopback:w.displayMyRemote()||!1,hasAudio:w.isSendAudio(),hasVideo:w.isSendVideo(),audioActive:w.audioActive,videoActive:w.videoActive,typeOfVideo:R,frameRate:w.frameRate?w.frameRate:-1,videoDimensions:JSON.stringify(w.videoDimensions),filter:w.outboundStreamOpts.publisherProperties.filter,sdpOffer:k}}w.session.openvidu.sendRequest(B,A,function(x,F){x?x.code===401?M(new u.OpenViduError(u.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish")):M("Error on publishVideo: "+JSON.stringify(x)):w.webRtcPeer.processRemoteAnswer(F.sdpAnswer).then(function(){w.streamId=F.id,w.creationTime=F.createdAt,w.isLocalStreamPublished=!0,w.publishedOnce=!0,w.displayMyRemote()&&(w.localMediaStreamWhenSubscribedToRemote=w.mediaStream,w.remotePeerSuccessfullyEstablished(p)),p?w.ee.emitEvent("stream-reconnected-by-publisher",[]):w.ee.emitEvent("stream-created-by-publisher",[]),w.initWebRtcStats(),h.info("'Publisher' ("+w.streamId+") successfully "+(p?"reconnected":"published")+" to session"),T()}).catch(function(j){M(j)})})},E={mediaConstraints:{audio:w.hasAudio,video:w.hasVideo},simulcast:(C=w.outboundStreamOpts.publisherProperties.videoSimulcast)!==null&&C!==void 0?C:w.session.openvidu.videoSimulcast,onIceCandidate:w.connection.sendIceCandidate.bind(w.connection),onIceConnectionStateException:w.onIceConnectionStateExceptionHandler.bind(w),iceServers:w.getIceServersConf(),rtcConfiguration:w.session.openvidu.advancedConfiguration.rtcConfiguration,mediaStream:w.mediaStream,mediaServer:w.session.openvidu.mediaServer,typeOfVideo:w.typeOfVideo?d.TypeOfVideo[w.typeOfVideo]:void 0};w.session.openvidu.mediaServer!=="mediasoup"&&(E.simulcast=!1),p&&w.disposeWebRtcPeer(),w.displayMyRemote()?w.webRtcPeer=new i.WebRtcPeerSendrecv(E):w.webRtcPeer=new i.WebRtcPeerSendonly(E),w.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+w.connection.connectionId),w.webRtcPeer.createOffer().then(function(k){w.webRtcPeer.processLocalOffer(k).then(function(){N(k.sdp)}).catch(function(B){M(new Error("(publish) SDP process local offer error: "+JSON.stringify(B)))})}).catch(function(k){M(new Error("(publish) SDP create offer error: "+JSON.stringify(k)))})})},S.prototype.finalResolveForSubscription=function(p,w){var P;return h.info("'Subscriber' ("+this.streamId+") successfully "+(p?"reconnected":"subscribed")),this.remotePeerSuccessfullyEstablished(p),this.initWebRtcStats(),p&&((P=this.reconnectionEventEmitter)===null||P===void 0||P.emitEvent("success"),delete this.reconnectionEventEmitter),w()},S.prototype.finalRejectForSubscription=function(p,w,P){var y;return h.error("Error for 'Subscriber' ("+this.streamId+") while trying to "+(p?"reconnect":"subscribe")+": "+w.toString()),p&&((y=this.reconnectionEventEmitter)===null||y===void 0||y.emitEvent("error",[w]),delete this.reconnectionEventEmitter),P(w)},S.prototype.initWebRtcPeerReceive=function(p){var w=this;return new Promise(function(P,y){p&&w.setupReconnectionEventEmitter(P,y)||(w.session.openvidu.mediaServer==="mediasoup"?w.initWebRtcPeerReceiveFromServer(p).then(function(){return w.finalResolveForSubscription(p,P)}).catch(function(C){return w.finalRejectForSubscription(p,C,y)}):w.initWebRtcPeerReceiveFromClient(p).then(function(){return w.finalResolveForSubscription(p,P)}).catch(function(C){return w.finalRejectForSubscription(p,C,y)}))})},S.prototype.initWebRtcPeerReceiveFromClient=function(p){var w=this;return new Promise(function(P,y){w.completeWebRtcPeerReceive(p,!1).then(function(C){w.webRtcPeer.processRemoteAnswer(C.sdpAnswer).then(function(){return P()}).catch(function(T){return y(T)})}).catch(function(C){return y(C)})})},S.prototype.initWebRtcPeerReceiveFromServer=function(p){var w=this;return new Promise(function(P,y){w.session.openvidu.sendRequest("prepareReceiveVideoFrom",{sender:w.streamId,reconnect:p},function(C,T){if(C)return y(new Error("Error on prepareReceiveVideoFrom: "+JSON.stringify(C)));w.completeWebRtcPeerReceive(p,!1,T.sdpOffer).then(function(){return P()}).catch(function(M){return y(M)})})})},S.prototype.completeWebRtcPeerReceive=function(p,w,P){var y=this;return new Promise(function(C,T){h.debug("'Session.subscribe(Stream)' called");var M=function(E){h.debug("Sending local SDP ".concat(P?"answer":"offer"," to subscribe to ").concat(y.streamId),E);var k=p?"reconnectStream":"receiveVideoFrom",B={};B[p?"stream":"sender"]=y.streamId,P?B[p?"sdpString":"sdpAnswer"]=E:B.sdpOffer=E,p&&(B.forciblyReconnect=w),y.session.openvidu.sendRequest(k,B,function(A,R){return A?T(new Error("Error on "+k+" : "+JSON.stringify(A))):C(R)})},N={mediaConstraints:{audio:y.hasAudio,video:y.hasVideo},simulcast:!1,onIceCandidate:y.connection.sendIceCandidate.bind(y.connection),onIceConnectionStateException:y.onIceConnectionStateExceptionHandler.bind(y),iceServers:y.getIceServersConf(),rtcConfiguration:y.session.openvidu.advancedConfiguration.rtcConfiguration,mediaServer:y.session.openvidu.mediaServer,typeOfVideo:y.typeOfVideo?d.TypeOfVideo[y.typeOfVideo]:void 0};p&&y.disposeWebRtcPeer(),y.webRtcPeer=new i.WebRtcPeerRecvonly(N),y.webRtcPeer.addIceConnectionStateChangeListener(y.streamId),P?y.webRtcPeer.processRemoteOffer(P).then(function(){y.webRtcPeer.createAnswer().then(function(E){y.webRtcPeer.processLocalAnswer(E).then(function(){M(E.sdp)}).catch(function(k){return T(new Error("(subscribe) SDP process local answer error: "+JSON.stringify(k)))})}).catch(function(E){return T(new Error("(subscribe) SDP create answer error: "+JSON.stringify(E)))})}).catch(function(E){return T(new Error("(subscribe) SDP process remote offer error: "+JSON.stringify(E)))}):y.webRtcPeer.createOffer().then(function(E){y.webRtcPeer.processLocalOffer(E).then(function(){M(E.sdp)}).catch(function(k){return T(new Error("(subscribe) SDP process local offer error: "+JSON.stringify(k)))})}).catch(function(E){return T(new Error("(subscribe) SDP create offer error: "+JSON.stringify(E)))})})},S.prototype.remotePeerSuccessfullyEstablished=function(p){p&&this.mediaStream!=null&&this.disposeMediaStream(),this.mediaStream=new MediaStream;for(var w,P=0,y=this.webRtcPeer.pc.getReceivers();P<y.length;P++)w=y[P],w.track&&this.mediaStream.addTrack(w.track);if(h.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof r.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var C=p?this.audioActive:!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=C}if(this.mediaStream.getVideoTracks()[0]){var C=p?this.videoActive:!!this.videoActive&&!!this.streamManager.properties.subscribeToVideo;this.mediaStream.getVideoTracks()[0].enabled=C}}this.updateMediaStreamInVideos(),this.initHarkEvents()}},S.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!0,this.streamManager)&&this.enableOnceHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.streamManager)&&this.enableHarkSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!0,this.streamManager)&&this.enableOnceHarkStoppedSpeakingEvent(),this.session.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.streamManager)&&this.enableHarkStoppedSpeakingEvent(),this.harkVolumeChangeEnabledOnce&&this.enableOnceHarkVolumeChangeEvent(!0),this.harkVolumeChangeEnabled&&this.enableHarkVolumeChangeEvent(!0))},S.prototype.onIceConnectionStateExceptionHandler=function(p,w,P){switch(p){case o.ExceptionEventName.ICE_CONNECTION_FAILED:this.onIceConnectionFailed();break;case o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED:this.onIceConnectionDisconnected();break}this.session.emitEvent("exception",[new o.ExceptionEvent(this.session,p,this,w,P)])},S.prototype.onIceConnectionFailed=function(){h.log("[ICE_CONNECTION_FAILED] Handling ICE_CONNECTION_FAILED event. Reconnecting stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",")")),this.reconnectStreamAndLogResultingIceConnectionState(o.ExceptionEventName.ICE_CONNECTION_FAILED)},S.prototype.onIceConnectionDisconnected=function(){var p=this;h.log("[ICE_CONNECTION_DISCONNECTED] Handling ICE_CONNECTION_DISCONNECTED event. Waiting for ICE to be restored and reconnect stream ".concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") if not possible"));var w=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3;this.awaitWebRtcPeerConnectionState(w).then(function(P){switch(P){case"failed":h.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(p.streamId," (").concat(p.isLocal()?"Publisher":"Subscriber",") is now failed after ICE_CONNECTION_DISCONNECTED"));break;case"connected":case"completed":h.log("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(p.streamId," (").concat(p.isLocal()?"Publisher":"Subscriber",") automatically restored after ICE_CONNECTION_DISCONNECTED. Current ICE connection state: ").concat(P));break;case"closed":case"checking":case"new":case"disconnected":h.warn("[ICE_CONNECTION_DISCONNECTED] ICE connection of stream ".concat(p.streamId," (").concat(p.isLocal()?"Publisher":"Subscriber",") couldn't be restored after ICE_CONNECTION_DISCONNECTED event. Current ICE connection state after ").concat(w," ms: ").concat(P)),p.reconnectStreamAndLogResultingIceConnectionState(o.ExceptionEventName.ICE_CONNECTION_DISCONNECTED);break}})},S.prototype.reconnectStreamAndLogResultingIceConnectionState=function(p){return e(this,void 0,void 0,function(){var w,P;return t(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,this.reconnectStreamAndReturnIceConnectionState(p)];case 1:switch(w=y.sent(),w){case"connected":case"completed":h.log("[".concat(p,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") successfully reconnected after ").concat(p,". Current ICE connection state: ").concat(w));break;default:h.error("[".concat(p,"] Stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") failed to reconnect after ").concat(p,". Current ICE connection state: ").concat(w));break}return[3,3];case 2:return P=y.sent(),h.error("[".concat(p,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after ").concat(p,": ").concat(P)),[3,3];case 3:return[2]}})})},S.prototype.reconnectStreamAndReturnIceConnectionState=function(p){return e(this,void 0,void 0,function(){var w,P;return t(this,function(y){switch(y.label){case 0:h.log("[".concat(p,"] Reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") after event ").concat(p)),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,this.reconnectStream(p)];case 2:return y.sent(),w=this.session.openvidu.advancedConfiguration.iceConnectionDisconnectedExceptionTimeout||4e3,[2,this.awaitWebRtcPeerConnectionState(w)];case 3:return P=y.sent(),h.warn("[".concat(p,"] Error reconnecting stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber","). Reason: ").concat(P)),[2,this.awaitWebRtcPeerConnectionState(1)];case 4:return[2]}})})},S.prototype.awaitWebRtcPeerConnectionState=function(p){return e(this,void 0,void 0,function(){var w,P,y,C;return t(this,function(T){switch(T.label){case 0:w=this.getRTCPeerConnection().iceConnectionState,P=150,y=Math.ceil(p/P),C=0,T.label=1;case 1:return C<y?(w=this.getRTCPeerConnection().iceConnectionState,w==="connected"||w==="completed"?[3,4]:[4,new Promise(function(M){return setTimeout(M,P)})]):[3,4];case 2:T.sent(),T.label=3;case 3:return C++,[3,1];case 4:return[2,w]}})})},S.prototype.reconnectStream=function(p){return e(this,void 0,void 0,function(){var w,P;return t(this,function(y){switch(y.label){case 0:return[4,this.isWebsocketConnected(p,3e3)];case 1:if(w=y.sent(),w)return h.log("[".concat(p,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") and the websocket is opened")),this.isLocal()?[2,this.initWebRtcPeerSend(!0)]:[2,this.initWebRtcPeerReceive(!0)];throw P="[".concat(p,"] Trying to reconnect stream ").concat(this.streamId," (").concat(this.isLocal()?"Publisher":"Subscriber",") but the websocket wasn't opened"),h.error(P),Error(P)}})})},S.prototype.isWebsocketConnected=function(p,w){var P=this;return new Promise(function(y,C){var T=P.session.openvidu.getWsReadyState();if(T===1){var M=setTimeout(function(){return console.warn("[".concat(p,"] Websocket timeout of ").concat(w,"ms")),y(!1)},w);P.session.openvidu.sendRequest("echo",{},function(N,E){return clearTimeout(M),N?(console.warn("[".concat(p,"] Websocket 'echo' returned error: ").concat(N)),y(!1)):y(!0)})}else return console.warn("[".concat(p,"] Websocket readyState is ").concat(T)),y(!1)})},S.prototype.initWebRtcStats=function(){this.webRtcStats=new s.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},S.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},S.prototype.getIceServersConf=function(){var p,w;return this.session.openvidu.advancedConfiguration.iceServers?w=this.session.openvidu.advancedConfiguration.iceServers==="freeice"?void 0:this.session.openvidu.advancedConfiguration.iceServers:!((p=this.session.openvidu.advancedConfiguration.rtcConfiguration)===null||p===void 0)&&p.iceServers?w=this.session.openvidu.advancedConfiguration.rtcConfiguration.iceServers:this.session.openvidu.iceServers?w=this.session.openvidu.iceServers:w=void 0,w},S.prototype.gatherStatsForPeer=function(){var p=this;return new Promise(function(w,P){p.isLocal()?p.getRTCPeerConnection().getSenders().forEach(function(y){return y.getStats().then(function(C){C.forEach(function(T){if(p.isReportWanted(T)){var M={};M.type=T.type,M.timestamp=T.timestamp,M.id=T.id,T.type==="outbound-rtp"&&(M.ssrc=T.ssrc,M.firCount=T.firCount,M.pliCount=T.pliCount,M.nackCount=T.nackCount,M.qpSum=T.qpSum,T.kind?M.mediaType=T.kind:T.mediaType?M.mediaType=T.mediaType:M.mediaType=T.id.indexOf("VideoStream")!==-1?"video":"audio",M.mediaType==="video"&&(M.framesEncoded=T.framesEncoded),M.packetsSent=T.packetsSent,M.bytesSent=T.bytesSent),T.type==="candidate-pair"&&T.totalRoundTripTime!==void 0&&(M.availableOutgoingBitrate=T.availableOutgoingBitrate,M.rtt=T.currentRoundTripTime,M.averageRtt=T.totalRoundTripTime/T.responsesReceived),T.type==="remote-inbound-rtp"||T.type,h.log(M)}})})}):p.getRTCPeerConnection().getReceivers().forEach(function(y){return y.getStats().then(function(C){C.forEach(function(T){if(p.isReportWanted(T)){var M={};M.type=T.type,M.timestamp=T.timestamp,M.id=T.id,T.type==="inbound-rtp"&&(M.ssrc=T.ssrc,M.firCount=T.firCount,M.pliCount=T.pliCount,M.nackCount=T.nackCount,M.qpSum=T.qpSum,T.kind?M.mediaType=T.kind:T.mediaType?M.mediaType=T.mediaType:M.mediaType=T.id.indexOf("VideoStream")!==-1?"video":"audio",M.mediaType==="video"&&(M.framesDecoded=T.framesDecoded),M.packetsReceived=T.packetsReceived,M.packetsLost=T.packetsLost,M.jitter=T.jitter,M.bytesReceived=T.bytesReceived),T.type==="candidate-pair"&&T.totalRoundTripTime!==void 0&&(M.availableIncomingBitrate=T.availableIncomingBitrate,M.rtt=T.currentRoundTripTime,M.averageRtt=T.totalRoundTripTime/T.responsesReceived),T.type==="remote-inbound-rtp"||T.type,h.log(M)}})})})})},S.prototype.isReportWanted=function(p){return p.type==="inbound-rtp"&&!this.isLocal()||p.type==="outbound-rtp"&&this.isLocal()||p.type==="candidate-pair"&&p.nominated&&p.bytesSent>0},S}();return mn.Stream=O,mn}var eu;function fp(){if(eu)return Rr;eu=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Connection=void 0;var e=Na(),t=Qe(),n=mr(),r=t.OpenViduLogger.getInstance(),i=function(){function s(o,a){this.session=o,this.disposed=!1;var c="'Connection' created ";a.role?(this.localOptions=a,this.connectionId=this.localOptions.id,this.creationTime=this.localOptions.createdAt,this.data=this.localOptions.metadata,this.rpcSessionId=this.localOptions.sessionId,this.role=this.localOptions.role,this.record=this.localOptions.record,c+="(local)"):(this.remoteOptions=a,this.connectionId=this.remoteOptions.id,this.creationTime=this.remoteOptions.createdAt,this.remoteOptions.metadata&&(this.data=this.remoteOptions.metadata),this.remoteOptions.streams&&this.initRemoteStreams(this.remoteOptions.streams),c+="(remote) with 'connectionId' ["+this.remoteOptions.id+"]"),r.info(c)}return s.prototype.sendIceCandidate=function(o){var a=this;this.disposed?r.warn("Connection ".concat(this.connectionId," disposed when trying to send an ICE candidate. ICE candidate not sent")):(r.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,o),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex},function(c,l){c&&(r.error("Error sending ICE candidate: "+JSON.stringify(c)),a.session.emitEvent("exception",[new n.ExceptionEvent(a.session,n.ExceptionEventName.ICE_CANDIDATE_ERROR,a.session,"There was an unexpected error on the server-side processing an ICE candidate generated and sent by the client-side",c)]))}))},s.prototype.initRemoteStreams=function(o){var a=this;o.forEach(function(c){var l={id:c.id,createdAt:c.createdAt,connection:a,hasAudio:c.hasAudio,hasVideo:c.hasVideo,audioActive:c.audioActive,videoActive:c.videoActive,typeOfVideo:c.typeOfVideo,frameRate:c.frameRate,videoDimensions:c.videoDimensions?JSON.parse(c.videoDimensions):void 0,filter:c.filter?c.filter:void 0},u=new e.Stream(a.session,l);a.addStream(u)}),r.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},s.prototype.addStream=function(o){o.connection=this,this.stream=o},s.prototype.removeStream=function(){delete this.stream},s.prototype.dispose=function(){this.disposed=!0,this.removeStream()},s}();return Rr.Connection=i,Rr}var Gn={},tu;function pp(){if(tu)return Gn;tu=1;var e=Gn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.ConnectionEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,s,o,a)||this;return u.connection=c,u.reason=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Gn.ConnectionEvent=n,Gn}var zn={},nu;function hp(){if(nu)return zn;nu=1;var e=zn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(zn,"__esModule",{value:!0}),zn.FilterEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a){var c=r.call(this,!1,s,o)||this;return c.data=a,c}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return zn.FilterEvent=n,zn}var Kn={},ru;function mp(){if(ru)return Kn;ru=1;var e=Kn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.RecordingEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,!1,s,o)||this;return u.id=a,c!==a&&(u.name=c),u.reason=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Kn.RecordingEvent=n,Kn}var Jn={},iu;function Ma(){if(iu)return Jn;iu=1;var e=Jn.__extends||function(){var s=function(o,a){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},s(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");s(o,a);function c(){this.constructor=o}o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.SessionDisconnectedEvent=void 0;var t=ct(),n=Qe(),r=n.OpenViduLogger.getInstance(),i=function(s){e(o,s);function o(a,c){var l=s.call(this,!0,a,"sessionDisconnected")||this;return l.reason=c,l}return o.prototype.callDefaultBehavior=function(){r.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var a=this.target;a.remoteConnections.forEach(function(c){var l,u,d,g,f,_,b,v,h=c.connectionId;if(!((l=a.remoteConnections.get(h))===null||l===void 0)&&l.stream){(u=a.remoteConnections.get(h))===null||u===void 0||u.stream.disposeWebRtcPeer(),(d=a.remoteConnections.get(h))===null||d===void 0||d.stream.disposeMediaStream(),!((g=a.remoteConnections.get(h))===null||g===void 0)&&g.stream.streamManager&&((f=a.remoteConnections.get(h))===null||f===void 0||f.stream.streamManager.removeAllVideos());var I=(b=(_=a.remoteConnections.get(h))===null||_===void 0?void 0:_.stream)===null||b===void 0?void 0:b.streamId;I&&a.remoteStreamsCreated.delete(I),(v=a.remoteConnections.get(h))===null||v===void 0||v.dispose()}a.remoteConnections.delete(h)})},o}(t.Event);return Jn.SessionDisconnectedEvent=i,Jn}var Xn={},su;function vp(){if(su)return Xn;su=1;var e=Xn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.SignalEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,"signal")||this;return o&&(l.type="signal:"+o),l.data=a,l.from=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Xn.SignalEvent=n,Xn}var Yn={},ou;function gp(){if(ou)return Yn;ou=1;var e=Yn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.SpeechToTextEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c,l,u){var d=r.call(this,!1,s,"speechToTextMessage")||this;return d.connection=o,d.text=a,d.reason=c,d.raw=l,d.lang=u,d}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Yn.SpeechToTextEvent=n,Yn}var Qn={},au;function La(){if(au)return Qn;au=1;var e=Qn.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(u[g]=d[g])},a(c,l)};return function(c,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}();Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.StreamEvent=void 0;var t=ct(),n=Da(),r=Ms(),i=Qe(),s=i.OpenViduLogger.getInstance(),o=function(a){e(c,a);function c(l,u,d,g,f){var _=a.call(this,l,u,d)||this;return _.stream=g,_.reason=f,_}return c.prototype.callDefaultBehavior=function(){if(this.type==="streamDestroyed"){if(this.target instanceof r.Session)s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof n.Publisher){s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var l=this.target.openvidu.publishers,u=0;u<l.length;u++)if(l[u]===this.target){l.splice(u,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),this.stream.session.remoteStreamsCreated.delete(this.stream.streamId);var d=this.stream.session.remoteConnections.get(this.stream.connection.connectionId);if(d&&d.remoteOptions)for(var g=d.remoteOptions.streams,u=g.length-1;u>=0;--u)g[u].id===this.stream.streamId&&g.splice(u,1)}},c}(t.Event);return Qn.StreamEvent=o,Qn}var Zn={},cu;function bp(){if(cu)return Zn;cu=1;var e=Zn.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.ConnectionPropertyChangedEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c,l){var u=r.call(this,!1,s,"connectionPropertyChanged")||this;return u.connection=o,u.changedProperty=a,u.newValue=c,u.oldValue=l,u}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return Zn.ConnectionPropertyChangedEvent=n,Zn}var er={},lu;function yp(){if(lu)return er;lu=1;var e=er.__extends||function(){var r=function(i,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},r(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(i,s);function o(){this.constructor=i}i.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(er,"__esModule",{value:!0}),er.NetworkQualityLevelChangedEvent=void 0;var t=ct(),n=function(r){e(i,r);function i(s,o,a,c){var l=r.call(this,!1,s,"networkQualityLevelChanged")||this;return l.newValue=o,l.oldValue=a,l.connection=c,l}return i.prototype.callDefaultBehavior=function(){},i}(t.Event);return er.NetworkQualityLevelChangedEvent=n,er}var vo,uu;function Ep(){if(uu)return vo;uu=1;var e={};return vo=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},vo}var go,du;function _p(){if(du)return go;du=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return go={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},go}var xi={exports:{}},fu;function lC(){return fu||(fu=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=_p(),s=Ep();t=e.exports={};const o=t.re=[],a=t.safeRe=[],c=t.src=[],l=t.t={};let u=0;const d="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[d,r]],f=b=>{for(const[v,h]of g)b=b.split(`${v}*`).join(`${v}{0,${h}}`).split(`${v}+`).join(`${v}{1,${h}}`);return b},_=(b,v,h)=>{const I=f(v),O=u++;s(b,O,v),l[b]=O,c[O]=v,o[O]=new RegExp(v,h?"g":void 0),a[O]=new RegExp(I,h?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),_("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),_("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${d}+`),_("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),_("FULL",`^${c[l.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),_("LOOSE",`^${c[l.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),_("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),_("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?(?:${c[l.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",c[l.COERCE],!0),_("COERCERTLFULL",c[l.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",_("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",_("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(xi,xi.exports)),xi.exports}var bo,pu;function uC(){if(pu)return bo;pu=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return bo=r=>r?typeof r!="object"?e:r:t,bo}var yo,hu;function dC(){if(hu)return yo;hu=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),o=e.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return yo={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},yo}var Eo,mu;function Sp(){if(mu)return Eo;mu=1;const e=Ep(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=_p(),{safeRe:r,t:i}=lC(),s=uC(),{compareIdentifiers:o}=dC();class a{constructor(l,u){if(u=s(u),l instanceof a){if(l.loose===!!u.loose&&l.includePrerelease===!!u.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",l,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const d=l.trim().match(u.loose?r[i.LOOSE]:r[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(g=>{if(/^[0-9]+$/.test(g)){const f=+g;if(f>=0&&f<n)return f}return g}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(e("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let u=0;do{const d=this.prerelease[u],g=l.prerelease[u];if(e("prerelease compare",u,d,g),d===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(d===void 0)return-1;if(d===g)continue;return o(d,g)}while(++u)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let u=0;do{const d=this.build[u],g=l.build[u];if(e("build compare",u,d,g),d===void 0&&g===void 0)return 0;if(g===void 0)return 1;if(d===void 0)return-1;if(d===g)continue;return o(d,g)}while(++u)}inc(l,u,d){switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,d),this.inc("pre",u,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,d),this.inc("pre",u,d);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const g=Number(d)?1:0;if(!u&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[g];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(u===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(g)}}if(u){let f=[u,g];d===!1&&(f=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Eo=a,Eo}var _o,vu;function fC(){if(vu)return _o;vu=1;const e=Sp();return _o=(n,r)=>new e(n,r).major,_o}var So,gu;function pC(){if(gu)return So;gu=1;const e=Sp();return So=(n,r)=>new e(n,r).minor,So}var bu;function Ms(){if(bu)return Kt;bu=1;var e=Kt.__extends||function(){var M=function(N,E){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,B){k.__proto__=B}||function(k,B){for(var A in B)Object.prototype.hasOwnProperty.call(B,A)&&(k[A]=B[A])},M(N,E)};return function(N,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");M(N,E);function k(){this.constructor=N}N.prototype=E===null?Object.create(E):(k.prototype=E.prototype,new k)}}(),t=Kt.__awaiter||function(M,N,E,k){function B(A){return A instanceof E?A:new E(function(R){R(A)})}return new(E||(E=Promise))(function(A,R){function x(G){try{j(k.next(G))}catch(Y){R(Y)}}function F(G){try{j(k.throw(G))}catch(Y){R(Y)}}function j(G){G.done?A(G.value):B(G.value).then(x,F)}j((k=k.apply(M,N||[])).next())})},n=Kt.__generator||function(M,N){var E={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},k,B,A,R;return R={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function x(j){return function(G){return F([j,G])}}function F(j){if(k)throw new TypeError("Generator is already executing.");for(;R&&(R=0,j[0]&&(E=0)),E;)try{if(k=1,B&&(A=j[0]&2?B.return:j[0]?B.throw||((A=B.return)&&A.call(B),0):B.next)&&!(A=A.call(B,j[1])).done)return A;switch(B=0,A&&(j=[j[0]&2,A.value]),j[0]){case 0:case 1:A=j;break;case 4:return E.label++,{value:j[1],done:!1};case 5:E.label++,B=j[1],j=[0];continue;case 7:j=E.ops.pop(),E.trys.pop();continue;default:if(A=E.trys,!(A=A.length>0&&A[A.length-1])&&(j[0]===6||j[0]===2)){E=0;continue}if(j[0]===3&&(!A||j[1]>A[0]&&j[1]<A[3])){E.label=j[1];break}if(j[0]===6&&E.label<A[1]){E.label=A[1],A=j;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(j);break}A[2]&&E.ops.pop(),E.trys.pop();continue}j=N.call(M,E)}catch(G){j=[6,G],B=0}finally{k=A=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Session=void 0;var r=fp(),i=Ra(),s=Pa(),o=Ta(),a=pp(),c=hp(),l=mp(),u=Ma(),d=vp(),g=gp(),f=La(),_=pr(),b=bp(),v=yp(),h=hr(),I=Ps(),O=Qe(),S=un(),p=fC(),w=pC(),P=mr(),y=O.OpenViduLogger.getInstance(),C,T=function(M){e(N,M);function N(E){var k=M.call(this)||this;return k.streamManagers=[],k.remoteStreamsCreated=new Map,k.remoteConnections=new Map,C=S.PlatformUtils.getInstance(),k.openvidu=E,k}return N.prototype.connect=function(E,k){var B=this;return new Promise(function(A,R){if(B.processToken(E),B.openvidu.checkSystemRequirements())B.options={sessionId:B.sessionId,participantId:E,metadata:k?B.stringClientMetadata(k):""},B.connectAux(E).then(function(){return A()}).catch(function(x){return R(x)});else return R(new h.OpenViduError(h.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+C.getName()+" (version "+C.getVersion()+") for "+C.getFamily()+" is not supported in OpenVidu"))})},N.prototype.disconnect=function(){this.leave(!1,"disconnect")},N.prototype.subscribe=function(E,k,B,A){var R={};B&&typeof B!="function"?R={insertMode:typeof B.insertMode<"u"?typeof B.insertMode=="string"?I.VideoInsertMode[B.insertMode]:R.insertMode:I.VideoInsertMode.APPEND,subscribeToAudio:typeof B.subscribeToAudio<"u"?B.subscribeToAudio:!0,subscribeToVideo:typeof B.subscribeToVideo<"u"?B.subscribeToVideo:!0}:R={insertMode:I.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0};var x=void 0;if(B&&typeof B=="function"?x=B:A&&(x=A),!this.sessionConnected())throw x!==void 0&&x(this.notConnectedError()),this.notConnectedError();y.info("Subscribing to "+E.connection.connectionId),E.subscribe().then(function(){y.info("Subscribed correctly to "+E.connection.connectionId),x!==void 0&&x(void 0)}).catch(function(j){x!==void 0&&x(j)});var F=new s.Subscriber(E,k,R);return F.targetElement&&E.streamManager.createVideoElement(F.targetElement,R.insertMode),F},N.prototype.subscribeAsync=function(E,k,B){var A=this;return new Promise(function(R,x){if(!A.sessionConnected())return x(A.notConnectedError());var F,j=function(G){return G?x(G):R(F)};B?F=A.subscribe(E,k,B,j):F=A.subscribe(E,k,j)})},N.prototype.unsubscribe=function(E){var k=this;return new Promise(function(B,A){if(k.sessionConnected()){var R=E.stream.connection.connectionId;y.info("Unsubscribing from "+R),k.openvidu.sendRequest("unsubscribeFromVideo",{sender:E.stream.connection.connectionId},function(x,F){return x?(y.error("Error unsubscribing from "+R),A(x)):(y.info("Unsubscribed correctly from "+R),E.stream.streamManager.removeAllVideos(),E.stream.disposeWebRtcPeer(),E.stream.disposeMediaStream(),B())})}else return A(k.notConnectedError())})},N.prototype.publish=function(E){var k=this;return new Promise(function(B,A){if(!k.sessionConnected())return A(k.notConnectedError());E.session=k,E.stream.session=k,E.stream.publishedOnce?E.initialize().then(function(){k.connection.addStream(E.stream),E.reestablishStreamPlayingEvent(),E.stream.publish().then(function(){return k.sendVideoData(E,8,!0,5),B()}).catch(function(R){return A(R)})}).catch(function(R){return A(R)}):(k.connection.addStream(E.stream),E.stream.publish().then(function(){return k.sendVideoData(E,8,!0,5),B()}).catch(function(R){return A(R)}))})},N.prototype.unpublish=function(E){var k=this;return new Promise(function(B,A){if(!k.sessionConnected())throw k.notConnectedError();var R=E.stream;if(R.connection){if(R.connection!==k.connection)return A(new Error("The associated Connection object of this Publisher is not your local Connection.  Only moderators can force unpublish on remote Streams via 'forceUnpublish' method"));y.info("Unpublishing local media ("+R.connection.connectionId+")"),k.openvidu.sendRequest("unpublishVideo",function(x,F){if(x)return A(x);y.info("Media unpublished correctly"),R.disposeWebRtcPeer(),R.connection.stream==R&&delete R.connection.stream;var j=new f.StreamEvent(!0,E,"streamDestroyed",E.stream,"unpublish");return E.emitEvent("streamDestroyed",[j]),j.callDefaultBehavior(),B()})}else return A(new Error("The associated Connection object of this Publisher is null"))})},N.prototype.forceDisconnect=function(E){var k=this;return new Promise(function(B,A){if(!k.sessionConnected())return A(k.notConnectedError());y.info("Forcing disconnect for connection "+E.connectionId),k.openvidu.sendRequest("forceDisconnect",{connectionId:E.connectionId},function(R,x){return R?(y.error("Error forcing disconnect for Connection "+E.connectionId,R),R.code===401?A(new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection")):A(R)):(y.info("Forcing disconnect correctly for Connection "+E.connectionId),B())})})},N.prototype.forceUnpublish=function(E){var k=this;return new Promise(function(B,A){if(!k.sessionConnected())return A(k.notConnectedError());y.info("Forcing unpublish for stream "+E.streamId),k.openvidu.sendRequest("forceUnpublish",{streamId:E.streamId},function(R,x){return R?(y.error("Error forcing unpublish for Stream "+E.streamId,R),R.code===401?A(new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing")):A(R)):(y.info("Forcing unpublish correctly for Stream "+E.streamId),B())})})},N.prototype.signal=function(E){var k=this;return new Promise(function(B,A){if(!k.sessionConnected())return A(k.notConnectedError());var R={};if(E.to&&E.to.length>0){var x=[];E.to.forEach(function(j){j.connectionId&&x.push(j.connectionId)}),R.to=x}else R.to=[];R.data=E.data?E.data:"";var F=E.type?E.type:"signal";F&&F.substring(0,7)!=="signal:"&&(F="signal:"+F),R.type=F,k.openvidu.sendRequest("sendMessage",{message:JSON.stringify(R)},function(j,G){return j?A(j):B()})})},N.prototype.subscribeToSpeechToText=function(E,k){var B=this;return new Promise(function(A,R){B.openvidu.sendRequest("subscribeToSpeechToText",{connectionId:E.connection.connectionId,lang:k},function(x,F){return x?R(x):A()})})},N.prototype.unsubscribeFromSpeechToText=function(E){var k=this;return new Promise(function(B,A){k.openvidu.sendRequest("unsubscribeFromSpeechToText",{connectionId:E.connection.connectionId},function(R,x){return R?A(R):B()})})},N.prototype.on=function(E,k){var B,A,R,x;return M.prototype.onAux.call(this,E,"Event '"+E+"' triggered by 'Session'",k),E==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(F){var j;!((j=F.stream)===null||j===void 0)&&j.hasAudio&&F.stream.enableHarkSpeakingEvent()}),!((A=(B=this.connection)===null||B===void 0?void 0:B.stream)===null||A===void 0)&&A.hasAudio&&this.connection.stream.enableHarkSpeakingEvent()),E==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(F){var j;!((j=F.stream)===null||j===void 0)&&j.hasAudio&&F.stream.enableHarkStoppedSpeakingEvent()}),!((x=(R=this.connection)===null||R===void 0?void 0:R.stream)===null||x===void 0)&&x.hasAudio&&this.connection.stream.enableHarkStoppedSpeakingEvent()),this},N.prototype.once=function(E,k){var B,A,R,x;return M.prototype.onceAux.call(this,E,"Event '"+E+"' triggered once by 'Session'",k),E==="publisherStartSpeaking"&&(this.remoteConnections.forEach(function(F){var j;!((j=F.stream)===null||j===void 0)&&j.hasAudio&&F.stream.enableOnceHarkSpeakingEvent()}),!((A=(B=this.connection)===null||B===void 0?void 0:B.stream)===null||A===void 0)&&A.hasAudio&&this.connection.stream.enableOnceHarkSpeakingEvent()),E==="publisherStopSpeaking"&&(this.remoteConnections.forEach(function(F){var j;!((j=F.stream)===null||j===void 0)&&j.hasAudio&&F.stream.enableOnceHarkStoppedSpeakingEvent()}),!((x=(R=this.connection)===null||R===void 0?void 0:R.stream)===null||x===void 0)&&x.hasAudio&&this.connection.stream.enableOnceHarkStoppedSpeakingEvent()),this},N.prototype.off=function(E,k){var B=this,A,R,x,F;return M.prototype.offAux.call(this,E,k),E==="publisherStartSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1)||(this.remoteConnections.forEach(function(j){var G;!((G=j.stream)===null||G===void 0)&&G.streamManager&&(B.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,j.stream.streamManager)||j.stream.disableHarkSpeakingEvent(!1))}),!((R=(A=this.connection)===null||A===void 0?void 0:A.stream)===null||R===void 0)&&R.streamManager&&(this.anySpeechEventListenerEnabled("publisherStartSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkSpeakingEvent(!1)))),E==="publisherStopSpeaking"&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1)||(this.remoteConnections.forEach(function(j){var G;!((G=j.stream)===null||G===void 0)&&G.streamManager&&(B.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,j.stream.streamManager)||j.stream.disableHarkStoppedSpeakingEvent(!1))}),!((F=(x=this.connection)===null||x===void 0?void 0:x.stream)===null||F===void 0)&&F.streamManager&&(this.anySpeechEventListenerEnabled("publisherStopSpeaking",!1,this.connection.stream.streamManager)||this.connection.stream.disableHarkStoppedSpeakingEvent(!1)))),this},N.prototype.onParticipantJoined=function(E){var k=this;this.getConnection(E.id,"").then(function(B){y.warn("Connection "+B.connectionId+" already exists in connections list")}).catch(function(B){var A=new r.Connection(k,E);k.remoteConnections.set(E.id,A),k.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,k,"connectionCreated",A,"")])})},N.prototype.onParticipantLeft=function(E){var k=this;this.getRemoteConnection(E.connectionId,"onParticipantLeft").then(function(B){if(B.stream){var A=B.stream,R=new f.StreamEvent(!0,k,"streamDestroyed",A,E.reason);k.ee.emitEvent("streamDestroyed",[R]),R.callDefaultBehavior(),k.remoteStreamsCreated.delete(A.streamId)}B.dispose(),k.remoteConnections.delete(B.connectionId),k.ee.emitEvent("connectionDestroyed",[new a.ConnectionEvent(!1,k,"connectionDestroyed",B,E.reason)])}).catch(function(B){y.error(B)})},N.prototype.onParticipantPublished=function(E){var k=this,B=function(R){k.remoteConnections.set(R.connectionId,R),k.remoteStreamsCreated.get(R.stream.streamId)||k.ee.emitEvent("streamCreated",[new f.StreamEvent(!1,k,"streamCreated",R.stream,"")]),k.remoteStreamsCreated.set(R.stream.streamId,!0)},A;this.getRemoteConnection(E.id,"onParticipantPublished").then(function(R){A=R,E.metadata=R.data,A.remoteOptions=E,A.initRemoteStreams(E.streams),B(A)}).catch(function(R){A=new r.Connection(k,E),B(A)})},N.prototype.onParticipantUnpublished=function(E){var k=this;E.connectionId===this.connection.connectionId?this.stopPublisherStream(E.reason):this.getRemoteConnection(E.connectionId,"onParticipantUnpublished").then(function(B){var A=new f.StreamEvent(!0,k,"streamDestroyed",B.stream,E.reason);if(k.ee.emitEvent("streamDestroyed",[A]),A.callDefaultBehavior(),B.stream!=null){var R=B.stream.streamId;k.remoteStreamsCreated.delete(R),B.removeStream()}}).catch(function(B){y.error(B)})},N.prototype.onParticipantEvicted=function(E){E.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,E.reason)},N.prototype.onNewMessage=function(E){var k=this;y.info("New signal: "+JSON.stringify(E));var B=E.type?E.type.replace(/^(signal:)/,""):void 0;E.from?this.getConnection(E.from,"Connection '"+E.from+"' unknown when 'onNewMessage'. Existing remote connections: "+JSON.stringify(this.remoteConnections.keys())+". Existing local connection: "+this.connection.connectionId).then(function(A){k.ee.emitEvent("signal",[new d.SignalEvent(k,B,E.data,A)]),E.type&&E.type!=="signal"&&k.ee.emitEvent(E.type,[new d.SignalEvent(k,B,E.data,A)])}).catch(function(A){y.error(A)}):(this.ee.emitEvent("signal",[new d.SignalEvent(this,B,E.data,void 0)]),E.type&&E.type!=="signal"&&this.ee.emitEvent(E.type,[new d.SignalEvent(this,B,E.data,void 0)]))},N.prototype.onStreamPropertyChanged=function(E){var k=this,B=function(A){var R,x;if(A.stream&&A.stream.streamId===E.streamId){var F=A.stream,j=void 0;switch(E.property){case"audioActive":j=F.audioActive,E.newValue=E.newValue==="true",F.audioActive=E.newValue;break;case"videoActive":j=F.videoActive,E.newValue=E.newValue==="true",F.videoActive=E.newValue;var G=(x=(R=F==null?void 0:F.getMediaStream())===null||R===void 0?void 0:R.getVideoTracks())===null||x===void 0?void 0:x[0];G&&!G.enabled&&F.videoActive&&(G.enabled=!0);break;case"videoTrack":E.newValue=JSON.parse(E.newValue);break;case"audioTrack":E.newValue=JSON.parse(E.newValue);break;case"videoDimensions":j=F.videoDimensions,E.newValue=JSON.parse(JSON.parse(E.newValue)),F.videoDimensions=E.newValue;break;case"filter":j=F.filter,E.newValue=Object.keys(E.newValue).length>0?E.newValue:void 0,E.newValue!==void 0?(F.filter=new i.Filter(E.newValue.type,E.newValue.options),F.filter.stream=F,E.newValue.lastExecMethod&&(F.filter.lastExecMethod=E.newValue.lastExecMethod)):delete F.filter,E.newValue=F.filter;break}k.ee.emitEvent("streamPropertyChanged",[new _.StreamPropertyChangedEvent(k,F,E.property,E.newValue,j,E.reason)]),F.streamManager&&F.streamManager.emitEvent("streamPropertyChanged",[new _.StreamPropertyChangedEvent(F.streamManager,F,E.property,E.newValue,j,E.reason)])}else y.error("No stream with streamId '"+E.streamId+"' found for connection '"+E.connectionId+"' on 'streamPropertyChanged' event")};E.connectionId===this.connection.connectionId?B(this.connection):this.getRemoteConnection(E.connectionId,"onStreamPropertyChanged").then(function(A){B(A)}).catch(function(A){y.error(A)})},N.prototype.onConnectionPropertyChanged=function(E){var k;switch(E.property){case"role":k=this.connection.role.slice(),this.connection.role=E.newValue,this.connection.localOptions.role=E.newValue;break;case"record":k=this.connection.record,E.newValue=E.newValue==="true",this.connection.record=E.newValue,this.connection.localOptions.record=E.newValue;break}this.ee.emitEvent("connectionPropertyChanged",[new b.ConnectionPropertyChangedEvent(this,this.connection,E.property,E.newValue,k)])},N.prototype.onNetworkQualityLevelChangedChanged=function(E){var k=this;E.connectionId===this.connection.connectionId?this.ee.emitEvent("networkQualityLevelChanged",[new v.NetworkQualityLevelChangedEvent(this,E.newValue,E.oldValue,this.connection)]):this.getConnection(E.connectionId,"Connection not found for connectionId "+E.connectionId).then(function(B){k.ee.emitEvent("networkQualityLevelChanged",[new v.NetworkQualityLevelChangedEvent(k,E.newValue,E.oldValue,B)])}).catch(function(B){y.error(B)})},N.prototype.recvIceCandidate=function(E){var k={candidate:E.candidate,sdpMLineIndex:E.sdpMLineIndex,sdpMid:E.sdpMid},B=new RTCIceCandidate(k);this.getConnection(E.senderConnectionId,"Connection not found for connectionId "+E.senderConnectionId+" owning endpoint "+E.endpointName+". Ice candidate will be ignored: "+B).then(function(A){var R=A.stream;R.getWebRtcPeer().addIceCandidate(B).catch(function(x){y.error("Error adding candidate for "+R.streamId+" stream of endpoint "+E.endpointName+": "+x)})}).catch(function(A){y.error(A)})},N.prototype.onSessionClosed=function(E){y.info("Session closed: "+JSON.stringify(E));var k=E.sessionId;k!==void 0?this.ee.emitEvent("session-closed",[{session:k}]):y.warn("Session undefined on session closed",E)},N.prototype.onLostConnection=function(E){y.warn("Lost connection in Session "+this.sessionId),this.sessionId&&this.connection&&!this.connection.disposed&&this.leave(!0,E)},N.prototype.onRecoveredConnection=function(){y.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},N.prototype.onMediaError=function(E){y.error("Media error: "+JSON.stringify(E));var k=E.error;k?this.ee.emitEvent("error-media",[{error:k}]):y.warn("Received undefined media error:",E)},N.prototype.onRecordingStarted=function(E){this.ee.emitEvent("recordingStarted",[new l.RecordingEvent(this,"recordingStarted",E.id,E.name)])},N.prototype.onRecordingStopped=function(E){this.ee.emitEvent("recordingStopped",[new l.RecordingEvent(this,"recordingStopped",E.id,E.name,E.reason)])},N.prototype.onBroadcastStarted=function(){this.ee.emitEvent("broadcastStarted",[])},N.prototype.onBroadcastStopped=function(){this.ee.emitEvent("broadcastStopped",[])},N.prototype.onFilterEventDispatched=function(E){var k=this,B=E.connectionId;this.getConnection(B,"No connection found for connectionId "+B).then(function(A){y.info('Filter event of type "'.concat(E.eventType,'" dispatched'));var R=A.stream;if(!R||!R.filter)return y.error('Filter event of type "'.concat(E.eventType,'" dispatched for stream ').concat(R.streamId," but there is no ").concat(R?"filter":"stream"," defined"));var x=R.filter.handlers.get(E.eventType);if(!x||typeof x!="function"){var F=Array.from(R.filter.handlers.keys());return y.error('Filter event of type "'.concat(E.eventType,'" not handled or not a function! Active filter events: ').concat(F.join(",")))}else x.call(k,new c.FilterEvent(R.filter,E.eventType,E.data))})},N.prototype.onForciblyReconnectSubscriber=function(E){var k=this;return new Promise(function(B,A){k.getRemoteConnection(E.connectionId,"onForciblyReconnectSubscriber").then(function(R){if(R.stream&&R.stream.streamId===E.streamId){var x=R.stream;if(x.setupReconnectionEventEmitter(B,A)){if(x.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent!=null)return x.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=E,A("Ongoing forced subscriber reconnection");x.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent=E;var F=function(){var G=x.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent;delete x.reconnectionEventEmitter.onForciblyReconnectSubscriberLastEvent,k.onForciblyReconnectSubscriber(G)};x.reconnectionEventEmitter.once("success",function(){F()}),x.reconnectionEventEmitter.once("error",function(){F()});return}x.completeWebRtcPeerReceive(!0,!0,E.sdpOffer).then(function(){return x.finalResolveForSubscription(!0,B)}).catch(function(G){return x.finalRejectForSubscription(!0,"Error while forcibly reconnecting remote stream ".concat(E.streamId,": ").concat(G.toString()),A)})}else{var j="No stream with streamId '"+E.streamId+"' found for connection '"+E.connectionId+"' on 'streamPropertyChanged' event";return y.error(j),A(j)}}).catch(function(R){return y.error(R),A(R)})})},N.prototype.reconnectBrokenStreams=function(){y.info("Re-establishing media connections...");var E=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),E=!0),this.remoteConnections.forEach(function(k){k.stream&&k.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Subscriber "+k.stream.streamId),k.stream.initWebRtcPeerReceive(!0),E=!0)}),E||y.info("There were no media streams in need of a reconnection")},N.prototype.onSpeechToTextMessage=function(E){return t(this,void 0,void 0,function(){var k,B;return n(this,function(A){switch(A.label){case 0:return[4,this.getConnection(E.connectionId,"No connection found for connectionId "+E.connectionId)];case 1:return k=A.sent(),B=new g.SpeechToTextEvent(this,k,E.text,E.reason.toLowerCase(),E.raw,E.lang),this.ee.emitEvent("speechToTextMessage",[B]),[2]}})})},N.prototype.onSpeechToTextDisconnected=function(E){return t(this,void 0,void 0,function(){return n(this,function(k){return this.emitEvent("exception",[new P.ExceptionEvent(this,P.ExceptionEventName.SPEECH_TO_TEXT_DISCONNECTED,this,E.message)]),[2]})})},N.prototype.emitEvent=function(E,k){this.ee.emitEvent(E,k)},N.prototype.leave=function(E,k){var B=this;if(E=!!E,y.info("Leaving Session (forced="+E+")"),this.stopVideoDataIntervals(),this.connection){if(!this.connection.disposed&&!E?this.openvidu.sendRequest("leaveRoom",function(R,x){R&&y.error("leaveRoom error: ".concat(JSON.stringify(R))),B.openvidu.closeWs()}):this.openvidu.closeWs(),this.stopPublisherStream(k),!this.connection.disposed){var A=new u.SessionDisconnectedEvent(this,k);this.ee.emitEvent("sessionDisconnected",[A]),A.callDefaultBehavior()}}else y.warn("You were not connected to the session "+this.sessionId);y.flush()},N.prototype.initializeParams=function(E){var k={token:E||"",session:this.sessionId,platform:C.getDescription()?C.getDescription():"unknown",sdkVersion:this.openvidu.libraryVersion,metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder(),stt:this.openvidu.getStt()};return k},N.prototype.sendVideoData=function(E,k,B,A){var R=this,x,F;if(k===void 0&&(k=1),B===void 0&&(B=!1),A===void 0&&(A=1),C.isChromeBrowser()||C.isChromeMobileBrowser()||C.isOperaBrowser()||C.isOperaMobileBrowser()||C.isEdgeBrowser()||C.isEdgeMobileBrowser()||C.isElectron()||C.isSafariBrowser()&&!C.isIonicIos()||C.isAndroidBrowser()||C.isSamsungBrowser()||C.isIonicAndroid()||C.isIOSWithSafari()){var j=function(){return t(R,void 0,void 0,function(){var Y,ce,re;return n(this,function(oe){switch(oe.label){case 0:return Y=E.stream.getRTCPeerConnection(),Y.connectionState!=="connected"?[3,2]:[4,Y.getStats()];case 1:ce=oe.sent(),re=[],ce.forEach(function(L){"frameWidth"in L&&"frameHeight"in L&&re.length===0&&re.push(L)}),re.length>0&&this.openvidu.sendRequest("videoData",{height:re[0].frameHeight,width:re[0].frameWidth,videoActive:E.stream.videoActive!=null?E.stream.videoActive:!1,audioActive:E.stream.audioActive!=null?E.stream.audioActive:!1},function(L,U){L&&y.error("Error sending 'videoData' event",L)}),oe.label=2;case 2:return[2]}})})};if(B){var G=1;this.videoDataInterval=setInterval(function(){G<A?(G++,j()):clearInterval(R.videoDataInterval)},k*1e3)}else this.videoDataTimeout=setTimeout(j,k*1e3)}else C.isFirefoxBrowser()||C.isFirefoxMobileBrowser()||C.isIonicIos()||C.isReactNative()?this.openvidu.sendRequest("videoData",{height:((x=E.stream.videoDimensions)===null||x===void 0?void 0:x.height)||0,width:((F=E.stream.videoDimensions)===null||F===void 0?void 0:F.width)||0,videoActive:E.stream.videoActive!=null?E.stream.videoActive:!1,audioActive:E.stream.audioActive!=null?E.stream.audioActive:!1},function(Y,ce){Y&&y.error("Error sending 'videoData' event",Y)}):y.error("Browser "+C.getName()+" (version "+C.getVersion()+") for "+C.getFamily()+" is not supported in OpenVidu for Network Quality")},N.prototype.sessionConnected=function(){return this.connection!=null},N.prototype.notConnectedError=function(){return new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_NOT_CONNECTED,"There is no connection to the session. Method 'Session.connect' must be successfully completed first")},N.prototype.anySpeechEventListenerEnabled=function(E,k,B){var A=this.ee.getListeners(E);k&&(A=A.filter(function(j){return j.once}));var R=A.length;if(R>0)return!0;var x=0;if(B){var F=B.ee.getListeners(E);k&&(F=F.filter(function(j){return j.once})),x=F.length}return x>0},N.prototype.getTokenParams=function(E){var k=E.match(/^(wss?)\:\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(k){var B={protocol:k[1],host:k[2],hostname:k[3],port:k[4],pathname:k[5],search:k[6],hash:k[7]},A=E.split("?"),R=decodeURI(A[1]).split("&").map(function(x){return x.split("=")}).reduce(function(x,F){var j=F[0],G=F[1];return x[j]=G,x},{});return{sessionId:R.sessionId,secret:R.secret,recorder:R.recorder,stt:R.stt,webrtcStatsInterval:R.webrtcStatsInterval,sendBrowserLogs:R.sendBrowserLogs,edition:R.edition,wsUri:B.protocol+"://"+B.host+"/openvidu",httpUri:"https://"+B.host}}else throw new Error('Token not valid: "'.concat(E,'"'))},N.prototype.connectAux=function(E){var k=this;return new Promise(function(B,A){k.openvidu.startWs(function(R){if(R)return A(R);var x=k.initializeParams(E);k.openvidu.sendRequest("joinRoom",x,function(F,j){if(F)return A(F);k.processJoinRoomResponse(j,E),k.connection=new r.Connection(k,j);var G={connections:new Array,streams:new Array},Y=j.value;return Y.forEach(function(ce){var re=new r.Connection(k,ce);k.remoteConnections.set(re.connectionId,re),G.connections.push(re),re.stream&&(k.remoteStreamsCreated.set(re.stream.streamId,!0),G.streams.push(re.stream))}),k.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,k,"connectionCreated",k.connection,"")]),G.connections.forEach(function(ce){k.ee.emitEvent("connectionCreated",[new a.ConnectionEvent(!1,k,"connectionCreated",ce,"")])}),G.streams.forEach(function(ce){k.ee.emitEvent("streamCreated",[new f.StreamEvent(!1,k,"streamCreated",ce,"")])}),j.recordingId&&j.recordingName&&k.ee.emitEvent("recordingStarted",[new l.RecordingEvent(k,"recordingStarted",j.recordingId,j.recordingName)]),B()})})})},N.prototype.stopPublisherStream=function(E){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[E]))},N.prototype.stopVideoDataIntervals=function(){clearInterval(this.videoDataInterval),clearTimeout(this.videoDataTimeout)},N.prototype.stringClientMetadata=function(E){return typeof E!="string"?JSON.stringify(E):E},N.prototype.getConnection=function(E,k){var B=this;return new Promise(function(A,R){var x=B.remoteConnections.get(E);return x?A(x):B.connection.connectionId===E?A(B.connection):R(new h.OpenViduError(h.OpenViduErrorName.GENERIC_ERROR,k))})},N.prototype.getRemoteConnection=function(E,k){var B=this;return new Promise(function(A,R){var x=B.remoteConnections.get(E);if(x)return A(x);var F="Remote connection "+E+" unknown when '"+k+"'. Existing remote connections: "+JSON.stringify(B.remoteConnections.keys());return R(new h.OpenViduError(h.OpenViduErrorName.GENERIC_ERROR,F))})},N.prototype.processToken=function(E){var k=this.getTokenParams(E);this.sessionId=k.sessionId,k.secret&&(this.openvidu.secret=k.secret),k.recorder&&(this.openvidu.recorder=!0),k.stt&&(this.openvidu.stt=!0),k.webrtcStatsInterval&&(this.openvidu.webrtcStatsInterval=k.webrtcStatsInterval),k.sendBrowserLogs&&(this.openvidu.sendBrowserLogs=k.sendBrowserLogs),this.openvidu.isAtLeastPro=k.edition==="pro"||k.edition==="enterprise",this.openvidu.isEnterprise=k.edition==="enterprise",this.openvidu.wsUri=k.wsUri,this.openvidu.httpUri=k.httpUri},N.prototype.processJoinRoomResponse=function(E,k){if(this.sessionId=E.session,E.customIceServers!=null&&E.customIceServers.length>0){this.openvidu.iceServers=[];for(var B=0,A=E.customIceServers;B<A.length;B++){var R=A[B],x={urls:[R.url]};y.log("STUN/TURN server IP: "+R.url),R.username!=null&&R.credential!=null&&(x.username=R.username,x.credential=R.credential,y.log("TURN credentials ["+R.username+":"+R.credential+"]")),this.openvidu.iceServers.push(x)}}this.openvidu.role=E.role,this.openvidu.finalUserId=E.finalUserId,this.openvidu.mediaServer=E.mediaServer,this.openvidu.videoSimulcast=E.videoSimulcast,this.capabilities={subscribe:!0,publish:this.openvidu.role!=="SUBSCRIBER",forceUnpublish:this.openvidu.role==="MODERATOR",forceDisconnect:this.openvidu.role==="MODERATOR"},y.info("openvidu-server version: "+E.version),E.life!=null&&(this.openvidu.life=E.life);var F=w(E.version)-w(this.openvidu.libraryVersion);p(E.version)!==p(this.openvidu.libraryVersion)||!(F==0||F==1)?y.error("openvidu-browser (".concat(this.openvidu.libraryVersion,") and openvidu-server (").concat(E.version,") versions are incompatible. ")+"Errors are likely to occur. openvidu-browser SDK is only compatible with the same version or the immediately following minor version of an OpenVidu deployment"):F==1&&y.warn("openvidu-browser version ".concat(this.openvidu.libraryVersion," does not match openvidu-server version ").concat(E.version,". ")+"These versions are still compatible with each other, but openvidu-browser version must be updated as soon as possible to ".concat(p(E.version),".").concat(w(E.version),".x. ")+"This client using openvidu-browser ".concat(this.openvidu.libraryVersion," will become incompatible with the next release of openvidu-server")),O.OpenViduLogger.configureJSNLog(this.openvidu,k),this.token=k},N}(o.EventDispatcher);return Kt.Session=T,Kt}var yu;function Da(){if(yu)return zt;yu=1;var e=zt.__extends||function(){var b=function(v,h){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&(I[S]=O[S])},b(v,h)};return function(v,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");b(v,h);function I(){this.constructor=v}v.prototype=h===null?Object.create(h):(I.prototype=h.prototype,new I)}}(),t=zt.__awaiter||function(b,v,h,I){function O(S){return S instanceof h?S:new h(function(p){p(S)})}return new(h||(h=Promise))(function(S,p){function w(C){try{y(I.next(C))}catch(T){p(T)}}function P(C){try{y(I.throw(C))}catch(T){p(T)}}function y(C){C.done?S(C.value):O(C.value).then(w,P)}y((I=I.apply(b,v||[])).next())})},n=zt.__generator||function(b,v){var h={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},I,O,S,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(C){return P([y,C])}}function P(y){if(I)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(h=0)),h;)try{if(I=1,O&&(S=y[0]&2?O.return:y[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,y[1])).done)return S;switch(O=0,S&&(y=[y[0]&2,S.value]),y[0]){case 0:case 1:S=y;break;case 4:return h.label++,{value:y[1],done:!1};case 5:h.label++,O=y[1],y=[0];continue;case 7:y=h.ops.pop(),h.trys.pop();continue;default:if(S=h.trys,!(S=S.length>0&&S[S.length-1])&&(y[0]===6||y[0]===2)){h=0;continue}if(y[0]===3&&(!S||y[1]>S[0]&&y[1]<S[3])){h.label=y[1];break}if(y[0]===6&&h.label<S[1]){h.label=S[1],S=y;break}if(S&&h.label<S[2]){h.label=S[2],h.ops.push(y);break}S[2]&&h.ops.pop(),h.trys.pop();continue}y=v.call(b,h)}catch(C){y=[6,C],O=0}finally{I=S=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.Publisher=void 0;var r=Ms(),i=Na(),s=xa(),o=La(),a=pr(),c=hr(),l=Qe(),u=un(),d=Aa(),g=l.OpenViduLogger.getInstance(),f,_=function(b){e(v,b);function v(h,I,O){var S=b.call(this,new i.Stream(O.session?O.session:new r.Session(O),{publisherProperties:I,mediaConstraints:{}}),h)||this;return S.accessAllowed=!1,S.isSubscribedToRemote=!1,S.accessDenied=!1,f=u.PlatformUtils.getInstance(),S.properties=I,S.openvidu=O,S.stream.ee.on("local-stream-destroyed",function(p){S.stream.isLocalStreamPublished=!1;var w=new o.StreamEvent(!0,S,"streamDestroyed",S.stream,p);S.emitEvent("streamDestroyed",[w]),w.callDefaultBehavior()}),S}return v.prototype.publishAudio=function(h){var I=this;if(this.stream.audioActive!==h){var O=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream();O.getAudioTracks().forEach(function(S){S.enabled=h}),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:h,reason:"publishAudio"},function(S,p){S?g.error("Error sending 'streamPropertyChanged' event",S):(I.session.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(I.session,I.stream,"audioActive",h,!h,"publishAudio")]),I.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(I,I.stream,"audioActive",h,!h,"publishAudio")]),I.session.sendVideoData(I.stream.streamManager))}),this.stream.audioActive=h,g.info("'Publisher' has "+(h?"published":"unpublished")+" its audio stream")}},v.prototype.publishVideo=function(h,I){var O=this;return new Promise(function(S,p){return t(O,void 0,void 0,function(){var w,P,y,C,T,M,N=this;return n(this,function(E){switch(E.label){case 0:return this.stream.videoActive===h?[3,9]:(w=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),P=!1,w.getVideoTracks().forEach(function(k){k.enabled=h,!h&&I===!0?k.stop():h&&k.readyState==="ended"&&(P=!0)}),!h&&I===!0&&this.stream.filter&&this.stream.filter.type.startsWith("VB:")?(this.stream.lastVBFilter=this.stream.filter,[4,this.stream.removeFilterAux(!0)]):[3,2]);case 1:E.sent(),E.label=2;case 2:return P?(y=w.getVideoTracks()[0],w.removeTrack(y),C=function(k){return t(N,void 0,void 0,function(){var B=this;return n(this,function(A){switch(A.label){case 0:return w.addTrack(k),this.stream.isLocalStreamPublished?[4,this.replaceTrackInRtcRtpSender(k)]:[3,2];case 1:A.sent(),A.label=2;case 2:return this.stream.lastVBFilter&&setTimeout(function(){return t(B,void 0,void 0,function(){var R,x;return n(this,function(F){switch(F.label){case 0:return R=this.stream.lastVBFilter.options,x=this.stream.lastVBFilter.lastExecMethod,x&&x.method==="update"&&(R=Object.assign({},R,x.params)),[4,this.stream.applyFilter(this.stream.lastVBFilter.type,R)];case 1:return F.sent(),delete this.stream.lastVBFilter,[2]}})})},1),[2]}})})},I&&I instanceof MediaStreamTrack?[4,C(I)]:[3,4]):[3,8];case 3:return E.sent(),[3,8];case 4:return E.trys.push([4,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:this.stream.lastVideoTrackConstraints})];case 5:return T=E.sent(),[4,C(T.getVideoTracks()[0])];case 6:return E.sent(),[3,8];case 7:return M=E.sent(),[2,p(M)];case 8:return this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:h,reason:"publishVideo"},function(k,B){k?g.error("Error sending 'streamPropertyChanged' event",k):(N.session.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(N.session,N.stream,"videoActive",h,!h,"publishVideo")]),N.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(N,N.stream,"videoActive",h,!h,"publishVideo")]),N.session.sendVideoData(N.stream.streamManager))}),this.stream.videoActive=h,g.info("'Publisher' has "+(h?"published":"unpublished")+" its video stream"),[2,S()];case 9:return[2]}})})})},v.prototype.subscribeToRemote=function(h){h=h!==void 0?h:!0,this.isSubscribedToRemote=h,this.stream.subscribeToMyRemote(h)},v.prototype.on=function(h,I){var O=this;return b.prototype.on.call(this,h,I),h==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new o.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",function(){O.emitEvent("streamCreated",[new o.StreamEvent(!1,O,"streamCreated",O.stream,"")])})),h==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),h==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},v.prototype.once=function(h,I){var O=this;return b.prototype.once.call(this,h,I),h==="streamCreated"&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new o.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",function(){O.emitEvent("streamCreated",[new o.StreamEvent(!1,O,"streamCreated",O.stream,"")])})),h==="accessAllowed"&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),h==="accessDenied"&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},v.prototype.off=function(h,I){return b.prototype.off.call(this,h,I),this},v.prototype.replaceTrack=function(h){return t(this,void 0,void 0,function(){return n(this,function(I){return[2,this.replaceTrackAux(h,!0)]})})},v.prototype.initialize=function(){var h=this;return new Promise(function(I,O){return t(h,void 0,void 0,function(){var S,p,w,P,y,C,T,M,N,E,k,B,B,A,R,x=this,F,j;return n(this,function(G){switch(G.label){case 0:S={},p={},w=2e3,y=function(Y){return x.accessDenied=!0,x.accessAllowed=!1,g.error("Publisher initialization failed. ".concat(Y.name,": ").concat(Y.message)),O(Y)},C=function(Y){var ce,re;if(x.accessAllowed=!0,x.accessDenied=!1,typeof MediaStreamTrack<"u"&&x.properties.audioSource instanceof MediaStreamTrack&&(Y.removeTrack(Y.getAudioTracks()[0]),Y.addTrack(x.properties.audioSource)),typeof MediaStreamTrack<"u"&&x.properties.videoSource instanceof MediaStreamTrack&&(Y.removeTrack(Y.getVideoTracks()[0]),Y.addTrack(x.properties.videoSource)),Y.getAudioTracks()[0]){var oe=x.stream.audioActive!==void 0&&x.stream.audioActive!==null?x.stream.audioActive:!!x.stream.outboundStreamOpts.publisherProperties.publishAudio;Y.getAudioTracks()[0].enabled=oe}if(Y.getVideoTracks()[0]){var oe=x.stream.videoActive!==void 0&&x.stream.videoActive!==null?x.stream.videoActive:!!x.stream.outboundStreamOpts.publisherProperties.publishVideo;Y.getVideoTracks()[0].enabled=oe}for(var L=0,U=Y.getAudioTracks();L<U.length;L++){var J=U[L];!((ce=J.contentHint)===null||ce===void 0)&&ce.length||(J.contentHint="",g.info("Audio track Content Hint set: '".concat(J.contentHint,"'")))}for(var ne=0,ie=Y.getVideoTracks();ne<ie.length;ne++){var J=ie[ne];if(!(!((re=J.contentHint)===null||re===void 0)&&re.length)){switch(x.stream.typeOfVideo){case d.TypeOfVideo.SCREEN:J.contentHint="detail";break;case d.TypeOfVideo.CUSTOM:g.warn("CUSTOM type video track was provided without Content Hint!"),J.contentHint="motion";break;case d.TypeOfVideo.CAMERA:case d.TypeOfVideo.IPCAM:default:J.contentHint="motion";break}g.info("Video track Content Hint set: '".concat(J.contentHint,"'"))}}return x.initializeVideoReference(Y),x.stream.displayMyRemote()||x.stream.updateMediaStreamInVideos(),delete x.firstVideoElement,x.stream.isSendVideo()?x.getVideoDimensions().then(function(te){x.stream.videoDimensions={width:te.width,height:te.height},x.stream.isSendScreen()&&(x.stream.isSendAudio()&&Y.getAudioTracks().length===0&&(x.stream.audioActive=!1,x.stream.hasAudio=!1,x.stream.outboundStreamOpts.publisherProperties.publishAudio=!1,x.stream.outboundStreamOpts.publisherProperties.audioSource=!1),x.screenShareResizeInterval=setInterval(function(){var V=Y.getVideoTracks()[0].getSettings(),D=V.width,$=V.height,z=D!=null&&D!==x.stream.videoDimensions.width,Q=$!=null&&$!==x.stream.videoDimensions.height;x.stream.isLocalStreamPublished&&(z||Q)&&x.openvidu.sendVideoDimensionsChangedEvent(x,"screenResized",x.stream.videoDimensions.width,x.stream.videoDimensions.height,D||0,$||0)},650)),x.stream.isLocalStreamReadyToPublish=!0,x.stream.ee.emitEvent("stream-ready-to-publish",[])}):(x.stream.isLocalStreamReadyToPublish=!0,x.stream.ee.emitEvent("stream-ready-to-publish",[])),I()},T=function(Y,ce){return t(x,void 0,void 0,function(){var re,oe;return n(this,function(L){switch(L.label){case 0:if(this.clearPermissionDialogTimer(P,w),!(this.stream.isSendScreen()&&this.properties.audioSource!=="screen"&&this.stream.isSendAudio()))return[3,5];p.audio=ce,p.video=!1,P=Date.now(),this.setPermissionDialogTimer(w),L.label=1;case 1:return L.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(p)];case 2:return re=L.sent(),this.clearPermissionDialogTimer(P,w),Y.addTrack(re.getAudioTracks()[0]),C(Y),[3,4];case 3:return oe=L.sent(),this.clearPermissionDialogTimer(P,w),Y.getAudioTracks().forEach(function(U){U.stop()}),Y.getVideoTracks().forEach(function(U){U.stop()}),y(this.openvidu.generateAudioDeviceError(oe,S)),[2];case 4:return[3,6];case 5:C(Y),L.label=6;case 6:return[2]}})})},M=function(Y){return t(x,void 0,void 0,function(){var ce,re,oe,U,L,U,J;return n(this,function(ne){switch(ne.label){case 0:switch(g.error("getMediaError: ".concat(Y.toString())),this.clearPermissionDialogTimer(P,w),Y.name==="Error"&&(Y.name=Y.constructor.name),oe=Y.name.toLowerCase(),oe){case"notfounderror":return[3,1];case"notallowederror":return[3,5];case"overconstrainederror":return[3,6];case"aborterror":return[3,10];case"notreadableerror":return[3,10]}return[3,11];case 1:return ne.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:S.video})];case 2:return U=ne.sent(),U.getVideoTracks().forEach(function(ie){ie.stop()}),ce=c.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,re=Y.toString(),y(new c.OpenViduError(ce,re)),[3,4];case 3:return L=ne.sent(),ce=c.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,re=L.toString(),y(new c.OpenViduError(ce,re)),[3,4];case 4:return[3,12];case 5:return ce=this.stream.isSendScreen()?c.OpenViduErrorName.SCREEN_CAPTURE_DENIED:c.OpenViduErrorName.DEVICE_ACCESS_DENIED,re=Y.toString(),y(new c.OpenViduError(ce,re)),[3,12];case 6:return ne.trys.push([6,8,,9]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:S.video})];case 7:return U=ne.sent(),U.getVideoTracks().forEach(function(ie){ie.stop()}),Y.constraint.toLowerCase()==="deviceid"?(ce=c.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,re="Audio input device with deviceId '"+S.audio.deviceId.exact+"' not found"):(ce=c.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,re="Audio input device doesn't support the value passed for constraint '"+Y.constraint+"'"),y(new c.OpenViduError(ce,re)),[3,9];case 8:return J=ne.sent(),J.constraint.toLowerCase()==="deviceid"?(ce=c.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,re="Video input device with deviceId '"+S.video.deviceId.exact+"' not found"):(ce=c.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,re="Video input device doesn't support the value passed for constraint '"+J.constraint+"'"),y(new c.OpenViduError(ce,re)),[3,9];case 9:return[3,12];case 10:return ce=c.OpenViduErrorName.DEVICE_ALREADY_IN_USE,re=Y.toString(),y(new c.OpenViduError(ce,re)),[3,12];case 11:return ce=c.OpenViduErrorName.GENERIC_ERROR,re=Y.toString(),y(new c.OpenViduError(ce,re)),[3,12];case 12:return[2]}})})},G.label=1;case 1:return G.trys.push([1,14,,15]),[4,this.openvidu.generateMediaConstraints(this.properties)];case 2:return N=G.sent(),N.videoTrack&&N.audioTrack||N.audioTrack&&((F=N.constraints)===null||F===void 0?void 0:F.video)===!1||N.videoTrack&&((j=N.constraints)===null||j===void 0?void 0:j.audio)===!1?(C(this.openvidu.addAlreadyProvidedTracks(N,new MediaStream,this.stream)),[3,13]):[3,3];case 3:S=N.constraints,E={mediaConstraints:S,publisherProperties:this.properties},this.stream.setOutboundStreamOptions(E),k=S.audio===void 0?!0:S.audio,p.audio=this.stream.isSendScreen()?!1:k,p.video=S.video,P=Date.now(),this.setPermissionDialogTimer(w),G.label=4;case 4:return G.trys.push([4,11,,13]),this.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&!f.isElectron()?[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:this.properties.audioSource==="screen"})]:[3,7];case 5:return B=G.sent(),this.openvidu.addAlreadyProvidedTracks(N,B),[4,T(B,k)];case 6:return G.sent(),[3,10];case 7:return this.stream.lastVideoTrackConstraints=p.video,[4,navigator.mediaDevices.getUserMedia(p)];case 8:return B=G.sent(),this.openvidu.addAlreadyProvidedTracks(N,B,this.stream),[4,T(B,k)];case 9:G.sent(),G.label=10;case 10:return[3,13];case 11:return A=G.sent(),[4,M(A)];case 12:return G.sent(),[3,13];case 13:return[3,15];case 14:return R=G.sent(),y(R),[3,15];case 15:return[2]}})})})},v.prototype.replaceTrackAux=function(h,I){return t(this,void 0,void 0,function(){var O,S;return n(this,function(p){switch(p.label){case 0:O=h.enabled,h.kind==="video"?h.enabled=this.stream.videoActive:h.kind==="audio"&&(h.enabled=this.stream.audioActive),p.label=1;case 1:return p.trys.push([1,5,,6]),this.stream.isLocalStreamPublished?(this.replaceTrackInMediaStream(h,I),[4,this.replaceTrackInRtcRtpSender(h)]):[3,3];case 2:return[2,p.sent()];case 3:return[2,this.replaceTrackInMediaStream(h,I)];case 4:return[3,6];case 5:throw S=p.sent(),h.enabled=O,S;case 6:return[2]}})})},v.prototype.getVideoDimensions=function(){var h=this;return new Promise(function(I,O){var S=(f.isIonicIos()||f.isIOSWithSafari())&&h.videoReference.readyState<1,p,w=function(){var P,y;if(typeof h.stream.getMediaStream().getVideoTracks()[0].getSettings=="function"){var C=h.stream.getMediaStream().getVideoTracks()[0].getSettings();P=C.width||h.videoReference.videoWidth,y=C.height||h.videoReference.videoHeight}else g.warn("MediaStreamTrack does not have getSettings method on "+f.getDescription()),P=h.videoReference.videoWidth,y=h.videoReference.videoHeight;return p!=null&&h.videoReference.removeEventListener("loadedmetadata",p),S&&document.body.removeChild(h.videoReference),I({width:P,height:y})};h.videoReference.readyState>=1?w():(p=function(){if(h.videoReference.videoWidth)w();else var P=setInterval(function(){h.videoReference.videoWidth&&(clearInterval(P),w())},40)},h.videoReference.addEventListener("loadedmetadata",p),S&&document.body.appendChild(h.videoReference))})},v.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},v.prototype.initializeVideoReference=function(h){this.videoReference=document.createElement("video"),this.videoReference.style.display="none",this.videoReference.muted=!0,this.videoReference.autoplay=!0,this.videoReference.controls=!1,(f.isSafariBrowser()||f.isIPhoneOrIPad()&&(f.isChromeMobileBrowser()||f.isEdgeMobileBrowser()||f.isOperaMobileBrowser()||f.isFirefoxMobileBrowser()))&&(this.videoReference.playsInline=!0),this.stream.setMediaStream(h),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=this.stream.getMediaStream()},v.prototype.replaceTrackInMediaStream=function(h,I){var O=this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream(),S;h.kind==="video"?(S=O.getVideoTracks()[0],I&&(this.stream.lastVideoTrackConstraints=h.getConstraints())):S=O.getAudioTracks()[0],S.enabled=!1,S.stop(),O.removeTrack(S),O.addTrack(h);var p={oldLabel:(S==null?void 0:S.label)||"",newLabel:(h==null?void 0:h.label)||""};h.kind==="video"&&I?(this.openvidu.sendNewVideoDimensionsIfRequired(this,"trackReplaced",50,30),this.openvidu.sendTrackChangedEvent(this,p.oldLabel,p.newLabel,"videoTrack"),this.stream.isLocalStreamPublished&&this.session.sendVideoData(this.stream.streamManager,5,!0,5)):h.kind==="audio"&&I&&this.openvidu.sendTrackChangedEvent(this,p.oldLabel,p.newLabel,"audioTrack"),h.kind==="audio"&&(this.stream.disableHarkSpeakingEvent(!1),this.stream.disableHarkStoppedSpeakingEvent(!1),this.stream.disableHarkVolumeChangeEvent(!1),this.stream.initHarkEvents())},v.prototype.setPermissionDialogTimer=function(h){var I=this;this.permissionDialogTimeout=setTimeout(function(){I.emitEvent("accessDialogOpened",[])},h)},v.prototype.clearPermissionDialogTimer=function(h,I){clearTimeout(this.permissionDialogTimeout),Date.now()-h>I&&this.emitEvent("accessDialogClosed",[])},v.prototype.replaceTrackInRtcRtpSender=function(h){return t(this,void 0,void 0,function(){var I,O;return n(this,function(S){switch(S.label){case 0:if(I=this.stream.getRTCPeerConnection().getSenders(),h.kind==="video"){if(O=I.find(function(p){return!!p.track&&p.track.kind==="video"}),!O)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else if(h.kind==="audio"){if(O=I.find(function(p){return!!p.track&&p.track.kind==="audio"}),!O)throw new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")}else throw new Error("Unknown track kind "+h.kind);return[4,O.replaceTrack(h)];case 1:return S.sent(),[2]}})})},v}(s.StreamManager);return zt.Publisher=_,zt}var wo={},Eu;function hC(){if(Eu)return wo;Eu=1,globalThis.getScreenId=function(s,o,a){if(navigator.userAgent.indexOf("Edge")!==-1&&(navigator.msSaveOrOpenBlob||navigator.msSaveBlob)){o({video:!0});return}if(navigator.mozGetUserMedia){o(null,"firefox",{video:{mozMediaSource:s,mediaSource:s}});return}globalThis.addEventListener("message",c);function c(l){l.data&&(l.data.chromeMediaSourceId&&(l.data.chromeMediaSourceId==="PermissionDeniedError"?o("permission-denied"):o(null,l.data.chromeMediaSourceId,e(null,l.data.chromeMediaSourceId,l.data.canRequestAudioTrack)),globalThis.removeEventListener("message",c)),l.data.chromeExtensionStatus&&(o(l.data.chromeExtensionStatus,null,e(l.data.chromeExtensionStatus)),globalThis.removeEventListener("message",c)))}setTimeout(a?function(){t(a)}:t,100)};function e(s,o,a){var c={audio:!1,video:{mandatory:{chromeMediaSource:s?"screen":"desktop",maxWidth:globalThis.screen.width>1920?globalThis.screen.width:1920,maxHeight:globalThis.screen.height>1080?globalThis.screen.height:1080},optional:[]}};return a&&(c.audio={mandatory:{chromeMediaSource:s?"screen":"desktop"},optional:[]}),o&&(c.video.mandatory.chromeMediaSourceId=o,c.audio&&c.audio.mandatory&&(c.audio.mandatory.chromeMediaSourceId=o)),c}function t(s){if(!n){r(function(){t(s)});return}if(!n.isLoaded){setTimeout(function(){t(s)},100);return}s?s.forEach?n.contentWindow.postMessage({captureCustomSourceId:s},"*"):n.contentWindow.postMessage({captureSourceIdWithAudio:!0},"*"):n.contentWindow.postMessage({captureSourceId:!0},"*")}var n;globalThis.getScreenConstraints=function(s){r(function(){getScreenId(function(o,a,c){c||(c={video:!0}),s(o,c.video)})})};function r(s){if(n){s();return}n=document.createElement("iframe"),n.onload=function(){n.isLoaded=!0,s()},n.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",n.style.display="none",(document.body||document.documentElement).appendChild(n)}globalThis.getChromeExtensionStatus=function(s){if(navigator.mozGetUserMedia){s("installed-enabled");return}globalThis.addEventListener("message",o);function o(a){a.data&&a.data.chromeExtensionStatus&&(s(a.data.chromeExtensionStatus),globalThis.removeEventListener("message",o))}setTimeout(i,100)};function i(){if(!n){r(i);return}if(!n.isLoaded){setTimeout(i,100);return}n.contentWindow.postMessage({getChromeExtensionStatus:!0},"*")}return wo.getScreenId=globalThis.getScreenId,wo}var gn={},_u;function mC(){if(_u)return gn;_u=1;var e="screen",t,n;if(typeof window<"u"&&typeof navigator<"u"&&typeof navigator.userAgent<"u"){var r=typeof window.InstallTrigger<"u";window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.addEventListener("message",function(d){d.origin==window.location.origin&&i(d.data)})}function i(d){if(d=="PermissionDeniedError"){if(n)return n("PermissionDeniedError");throw new Error("PermissionDeniedError")}d=="rtcmulticonnection-extension-loaded"&&(e="desktop"),d.sourceId&&n&&n(t=d.sourceId,d.canRequestAudioTrack===!0)}function s(d){if(d){if(e=="desktop")return d(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e=="screen"?d(!1):d(!0)},2e3)}}function o(d){if(!d)throw'"callback" parameter is mandatory.';if(t)return d(t);n=d,window.postMessage("get-sourceId","*")}function a(d){if(!d)throw'"callback" parameter is mandatory.';if(t)return d(t);n=d,window.postMessage("audio-plus-tab","*")}function c(d,g){if(r)return g("not-chrome");arguments.length!=2&&(g=d,d="lfcgfepafnobdloecchnfaclibenjold");var f=document.createElement("img");f.src="chrome-extension://"+d+"/icon.png",f.onload=function(){e="screen",window.postMessage("are-you-there","*"),setTimeout(function(){e=="screen"?g("installed-disabled"):g("installed-enabled")},2e3)},f.onerror=function(){g("not-installed")}}function l(d){u(d,!0)}function u(d,g){t="";var f={mozMediaSource:"window",mediaSource:"window"};if(r)return d(null,f);var _={mandatory:{chromeMediaSource:e,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};if(e=="desktop"&&!t){g?a(function(b,v){_.mandatory.chromeMediaSourceId=b,v&&(_.canRequestAudioTrack=!0),d(b=="PermissionDeniedError"?b:null,_)}):o(function(b){_.mandatory.chromeMediaSourceId=b,d(b=="PermissionDeniedError"?b:null,_)});return}e=="desktop"&&(_.mandatory.chromeMediaSourceId=t),d(null,_)}return gn.getScreenConstraints=u,gn.getScreenConstraintsWithAudio=l,gn.isChromeExtensionAvailable=s,gn.getChromeExtensionStatus=c,gn.getSourceId=o,gn}var Pi={exports:{}},Su;function vC(){if(Su)return Pi.exports;Su=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(p,w,P){return Function.prototype.apply.call(p,w,P)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:n=function(p){return Object.getOwnPropertyNames(p)};function r(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(p){return p!==p};function s(){s.init.call(this)}Pi.exports=s,Pi.exports.once=h,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");o=S}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||i(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function c(S){return S._maxListeners===void 0?s.defaultMaxListeners:S._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(p){for(var w=[],P=1;P<arguments.length;P++)w.push(arguments[P]);var y=p==="error",C=this._events;if(C!==void 0)y=y&&C.error===void 0;else if(!y)return!1;if(y){var T;if(w.length>0&&(T=w[0]),T instanceof Error)throw T;var M=new Error("Unhandled error."+(T?" ("+T.message+")":""));throw M.context=T,M}var N=C[p];if(N===void 0)return!1;if(typeof N=="function")t(N,this,w);else for(var E=N.length,k=_(N,E),P=0;P<E;++P)t(k[P],this,w);return!0};function l(S,p,w,P){var y,C,T;if(a(w),C=S._events,C===void 0?(C=S._events=Object.create(null),S._eventsCount=0):(C.newListener!==void 0&&(S.emit("newListener",p,w.listener?w.listener:w),C=S._events),T=C[p]),T===void 0)T=C[p]=w,++S._eventsCount;else if(typeof T=="function"?T=C[p]=P?[w,T]:[T,w]:P?T.unshift(w):T.push(w),y=c(S),y>0&&T.length>y&&!T.warned){T.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=S,M.type=p,M.count=T.length,r(M)}return S}s.prototype.addListener=function(p,w){return l(this,p,w,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(p,w){return l(this,p,w,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,p,w){var P={fired:!1,wrapFn:void 0,target:S,type:p,listener:w},y=u.bind(P);return y.listener=w,P.wrapFn=y,y}s.prototype.once=function(p,w){return a(w),this.on(p,d(this,p,w)),this},s.prototype.prependOnceListener=function(p,w){return a(w),this.prependListener(p,d(this,p,w)),this},s.prototype.removeListener=function(p,w){var P,y,C,T,M;if(a(w),y=this._events,y===void 0)return this;if(P=y[p],P===void 0)return this;if(P===w||P.listener===w)--this._eventsCount===0?this._events=Object.create(null):(delete y[p],y.removeListener&&this.emit("removeListener",p,P.listener||w));else if(typeof P!="function"){for(C=-1,T=P.length-1;T>=0;T--)if(P[T]===w||P[T].listener===w){M=P[T].listener,C=T;break}if(C<0)return this;C===0?P.shift():b(P,C),P.length===1&&(y[p]=P[0]),y.removeListener!==void 0&&this.emit("removeListener",p,M||w)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(p){var w,P,y;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[p]),this;if(arguments.length===0){var C=Object.keys(P),T;for(y=0;y<C.length;++y)T=C[y],T!=="removeListener"&&this.removeAllListeners(T);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=P[p],typeof w=="function")this.removeListener(p,w);else if(w!==void 0)for(y=w.length-1;y>=0;y--)this.removeListener(p,w[y]);return this};function g(S,p,w){var P=S._events;if(P===void 0)return[];var y=P[p];return y===void 0?[]:typeof y=="function"?w?[y.listener||y]:[y]:w?v(y):_(y,y.length)}s.prototype.listeners=function(p){return g(this,p,!0)},s.prototype.rawListeners=function(p){return g(this,p,!1)},s.listenerCount=function(S,p){return typeof S.listenerCount=="function"?S.listenerCount(p):f.call(S,p)},s.prototype.listenerCount=f;function f(S){var p=this._events;if(p!==void 0){var w=p[S];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function _(S,p){for(var w=new Array(p),P=0;P<p;++P)w[P]=S[P];return w}function b(S,p){for(;p+1<S.length;p++)S[p]=S[p+1];S.pop()}function v(S){for(var p=new Array(S.length),w=0;w<p.length;++w)p[w]=S[w].listener||S[w];return p}function h(S,p){return new Promise(function(w,P){function y(T){S.removeListener(p,C),P(T)}function C(){typeof S.removeListener=="function"&&S.removeListener("error",y),w([].slice.call(arguments))}O(S,p,C,{once:!0}),p!=="error"&&I(S,y,{once:!0})})}function I(S,p,w){typeof S.on=="function"&&O(S,"error",p,w)}function O(S,p,w,P){if(typeof S.on=="function")P.once?S.once(p,w):S.on(p,w);else if(typeof S.addEventListener=="function")S.addEventListener(p,function y(C){P.once&&S.removeEventListener(p,y),w(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Pi.exports}var Ai={exports:{}},wu;function gC(){return wu||(wu=1,typeof Object.create=="function"?Ai.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ai.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Ai.exports}var Ni={},Mi={},Cu;function bC(){if(Cu)return Mi;Cu=1;function e(n,r){var i={jsonrpc:"2.0"};if(n.method)i.method=n.method,n.params&&(i.params=n.params),r!=null&&(i.id=r);else if(r!=null){if(n.error){if(n.result!==void 0)throw new TypeError("Both result and error are defined");i.error=n.error}else if(n.result!==void 0)i.result=n.result;else throw new TypeError("No result or error is defined");i.id=r}return JSON.stringify(i)}function t(n){var r=n;(typeof n=="string"||n instanceof String)&&(r=JSON.parse(n));var i=r.jsonrpc;if(i!=="2.0")throw new TypeError("Invalid JsonRPC version '"+i+"': "+n);if(r.method==null){if(r.id==null)throw new TypeError("Invalid message: "+n);var s=r.result!==void 0,o=r.error!==void 0;if(s&&o)throw new TypeError("Both result and error are defined: "+n);if(!s&&!o)throw new TypeError("No result or error is defined: "+n);r.ack=r.id,delete r.id}return r}return Mi.pack=e,Mi.unpack=t,Mi}var Li={},Iu;function yC(){if(Iu)return Li;Iu=1;function e(n){throw new TypeError("Not yet implemented")}function t(n){throw new TypeError("Not yet implemented")}return Li.pack=e,Li.unpack=t,Li}var Ru;function EC(){if(Ru)return Ni;Ru=1;var e=bC(),t=yC();return Ni.JsonRPC=e,Ni.XmlRPC=t,Ni}var Co,Ou;function _C(){if(Ou)return Co;Ou=1;function e(){var t={};this.forEach=function(n){for(var r in t){var i=t[r];for(var s in i)n(i[s])}},this.get=function(n,r){var i=t[r];if(i!=null)return i[n]},this.remove=function(n,r){var i=t[r];if(i!=null){delete i[n];for(var s in i)return!1;delete t[r]}},this.set=function(n,r,i){if(n==null)return this.remove(r,i);var s=t[i];s==null&&(t[i]=s={}),s[r]=n}}return e.prototype.pop=function(t,n){var r=this.get(t,n);if(r!=null)return this.remove(t,n),r},Co=e,Co}var Io={},Ro,Tu;function wp(){if(Tu)return Ro;Tu=1;var e=Qe().OpenViduLogger,t=e.getInstance(),n=2e3,r=3e3,i=3;function s(o){var a=!1,c,l=o.uri,u=!1,d=new WebSocket(l);d.onopen=function(){t.debug("WebSocket connected to "+l),o.onconnected&&o.onconnected()},d.onerror=function(v){t.error("Could not connect to "+l+" (invoking onerror if defined)",v),o.onerror&&o.onerror(v)};var g=function(){d.readyState===i?a?t.debug("Connection closed by user"):o.ismasternodecrashed()?t.error("Master Node has crashed. Stopping reconnection process"):(t.debug("Connection closed unexpectedly. Reconnecting..."),f(n,1)):t.debug("Close callback from previous websocket. Ignoring it")};d.onclose=g;function f(v,h){if(t.debug("reconnect (attempt #"+h+", max="+v+")"),h===1){if(u){t.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");return}else u=!0;o.onreconnecting&&o.onreconnecting()}b(v,h)}function _(v){var h=new URLSearchParams(new URL(v).search);return h.has("reconnect")||(v=Array.from(h).length>0?v+"&reconnect=true":v+"?reconnect=true"),v}function b(v,h){t.debug("Reconnection attempt #"+h),d.close(4104,"Connection closed for reconnection"),l=_(l),d=new WebSocket(l),d.onopen=function(){t.debug("Reconnected to "+l+" after "+h+" attempts..."),u=!1,c(),o.onreconnected&&o.onreconnected(),d.onclose=g},d.onerror=function(I){t.warn("Reconnection error: ",I),h===v?o.ondisconnect&&o.ondisconnect():setTimeout(function(){f(v,h+1)},r)}}this.close=function(v,h){a=!0,d.close(v,h)},this.reconnectWs=function(){t.debug("reconnectWs"),f(n,1)},this.send=function(v){d.send(v)},this.addEventListener=function(v,h){c=function(){d.addEventListener(v,h)},c()},this.getReadyState=function(){return d.readyState}}return Ro=s,Ro}var Oo,ku;function SC(){if(ku)return Oo;ku=1;var e=Cp(),t=wp(),n=Qe().OpenViduLogger;Date.now=Date.now||function(){return+new Date};var r=5e3,i="RECONNECTING",s="CONNECTED",o="DISCONNECTED",a=n.getInstance();function c(l){var u=this,d=l.ws,g=-1,f=0,_=!0,b=!1,v,h=o,I=d.onreconnecting,O=d.onreconnected,S=d.onconnected,p=d.onerror;l.rpc.pull=function(E,k){k.reply(null,"push")},d.onreconnecting=function(){if(a.debug("--------- ONRECONNECTING -----------"),h===i){a.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it");return}N(),h=i,I&&I()},d.onreconnected=function(){if(a.debug("--------- ONRECONNECTED -----------"),h===s){a.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it");return}h=s,C(),O&&O()},d.onconnected=function(){if(a.debug("--------- ONCONNECTED -----------"),h===s){a.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it");return}h=s,_=!0,M(),S&&S()},d.onerror=function(E){a.debug("--------- ONERROR -----------"),h=o,N(),p&&p(E)};var w=new t(d);a.debug("Connecting websocket to URI: "+d.uri);var P={request_timeout:l.rpc.requestTimeout,ping_request_timeout:l.rpc.heartbeatRequestTimeout},y=new e(e.packers.JsonRPC,P,w,function(E){a.debug("Received request: "+JSON.stringify(E));try{var k=l.rpc[E.method];k===void 0?a.error("Method "+E.method+" not registered in client"):k(E.params,E)}catch(B){a.error("Exception processing request: "+JSON.stringify(E)),a.error(B)}});this.send=function(E,k,B){var A=Date.now();y.encode(E,k,function(R,x){if(R){try{a.error("ERROR:"+R.message+" in Request: method:"+E+" params:"+JSON.stringify(k)+" request:"+R.request),R.data&&a.error("ERROR DATA:"+JSON.stringify(R.data))}catch{}R.requestTime=A}B&&(x!=null&&x.value!=="pong"&&a.debug("Response: "+JSON.stringify(x)),B(R,x))})};function C(){a.debug("notReconnectIfNumLessThan = "+f+" (old="+g+")"),g=f}function T(){if(_){var E=null;(f==0||f==g)&&(E={interval:l.heartbeat||r}),f++,u.send("ping",E,function(k){return function(B,A){B&&(a.debug("Error in ping request #"+k+" ("+B.message+")"),k>g&&(_=!1,C(),a.debug("Server did not respond to ping message #"+k+". Reconnecting... "),w.reconnectWs()))}}(f))}else a.debug("Trying to send ping, but ping is not enabled")}function M(){b||(a.debug("Starting ping (if configured)"),b=!0,l.heartbeat!=null&&(v=setInterval(T,l.heartbeat),T()))}function N(){clearInterval(v),b=!1,_=!1,f=-1,y.cancel()}this.close=function(E,k){a.debug("Closing  with code: "+E+" because: "+k),v!=null&&(a.debug("Clearing ping interval"),clearInterval(v)),b=!1,_=!1,w.close(E,k)},this.reconnect=function(){w.reconnectWs()},this.resetPing=function(){_=!0,f=0,M()},this.getReadyState=function(){return w.getReadyState()}}return Oo=c,Oo}var xu;function wC(){if(xu)return Io;xu=1;var e=SC();return Io.JsonRpcClient=e,Io}var To={},Pu;function CC(){if(Pu)return To;Pu=1;var e=wp();return To.WebSocketWithReconnection=e,To}var ko,Au;function Cp(){if(Au)return ko;Au=1;var e=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch{e=!0}Function.prototype.bind||(Function.prototype.bind=function(g){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var f=Array.prototype.slice.call(arguments,1),_=this,b=function(){},v=function(){return _.apply(this instanceof b&&g?this:g,f.concat(Array.prototype.slice.call(arguments)))};return b.prototype=this.prototype,v.prototype=new b,v});var t=vC().EventEmitter,n=gC(),r=EC(),i=_C(),s=5e3;function o(g){if(!g)return{};for(var f in g){var _=g[f];typeof _=="string"&&(g[f]={response:_})}return g}function a(g){if(g){if(g instanceof Function)return{send:g};if(g.send instanceof Function)return g;if(g.postMessage instanceof Function)return g.send=g.postMessage,g;if(g.write instanceof Function)return g.send=g.write,g;if(g.onmessage===void 0&&!(g.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function c(g,f){e?(this.method=g,this.params=f):(Object.defineProperty(this,"method",{value:g,enumerable:!0}),Object.defineProperty(this,"params",{value:f,enumerable:!0}))}function l(g,f,_,b){var v=this;if(!g)throw new SyntaxError("Packer is not defined");if(!g.pack||!g.unpack)throw new SyntaxError("Packer is invalid");var h=o(g.responseMethods);if(f instanceof Function){if(_!=null)throw new SyntaxError("There can't be parameters after onRequest");b=f,_=void 0,f=void 0}if(f&&f.send instanceof Function){if(_&&!(_ instanceof Function))throw new SyntaxError("Only a function can be after transport");b=_,_=f,f=void 0}if(_ instanceof Function){if(b!=null)throw new SyntaxError("There can't be parameters after onRequest");b=_,_=void 0}if(_&&_.send instanceof Function&&b&&!(b instanceof Function))throw new SyntaxError("Only a function can be after transport");f=f||{},t.call(this),b&&this.on("request",b),e?this.peerID=f.peerID:Object.defineProperty(this,"peerID",{value:f.peerID});var I=f.max_retries||0;function O(R){v.decode(R.data||R)}this.getTransport=function(){return _},this.setTransport=function(R){_&&(_.removeEventListener?_.removeEventListener("message",O):_.removeListener&&_.removeListener("data",O)),R&&(R.addEventListener?R.addEventListener("message",O):R.addListener&&R.addListener("data",O)),_=a(R)},e||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(_);var S=f.request_timeout||s,p=f.ping_request_timeout||S,w=f.response_timeout||s,P=f.duplicates_timeout||s,y=0,C=new i,T=new i,M=new i,N={};function E(R,x,F){var j={message:R,timeout:setTimeout(function(){T.remove(x,F)},w)};T.set(j,x,F)}function k(R,x){var F=setTimeout(function(){M.remove(R,x)},P);M.set(F,R,x)}function B(R,x,F,j,G){c.call(this,R,x),this.getTransport=function(){return G},this.setTransport=function(re){G=a(re)},e||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var Y=T.get(F,j);G||v.getTransport()||(e?this.duplicated=!!Y:Object.defineProperty(this,"duplicated",{value:!!Y}));var ce=h[R];this.pack=g.pack.bind(g,this,F),this.reply=function(re,oe,L){if(re instanceof Function||re&&re.send instanceof Function){if(oe!=null)throw new SyntaxError("There can't be parameters after callback");L=re,oe=null,re=void 0}else if(oe instanceof Function||oe&&oe.send instanceof Function){if(L!=null)throw new SyntaxError("There can't be parameters after callback");L=oe,oe=null}L=a(L),Y&&clearTimeout(Y.timeout),j!=null&&(re&&(re.dest=j),oe&&(oe.dest=j));var U;if(re||oe!=null){if(v.peerID!=null&&(re?re.from=v.peerID:oe.from=v.peerID),ce)if(ce.error==null&&re)U={error:re};else{var J=re?ce.error:ce.response;U={method:J,params:re||oe}}else U={error:re,result:oe};U=g.pack(U,F)}else Y?U=Y.message:U=g.pack({result:null},F);return E(U,F,j),L=L||this.getTransport()||v.getTransport(),L?L.send(U):U}}n(B,c);function A(R){var x=N[R];if(x){delete N[R];var F=C.pop(x.id,x.dest);F&&(clearTimeout(F.timeout),k(x.id,x.dest))}}this.cancel=function(R){if(R)return A(R);for(var R in N)A(R)},this.close=function(){var R=this.getTransport();R&&R.close&&R.close(4003,"Cancel request"),this.cancel(),M.forEach(clearTimeout),T.forEach(function(x){clearTimeout(x.timeout)})},this.encode=function(R,x,F,j,G){if(x instanceof Function){if(F!=null)throw new SyntaxError("There can't be parameters after callback");G=x,j=void 0,F=void 0,x=void 0}else if(F instanceof Function){if(j!=null)throw new SyntaxError("There can't be parameters after callback");G=F,j=void 0,F=void 0}else if(j instanceof Function){if(G!=null)throw new SyntaxError("There can't be parameters after callback");G=j,j=void 0}v.peerID!=null&&(x=x||{},x.from=v.peerID),F!=null&&(x=x||{},x.dest=F);var Y={method:R,params:x};if(G){let U=function(te,V){v.cancel(Y),G(te,V)},J=function(te){var V=R==="ping"?p:S;return oe.timeout=setTimeout(ie,V*Math.pow(2,re++)),N[Y]={id:ce,dest:F},C.set(oe,ce,F),te=te||L||v.getTransport(),te?te.send(Y):Y},ne=function(te){te=a(te),console.warn(re+" retry for request message:",Y);var V=M.pop(ce,F);return clearTimeout(V),J(te)},ie=function(){if(re<I)return ne(j);var te=new Error("Request has timed out");te.request=Y,te.retry=ne,U(te)};var ce=y++,re=0;Y=g.pack(Y,ce);var oe={message:Y,callback:U,responseMethods:h[R]||{}},L=a(j);return J(j)}return Y=g.pack(Y),j=j||this.getTransport(),j?j.send(Y):Y},this.decode=function(R,x){if(!R)throw new TypeError("Message is not defined");try{R=g.unpack(R)}catch($){return console.debug($,R)}var F=R.id,j=R.ack,G=R.method,Y=R.params||{},ce=Y.from,re=Y.dest;if(v.peerID!=null&&ce==v.peerID)return;if(F==null&&j==null){var oe=new c(G,Y);return v.emit("request",oe)?void 0:oe}function L(){if(x=a(x)||v.getTransport(),x){var $=T.get(F,ce);if($)return x.send($.message)}var z=F??j,Q=new B(G,Y,z,ce,x);if(!v.emit("request",Q))return Q}function U($,z,Q){$.callback(z,Q)}function J($){console.warn("Response already processed",R),clearTimeout($),k(j,ce)}if(G){if(re==null||re==v.peerID){var D=C.get(j,ce);if(D){var ne=D.responseMethods;return G==ne.error?U(D,Y):G==ne.response?U(D,null,Y):L()}var ie=M.get(j,ce);if(ie)return J(ie)}return L()}var te=R.error,V=R.result;if(!(te&&te.dest&&te.dest!=v.peerID)&&!(V&&V.dest&&V.dest!=v.peerID)){var D=C.get(j,ce);if(!D){var ie=M.get(j,ce);return ie?J(ie):console.warn("No callback was defined for this message",R)}U(D,te,V)}}}n(l,t),l.RpcNotification=c,ko=l;var u=wC(),d=CC();return l.clients=u,l.clients.transports=d,l.packers=r,ko}const IC="OpenVidu",RC={events:"3.3.0",freeice:"2.2.2",hark:"1.2.3",inherits:"2.0.4",jsnlog:"2.30.0",mime:"3.0.0",platform:"1.3.6",semver:"7.6.2",uuid:"9.0.1","wolfy87-eventemitter":"5.2.9"},OC="OpenVidu Browser",TC={"@types/node":"18.11.9","@types/platform":"1.3.4",browserify:"17.0.0",terser:"5.15.1",tsify:"5.0.4",tslint:"6.1.3",typedoc:"0.23.21",typescript:"4.9.3"},kC="Apache-2.0",xC="lib/index.js",PC="openvidu-browser",AC={type:"git",url:"git://github.com/OpenVidu/openvidu"},NC={browserify:"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; mkdir -p static/js/ && cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js",build:"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --target es5 --lib dom,es5,es2015.promise,scripthost && rm -rf ./ts4.4 && mkdir -p ./ts4.4/lib && cp -r ./lib ./ts4.4 && find ./ts4.4/lib -type f ! -iname '*.d.ts' -delete && ./config/replace_for_ts44.sh",docs:"./generate-docs.sh"},MC="lib/index.d.ts",LC={"<4.4":{"*":["ts4.4/*"]}},DC="2.31.0",$C={author:IC,dependencies:RC,description:OC,devDependencies:TC,license:kC,main:xC,name:PC,repository:AC,scripts:NC,types:MC,typesVersions:LC,version:DC};var Nu;function VC(){if(Nu)return hn;Nu=1;var e=hn.__awaiter||function(S,p,w,P){function y(C){return C instanceof w?C:new w(function(T){T(C)})}return new(w||(w=Promise))(function(C,T){function M(k){try{E(P.next(k))}catch(B){T(B)}}function N(k){try{E(P.throw(k))}catch(B){T(B)}}function E(k){k.done?C(k.value):y(k.value).then(M,N)}E((P=P.apply(S,p||[])).next())})},t=hn.__generator||function(S,p){var w={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},P,y,C,T;return T={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function M(E){return function(k){return N([E,k])}}function N(E){if(P)throw new TypeError("Generator is already executing.");for(;T&&(T=0,E[0]&&(w=0)),w;)try{if(P=1,y&&(C=E[0]&2?y.return:E[0]?y.throw||((C=y.return)&&C.call(y),0):y.next)&&!(C=C.call(y,E[1])).done)return C;switch(y=0,C&&(E=[E[0]&2,C.value]),E[0]){case 0:case 1:C=E;break;case 4:return w.label++,{value:E[1],done:!1};case 5:w.label++,y=E[1],E=[0];continue;case 7:E=w.ops.pop(),w.trys.pop();continue;default:if(C=w.trys,!(C=C.length>0&&C[C.length-1])&&(E[0]===6||E[0]===2)){w=0;continue}if(E[0]===3&&(!C||E[1]>C[0]&&E[1]<C[3])){w.label=E[1];break}if(E[0]===6&&w.label<C[1]){w.label=C[1],C=E;break}if(C&&w.label<C[2]){w.label=C[2],w.ops.push(E);break}C[2]&&w.ops.pop(),w.trys.pop();continue}E=p.call(S,w)}catch(k){E=[6,k],y=0}finally{P=C=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(hn,"__esModule",{value:!0}),hn.OpenVidu=void 0;var n=sp(),r=Da(),i=Ms(),s=Ma(),o=pr(),a=hr(),c=Ps(),l=Qe(),u=un(),d=hC(),g=mC(),f=ip(),_=Oa(),b=Cp(),v=$C,h=l.OpenViduLogger.getInstance(),I,O=function(){function S(){var p=this;this.masterNodeHasCrashed=!1,this.publishers=[],this.secret="",this.recorder=!1,this.stt=!1,this.life=-1,this.advancedConfiguration={},this.webrtcStatsInterval=-1,this.sendBrowserLogs=f.OpenViduLoggerConfiguration.disabled,this.isAtLeastPro=!1,this.isEnterprise=!1,this.ee=new _,I=u.PlatformUtils.getInstance(),this.libraryVersion=v.version,h.info("OpenVidu initialized"),h.info("Platform detected: "+I.getDescription()),h.info("openvidu-browser version: "+this.libraryVersion),(I.isMobileDevice()||I.isReactNative())&&this.onOrientationChanged(function(){p.publishers.forEach(function(w){w.stream.isLocalStreamPublished&&w.stream&&w.stream.hasVideo&&p.sendNewVideoDimensionsIfRequired(w,"deviceRotated",75,10)})})}return S.prototype.initSession=function(){return this.session=new i.Session(this),this.session},S.prototype.initPublisher=function(p,w,P){var y;w&&typeof w!="function"?(y=w,y={audioSource:typeof y.audioSource<"u"?y.audioSource:void 0,frameRate:typeof MediaStreamTrack<"u"&&y.videoSource instanceof MediaStreamTrack?void 0:typeof y.frameRate<"u"?y.frameRate:void 0,insertMode:typeof y.insertMode<"u"?typeof y.insertMode=="string"?c.VideoInsertMode[y.insertMode]:y.insertMode:c.VideoInsertMode.APPEND,mirror:typeof y.mirror<"u"?y.mirror:!0,publishAudio:typeof y.publishAudio<"u"?y.publishAudio:!0,publishVideo:typeof y.publishVideo<"u"?y.publishVideo:!0,resolution:typeof MediaStreamTrack<"u"&&y.videoSource instanceof MediaStreamTrack?void 0:typeof y.resolution<"u"?y.resolution:"640x480",videoSource:typeof y.videoSource<"u"?y.videoSource:void 0,videoSimulcast:y.videoSimulcast,filter:y.filter}):y={insertMode:c.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var C=new r.Publisher(p,y,this),T;return w&&typeof w=="function"?T=w:P&&(T=P),C.initialize().then(function(){T!==void 0&&T(void 0),C.emitEvent("accessAllowed",[])}).catch(function(M){T!==void 0&&T(M),C.emitEvent("accessDenied",[M])}),this.publishers.push(C),C},S.prototype.initPublisherAsync=function(p,w){var P=this;return new Promise(function(y,C){var T,M=function(N){return N?C(N):y(T)};w?T=P.initPublisher(p,w,M):T=P.initPublisher(p,M)})},S.prototype.initLocalRecorder=function(p){return new n.LocalRecorder(p)},S.prototype.checkSystemRequirements=function(){return I.isIPhoneOrIPad()?I.isIOSWithSafari()||I.isChromeMobileBrowser()||I.isFirefoxMobileBrowser()||I.isOperaMobileBrowser()||I.isEdgeMobileBrowser()||I.isIonicIos():I.isChromeBrowser()||I.isChromeMobileBrowser()||I.isFirefoxBrowser()||I.isFirefoxMobileBrowser()||I.isOperaBrowser()||I.isOperaMobileBrowser()||I.isEdgeBrowser()||I.isEdgeMobileBrowser()||I.isSamsungBrowser()||I.isSafariBrowser()||I.isAndroidBrowser()||I.isElectron()||I.isNodeJs()||I.isMotorolaEdgeDevice()},S.prototype.checkScreenSharingCapabilities=function(){return I.canScreenShare()},S.prototype.getDevices=function(){return new Promise(function(p,w){navigator.mediaDevices.enumerateDevices().then(function(P){var y,C=[];if(I.isIonicAndroid()&&typeof cordova<"u"&&(!((y=cordova==null?void 0:cordova.plugins)===null||y===void 0)&&y.EnumerateDevicesPlugin))cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then(function(T){var M=[],N=[],E=[];return M=T.filter(function(k){return k.kind==="audioinput"}),N=P.filter(function(k){return k.kind==="videoinput"}),E=P.filter(function(k){return k.kind==="audioinput"}),N.forEach(function(k,B){if(k.label)C.push({kind:k.kind,deviceId:k.deviceId,label:k.label});else{var A="";B===0?A="Front Camera":B===1?A="Back Camera":A="Unknown Camera",C.push({kind:k.kind,deviceId:k.deviceId,label:A})}}),E.forEach(function(k,B){if(k.label)C.push({kind:k.kind,deviceId:k.deviceId,label:k.label});else{var A="";switch(B){case 0:A="Default";break;case 1:var R=M.filter(function(j){return j.label.includes("Built")})[0];A=R?R.label:"Built-in Microphone";break;case 2:var x=M.filter(function(j){return j.label.includes("Wired")})[0];x?A=x.label:A="Headset earpiece";break;case 3:var F=M.filter(function(j){return j.label.includes("Bluetooth")})[0];A=F?F.label:"Wireless";break;default:A="Unknown Microphone";break}C.push({kind:k.kind,deviceId:k.deviceId,label:A})}}),p(C)});else return P.forEach(function(T){(T.kind==="audioinput"||T.kind==="videoinput")&&C.push({kind:T.kind,deviceId:T.deviceId,label:T.label})}),p(C)}).catch(function(P){return h.error("Error getting devices",P),w(P)})})},S.prototype.getUserMedia=function(p){var w,P;return e(this,void 0,void 0,function(){var y,C,T,E,M,B,A,N,E,k,B,A,R,x=this;return t(this,function(F){switch(F.label){case 0:y=function(j,G){return e(x,void 0,void 0,function(){var Y,ce,re,oe;return t(this,function(L){switch(L.label){case 0:Y=G.audio===void 0?!0:G.audio,ce={audio:Y,video:!1},L.label=1;case 1:return L.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(ce)];case 2:return re=L.sent(),j.addTrack(re.getAudioTracks()[0]),[2,j];case 3:throw oe=L.sent(),j.getAudioTracks().forEach(function(U){U.stop()}),j.getVideoTracks().forEach(function(U){U.stop()}),this.generateAudioDeviceError(oe,ce);case 4:return[2]}})})},F.label=1;case 1:return F.trys.push([1,20,,21]),[4,this.generateMediaConstraints(p)];case 2:return C=F.sent(),C.videoTrack&&C.audioTrack||C.audioTrack&&((w=C.constraints)===null||w===void 0?void 0:w.video)===!1||C.videoTrack&&((P=C.constraints)===null||P===void 0?void 0:P.audio)===!1?[2,this.addAlreadyProvidedTracks(C,new MediaStream)]:[3,3];case 3:if(C.videoTrack&&delete C.constraints.video,C.audioTrack&&delete C.constraints.audio,T=!1,typeof p.videoSource!="string")return[3,12];if(!(p.videoSource==="screen"||p.videoSource==="window"||I.isElectron()&&p.videoSource.startsWith("screen:")))return[3,12];if(T=!C.audioTrack&&p.audioSource!==null&&p.audioSource!==!1,!(navigator.mediaDevices.getDisplayMedia&&!I.isElectron()))return[3,11];F.label=4;case 4:return F.trys.push([4,9,,10]),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:p.audioSource==="screen"})];case 5:return E=F.sent(),this.addAlreadyProvidedTracks(C,E),T?[4,y(E,C.constraints)]:[3,7];case 6:return[2,F.sent()];case 7:return[2,E];case 8:return[3,10];case 9:throw M=F.sent(),B=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,A=M.toString(),new a.OpenViduError(B,A);case 10:return[3,11];case 11:return[3,12];case 12:N=T?{video:C.constraints.video}:C.constraints,F.label=13;case 13:return F.trys.push([13,18,,19]),[4,navigator.mediaDevices.getUserMedia(N)];case 14:return E=F.sent(),this.addAlreadyProvidedTracks(C,E),T?[4,y(E,C.constraints)]:[3,16];case 15:return[2,F.sent()];case 16:return[2,E];case 17:return[3,19];case 18:throw k=F.sent(),B=void 0,A=k.toString(),p.videoSource!=="screen"?B=a.OpenViduErrorName.DEVICE_ACCESS_DENIED:B=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,new a.OpenViduError(B,A);case 19:return[3,21];case 20:throw R=F.sent(),R;case 21:return[2]}})})},S.prototype.enableProdMode=function(){h.enableProdMode()},S.prototype.setAdvancedConfiguration=function(p){this.advancedConfiguration=p},S.prototype.onOrientationChanged=function(p){globalThis.addEventListener("orientationchange",p)},S.prototype.sendNewVideoDimensionsIfRequired=function(p,w,P,y){var C=this,T,M,N,E,k=0,B=((M=(T=p==null?void 0:p.stream)===null||T===void 0?void 0:T.videoDimensions)===null||M===void 0?void 0:M.width)||0,A=((E=(N=p==null?void 0:p.stream)===null||N===void 0?void 0:N.videoDimensions)===null||E===void 0?void 0:E.height)||0,R=setInterval(function(){k++,k>y&&clearTimeout(R),p.getVideoDimensions().then(function(x){(x.width!==B||x.height!==A)&&(clearTimeout(R),C.sendVideoDimensionsChangedEvent(p,w,B,A,x.width,x.height))})},P)},S.prototype.sendVideoDimensionsChangedEvent=function(p,w,P,y,C,T){var M=this;p.stream.videoDimensions={width:C||0,height:T||0},this.sendRequest("streamPropertyChanged",{streamId:p.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(p.stream.videoDimensions),reason:w},function(N,E){N?h.error("Error sending 'streamPropertyChanged' event",N):(M.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(M.session,p.stream,"videoDimensions",p.stream.videoDimensions,{width:P,height:y},w)]),p.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(p,p.stream,"videoDimensions",p.stream.videoDimensions,{width:P,height:y},w)]),M.session.sendVideoData(p))})},S.prototype.sendTrackChangedEvent=function(p,w,P,y){var C=this,T={label:w},M={label:P},N="trackReplaced";p.stream.isLocalStreamPublished?this.sendRequest("streamPropertyChanged",{streamId:p.stream.streamId,property:y,newValue:M,reason:N},function(E,k){E?h.error("Error sending 'streamPropertyChanged' event",E):(C.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(C.session,p.stream,y,M,T,N)]),p.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(p,p.stream,y,M,T,N)]))}):(this.session.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(this.session,p.stream,y,M,T,N)]),p.emitEvent("streamPropertyChanged",[new o.StreamPropertyChangedEvent(p,p.stream,y,M,T,N)]))},S.prototype.generateMediaConstraints=function(p){var w=this;return new Promise(function(P,y){var C={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},T=p.audioSource,M=p.videoSource;if((T===null||T===!1)&&(C.constraints.audio=!1),(M===null||M===!1)&&(C.constraints.video=!1),C.constraints.audio===!1&&C.constraints.video===!1)return y(new a.OpenViduError(a.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time"));if(typeof MediaStreamTrack<"u"&&T instanceof MediaStreamTrack&&(C.audioTrack=T),typeof MediaStreamTrack<"u"&&M instanceof MediaStreamTrack&&(C.videoTrack=M),T===void 0&&(C.constraints.audio=!0),M===void 0&&(C.constraints.video={width:{ideal:640},height:{ideal:480}}),M!==null&&M!==!1){if(p.resolution){var N=p.resolution.toLowerCase().split("x"),E=Number(N[0]),k=Number(N[1]);C.constraints.video={width:{ideal:E},height:{ideal:k}}}p.frameRate&&(C.constraints.video.frameRate={ideal:p.frameRate})}return w.configureDeviceIdOrScreensharing(C,p,P,y),P(C)})},S.prototype.startWs=function(p){var w={heartbeat:5e3,ws:{uri:this.wsUri+"?sessionId="+this.session.sessionId,onconnected:p,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this),ismasternodecrashed:this.isMasterNodeCrashed.bind(this)},rpc:{requestTimeout:1e4,heartbeatRequestTimeout:5e3,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),broadcastStarted:this.session.onBroadcastStarted.bind(this.session),broadcastStopped:this.session.onBroadcastStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),connectionPropertyChanged:this.session.onConnectionPropertyChanged.bind(this.session),networkQualityLevelChanged:this.session.onNetworkQualityLevelChangedChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session),masterNodeCrashedNotification:this.onMasterNodeCrashedNotification.bind(this),forciblyReconnectSubscriber:this.session.onForciblyReconnectSubscriber.bind(this.session),speechToTextMessage:this.session.onSpeechToTextMessage.bind(this.session),speechToTextDisconnected:this.session.onSpeechToTextDisconnected.bind(this.session)}};this.jsonRpcClient=new b.clients.JsonRpcClient(w)},S.prototype.onMasterNodeCrashedNotification=function(p){console.error("Master Node has crashed"),this.masterNodeHasCrashed=!0,this.session.onLostConnection("nodeCrashed"),this.jsonRpcClient.close(4103,"Master Node has crashed")},S.prototype.getWsReadyState=function(){return this.jsonRpcClient.getReadyState()},S.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},S.prototype.sendRequest=function(p,w,P){var y;w&&w instanceof Function&&(P=w,w={}),h.debug('Sending request: {method:"'+p+'", params: '+JSON.stringify(w)+"}"),(y=this.jsonRpcClient)===null||y===void 0||y.send(p,w,P)},S.prototype.getWsUri=function(){return this.wsUri},S.prototype.getSecret=function(){return this.secret},S.prototype.getRecorder=function(){return this.recorder},S.prototype.getStt=function(){return this.stt},S.prototype.generateAudioDeviceError=function(p,w){p.name==="Error"&&(p.name=p.constructor.name);var P,y;switch(p.name.toLowerCase()){case"notfounderror":return P=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,y=p.toString(),new a.OpenViduError(P,y);case"notallowederror":return P=a.OpenViduErrorName.DEVICE_ACCESS_DENIED,y=p.toString(),new a.OpenViduError(P,y);case"overconstrainederror":return p.constraint.toLowerCase()==="deviceid"?(P=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,y="Audio input device with deviceId '"+w.audio.deviceId.exact+"' not found"):(P=a.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,y="Audio input device doesn't support the value passed for constraint '"+p.constraint+"'"),new a.OpenViduError(P,y);case"notreadableerror":return P=a.OpenViduErrorName.DEVICE_ALREADY_IN_USE,y=p.toString(),new a.OpenViduError(P,y);default:return new a.OpenViduError(a.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,p.toString())}},S.prototype.addAlreadyProvidedTracks=function(p,w,P){return p.videoTrack&&(w.addTrack(p.videoTrack),P&&(p.constraints.video?P.lastVideoTrackConstraints=p.constraints.video:P.lastVideoTrackConstraints=p.videoTrack.getConstraints())),p.audioTrack&&w.addTrack(p.audioTrack),w},S.prototype.configureDeviceIdOrScreensharing=function(p,w,P,y){var C=this,T=w.audioSource,M=w.videoSource;if(typeof T=="string"&&T!=="screen"&&(p.constraints.audio={deviceId:{exact:T}}),typeof M=="string")if(!this.isScreenShare(M))this.setVideoSource(p,M),T==="screen"&&(h.warn('Parameter "audioSource" is set to "screen", which means rquesting audio from screen sharing source. But "videoSource" is not set to "screen". No audio source will be requested'),p.constraints.audio=!1);else if(this.checkScreenSharingCapabilities())if(I.isElectron()){var E="screen:",k=M,B=k.substr(k.indexOf(E)+E.length);return p.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:B}},P(p)}else if(this.advancedConfiguration.screenShareChromeExtension&&!(I.isFirefoxBrowser()||I.isFirefoxMobileBrowser())&&!navigator.mediaDevices.getDisplayMedia){g.getScreenConstraints(function(R,x){if(R||x.mandatory&&x.mandatory.chromeMediaSource==="screen")if(R==="permission-denied"||R==="PermissionDeniedError"){var F=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return h.error(F),y(F)}else{var j=C.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();g.getChromeExtensionStatus(j,function(G){if(G==="installed-disabled"){var Y=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return h.error(Y),y(Y)}if(G==="not-installed"){var ce=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,C.advancedConfiguration.screenShareChromeExtension);return h.error(ce),y(ce)}});return}else return p.constraints.video=x,P(p)});return}else{if(navigator.mediaDevices.getDisplayMedia)return P(p);var A=I.isFirefoxBrowser()||I.isFirefoxMobileBrowser()?w.videoSource:void 0;d.getScreenId(A,function(R,x,F){if(R)if(R==="not-installed"){var j=C.advancedConfiguration.screenShareChromeExtension?C.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold",G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,j);return h.error(G),y(G)}else if(R==="installed-disabled"){var G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");return h.error(G),y(G)}else if(R==="permission-denied"){var G=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");return h.error(G),y(G)}else{var G=new a.OpenViduError(a.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share");return h.error(G),h.error(R),y(G)}else return p.constraints.video=F.video,P(p)});return}else{var N=new a.OpenViduError(a.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0), Edge (>= 80) or Electron. Detected client: "+I.getName()+" "+I.getVersion());return h.error(N),y(N)}},S.prototype.setVideoSource=function(p,w){p.constraints.video||(p.constraints.video={}),p.constraints.video.deviceId={exact:w}},S.prototype.disconnectCallback=function(){h.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},S.prototype.reconnectingCallback=function(){h.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},S.prototype.reconnectWebsocketThroughRpcConnectMethod=function(p){var w=this;this.sendRequest("connect",{sessionId:p,reconnect:!0},function(P,y){if(P)if(w.isMasterNodeCrashed())h.warn("Master Node has crashed!");else{h.error(P);var C=function(M,N){h.warn(N),w.session.onLostConnection(M),w.jsonRpcClient.close(4101,"Reconnection fault: "+N)},T=function(){w.life===-1?C("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):w.sendRequest("sessionStatus",{sessionId:w.session.sessionId},function(M,N){M!=null?console.error("Error checking session status",M):w.life===N.life?C("networkDisconnect","WS successfully reconnected but the user was already evicted due to timeout"):C("nodeCrashed","WS successfully reconnected to OpenVidu Server but your Master Node crashed")})};P.code===40007&&P.message==="reconnection error"&&console.error("Invalid RPC sessionId. Client network disconnection or Master Node crash"),T()}else w.jsonRpcClient.resetPing(),w.session.onRecoveredConnection()})},S.prototype.reconnectedCallback=function(){if(h.warn("Websocket reconnected"),this.isRoomAvailable())if(this.session.connection)this.reconnectWebsocketThroughRpcConnectMethod(this.session.connection.rpcSessionId);else{h.warn("There was no previous connection when running reconnection callback");var p=new s.SessionDisconnectedEvent(this.session,"networkDisconnect");this.session.ee.emitEvent("sessionDisconnected",[p]),p.callDefaultBehavior()}else alert("Connection error. Please reload page.")},S.prototype.isMasterNodeCrashed=function(){return this.masterNodeHasCrashed},S.prototype.isRoomAvailable=function(){return this.session!==void 0&&this.session instanceof i.Session?!0:(h.warn("Session instance not found"),!1)},S.prototype.isScreenShare=function(p){return p==="screen"||p==="window"||I.isElectron()&&p.startsWith("screen:")},S}();return hn.OpenVidu=O,hn}var xo={},Mu;function BC(){return Mu||(Mu=1,Object.defineProperty(xo,"__esModule",{value:!0})),xo}var Lu;function jC(){return Lu||(Lu=1,function(e){var t=_r.__createBinding||(Object.create?function(R,x,F,j){j===void 0&&(j=F);var G=Object.getOwnPropertyDescriptor(x,F);(!G||("get"in G?!x.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return x[F]}}),Object.defineProperty(R,j,G)}:function(R,x,F,j){j===void 0&&(j=F),R[j]=x[F]}),n=_r.__exportStar||function(R,x){for(var F in R)F!=="default"&&!Object.prototype.hasOwnProperty.call(x,F)&&t(x,R,F)};Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=e.ExceptionEventName=e.ExceptionEvent=e.SpeechToTextEvent=e.NetworkQualityLevelChangedEvent=e.FilterEvent=e.ConnectionPropertyChangedEvent=e.StreamPropertyChangedEvent=e.VideoElementEvent=e.StreamManagerEvent=e.StreamEvent=e.SignalEvent=e.SessionDisconnectedEvent=e.RecordingEvent=e.PublisherSpeakingEvent=e.ConnectionEvent=e.Event=e.VideoInsertMode=e.TypeOfVideo=e.OpenViduErrorName=e.OpenViduError=e.LocalRecorderState=e.Filter=e.LocalRecorder=e.Connection=e.Stream=e.StreamManager=e.Subscriber=e.Publisher=e.Session=e.OpenVidu=void 0;var r=np(),i=VC();Object.defineProperty(e,"OpenVidu",{enumerable:!0,get:function(){return i.OpenVidu}});var s=Ms();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return s.Session}});var o=Da();Object.defineProperty(e,"Publisher",{enumerable:!0,get:function(){return o.Publisher}});var a=Pa();Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return a.Subscriber}});var c=xa();Object.defineProperty(e,"StreamManager",{enumerable:!0,get:function(){return c.StreamManager}});var l=Na();Object.defineProperty(e,"Stream",{enumerable:!0,get:function(){return l.Stream}});var u=fp();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return u.Connection}});var d=sp();Object.defineProperty(e,"LocalRecorder",{enumerable:!0,get:function(){return d.LocalRecorder}});var g=Ra();Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return g.Filter}});var f=rp();Object.defineProperty(e,"LocalRecorderState",{enumerable:!0,get:function(){return f.LocalRecorderState}});var _=hr();Object.defineProperty(e,"OpenViduError",{enumerable:!0,get:function(){return _.OpenViduError}}),Object.defineProperty(e,"OpenViduErrorName",{enumerable:!0,get:function(){return _.OpenViduErrorName}});var b=Aa();Object.defineProperty(e,"TypeOfVideo",{enumerable:!0,get:function(){return b.TypeOfVideo}});var v=Ps();Object.defineProperty(e,"VideoInsertMode",{enumerable:!0,get:function(){return v.VideoInsertMode}});var h=ct();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return h.Event}});var I=pp();Object.defineProperty(e,"ConnectionEvent",{enumerable:!0,get:function(){return I.ConnectionEvent}});var O=dp();Object.defineProperty(e,"PublisherSpeakingEvent",{enumerable:!0,get:function(){return O.PublisherSpeakingEvent}});var S=mp();Object.defineProperty(e,"RecordingEvent",{enumerable:!0,get:function(){return S.RecordingEvent}});var p=Ma();Object.defineProperty(e,"SessionDisconnectedEvent",{enumerable:!0,get:function(){return p.SessionDisconnectedEvent}});var w=vp();Object.defineProperty(e,"SignalEvent",{enumerable:!0,get:function(){return w.SignalEvent}});var P=La();Object.defineProperty(e,"StreamEvent",{enumerable:!0,get:function(){return P.StreamEvent}});var y=ka();Object.defineProperty(e,"StreamManagerEvent",{enumerable:!0,get:function(){return y.StreamManagerEvent}});var C=op();Object.defineProperty(e,"VideoElementEvent",{enumerable:!0,get:function(){return C.VideoElementEvent}});var T=pr();Object.defineProperty(e,"StreamPropertyChangedEvent",{enumerable:!0,get:function(){return T.StreamPropertyChangedEvent}});var M=bp();Object.defineProperty(e,"ConnectionPropertyChangedEvent",{enumerable:!0,get:function(){return M.ConnectionPropertyChangedEvent}});var N=hp();Object.defineProperty(e,"FilterEvent",{enumerable:!0,get:function(){return N.FilterEvent}});var E=yp();Object.defineProperty(e,"NetworkQualityLevelChangedEvent",{enumerable:!0,get:function(){return E.NetworkQualityLevelChangedEvent}});var k=gp();Object.defineProperty(e,"SpeechToTextEvent",{enumerable:!0,get:function(){return k.SpeechToTextEvent}});var B=mr();Object.defineProperty(e,"ExceptionEvent",{enumerable:!0,get:function(){return B.ExceptionEvent}}),Object.defineProperty(e,"ExceptionEventName",{enumerable:!0,get:function(){return B.ExceptionEventName}});var A=Ta();Object.defineProperty(e,"EventDispatcher",{enumerable:!0,get:function(){return A.EventDispatcher}}),n(BC(),e),r.JL.setOptions({enabled:!1})}(_r)),_r}var FC=jC();function UC(e){const t=K(0),n=K(0),r=K(null),i=Se(()=>n.value>0?t.value/n.value*100:0),s=Se(()=>{const a=Math.floor(t.value/60),c=t.value%60;return`${a}:${c<10?"0":""}${c}`}),o=()=>{if(!e.value)return;const a=new Date(e.value).getTime(),c=new Date().getTime();n.value=Math.floor((a-c)/1e3),t.value=n.value,r.value&&clearInterval(r.value),r.value=setInterval(()=>{const l=new Date().getTime();t.value=Math.max(0,Math.floor((a-l)/1e3)),t.value<=0&&(clearInterval(r.value),r.value=null)},1e3)};return at(e,a=>{a&&o()}),Ht(()=>{r.value&&clearInterval(r.value)}),{remainingTime:t,totalDuration:n,timerProgress:i,formattedTime:s}}const HC=ff("savedItems",()=>{const e=K([]);function t(i){e.value.unshift(i)}function n(i){e.value.unshift(i)}function r(i){e.value=e.value.filter(s=>s.id!==i)}return{savedItems:e,addMemo:t,addResource:n,removeMemo:r}},{persist:!0}),WC={class:"debate-discussion-container"},qC={class:"status-bar"},GC={class:"round-label"},zC={class:"side-label"},KC={class:"debate-topic"},JC={class:"main-content"},XC={class:"video-section"},YC={class:"main-speaker-video"},QC={class:"speaker-timer"},ZC={class:"timer-circle",viewBox:"0 0 60 60"},eI={class:"timer-text"},tI={class:"participant-videos"},nI={key:0,class:"rounded-2xl",autoplay:"",muted:""},rI={key:1,class:"video-placeholder"},iI={class:"notes-container"},sI={key:0,class:"modal-overlay"},oI={class:"modal-container"},aI={class:"modal-header"},cI={class:"tabs modal-tabs"},lI={class:"modal-content"},uI={key:0,class:"memo-input"},dI={class:"tag-input"},fI={class:"tags"},pI=["onClick"],hI={key:1,class:"resource-input"},mI={class:"resource-type-selection"},vI=["onClick"],gI={class:"tag-input"},bI={class:"tags"},yI=["onClick"],EI={class:"search-area"},_I={class:"result"},SI={class:"saved-items"},wI={class:"item-header"},CI={class:"item-title"},II={class:"item-type"},RI={class:"item-tags"},OI={class:"item-content"},TI={class:"item-footer"},kI={class:"timeline"},xI={class:"timeline-track"},PI={class:"stage-label"},AI={class:"stage-title"},NI={class:"stage-subtitle"},MI=Pe({__name:"Debate",props:{debateId:{}},setup(e){const t="wss://i12a802.p.ssafy.io/ws";We(()=>{a(),_(),at(k,ee=>{ee&&n.value&&ee.addVideoElement(n.value)}),at(()=>B.value,ee=>{const ue=document.querySelectorAll(".participant-video video");ee.filter(ae=>!ae.placeholder).forEach((ae,Oe)=>{ue[Oe]&&ae.addVideoElement&&ae.addVideoElement(ue[Oe])})})}),Ht(()=>{n.value&&(n.value.srcObject=null),u.value.forEach(ee=>{ee.stream&&ee.stream.dispose()}),v()});const n=K(null),r=e,i=K(""),s=K(!0),o=K([]),a=async()=>{var ee;try{const ue=localStorage.getItem("token");if(console.log("토큰 확인:",ue),!ue)throw new Error("로그인이 필요합니다.");const ae=await Ve.get(`/api/debates/${r.debateId}/room`,{headers:{Authorization:`Bearer ${ue}`,"Content-Type":"application/json"}});ae.status===200&&(i.value=ae.data.subject,s.value=ae.data.participant,o.value=ae.data.users)}catch(ue){console.error("토론방 정보를 불러오는 데 실패했습니다:",((ee=ue.response)==null?void 0:ee.data)||ue.message)}},c=K(null),l=K(null),u=K([]),d=K(null);K("SessionA"),K("Participant");const g=localStorage.getItem("id");K(!1);const f=Se(()=>S.value.participants||[]),_=async()=>{try{console.log("OpenVidu 세션에 연결 시도"),c.value=new FC.OpenVidu,l.value=c.value.initSession(),l.value.on("streamCreated",ae=>{const Oe=l.value.subscribe(ae.stream,void 0);Oe.subscribeToAudio(!0),u.value.push(Oe),console.log("session.value:",l.value)});const ee=b();await l.value.connect(ee,{clientData:localStorage.getItem("id")}),Se(()=>f.value.some(ae=>ae.userId===g))&&(d.value=c.value.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!0}),console.log("Publisher 객체:",d.value),l.value.publish(d.value)),console.log(l.value.connection.connectionId),console.log("OpenVidu 세션 연결 완료")}catch(ee){console.error("OpenVidu 세션 연결 중 오류 발생:",ee)}},b=()=>{const ee=localStorage.getItem("openviduToken");if(!ee)throw new Error("토큰이 존재하지 않습니다. 먼저 매칭 페이지에서 토큰을 받아와야 합니다.");return ee},v=()=>{l.value&&l.value.disconnect(),l.value=null,c.value=null,u.value=[],d.value=null,console.log("OpenVidu 세션 종료")},{messages:h,isConnected:I,debateState:O}=tp(t),S=Se(()=>O.value||{sequence:0,status:"WAITING",currentSpeakerId:null,currentSpeakEndTime:null,nextSpeakerId:null,canInterrupt:!1,isInterrupted:!1,interruptSpeakerId:null,interruptEndTime:null,participants:[]}),p=Se(()=>{const ee=S.value.currentSpeakerId,ae=S.value.participants.find(Oe=>Oe.userId===ee);return ae?ae.position:"찬성"}),w=Se(()=>{const ee=S.value.nextSpeakerId,ae=S.value.participants.find(Oe=>Oe.userId===ee);return ae?ae.nickname:"다음 발언자 없음"}),P=Se(()=>{const ee=S.value.currentSpeakerId,ae=S.value.participants.find(Oe=>Oe.userId===ee);return ae?ae.nickname:"현재 발언자 없음"});Se(()=>{switch(S.value.status){case"READY":return["모든 참여자가 들어오길 기다리는 중입니다.","잠시만 기다려주세요"];case"PREPARING":return["곧 발언이 시작됩니다.",`${w||"알 수 없음"} 님은 준비 해주세요`];case"WAITING":return["곧이어 다음 발언이 시작됩니다.",`${P||"알 수 없음"} 님은 준비 해주세요`];case"STARTED":return["토론이 시작되었습니다!","첫 번째 발언자가 발표를 시작합니다."];case"SPEECHING":return["현재 발언 중입니다.","지금 발언자의 의견을 경청해주세요."];case"SKIP":return["발언이 건너뛰어졌습니다.","다음 발언자가 준비 중입니다."];case"FINISHED":return["토론이 종료되었습니다.","모두 수고하셨습니다!"];default:return["상태를 불러오는 중...","잠시만 기다려주세요"]}});const y=K(1),C=K(0);let T=!1;const M=K([{title:"찬성 입론",subtitle:"주장 제시"},{title:"반대 입론",subtitle:"대응 논리"},{title:"찬성 반론",subtitle:"반박 및 보완"},{title:"반대 반론",subtitle:"최종 반박"}]),N=ee=>ee<C.value?"completed":ee===C.value?"current":"";at(()=>S.value.status,ee=>{ee==="SPEECHING"&&(C.value++,C.value===4&&(T?(console.log("step이 4지만 이미 초기화된 적이 있어 유지"),C.value=3):(y.value=2,C.value=0,T=!0,console.log("step 초기화 & round 증가"))),console.log(`현재 step: ${C.value}, round: ${y.value}`),u.value.forEach((ue,ae)=>{console.log(`🎧 Subscriber[${ae}] audio 설정 확인:`),console.log("subscribeToAudio 상태:",ue.subscribeToAudio),console.log("subscriber.stream.audioActive:",ue.stream.audioActive)})),y.value===2&&C.value===4&&!T&&(C.value=0,console.log("타임라인 초기화 (라운드 2 시작)"))}),at(()=>S.value,ee=>{if(!d.value)return;const ue=ee.currentSpeakerConnectionId;ee.status==="SPEECHING"&&ee.currentSpeakerId===g?d.value.publishAudio=!0:d.value.publishAudio=!1,console.log(`발언자 업데이트됨: ${ue}, 사용자(${g}) 마이크: ${d.value.publishAudio}`)},{deep:!0});const E=Se(()=>`${C.value/3*100}%`),k=Se(()=>(u.value.find(ee=>console.log("am I currentSpeaker?:",ee.stream.connection.connectionId===S.value.currentSpeakerConnectionId)),u.value.find(ee=>ee.stream.connection.connectionId===S.value.currentSpeakerConnectionId)||d.value)),B=Se(()=>{const ee=S.value.participants.filter(ue=>ue.connectionId!==S.value.currentSpeakerConnectionId);return ee.length>0?ee:[{nickname:"참가자 없음",stream:null,placeholder:!0},{nickname:"참가자 없음",stream:null,placeholder:!0},{nickname:"참가자 없음",stream:null,placeholder:!0}]}),A=Se(()=>S.value.currentSpeakEndTime),{remainingTime:R,timerProgress:x,formattedTime:F}=UC(A),j=K("memo"),G=K(""),Y=K(""),ce=K([]),re=K(""),oe=[{value:"url",label:"🔗 URL"},{value:"document",label:"📄 문서"},{value:"image",label:"🖼️ 이미지"}],L=K("url"),U=K(""),J=K(""),ne=K([]),ie=K(""),te=K(null),V=K(""),D=()=>{re.value.trim()&&(ce.value.push(re.value.trim()),re.value="")},$=ee=>{ce.value=ce.value.filter(ue=>ue!==ee)},z=()=>{ie.value.trim()&&(ne.value.push(ie.value.trim()),ie.value="")},Q=ee=>{ne.value=ne.value.filter(ue=>ue!==ee)},H=ee=>{const ue=ee.target;ue.files&&ue.files.length>0&&(te.value=ue.files[0])},fe=()=>{if(!Y.value.trim()){alert("메모 제목을 입력해주세요");return}const ee={id:Date.now().toString(),title:Y.value,content:G.value,tags:ce.value,type:"memo",createdAt:new Date().toLocaleDateString("ko-KR")};he.addMemo(ee),G.value="",Y.value="",ce.value=[]},de=()=>{var ue;if(!J.value.trim()){alert("자료 제목을 입력해주세요");return}const ee={id:Date.now().toString(),title:J.value,content:L.value==="url"?U.value:((ue=te.value)==null?void 0:ue.name)||"",tags:ne.value,type:"resource",resourceType:L.value,createdAt:new Date().toLocaleDateString("ko-KR")};he.addResource(ee),U.value="",J.value="",ne.value=[],te.value=null,L.value="url"},le=K(!1),se=()=>{le.value=!0,G.value="",Y.value="",ce.value=[],U.value="",J.value="",ne.value=[],te.value=null},ve=()=>{le.value=!1},pe=()=>{j.value==="memo"?fe():de(),ve()},ge=K(!1),he=HC(),ye=Se(()=>{const ee=V.value.toLowerCase().trim();return ee?he.savedItems.filter(ue=>{var Wt,vr;const ae=((Wt=ue.title)==null?void 0:Wt.toLowerCase())||"",Oe=((vr=ue.content)==null?void 0:vr.toLowerCase())||"",Ze=ue.tags||[];return ae.includes(ee)||Oe.includes(ee)||Ze.some(et=>et.toLowerCase().includes(ee))}):he.savedItems}),Ee=ee=>{switch(ee){case"url":return"🔗";case"document":return"📄";case"image":return"🖼️";default:return"📁"}};return(ee,ue)=>(W(),q("main",WC,[m("div",qC,[m("div",GC,X(y.value)+" 라운드",1),m("div",zC,X(p.value)+" 측",1),m("h1",KC,X(i.value),1)]),m("div",JC,[m("div",XC,[m("div",YC,[m("video",{autoplay:"",playsinline:"",muted:"false",ref_key:"mainVideoRef",ref:n},null,512),m("div",QC,[(W(),q("svg",ZC,[ue[9]||(ue[9]=m("circle",{class:"timer-bg",cx:"30",cy:"30",r:"25"},null,-1)),m("circle",{class:"timer-progress",cx:"30",cy:"30",r:"25",style:je({strokeDasharray:"157",strokeDashoffset:Fe(x)/100*157})},null,4)])),m("span",eI,X(Fe(F)),1)])]),m("div",tI,[(W(!0),q(me,null,Ce(B.value,ae=>{var Oe,Ze;return W(),q("div",{key:((Ze=(Oe=ae.stream)==null?void 0:Oe.connection)==null?void 0:Ze.connectionId)||ae.nickname,class:"participant-video"},[ae.stream?(W(),q("video",nI)):(W(),q("div",rI,[m("span",null,X(ae.nickname),1)]))])}),128))])]),m("div",iI,[m("div",{class:we(["notes-section",{visible:ge.value}])},[m("div",{class:"add-button-container"},[m("button",{onClick:se,class:"add-button"},ue[10]||(ue[10]=[m("span",{class:"plus-icon"},"+",-1),Le(" 새로운 메모/자료 추가 ")]))]),le.value?(W(),q("div",sI,[m("div",oI,[m("div",aI,[m("h3",null,X(j.value==="memo"?"새 메모 작성":"새 자료 추가"),1),m("button",{onClick:ve,class:"close-button"},"×")]),m("div",cI,[m("button",{onClick:ue[0]||(ue[0]=ae=>j.value="memo"),class:we({active:j.value==="memo"})}," 메모 ",2),m("button",{onClick:ue[1]||(ue[1]=ae=>j.value="resource"),class:we({active:j.value==="resource"})}," 자료 ",2)]),m("div",lI,[j.value==="memo"?(W(),q("div",uI,[ze(m("textarea",{"onUpdate:modelValue":ue[2]||(ue[2]=ae=>G.value=ae),placeholder:"토론을 위한 메모를 자유롭게 작성하세요"},null,512),[[Ke,G.value]]),ze(m("input",{"onUpdate:modelValue":ue[3]||(ue[3]=ae=>Y.value=ae),placeholder:"메모 제목을 입력하세요"},null,512),[[Ke,Y.value]]),m("div",dI,[ze(m("input",{"onUpdate:modelValue":ue[4]||(ue[4]=ae=>re.value=ae),onKeyup:rs(D,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[Ke,re.value]]),m("button",{onClick:D},"태그 추가")]),m("div",fI,[(W(!0),q(me,null,Ce(ce.value,ae=>(W(),q("span",{key:ae,class:"tag"},[Le(" # "+X(ae)+" ",1),m("button",{onClick:Oe=>$(ae)},"×",8,pI)]))),128))])])):(W(),q("div",hI,[m("div",mI,[(W(),q(me,null,Ce(oe,ae=>m("button",{key:ae.value,onClick:Oe=>L.value=ae.value,class:we({active:L.value===ae.value})},X(ae.label),11,vI)),64))]),L.value==="url"?ze((W(),q("input",{key:0,"onUpdate:modelValue":ue[5]||(ue[5]=ae=>U.value=ae),placeholder:"URL을 입력하세요"},null,512)),[[Ke,U.value]]):xe("",!0),L.value==="document"?(W(),q("input",{key:1,type:"file",onChange:H,accept:".pdf,.doc,.docx"},null,32)):xe("",!0),L.value==="image"?(W(),q("input",{key:2,type:"file",onChange:H,accept:"image/*"},null,32)):xe("",!0),ze(m("input",{"onUpdate:modelValue":ue[6]||(ue[6]=ae=>J.value=ae),placeholder:"자료 제목을 입력하세요"},null,512),[[Ke,J.value]]),m("div",gI,[ze(m("input",{"onUpdate:modelValue":ue[7]||(ue[7]=ae=>ie.value=ae),onKeyup:rs(z,["enter"]),placeholder:"# 태그를 입력하세요"},null,544),[[Ke,ie.value]]),m("button",{onClick:z},"태그 추가")]),m("div",bI,[(W(!0),q(me,null,Ce(ne.value,ae=>(W(),q("span",{key:ae,class:"tag"},[Le(" # "+X(ae)+" ",1),m("button",{onClick:Oe=>Q(ae)},"×",8,yI)]))),128))])]))]),m("div",{class:"modal-footer"},[m("button",{onClick:ve,class:"cancel-button"},"취소"),m("button",{onClick:pe,class:"save-button modal-save"}," 저장 ")])])])):xe("",!0),m("div",EI,[ze(m("input",{"onUpdate:modelValue":ue[8]||(ue[8]=ae=>V.value=ae),placeholder:"메모나 자료 검색",class:"search-input"},null,512),[[Ke,V.value]])]),m("h3",_I,X(V.value?"검색 결과":"메모"),1),m("div",SI,[(W(!0),q(me,null,Ce(ye.value,ae=>(W(),q("div",{key:ae.id,class:we(["saved-item",{"memo-item":ae.type==="memo","resource-item":ae.type==="resource"}])},[m("div",wI,[m("span",CI,X(ae.title),1),m("span",II,X(ae.type==="memo"?"메모":Ee(ae.resourceType||"")),1)]),m("div",RI,[(W(!0),q(me,null,Ce([...ae.tags],Oe=>(W(),q("span",{key:Oe,class:we(["tag",{"memo-tag":ae.type==="memo","resource-tag":ae.type==="resource"}])}," # "+X(Oe),3))),128))]),m("div",OI,X(ae.content.length>100?ae.content.slice(0,100)+"...":ae.content),1),m("div",TI,X(ae.createdAt),1)],2))),128))])],2)])]),m("div",kI,[m("div",xI,[m("div",{class:"progress-bar",style:je({"--progress-width":E.value})},null,4),(W(!0),q(me,null,Ce(M.value,(ae,Oe)=>(W(),q("div",{key:Oe,class:we(["timeline-stage",N(Oe)])},[ue[11]||(ue[11]=m("div",{class:"stage-point"},null,-1)),m("div",PI,[m("span",AI,X(ae.title),1),m("span",NI,X(ae.subtitle),1)])],2))),128))])])]))}}),LI=Te(MI,[["__scopeId","data-v-6c68aedf"]]),DI={class:"debate-container"},$I={class:"main-content"},VI={class:"left-column"},BI={class:"timeline-section"},jI={class:"timeline-summary-container"},FI={class:"timeline-column"},UI={class:"argument-tabs"},HI={class:"argument-timeline"},WI={class:"timeline"},qI={class:"timeline-points"},GI=["onClick"],zI={class:"point-label"},KI={class:"point-time"},JI={class:"summary-column"},XI={class:"speech-summary"},YI={class:"summary-header"},QI={class:"summary-badge"},ZI={class:"summary-time"},eR={class:"summary-content"},tR={class:"summary-tags"},nR={class:"analysis-panel"},rR={class:"analysis-tabs"},iR={class:"quick-input"},sR={class:"saved-notes"},oR={class:"note-header"},aR={class:"note-badge"},cR={class:"note-time"},lR={class:"note-content"},uR={class:"note-header"},dR={class:"note-badge"},fR={class:"note-content"},pR={__name:"DebateForAudience",setup(e){const t={agree1:{speaker:"찬성 1",time:"5:00",content:"AI 기술의 발전 속도와 비용 효율성을 고려할 때 일자리 대체는 불가피함",tags:["통계 자료","산업 사례"]},disagree1:{speaker:"반대 1",time:"5:00",content:"AI는 보완재로서 역할을 할 뿐, 완전한 대체는 불가능함",tags:["역사적 사례","전문가 의견"]},agree2:{speaker:"찬성 2",time:"5:00",content:"단순 반복적인 업무부터 점진적 대체가 진행 중",tags:["현장 사례","연구 결과"]},disagree2:{speaker:"반대 2",time:"5:00",content:"새로운 일자리 창출 효과가 더 클 것",tags:["통계 예측","전문가 분석"]}},n=K("agree1"),r=g=>{n.value=g},i={analysis:[{type:"prep",content:"PREP 분석 노트 내용"},{type:"logic",content:"논리성 분석 노트 내용"},{type:"quick",content:"빠른 분석 노트 내용"}],template:[{type:"structure",content:"구조화 템플릿"},{type:"evidence",content:"증거 분석 템플릿"},{type:"counter",content:"반론 구성 템플릿"}]},s=K("first"),o=K("analysis"),a=K(""),c=K([]),l=g=>{s.value=g},u=g=>{o.value=g},d=()=>{if(a.value.trim()){const g={type:"quick",content:a.value,time:new Date().toLocaleTimeString()};c.value=[g,...c.value],a.value=""}};return(g,f)=>(W(),q("div",DI,[f[10]||(f[10]=m("header",{class:"header"},[m("div",{class:"header-content"},[m("div",{class:"round-badge"},"1라운드"),m("h1",{class:"debate-title"}," 인공지능 기술이 일자리를 대체하는 것은 불가피한가? ")])],-1)),m("main",$I,[m("div",VI,[f[8]||(f[8]=Mt('<div class="video-area" data-v-4bb64c81><div class="video-player" data-v-4bb64c81><span class="video-placeholder" data-v-4bb64c81>실시간 토론 영상</span></div><div class="current-speaker" data-v-4bb64c81><div class="speaker-badge agree" data-v-4bb64c81>찬성</div><div class="speaker-info" data-v-4bb64c81><div class="speaker-name" data-v-4bb64c81>김토론 (찬성 1)</div><div class="speaker-status" data-v-4bb64c81> 첫 번째 주장 • 입론 진행 중 • 2:45 남음 </div></div></div></div>',1)),m("div",BI,[f[7]||(f[7]=m("div",{class:"timeline-header"},[m("h2",null,"토론 진행 상황"),m("p",null,"클릭하여 각 발언 내용을 확인할 수 있습니다")],-1)),m("div",jI,[m("div",FI,[m("div",UI,[m("button",{class:we(["argument-tab",{active:s.value==="first"}]),onClick:f[0]||(f[0]=_=>l("first"))}," 첫 번째 주장 ",2),m("button",{class:we(["argument-tab",{active:s.value==="second"}]),onClick:f[1]||(f[1]=_=>l("second"))}," 두 번째 주장 ",2)]),m("div",HI,[m("div",WI,[f[6]||(f[6]=m("div",{class:"timeline-track"},[m("div",{class:"timeline-progress"})],-1)),m("div",qI,[(W(),q(me,null,Ce(["agree1","disagree1","agree2","disagree2"],(_,b)=>m("div",{key:b,class:we(["point",{done:b<_.indexOf(n.value),current:b===_.indexOf(n.value)}]),onClick:v=>r(_),style:{cursor:"pointer"}},[f[5]||(f[5]=m("div",{class:"point-marker"},null,-1)),m("div",zI,X(t[_].speaker),1),m("div",KI,X(t[_].time),1)],10,GI)),64))])])])]),m("div",JI,[m("div",XI,[m("div",YI,[m("div",QI,X(t[n.value].speaker),1),m("span",ZI,X(t[n.value].time),1)]),m("p",eR,X(t[n.value].content),1),m("div",tR,[(W(!0),q(me,null,Ce(t[n.value].tags,(_,b)=>(W(),q("span",{key:b,class:"tag"},X(_),1))),128))])])])])])]),m("div",nR,[m("div",rR,[m("button",{class:we(["tab",{active:o.value==="analysis"}]),onClick:f[2]||(f[2]=_=>u("analysis"))}," 분석 노트 ",2),m("button",{class:we(["tab",{active:o.value==="template"}]),onClick:f[3]||(f[3]=_=>u("template"))}," 분석 템플릿 ",2)]),m("div",iR,[f[9]||(f[9]=m("h3",null,"빠른 메모",-1)),ze(m("textarea",{"onUpdate:modelValue":f[4]||(f[4]=_=>a.value=_),placeholder:"발언에 대한 생각을 자유롭게 기록해보세요"},null,512),[[Ke,a.value]]),m("button",{class:"submit-button",onClick:d}," 작성 ")]),m("div",sR,[o.value==="analysis"?(W(!0),q(me,{key:0},Ce(i.analysis,(_,b)=>(W(),q("div",{key:b,class:we(["note",_.type])},[m("div",oR,[m("span",aR,X(_.type.toUpperCase())+" 분석",1),m("span",cR,"• "+X(new Date().toLocaleTimeString()),1)]),m("p",lR,X(_.content),1)],2))),128)):(W(!0),q(me,{key:1},Ce(i.template,(_,b)=>(W(),q("div",{key:b,class:we(["note",_.type])},[m("div",uR,[m("span",dR,X(_.type.toUpperCase()),1)]),m("p",fR,X(_.content),1)],2))),128))])])])]))}},hR=Te(pR,[["__scopeId","data-v-4bb64c81"]]),mR={class:"debate-performance-container"},vR={class:"performance-card"},gR={class:"total-score-section"},bR={class:"total-score"},yR={class:"performance-categories"},ER=["onClick"],_R={class:"category-title"},SR={key:0,class:"category-details"},wR={__name:"Report",setup(e){const t=K(85),n=K([{label:"논리력",score:29,color:"green-score",description:"O2의 논리력은 현실적인 문제와 대안을 체계적으로 분석했습니다. 난민 수용의 복잡한 측면을 다각도로 접근하며, 국가 주권과 사회 통합의 관점에서 깊이 있는 논거를 제시했습니다.",isExpanded:!1},{label:"표현력",score:18,color:"pink-score",description:"키워드를 활용하여 명확한 메시지를 전달했으나, 감정적 호소나 비유를 통한 표현은 다소 부족했습니다. 더 풍부한 표현 기법을 활용하면 논점의 설득력을 높일 수 있을 것입니다.",isExpanded:!1},{label:"전략",score:18,color:"yellow-score",description:"주요 논점을 잘 파악하고 상대방의 주장을 효과적으로 반박했습니다. 그러나 제한된 시간으로 인해 더 깊이 있는 분석과 확장된 논의가 다소 부족했습니다.",isExpanded:!1},{label:"상호작용",score:20,color:"teal-score",description:"토론 중 상대방을 존중하며 건설적인 대화를 이끌어냈습니다. 청중의 이해를 돕기 위해 논점을 명확히 설명하고, 다른 참가자들의 의견을 경청하는 태도를 보였습니다.",isExpanded:!1}]),r=i=>{n.value[i].isExpanded=!n.value[i].isExpanded};return(i,s)=>(W(),q("div",mR,[m("div",vR,[s[2]||(s[2]=m("h1",{class:"report-title"},"토론 성과 리포트",-1)),s[3]||(s[3]=m("p",{class:"participant-name"},"참가자: O2",-1)),m("div",gR,[s[1]||(s[1]=m("p",{class:"total-score-label"},"총점",-1)),m("p",bR,[Le(X(t.value)+" ",1),s[0]||(s[0]=m("span",{class:"total-score-max"},"/100",-1))])]),m("div",yR,[(W(!0),q(me,null,Ce(n.value,(o,a)=>(W(),q("div",{key:a,class:"category-item"},[m("div",{class:"category-header",onClick:c=>r(a)},[m("span",_R,X(o.label),1),m("span",{class:we(["category-score",o.color])},X(o.score)+"점 ",3)],8,ER),be(tf,{name:"slide"},{default:St(()=>[o.isExpanded?(W(),q("div",SR,[m("p",null,X(o.description),1)])):xe("",!0)]),_:2},1024)]))),128))])])]))}},Du=Te(wR,[["__scopeId","data-v-42ece858"]]),CR={class:"w-full min-h-screen bg-white"},IR={class:"container mx-auto px-4"},RR={class:"py-5"},OR={class:"w-full p-6 rounded-2xl bg-red-50"},TR={class:"flex items-center gap-2 mb-4"},kR={class:"text-3xl font-semibold text-gray-800"},xR={class:"relative h-5 w-full bg-gray-100 rounded-full overflow-hidden"},PR={class:"grid grid-cols-2 gap-8"},AR={class:"flex items-center gap-2 mb-5"},NR={class:"text-lg font-semibold text-gray-800"},MR={class:"text-sm text-gray-600"},LR={class:"flex items-center gap-3 mb-6"},DR={class:"relative flex-1 h-4 bg-gray-100 rounded-full overflow-hidden"},$R={class:"text-sm text-gray-600"},VR={class:"space-y-2"},BR={__name:"PrepResult",setup(e){const t=_t(),n=K([]),r=Se(()=>[{title:"주장",titleEn:"Point",score:n.value.point_score||0,maxScore:25,feedback:[n.value.point_comment||""]},{title:"근거",titleEn:"Reason",score:n.value.reason_score||0,maxScore:30,feedback:[n.value.reason_comment||""]},{title:"예시",titleEn:"Example",score:n.value.example_score||0,maxScore:25,feedback:[n.value.example_comment||""]},{title:"재진술",titleEn:"Restatement",score:n.value.point_restatement_point||0,maxScore:20,feedback:[n.value.point_restatement_comment||""]}]),i=()=>{sessionStorage.removeItem("prepResult"),t.push("/practice-main")};return We(()=>{const s=sessionStorage.getItem("prepResult");if(s)try{n.value=JSON.parse(s),console.log("resultObj:",n.value)}catch(o){console.error("result 파싱 오류:",o)}}),(s,o)=>(W(),q("div",CR,[o[2]||(o[2]=m("header",{class:"h-16 bg-gray-50 px-8 flex items-center"},[m("h1",{class:"text-2xl font-semibold text-gray-700"},"PREP 평가 결과")],-1)),m("div",IR,[m("div",RR,[m("div",OR,[o[1]||(o[1]=m("p",{class:"text-gray-600 text-base mb-2"},"전체 평가",-1)),m("div",TR,[m("span",kR,X(n.value.total),1),o[0]||(o[0]=m("span",{class:"text-sm text-gray-600"},"/ 100점",-1))]),m("div",xR,[m("div",{class:"absolute h-full bg-red-400 rounded-full",style:je({width:`${Number(n.value.total)}%`})},null,4)])])]),m("div",PR,[(W(!0),q(me,null,Ce(r.value,(a,c)=>(W(),q("div",{key:c,class:"p-6 rounded-2xl bg-white shadow-lg"},[m("div",AR,[m("h2",NR,X(a.title),1),m("span",MR,"("+X(a.titleEn)+")",1)]),m("div",LR,[m("div",DR,[m("div",{class:"absolute h-full bg-red-400 rounded-full",style:je({width:`${a.score/a.maxScore*100}%`})},null,4)]),m("span",$R,X(a.score)+"/"+X(a.maxScore),1)]),m("div",VR,[(W(!0),q(me,null,Ce(a.feedback,(l,u)=>(W(),q("p",{key:u,class:"text-sm text-gray-600"},X(l),1))),128))])]))),128))]),m("div",{class:"py-6 flex justify-end gap-4"},[m("button",{onClick:i,class:"px-6 py-2 rounded-full bg-red-400 text-white font-medium hover:bg-red-500 transition-colors"}," 처음으로 ")])])]))}},jR={class:"max-w-5xl mx-auto p-4 bg-white min-h-screen"},FR={class:"flex justify-between items-center gap-4 mb-12"},UR={class:"flex-1"},HR={class:"bg-white rounded-lg shadow-sm p-6 h-full"},WR={class:"flex flex-col items-center"},qR={class:"w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center mb-4"},GR={class:"text-lg text-gray-600"},zR={class:"text-lg font-bold text-gray-700 mb-2"},KR={class:"text-gray-500 text-sm mb-2"},JR={class:"text-gray-500 text-xs text-center"},XR={key:0,class:"flex-shrink-0"},YR={__name:"PrepExplain",setup(e){const t=_t(),n=[{letter:"P",title:"Point",subtitle:"명확한 주장",description1:"핵심 메시지를",description2:"간단명료하게"},{letter:"R",title:"Reason",subtitle:"논리적 근거",description1:"주장을 뒷받침하는",description2:"타당한 이유 제시"},{letter:"E",title:"Example",subtitle:"구체적 예시",description1:"근거를 뒷받침하는",description2:"실제 사례 제시"},{letter:"P",title:"Point",subtitle:"주장 재강조",description1:"근거와 예시로",description2:"강화된 주장 마무리"}],r=()=>{t.push({name:"PrepDetail"})};return(i,s)=>(W(),q("div",jR,[s[2]||(s[2]=Mt('<div class="bg-gray-50 p-8 rounded-2xl mb-8" data-v-931262d1><div class="flex justify-between items-start" data-v-931262d1><div data-v-931262d1><h1 class="text-4xl font-bold text-gray-800 mb-2" data-v-931262d1> PREP으로 시작하는<br data-v-931262d1>논리적인 토론 </h1><p class="text-gray-600 mt-4" data-v-931262d1> 체계적인 논증으로 설득력 있는 토론을 시작해보세요 </p></div><div class="bg-gray-100 p-4 rounded-xl text-center" data-v-931262d1><p class="text-gray-600 mb-1" data-v-931262d1>예상 학습 시간</p><p class="text-2xl font-bold text-gray-700" data-v-931262d1>30분</p></div></div></div>',1)),m("div",FR,[(W(),q(me,null,Ce(n,(o,a)=>(W(),q(me,{key:a},[m("div",UR,[m("div",HR,[m("div",WR,[m("div",qR,[m("span",GR,X(o.letter),1)]),m("h3",zR,X(o.title),1),m("p",KR,X(o.subtitle),1),m("p",JR,[Le(X(o.description1),1),s[0]||(s[0]=m("br",null,null,-1)),Le(" "+X(o.description2),1)])])])]),a<n.length-1?(W(),q("div",XR,s[1]||(s[1]=[m("svg",{class:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):xe("",!0)],64))),64))]),m("div",{class:"text-center"},[m("button",{onClick:r,class:"px-12 py-3 bg-red-500 text-white rounded-lg hover:bg-[#ff5b5b] transition-colors"}," 시작하기 ")])]))}},QR=Te(YR,[["__scopeId","data-v-931262d1"]]),ZR={props:["length","activeStep"]},eO={class:"root"},tO={class:"container"},nO={class:"progressbar"};function rO(e,t,n,r,i,s){return W(),q("div",eO,[m("div",tO,[m("ul",nO,[(W(!0),q(me,null,Ce(n.length,o=>(W(),q("li",{key:o,class:we({active:o<=n.activeStep})},X(o),3))),128))])])])}const iO=Te(ZR,[["render",rO],["__scopeId","data-v-962d1d6c"]]),sO={class:"max-w-3xl mx-auto p-4 min-h-screen"},oO={key:0,class:"flex items-center justify-center h-screen"},aO={key:1},cO={class:"flex justify-between items-center mb-4 bg-gray-50 p-4"},lO={class:"bg-white rounded-2xl p-4 shadow mb-4"},uO={class:"flex justify-between items-start"},dO={class:"text-xl text-gray-800 font-semibold"},fO={class:"bg-red-500 rounded-full w-16 h-16 flex flex-col items-center justify-center text-white"},pO={class:"font-semibold"},hO={class:"bg-white rounded-2xl p-6 shadow mb-4"},mO={class:"space-y-6"},vO={class:"flex items-baseline gap-2 mb-2"},gO={class:"font-medium text-black"},bO={class:"text-sm text-gray-500"},yO=["onUpdate:modelValue","placeholder"],EO={class:"flex justify-center"},Po=4,_O={__name:"PrepPracticeDetail",setup(e){const t="https://i12a802.p.ssafy.io",n=K(!1),r=_t(),i=K([]),s=K(1),o=K([]),a=K([{title:"주장",description:"핵심 주장을 작성하세요",placeholder:"주장을 입력하세요",value:""},{title:"근거",description:"주장을 뒷받침하는 근거를 제시하세요",placeholder:"근거를 입력하세요",value:""},{title:"예시",description:"구체적인 사례를 들어보세요",placeholder:"예시를 입력하세요",value:""},{title:"주장 재진술",description:"주장을 다시 한 번 강조해보세요",placeholder:"주장을 다시 한 번 강조해보세요",value:""}]),c=()=>{b(),s.value<Po?s.value++:_(),console.log("currentStep:",s.value),console.log("현재 주제:",i.value[s.value-1]),window.scrollTo({top:0,behavior:"smooth"})},l=K(300);let u=null;const d=()=>{u&&clearInterval(u),l.value=300,u=setInterval(()=>{l.value--,l.value<=0&&(clearInterval(u),c())},1e3)},g=Se(()=>{const v=Math.floor(l.value/60),h=l.value%60;return`${v}:${h.toString().padStart(2,"0")}`}),f=Se(()=>i.value[s.value-1]);at(s,()=>{d()});const _=async()=>{n.value=!0;const v=2,h={};o.value.forEach((O,S)=>{const p=S+1;h[`topic${p}`]=O.topic,h[`point${p}`]=O.point,h[`reason${p}`]=O.reason,h[`example${p}`]=O.example,h[`point_restatement${p}`]=O.point_restatement});const I={problem_id:"1-1",user_id:v,inputs:h};try{const O=await fetch(t+"/api/practice/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!O.ok)throw new Error("데이터 전송 실패");const S=await O.json();console.log("제출 결과:",S);const p=JSON.stringify(S);sessionStorage.setItem("prepResult",p),r.push({name:"PrepResult"})}catch(O){console.error("제출 중 오류 발생:",O)}finally{n.value=!1}},b=()=>{const v={topic:i.value[s.value-1],point:a.value[0].value,reason:a.value[1].value,example:a.value[2].value,point_restatement:a.value[3].value};o.value.push(v),console.log("라운드 데이터:",o.value),a.value.forEach(h=>h.value="")};return We(async()=>{try{const v=await fetch(t+"/api/subjects/random");if(!v.ok)throw new Error("주제 데이터를 불러오는데 실패했습니다.");const h=await v.json();console.log("주제 데이터:",h),i.value=[h.subject1,h.subject2,h.subject3,h.subject4]}catch(v){console.error("주제 불러오기 오류:",v)}d()}),hi(()=>{u&&clearInterval(u)}),(v,h)=>(W(),q("div",sO,[n.value?(W(),q("div",oO,h[0]||(h[0]=[m("div",{class:"text-2xl font-bold"},"로딩중...",-1)]))):(W(),q("div",aO,[m("div",cO,[h[1]||(h[1]=m("h1",{class:"text-2xl font-medium text-gray-700"},"PREP 구조 작성 연습",-1)),be(iO,{length:Po,activeStep:s.value},null,8,["activeStep"])]),m("div",lO,[m("div",uO,[m("div",null,[h[2]||(h[2]=m("p",{class:"text-gray-500 text-sm mb-2"},"토론 주제",-1)),m("h2",dO,X(f.value),1)]),m("div",fO,[m("p",pO,X(g.value),1),h[3]||(h[3]=m("p",{class:"text-xs"},"남은 시간",-1))])])]),m("div",hO,[m("div",mO,[(W(!0),q(me,null,Ce(a.value,(I,O)=>(W(),q("div",{key:O,class:"p-4 rounded-lg bg-gray-50"},[m("div",vO,[m("h3",gO,X(I.title),1),m("p",bO,X(I.description),1)]),ze(m("input",{type:"text","onUpdate:modelValue":S=>I.value=S,placeholder:I.placeholder,class:"w-full p-3 rounded-lg border border-gray-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#FF6B6B] focus:border-transparent"},null,8,yO),[[Ke,I.value]])]))),128))])]),m("div",EO,[m("button",{onClick:c,class:"px-6 py-2 min-w-[120px] rounded-full bg-red-500 text-white"},X(s.value===Po?"제출하기":"다음으로"),1)])]))]))}},SO=Kb({history:wb("/"),routes:[{path:"/",name:"root",component:()=>new Promise(e=>{const t=localStorage.getItem("token");e(t?LE:T0)})},{path:"/info",name:"info",component:b_},{path:"/practice-main",name:"practice-main",component:f1},{path:"/ai-debate",name:"AIDebate",component:ep},{path:"/debate-select",name:"debateSelection",component:V1},{path:"/category-selection",name:"CategorySelection",component:S1},{path:"/debate-list",name:"debateList",component:rw},{path:"/debate-prepare/:debateId",name:"debatePrepare",component:$w,props:!0},{path:"/debate/:debateId",name:"debateRoom",component:LI,props:!0},{path:"/debate-watch",name:"debateWatchRoom",component:hR},{path:"/report",name:"report",component:Du},{path:"/report",name:"report",component:Du},{path:"/prep/explain",name:"PrepExplain",component:QR},{path:"/prep/detail",name:"PrepDetail",component:_O},{path:"/prep/result",name:"PrepResult",component:BR},{path:"/prep",redirect:"/prep/explain"}]}),$a=Zm(Yy);$a.use(nv().use(gv));$a.use(SO);$a.mount("#app");
